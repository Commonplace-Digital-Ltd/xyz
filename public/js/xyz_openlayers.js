/*! For license information please see xyz_openlayers.js.LICENSE.txt */
(()=>{var t={7057:(t,e)=>{"use strict";function i(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){return void 0===n&&(n={}),i({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var o=0,r=t;o<r.length;o++){var a=r[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function r(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function s(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function u(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t*n}function h(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t/n}function d(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry;case"LineString":return r(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return n(t,e)})),i)},e.polygon=o,e.polygons=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return o(t,e)})),i)},e.lineString=r,e.lineStrings=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return r(t,e)})),i)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},e.radiansToLength=u,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(h(t,e),i)},e.convertArea=function(t,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=e.areaFactors[i];if(!o)throw new Error("invalid original units");var r=e.areaFactors[n];if(!r)throw new Error("invalid final units");return t/o*r},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},1848:(t,e,i)=>{"use strict";var n=i(7057);function o(t,e,i,n,o,r,a,s){var l,c,u,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(l=(s-r)*(i-t)-(a-o)*(n-e))?null!==d.x&&null!==d.y&&d:(h=(i-t)*(c=e-r)-(n-e)*(u=t-o),c=((a-o)*c-(s-r)*u)/l,u=h/l,d.x=t+c*(i-t),d.y=e+c*(n-e),c>=0&&c<=1&&(d.onLine1=!0),u>=0&&u<=1&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}e.Z=function(t){var e,i,r={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates];else if("MultiLineString"===i.type)e=i.coordinates;else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=i.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var i=0;i<t.length-1;i++)for(var a=i;a<e.length-1;a++){if(t===e){if(1===Math.abs(i-a))continue;if(0===i&&a===t.length-2&&t[i][0]===t[t.length-1][0]&&t[i][1]===t[t.length-1][1])continue}var s=o(t[i][0],t[i][1],t[i+1][0],t[i+1][1],e[a][0],e[a][1],e[a+1][0],e[a+1][1]);s&&r.features.push(n.point([s[0],s[1]]))}}))})),r}},7757:function(t,e,i){t.exports=function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},i=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[e[n]]=n);var o=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in o)if(o.hasOwnProperty(r)){if(!("channels"in o[r]))throw new Error("missing channels property: "+r);if(!("labels"in o[r]))throw new Error("missing channel labels property: "+r);if(o[r].labels.length!==o[r].channels)throw new Error("channel and label counts mismatch: "+r);var a=o[r].channels,s=o[r].labels;delete o[r].channels,delete o[r].labels,Object.defineProperty(o[r],"channels",{value:a}),Object.defineProperty(o[r],"labels",{value:s})}o.rgb.hsl=function(t){var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,a=Math.min(n,o,r),s=Math.max(n,o,r),l=s-a;return s===a?e=0:n===s?e=(o-r)/l:o===s?e=2+(r-n)/l:r===s&&(e=4+(n-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(a+s)/2,[e,100*(s===a?0:i<=.5?l/(s+a):l/(2-s-a)),100*i]},o.rgb.hsv=function(t){var e,i,n,o,r,a=t[0]/255,s=t[1]/255,l=t[2]/255,c=Math.max(a,s,l),u=c-Math.min(a,s,l),h=function(t){return(c-t)/6/u+.5};return 0===u?o=r=0:(r=u/c,e=h(a),i=h(s),n=h(l),a===c?o=n-i:s===c?o=1/3+e-n:l===c&&(o=2/3+i-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*r,100*c]},o.rgb.hwb=function(t){var e=t[0],i=t[1],n=t[2];return[o.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(i,n))*100,100*(n=1-1/255*Math.max(e,Math.max(i,n)))]},o.rgb.cmyk=function(t){var e,i=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){var n=i[t];if(n)return n;var o,r,a,s=1/0;for(var l in e)if(e.hasOwnProperty(l)){var c=e[l],u=(r=t,a=c,Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)+Math.pow(r[2]-a[2],2));u<s&&(s=u,o=l)}return o},o.keyword.rgb=function(t){return e[t]},o.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),i=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.hsl.rgb=function(t){var e,i,n,o,r,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[r=255*l,r,r];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var c=0;c<3;c++)(n=a+1/3*-(c-1))<0&&n++,n>1&&n--,r=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,o[c]=255*r;return o},o.hsl.hsv=function(t){var e=t[0],i=t[1]/100,n=t[2]/100,o=i,r=Math.max(n,.01);return i*=(n*=2)<=1?n:2-n,o*=r<=1?r:2-r,[e,100*(0===n?2*o/(r+o):2*i/(n+i)),(n+i)/2*100]},o.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,r=e-Math.floor(e),a=255*n*(1-i),s=255*n*(1-i*r),l=255*n*(1-i*(1-r));switch(n*=255,o){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}},o.hsv.hsl=function(t){var e,i,n,o=t[0],r=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-r)*a,i=r*s,[o,100*(i=(i/=(e=(2-r)*s)<=1?e:2-e)||0),100*(n/=2)]},o.hwb.rgb=function(t){var e,i,n,o,r,a,s,l=t[0]/360,c=t[1]/100,u=t[2]/100,h=c+u;switch(h>1&&(c/=h,u/=h),n=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(n=1-n),o=c+n*((i=1-u)-c),e){default:case 6:case 0:r=i,a=o,s=c;break;case 1:r=o,a=i,s=c;break;case 2:r=c,a=i,s=o;break;case 3:r=c,a=o,s=i;break;case 4:r=o,a=c,s=i;break;case 5:r=i,a=c,s=o}return[255*r,255*a,255*s]},o.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},o.xyz.rgb=function(t){var e,i,n,o=t[0]/100,r=t[1]/100,a=t[2]/100;return i=-.9689*o+1.8758*r+.0415*a,n=.0557*o+-.204*r+1.057*a,e=(e=3.2406*o+-1.5372*r+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(t){var e,i,n,o=t[0];e=t[1]/500+(i=(o+16)/116),n=i-t[2]/200;var r=Math.pow(i,3),a=Math.pow(e,3),s=Math.pow(n,3);return i=r>.008856?r:(i-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[e*=95.047,i*=100,n*=108.883]},o.lab.lch=function(t){var e,i=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+o*o),e]},o.lch.lab=function(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],i=t[1],n=t[2],r=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var a=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===r&&(a+=60),a},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map((function(t){return t+t})).join(""));var n=parseInt(i,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(t){var e,i=t[0]/255,n=t[1]/255,o=t[2]/255,r=Math.max(Math.max(i,n),o),a=Math.min(Math.min(i,n),o),s=r-a;return e=s<=0?0:r===i?(n-o)/s%6:r===n?2+(o-i)/s:4+(i-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},o.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=1,o=0;return(n=i<.5?2*e*i:2*e*(1-i))<1&&(o=(i-.5*n)/(1-n)),[t[0],100*n,100*o]},o.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=e*i,o=0;return n<1&&(o=(i-n)/(1-n)),[t[0],100*n,100*o]},o.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100;if(0===i)return[255*n,255*n,255*n];var o,r=[0,0,0],a=e%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return o=(1-i)*n,[255*(i*r[0]+o),255*(i*r[1]+o),255*(i*r[2]+o)]},o.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),n=0;return i>0&&(n=e/i),[t[0],100*n,100*i]},o.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],100*n,100*i]},o.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},o.hwb.hcg=function(t){var e=t[1]/100,i=1-t[2]/100,n=i-e,o=0;return n<1&&(o=(i-n)/(1-n)),[t[0],100*n,100*o]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=o.gray.hsv=function(t){return[0,0,t[0]]},o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function n(t){var e=function(){for(var t={},e=Object.keys(i),n=e.length,o=0;o<n;o++)t[e[o]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var o=n.pop(),r=Object.keys(i[o]),a=r.length,s=0;s<a;s++){var l=r[s],c=e[l];-1===c.distance&&(c.distance=e[o].distance+1,c.parent=o,n.unshift(l))}return e}function o(t,e){return function(i){return e(t(i))}}function r(t,e){for(var n=[e[t].parent,t],r=i[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),r=o(i[e[a].parent][a],r),a=e[a].parent;return r.conversion=n,r}i.rgb,i.hsl,i.hsv,i.hwb,i.cmyk,i.xyz,i.lab,i.lch,i.hex,i.keyword,i.ansi16,i.ansi256,i.hcg,i.apple,i.gray;var a={};Object.keys(i).forEach((function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:i[t].channels}),Object.defineProperty(a[t],"labels",{value:i[t].labels});var e=function(t){for(var e=n(t),i={},o=Object.keys(e),a=o.length,s=0;s<a;s++){var l=o[s];null!==e[l].parent&&(i[l]=r(l,e))}return i}(t);Object.keys(e).forEach((function(i){var n=e[i];a[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var n=i.length,o=0;o<n;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(n),a[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)}))}));var s=a,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c={getRgba:u,getHsla:h,getRgb:function(t){var e=u(t);return e&&e.slice(0,3)},getHsl:function(t){var e=h(t);return e&&e.slice(0,3)},getHwb:d,getAlpha:function(t){var e=u(t);return e||(e=h(t))||(e=d(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+v(t[0])+v(t[1])+v(t[2])+(e>=0&&e<1?v(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?p(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:p,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return f(t,e);var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),o=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+o+"%)"},percentaString:f,hslString:function(t,e){return e<1||t[3]&&t[3]<1?g(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:g,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return y[t.slice(0,3)]}};function u(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3,4})$/i),o="";if(n){o=(n=n[1])[3];for(var r=0;r<e.length;r++)e[r]=parseInt(n[r]+n[r],16);o&&(i=Math.round(parseInt(o+o,16)/255*100)/100)}else if(n=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(o=n[2],n=n[1],r=0;r<e.length;r++)e[r]=parseInt(n.slice(2*r,2*r+2),16);o&&(i=Math.round(parseInt(o,16)/255*100)/100)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=parseInt(n[r+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=Math.round(2.55*parseFloat(n[r+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=l[n[1]]))return}for(r=0;r<e.length;r++)e[r]=m(e[r],0,255);return i=i||0==i?m(i,0,1):1,e[3]=i,e}}function h(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(i)?1:i,0,1)]}}}function d(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(i)?1:i,0,1)]}}}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function f(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function g(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function m(t,e,i){return Math.min(Math.max(e,t),i)}function v(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var y={};for(var b in l)y[l[b]]=b;var w=function(t){return t instanceof w?t:this instanceof w?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=c.getRgba(t))?this.setValues("rgb",e):(e=c.getHsla(t))?this.setValues("hsl",e):(e=c.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new w(t);var e};w.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return c.hexString(this.values.rgb)},rgbString:function(){return c.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return c.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return c.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return c.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return c.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return c.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return c.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=t,n=void 0===e?.5:e,o=2*n-1,r=this.alpha()-i.alpha(),a=((o*r==-1?o:(o+r)/(1+o*r))+1)/2,s=1-a;return this.rgb(a*this.red()+s*i.red(),a*this.green()+s*i.green(),a*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new w,n=this.values,o=i.values;for(var r in n)n.hasOwnProperty(r)&&(t=n[r],"[object Array]"===(e={}.toString.call(t))?o[r]=t.slice(0):"[object Number]"===e?o[r]=t:console.error("unexpected color value:",t));return i}},w.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},w.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},w.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},w.prototype.setValues=function(t,e){var i,n,o=this.values,r=this.spaces,a=this.maxes,l=1;if(this.valid=!0,"alpha"===t)l=e;else if(e.length)o[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)o[t][i]=e[t.charAt(i)];l=e.a}else if(void 0!==e[r[t][0]]){var c=r[t];for(i=0;i<t.length;i++)o[t][i]=e[c[i]];l=e.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===l?o.alpha:l)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(a[t][i],o[t][i])),o[t][i]=Math.round(n);for(var u in r)u!==t&&(o[u]=s[t][u](o[t]));return!0},w.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},w.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:(i===n[e]||(n[e]=i,this.setValues(t,n)),this)},"undefined"!=typeof window&&(window.Color=w);var _,x=w,C={noop:function(){},uid:(_=0,function(){return _++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,i){return C.valueOrDefault(C.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var o,r,a;if(C.isArray(t))if(r=t.length,n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o);else if(C.isObject(t))for(r=(a=Object.keys(t)).length,o=0;o<r;o++)e.call(i,t[a[o]],a[o])},arrayEquals:function(t,e){var i,n,o,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],r=e[i],o instanceof Array&&r instanceof Array){if(!C.arrayEquals(o,r))return!1}else if(o!==r)return!1;return!0},clone:function(t){if(C.isArray(t))return t.map(C.clone);if(C.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,o=0;o<n;++o)e[i[o]]=C.clone(t[i[o]]);return e}return t},_merger:function(t,e,i,n){var o=e[t],r=i[t];C.isObject(o)&&C.isObject(r)?C.merge(o,r,n):e[t]=C.clone(r)},_mergerIf:function(t,e,i){var n=e[t],o=i[t];C.isObject(n)&&C.isObject(o)?C.mergeIf(n,o):e.hasOwnProperty(t)||(e[t]=C.clone(o))},merge:function(t,e,i){var n,o,r,a,s,l=C.isArray(e)?e:[e],c=l.length;if(!C.isObject(t))return t;for(n=(i=i||{}).merger||C._merger,o=0;o<c;++o)if(e=l[o],C.isObject(e))for(s=0,a=(r=Object.keys(e)).length;s<a;++s)n(r[s],t,e,i);return t},mergeIf:function(t,e){return C.merge(t,e,{merger:C._mergerIf})},extend:Object.assign||function(t){return C.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=C.inherits,t&&C.extend(i.prototype,t),i.__super__=e.prototype,i},_deprecated:function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}},E=C;C.callCallback=C.callback,C.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},C.getValueOrDefault=C.valueOrDefault,C.getValueAtIndexOrDefault=C.valueAtIndexOrDefault;var k={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-k.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*k.easeInBounce(2*t):.5*k.easeOutBounce(2*t-1)+.5}},T={effects:k};E.easingEffects=k;var S=Math.PI,M=S/180,R=2*S,P=S/2,L=S/4,O=2*S/3,D={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,o,r){if(r){var a=Math.min(r,o/2,n/2),s=e+a,l=i+a,c=e+n-a,u=i+o-a;t.moveTo(e,l),s<c&&l<u?(t.arc(s,l,a,-S,-P),t.arc(c,l,a,-P,0),t.arc(c,u,a,0,P),t.arc(s,u,a,P,S)):s<c?(t.moveTo(s,i),t.arc(c,l,a,-P,P),t.arc(s,l,a,P,S+P)):l<u?(t.arc(s,l,a,-S,0),t.arc(s,u,a,0,S)):t.arc(s,l,a,-S,S),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,o)},drawPoint:function(t,e,i,n,o,r){var a,s,l,c,u,h=(r||0)*M;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(a=e.toString())||"[object HTMLCanvasElement]"===a))return t.save(),t.translate(n,o),t.rotate(h),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(i)||i<=0)){switch(t.beginPath(),e){default:t.arc(n,o,i,0,R),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=O,t.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),h+=O,t.lineTo(n+Math.sin(h)*i,o-Math.cos(h)*i),t.closePath();break;case"rectRounded":c=i-(u=.516*i),s=Math.cos(h+L)*c,l=Math.sin(h+L)*c,t.arc(n-s,o-l,u,h-S,h-P),t.arc(n+l,o-s,u,h-P,h),t.arc(n+s,o+l,u,h,h+P),t.arc(n-l,o+s,u,h+P,h+S),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*i,t.rect(n-c,o-c,2*c,2*c);break}h+=L;case"rectRot":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+l,o-s),t.lineTo(n+s,o+l),t.lineTo(n-l,o+s),t.closePath();break;case"crossRot":h+=L;case"cross":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"star":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s),h+=L,s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"line":s=Math.cos(h)*i,l=Math.sin(h)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l);break;case"dash":t.moveTo(n,o),t.lineTo(n+Math.cos(h)*i,o+Math.sin(h)*i)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var o=i.steppedLine;if(o){if("middle"===o){var r=(e.x+i.x)/2;t.lineTo(r,n?i.y:e.y),t.lineTo(r,n?e.y:i.y)}else"after"===o&&!n||"after"!==o&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}else i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}},I=D;E.clear=D.clear,E.drawRoundedRectangle=function(t){t.beginPath(),D.roundedRect.apply(D,arguments)};var F={_set:function(t,e){return E.merge(this[t]||(this[t]={}),e)}};F._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var A=F,N=E.valueOrDefault,j={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,o;return E.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,o=+t.left||0):e=i=n=o=+t||0,{top:e,right:i,bottom:n,left:o,height:e+n,width:o+i}},_parseFont:function(t){var e=A.global,i=N(t.fontSize,e.defaultFontSize),n={family:N(t.fontFamily,e.defaultFontFamily),lineHeight:E.options.toLineHeight(N(t.lineHeight,e.defaultLineHeight),i),size:i,style:N(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=function(t){return!t||E.isNullOrUndef(t.size)||E.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n},resolve:function(t,e,i,n){var o,r,a,s=!0;for(o=0,r=t.length;o<r;++o)if(void 0!==(a=t[o])&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==i&&E.isArray(a)&&(a=a[i],s=!1),void 0!==a))return n&&!s&&(n.cacheable=!1),a}},z={_factorize:function(t){var e,i=[],n=Math.sqrt(t);for(e=1;e<n;e++)t%e==0&&(i.push(e),i.push(t/e));return n===(0|n)&&i.push(n),i.sort((function(t,e){return t-e})).pop(),i},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e}},Z=z;E.log10=z.log10;var G=E,H=T,B=I,V=j,W=Z,Y={getRtlAdapter:function(t,e,i){return t?function(t,e){return{x:function(i){return t+t+e-i},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,i):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},overrideTextDirection:function(t,e){var i,n;"ltr"!==e&&"rtl"!==e||(n=[(i=t.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};G.easing=H,G.canvas=B,G.options=V,G.math=W,G.rtl=Y;var q=function(t){G.extend(this,t),this.initialize.apply(this,arguments)};G.extend(q.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=G.extend({},t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,o=e._view;return i&&1!==t?(o||(o=e._view={}),n||(n=e._start={}),function(t,e,i,n){var o,r,a,s,l,c,u,h,d,p=Object.keys(i);for(o=0,r=p.length;o<r;++o)if(c=i[a=p[o]],e.hasOwnProperty(a)||(e[a]=c),(s=e[a])!==c&&"_"!==a[0]){if(t.hasOwnProperty(a)||(t[a]=s),(u=typeof c)==typeof(l=t[a]))if("string"===u){if((h=x(l)).valid&&(d=x(c)).valid){e[a]=d.mix(h,n).rgbString();continue}}else if(G.isFinite(l)&&G.isFinite(c)){e[a]=l+(c-l)*n;continue}e[a]=c}}(n,o,i,t),e):(e._view=G.extend({},i),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return G.isNumber(this._model.x)&&G.isNumber(this._model.y)}}),q.extend=G.inherits;var U=q,X=U.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),$=X;Object.defineProperty(X.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(X.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),A._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:G.noop,onComplete:G.noop}});var K={animations:[],request:null,addAnimation:function(t,e,i,n){var o,r,a=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=i,n||(t.animating=!0),o=0,r=a.length;o<r;++o)if(a[o].chart===t)return void(a[o]=e);a.push(e),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=G.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=G.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,i,n,o=this.animations,r=0;r<o.length;)e=(t=o[r]).chart,i=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*i)+1,t.currentStep=Math.min(n,i),G.callback(t.render,[e,t],e),G.callback(t.onAnimationProgress,[t],e),t.currentStep>=i?(G.callback(t.onAnimationComplete,[t],e),e.animating=!1,o.splice(r,1)):++r}},J=G.options.resolve,Q=["push","pop","shift","splice","unshift"];function tt(t,e){var i=t._chartjs;if(i){var n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(Q.forEach((function(e){delete t[e]})),delete t._chartjs)}}var et=function(t,e){this.initialize(t,e)};G.extend(et.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t,i.index=e,i.linkScales(),i.addElements(),i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,i=e.scales,n=this.getDataset(),o=e.options.scales;null!==t.xAxisID&&t.xAxisID in i&&!n.xAxisID||(t.xAxisID=n.xAxisID||o.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in i&&!n.yAxisID||(t.yAxisID=n.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&tt(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],o=i.data;for(t=0,e=n.length;t<e;++t)o[t]=o[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,i=this,n=i.getDataset(),o=n.data||(n.data=[]);i._data!==o&&(i._data&&tt(i._data,i),o&&Object.isExtensible(o)&&(e=i,(t=o)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Q.forEach((function(e){var i="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=n.apply(this,e);return G.each(t._chartjs.listeners,(function(t){"function"==typeof t[i]&&t[i].apply(t,e)})),o}})})))),i._data=o),i.resyncElements()},_configure:function(){this._config=G.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,i){"_meta"!==t&&"data"!==t&&G._merger(t,e,i)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:G.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,o=0;o<n;++o)i[o].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},getStyle:function(t){var e,i=this.getMeta(),n=i.dataset;return this._configure(),n&&void 0===t?e=this._resolveDatasetElementOptions(n||{}):(t=t||0,e=this._resolveDataElementOptions(i.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var i,n,o,r,a=this,s=a.chart,l=a._config,c=t.custom||{},u=s.options.elements[a.datasetElementType.prototype._type]||{},h=a._datasetElementOptions,d={},p={chart:s,dataset:a.getDataset(),datasetIndex:a.index,hover:e};for(i=0,n=h.length;i<n;++i)o=h[i],r=e?"hover"+o.charAt(0).toUpperCase()+o.slice(1):o,d[o]=J([c[r],l[r],u[r]],p);return d},_resolveDataElementOptions:function(t,e){var i=this,n=t&&t.custom,o=i._cachedDataOpts;if(o&&!n)return o;var r,a,s,l,c=i.chart,u=i._config,h=c.options.elements[i.dataElementType.prototype._type]||{},d=i._dataElementOptions,p={},f={chart:c,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index},g={cacheable:!n};if(n=n||{},G.isArray(d))for(a=0,s=d.length;a<s;++a)p[l=d[a]]=J([n[l],u[l],h[l]],f,e,g);else for(a=0,s=(r=Object.keys(d)).length;a<s;++a)p[l=r[a]]=J([n[l],u[d[l]],u[l],h[l]],f,e,g);return g.cacheable&&(i._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(t){G.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model,r=G.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=J([n.hoverBackgroundColor,e.hoverBackgroundColor,r(o.backgroundColor)],void 0,i),o.borderColor=J([n.hoverBorderColor,e.hoverBorderColor,r(o.borderColor)],void 0,i),o.borderWidth=J([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],void 0,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,i,n,o,r,a=this.getMeta().dataset,s={};if(a){for(r=a._model,o=this._resolveDatasetElementOptions(a,!0),t=0,e=(n=Object.keys(o)).length;t<e;++t)s[i=n[t]]=r[i],r[i]=o[i];a.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),et.extend=G.inherits;var it=et,nt=2*Math.PI;function ot(t,e){var i=e.startAngle,n=e.endAngle,o=e.pixelMargin,r=o/e.outerRadius,a=e.x,s=e.y;t.beginPath(),t.arc(a,s,e.outerRadius,i-r,n+r),e.innerRadius>o?(r=o/e.innerRadius,t.arc(a,s,e.innerRadius-o,n+r,i-r,!0)):t.arc(a,s,o,n+Math.PI/2,i-Math.PI/2),t.closePath(),t.clip()}function rt(t,e,i){var n="inner"===e.borderAlign;n?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),i.fullCircles&&function(t,e,i,n){var o,r=i.endAngle;for(n&&(i.endAngle=i.startAngle+nt,ot(t,i),i.endAngle=r,i.endAngle===i.startAngle&&i.fullCircles&&(i.endAngle+=nt,i.fullCircles--)),t.beginPath(),t.arc(i.x,i.y,i.innerRadius,i.startAngle+nt,i.startAngle,!0),o=0;o<i.fullCircles;++o)t.stroke();for(t.beginPath(),t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+nt),o=0;o<i.fullCircles;++o)t.stroke()}(t,e,i,n),n&&ot(t,i),t.beginPath(),t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),t.stroke()}A._set("global",{elements:{arc:{backgroundColor:A.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var at=U.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=G.getAngleFromPoint(i,{x:t,y:e}),o=n.angle,r=n.distance,a=i.startAngle,s=i.endAngle;s<a;)s+=nt;for(;o>s;)o-=nt;for(;o<a;)o+=nt;var l=o>=a&&o<=s,c=r>=i.innerRadius&&r<=i.outerRadius;return l&&c}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t,e=this._chart.ctx,i=this._view,n="inner"===i.borderAlign?.33:0,o={x:i.x,y:i.y,innerRadius:i.innerRadius,outerRadius:Math.max(i.outerRadius-n,0),pixelMargin:n,startAngle:i.startAngle,endAngle:i.endAngle,fullCircles:Math.floor(i.circumference/nt)};if(e.save(),e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,o.fullCircles){for(o.endAngle=o.startAngle+nt,e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),t=0;t<o.fullCircles;++t)e.fill();o.endAngle=o.startAngle+i.circumference%nt}e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),e.fill(),i.borderWidth&&rt(e,i,o),e.restore()}}),st=G.valueOrDefault,lt=A.global.defaultColor;A._set("global",{elements:{line:{tension:.4,backgroundColor:lt,borderWidth:3,borderColor:lt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ct=U.extend({_type:"line",draw:function(){var t,e,i,n=this,o=n._view,r=n._chart.ctx,a=o.spanGaps,s=n._children.slice(),l=A.global,c=l.elements.line,u=-1,h=n._loop;if(s.length){if(n._loop){for(t=0;t<s.length;++t)if(e=G.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),h=a;break}h&&s.push(s[0])}for(r.save(),r.lineCap=o.borderCapStyle||c.borderCapStyle,r.setLineDash&&r.setLineDash(o.borderDash||c.borderDash),r.lineDashOffset=st(o.borderDashOffset,c.borderDashOffset),r.lineJoin=o.borderJoinStyle||c.borderJoinStyle,r.lineWidth=st(o.borderWidth,c.borderWidth),r.strokeStyle=o.borderColor||l.defaultColor,r.beginPath(),(i=s[0]._view).skip||(r.moveTo(i.x,i.y),u=0),t=1;t<s.length;++t)i=s[t]._view,e=-1===u?G.previousItem(s,t):s[u],i.skip||(u!==t-1&&!a||-1===u?r.moveTo(i.x,i.y):G.canvas.lineTo(r,e._view,i),u=t);h&&r.closePath(),r.stroke(),r.restore()}}}),ut=G.valueOrDefault,ht=A.global.defaultColor;function dt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}A._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ht,borderColor:ht,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var pt=U.extend({_type:"point",inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:dt,inXRange:dt,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._chart.ctx,n=e.pointStyle,o=e.rotation,r=e.radius,a=e.x,s=e.y,l=A.global,c=l.defaultColor;e.skip||(void 0===t||G.canvas._isPointInArea(e,t))&&(i.strokeStyle=e.borderColor||c,i.lineWidth=ut(e.borderWidth,l.elements.point.borderWidth),i.fillStyle=e.backgroundColor||c,G.canvas.drawPoint(i,n,r,a,s,o))}}),ft=A.global.defaultColor;function gt(t){return t&&void 0!==t.width}function mt(t){var e,i,n,o,r;return gt(t)?(r=t.width/2,e=t.x-r,i=t.x+r,n=Math.min(t.y,t.base),o=Math.max(t.y,t.base)):(r=t.height/2,e=Math.min(t.x,t.base),i=Math.max(t.x,t.base),n=t.y-r,o=t.y+r),{left:e,top:n,right:i,bottom:o}}function vt(t,e,i){return t===e?i:t===i?e:t}function yt(t,e,i){var n,o,r,a,s=t.borderWidth,l=function(t){var e=t.borderSkipped,i={};return e?(t.horizontal?t.base>t.x&&(e=vt(e,"left","right")):t.base<t.y&&(e=vt(e,"bottom","top")),i[e]=!0,i):i}(t);return G.isObject(s)?(n=+s.top||0,o=+s.right||0,r=+s.bottom||0,a=+s.left||0):n=o=r=a=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||o<0?0:o>e?e:o,b:l.bottom||r<0?0:r>i?i:r,l:l.left||a<0?0:a>e?e:a}}function bt(t,e,i){var n=null===e,o=null===i,r=!(!t||n&&o)&&mt(t);return r&&(n||e>=r.left&&e<=r.right)&&(o||i>=r.top&&i<=r.bottom)}A._set("global",{elements:{rectangle:{backgroundColor:ft,borderColor:ft,borderSkipped:"bottom",borderWidth:0}}});var wt=U.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,i=function(t){var e=mt(t),i=e.right-e.left,n=e.bottom-e.top,o=yt(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}(e),n=i.outer,o=i.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===o.w&&n.h===o.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(o.x,o.y,o.w,o.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return bt(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return gt(i)?bt(i,t,null):bt(i,null,e)},inXRange:function(t){return bt(this._view,t,null)},inYRange:function(t){return bt(this._view,null,t)},getCenterPoint:function(){var t,e,i=this._view;return gt(i)?(t=i.x,e=(i.y+i.base)/2):(t=(i.x+i.base)/2,e=i.y),{x:t,y:e}},getArea:function(){var t=this._view;return gt(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),_t={},xt=at,Ct=ct,Et=pt,kt=wt;_t.Arc=xt,_t.Line=Ct,_t.Point=Et,_t.Rectangle=kt;var Tt=G._deprecated,St=G.valueOrDefault;function Mt(t,e,i){var n,o,r=i.barThickness,a=e.stackCount,s=e.pixels[t],l=G.isNullOrUndef(r)?function(t,e){var i,n,o,r,a=t._length;for(o=1,r=e.length;o<r;++o)a=Math.min(a,Math.abs(e[o]-e[o-1]));for(o=0,r=t.getTicks().length;o<r;++o)n=t.getPixelForTick(o),a=o>0?Math.min(a,Math.abs(n-i)):a,i=n;return a}(e.scale,e.pixels):-1;return G.isNullOrUndef(r)?(n=l*i.categoryPercentage,o=i.barPercentage):(n=r*a,o=1),{chunk:n/a,ratio:o,start:s-n/2}}A._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),A._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Rt=it.extend({dataElementType:_t.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,i=this;it.prototype.initialize.apply(i,arguments),(t=i.getMeta()).stack=i.getDataset().stack,t.bar=!0,e=i._getIndexScale().options,Tt("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Tt("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Tt("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Tt("bar chart",i._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Tt("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,o=n.getMeta(),r=n.getDataset(),a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID),t._yScale=n.getScaleForId(o.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[e]},G.isArray(r.data[e])&&(t._model.borderSkipped=null),n._updateElementGeometry(t,e,i,a),t.pivot()},_updateElementGeometry:function(t,e,i,n){var o=this,r=t._model,a=o._getValueScale(),s=a.getBasePixel(),l=a.isHorizontal(),c=o._ruler||o.getRuler(),u=o.calculateBarValuePixels(o.index,e,n),h=o.calculateBarIndexPixels(o.index,e,c,n);r.horizontal=l,r.base=i?s:u.base,r.x=l?i?s:u.head:h.center,r.y=l?h.center:i?s:u.head,r.height=l?h.size:void 0,r.width=l?void 0:h.size},_getStacks:function(t){var e,i,n=this._getIndexScale(),o=n._getMatchingVisibleMetas(this._type),r=n.options.stacked,a=o.length,s=[];for(e=0;e<a&&(i=o[e],(!1===r||-1===s.indexOf(i.stack)||void 0===r&&void 0===i.stack)&&s.push(i.stack),i.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this._getIndexScale(),n=[];for(t=0,e=this.getMeta().data.length;t<e;++t)n.push(i.getPixelForValue(null,t,this.index));return{pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this.getStackCount(),scale:i}},calculateBarValuePixels:function(t,e,i){var n,o,r,a,s,l,c,u=this.chart,h=this._getValueScale(),d=h.isHorizontal(),p=u.data.datasets,f=h._getMatchingVisibleMetas(this._type),g=h._parseValue(p[t].data[e]),m=i.minBarLength,v=h.options.stacked,y=this.getMeta().stack,b=void 0===g.start?0:g.max>=0&&g.min>=0?g.min:g.max,w=void 0===g.start?g.end:g.max>=0&&g.min>=0?g.max-g.min:g.min-g.max,_=f.length;if(v||void 0===v&&void 0!==y)for(n=0;n<_&&(o=f[n]).index!==t;++n)o.stack===y&&(r=void 0===(c=h._parseValue(p[o.index].data[e])).start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(g.min<0&&r<0||g.max>=0&&r>0)&&(b+=r));return a=h.getPixelForValue(b),l=(s=h.getPixelForValue(b+w))-a,void 0!==m&&Math.abs(l)<m&&(l=m,s=w>=0&&!d||w<0&&d?a-m:a+m),{size:l,base:a,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,i,n){var o="flex"===n.barThickness?function(t,e,i){var n,o=e.pixels,r=o[t],a=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null,l=i.categoryPercentage;return null===a&&(a=r-(null===s?e.end-e.start:s-r)),null===s&&(s=r+r-a),n=r-(r-Math.min(a,s))/2*l,{chunk:Math.abs(s-a)/2*l/e.stackCount,ratio:i.barPercentage,start:n}}(e,i,n):Mt(e,i,n),r=this.getStackIndex(t,this.getMeta().stack),a=o.start+o.chunk*r+o.chunk/2,s=Math.min(St(n.maxBarThickness,1/0),o.chunk*o.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),o=i.length,r=0;for(G.canvas.clipArea(t.ctx,t.chartArea);r<o;++r){var a=e._parseValue(n.data[r]);isNaN(a.min)||isNaN(a.max)||i[r].draw()}G.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=this,e=G.extend({},it.prototype._resolveDataElementOptions.apply(t,arguments)),i=t._getIndexScale().options,n=t._getValueScale().options;return e.barPercentage=St(i.barPercentage,e.barPercentage),e.barThickness=St(i.barThickness,e.barThickness),e.categoryPercentage=St(i.categoryPercentage,e.categoryPercentage),e.maxBarThickness=St(i.maxBarThickness,e.maxBarThickness),e.minBarLength=St(n.minBarLength,e.minBarLength),e}}),Pt=G.valueOrDefault,Lt=G.options.resolve;A._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Ot=it.extend({dataElementType:_t.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,i=e.getMeta().data;G.each(i,(function(i,n){e.updateElement(i,n,t)}))},updateElement:function(t,e,i){var n=this,o=n.getMeta(),r=t.custom||{},a=n.getScaleForId(o.xAxisID),s=n.getScaleForId(o.yAxisID),l=n._resolveDataElementOptions(t,e),c=n.getDataset().data[e],u=n.index,h=i?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof c?c:NaN,e,u),d=i?s.getBasePixel():s.getPixelForValue(c,e,u);t._xScale=a,t._yScale=s,t._options=l,t._datasetIndex=u,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:r.skip||isNaN(h)||isNaN(d),x:h,y:d},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options,n=G.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Pt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Pt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Pt(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this,n=i.chart,o=i.getDataset(),r=t.custom||{},a=o.data[e]||{},s=it.prototype._resolveDataElementOptions.apply(i,arguments),l={chart:n,dataIndex:e,dataset:o,datasetIndex:i.index};return i._cachedDataOpts===s&&(s=G.extend({},s)),s.radius=Lt([r.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e),s}}),Dt=G.valueOrDefault,It=Math.PI,Ft=2*It,At=It/2;A._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data,a=r.datasets,s=r.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,i=a[0].data.length;e<i;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(i,n){var o=t.getDatasetMeta(0),r=o.controller.getStyle(n);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var i,n,o,r=e.index,a=this.chart;for(i=0,n=(a.data.datasets||[]).length;i<n;++i)(o=a.getDatasetMeta(i)).data[r]&&(o.data[r].hidden=!o.data[r].hidden);a.update()}},cutoutPercentage:50,rotation:-At,circumference:Ft,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return G.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var Nt=it.extend({dataElementType:_t.Arc,linkScales:G.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(t){var e,i,n,o,r=this,a=r.chart,s=a.chartArea,l=a.options,c=1,u=1,h=0,d=0,p=r.getMeta(),f=p.data,g=l.cutoutPercentage/100||0,m=l.circumference,v=r._getRingWeight(r.index);if(m<Ft){var y=l.rotation%Ft,b=(y+=y>=It?-Ft:y<-It?Ft:0)+m,w=Math.cos(y),_=Math.sin(y),x=Math.cos(b),C=Math.sin(b),E=y<=0&&b>=0||b>=Ft,k=y<=At&&b>=At||b>=Ft+At,T=y<=-At&&b>=-At||b>=It+At,S=y===-It||b>=It?-1:Math.min(w,w*g,x,x*g),M=T?-1:Math.min(_,_*g,C,C*g),R=E?1:Math.max(w,w*g,x,x*g),P=k?1:Math.max(_,_*g,C,C*g);c=(R-S)/2,u=(P-M)/2,h=-(R+S)/2,d=-(P+M)/2}for(n=0,o=f.length;n<o;++n)f[n]._options=r._resolveDataElementOptions(f[n],n);for(a.borderWidth=r.getMaxBorderWidth(),e=(s.right-s.left-a.borderWidth)/c,i=(s.bottom-s.top-a.borderWidth)/u,a.outerRadius=Math.max(Math.min(e,i)/2,0),a.innerRadius=Math.max(a.outerRadius*g,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(r._getVisibleDatasetWeightTotal()||1),a.offsetX=h*a.outerRadius,a.offsetY=d*a.outerRadius,p.total=r.calculateTotal(),r.outerRadius=a.outerRadius-a.radiusLength*r._getRingWeightOffset(r.index),r.innerRadius=Math.max(r.outerRadius-a.radiusLength*v,0),n=0,o=f.length;n<o;++n)r.updateElement(f[n],n,t)},updateElement:function(t,e,i){var n=this,o=n.chart,r=o.chartArea,a=o.options,s=a.animation,l=(r.left+r.right)/2,c=(r.top+r.bottom)/2,u=a.rotation,h=a.rotation,d=n.getDataset(),p=i&&s.animateRotate||t.hidden?0:n.calculateCircumference(d.data[e])*(a.circumference/Ft),f=i&&s.animateScale?0:n.innerRadius,g=i&&s.animateScale?0:n.outerRadius,m=t._options||{};G.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+o.offsetX,y:c+o.offsetY,startAngle:u,endAngle:h,circumference:p,outerRadius:g,innerRadius:f,label:G.valueAtIndexOrDefault(d.label,e,o.data.labels[e])}});var v=t._model;i&&s.animateRotate||(v.startAngle=0===e?a.rotation:n.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),i=this.getMeta(),n=0;return G.each(i.data,(function(i,o){t=e.data[o],isNaN(t)||i.hidden||(n+=Math.abs(t))})),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?Ft*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,i,n,o,r,a,s,l,c=0,u=this.chart;if(!t)for(e=0,i=u.data.datasets.length;e<i;++e)if(u.isDatasetVisible(e)){t=(n=u.getDatasetMeta(e)).data,e!==this.index&&(r=n.controller);break}if(!t)return 0;for(e=0,i=t.length;e<i;++e)o=t[e],r?(r._configure(),a=r._resolveDataElementOptions(o,e)):a=o._options,"inner"!==a.borderAlign&&(s=a.borderWidth,c=(l=a.hoverBorderWidth)>(c=s>c?s:c)?l:c);return c},setHoverStyle:function(t){var e=t._model,i=t._options,n=G.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Dt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Dt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Dt(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e},_getRingWeight:function(t){return Math.max(Dt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});A._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),A._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var jt=Rt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),zt=G.valueOrDefault,Zt=G.options.resolve,Gt=G.canvas._isPointInArea;function Ht(t,e){var i=t&&t.options.ticks||{},n=i.reverse,o=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:n?r:o,end:n?o:r}}function Bt(t,e,i){var n=i/2,o=Ht(t,n),r=Ht(e,n);return{top:r.end,right:o.end,bottom:r.start,left:o.start}}function Vt(t){var e,i,n,o;return G.isObject(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o}}A._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Wt=it.extend({datasetElementType:_t.Line,dataElementType:_t.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,i,n=this,o=n.getMeta(),r=o.dataset,a=o.data||[],s=n.chart.options,l=n._config,c=n._showLine=zt(l.showLine,s.showLines);for(n._xScale=n.getScaleForId(o.xAxisID),n._yScale=n.getScaleForId(o.yAxisID),c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=n._yScale,r._datasetIndex=n.index,r._children=a,r._model=n._resolveDatasetElementOptions(r),r.pivot()),e=0,i=a.length;e<i;++e)n.updateElement(a[e],e,t);for(c&&0!==r._model.tension&&n.updateBezierControlPoints(),e=0,i=a.length;e<i;++e)a[e].pivot()},updateElement:function(t,e,i){var n,o,r=this,a=r.getMeta(),s=t.custom||{},l=r.getDataset(),c=r.index,u=l.data[e],h=r._xScale,d=r._yScale,p=a.dataset._model,f=r._resolveDataElementOptions(t,e);n=h.getPixelForValue("object"==typeof u?u:NaN,e,c),o=i?d.getBasePixel():r.calculatePointY(u,e,c),t._xScale=h,t._yScale=d,t._options=f,t._datasetIndex=c,t._index=e,t._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:zt(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,i=e._config,n=t.custom||{},o=e.chart.options,r=o.elements.line,a=it.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=zt(i.spanGaps,o.spanGaps),a.tension=zt(i.lineTension,r.tension),a.steppedLine=Zt([n.steppedLine,i.steppedLine,r.stepped]),a.clip=Vt(zt(i.clip,Bt(e._xScale,e._yScale,a.borderWidth))),a},calculatePointY:function(t,e,i){var n,o,r,a,s,l,c,u=this.chart,h=this._yScale,d=0,p=0;if(h.options.stacked){for(s=+h.getRightValue(t),c=(l=u._getSortedVisibleDatasetMetas()).length,n=0;n<c&&(r=l[n]).index!==i;++n)o=u.data.datasets[r.index],"line"===r.type&&r.yAxisID===h.id&&((a=+h.getRightValue(o.data[e]))<0?p+=a||0:d+=a||0);return s<0?h.getPixelForValue(p+s):h.getPixelForValue(d+s)}return h.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,i,n,o=this.chart,r=this.getMeta(),a=r.dataset._model,s=o.chartArea,l=r.data||[];function c(t,e,i){return Math.max(Math.min(t,i),e)}if(a.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===a.cubicInterpolationMode)G.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)i=l[t]._model,n=G.splineCurve(G.previousItem(l,t)._model,i,G.nextItem(l,t)._model,a.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(o.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)i=l[t]._model,Gt(i,s)&&(t>0&&Gt(l[t-1]._model,s)&&(i.controlPointPreviousX=c(i.controlPointPreviousX,s.left,s.right),i.controlPointPreviousY=c(i.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&Gt(l[t+1]._model,s)&&(i.controlPointNextX=c(i.controlPointNextX,s.left,s.right),i.controlPointNextY=c(i.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],o=e.chartArea,r=e.canvas,a=0,s=n.length;for(this._showLine&&(t=i.dataset._model.clip,G.canvas.clipArea(e.ctx,{left:!1===t.left?0:o.left-t.left,right:!1===t.right?r.width:o.right+t.right,top:!1===t.top?0:o.top-t.top,bottom:!1===t.bottom?r.height:o.bottom+t.bottom}),i.dataset.draw(),G.canvas.unclipArea(e.ctx));a<s;++a)n[a].draw(o)},setHoverStyle:function(t){var e=t._model,i=t._options,n=G.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=zt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=zt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=zt(i.hoverBorderWidth,i.borderWidth),e.radius=zt(i.hoverRadius,i.radius)}}),Yt=G.options.resolve;A._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data,a=r.datasets,s=r.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,i=a[0].data.length;e<i;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(i,n){var o=t.getDatasetMeta(0),r=o.controller.getStyle(n);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var i,n,o,r=e.index,a=this.chart;for(i=0,n=(a.data.datasets||[]).length;i<n;++i)(o=a.getDatasetMeta(i)).data[r].hidden=!o.data[r].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var qt=it.extend({dataElementType:_t.Arc,linkScales:G.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,i,n,o=this,r=o.getDataset(),a=o.getMeta(),s=o.chart.options.startAngle||0,l=o._starts=[],c=o._angles=[],u=a.data;for(o._updateRadius(),a.count=o.countVisibleElements(),e=0,i=r.data.length;e<i;e++)l[e]=s,n=o._computeAngle(e),c[e]=n,s+=n;for(e=0,i=u.length;e<i;++e)u[e]._options=o._resolveDataElementOptions(u[e],e),o.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(o/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,o=n.chart,r=n.getDataset(),a=o.options,s=a.animation,l=o.scale,c=o.data.labels,u=l.xCenter,h=l.yCenter,d=a.startAngle,p=t.hidden?0:l.getDistanceFromCenterForValue(r.data[e]),f=n._starts[e],g=f+(t.hidden?0:n._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(r.data[e]),v=t._options||{};G.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?m:p,startAngle:i&&s.animateRotate?d:f,endAngle:i&&s.animateRotate?d:g,label:G.valueAtIndexOrDefault(c,e,c[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),i=0;return G.each(e.data,(function(e,n){isNaN(t.data[n])||e.hidden||i++})),i},setHoverStyle:function(t){var e=t._model,i=t._options,n=G.getHoverColor,o=G.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=o(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),o=e.getMeta();if(isNaN(n.data[t])||o.data[t].hidden)return 0;var r={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return Yt([e.chart.options.elements.arc.angle,2*Math.PI/i],r,t)}});A._set("pie",G.clone(A.doughnut)),A._set("pie",{cutoutPercentage:0});var Ut=Nt,Xt=G.valueOrDefault;A._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var $t=it.extend({datasetElementType:_t.Line,dataElementType:_t.Point,linkScales:G.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,i,n=this,o=n.getMeta(),r=o.dataset,a=o.data||[],s=n.chart.scale,l=n._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=s,r._datasetIndex=n.index,r._children=a,r._loop=!0,r._model=n._resolveDatasetElementOptions(r),r.pivot(),e=0,i=a.length;e<i;++e)n.updateElement(a[e],e,t);for(n.updateBezierControlPoints(),e=0,i=a.length;e<i;++e)a[e].pivot()},updateElement:function(t,e,i){var n=this,o=t.custom||{},r=n.getDataset(),a=n.chart.scale,s=a.getPointPositionForValue(e,r.data[e]),l=n._resolveDataElementOptions(t,e),c=n.getMeta().dataset._model,u=i?a.xCenter:s.x,h=i?a.yCenter:s.y;t._scale=a,t._options=l,t._datasetIndex=n.index,t._index=e,t._model={x:u,y:h,skip:o.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Xt(o.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,i=t.chart.options,n=it.prototype._resolveDatasetElementOptions.apply(t,arguments);return n.spanGaps=Xt(e.spanGaps,i.spanGaps),n.tension=Xt(e.lineTension,i.elements.line.tension),n},updateBezierControlPoints:function(){var t,e,i,n,o=this.getMeta(),r=this.chart.chartArea,a=o.data||[];function s(t,e,i){return Math.max(Math.min(t,i),e)}for(o.dataset._model.spanGaps&&(a=a.filter((function(t){return!t._model.skip}))),t=0,e=a.length;t<e;++t)i=a[t]._model,n=G.splineCurve(G.previousItem(a,t,!0)._model,i,G.nextItem(a,t,!0)._model,i.tension),i.controlPointPreviousX=s(n.previous.x,r.left,r.right),i.controlPointPreviousY=s(n.previous.y,r.top,r.bottom),i.controlPointNextX=s(n.next.x,r.left,r.right),i.controlPointNextY=s(n.next.y,r.top,r.bottom)},setHoverStyle:function(t){var e=t._model,i=t._options,n=G.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Xt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Xt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Xt(i.hoverBorderWidth,i.borderWidth),e.radius=Xt(i.hoverRadius,i.radius)}});A._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),A._set("global",{datasets:{scatter:{showLine:!1}}});var Kt={bar:Rt,bubble:Ot,doughnut:Nt,horizontalBar:jt,line:Wt,polarArea:qt,pie:Ut,radar:$t,scatter:Wt};function Jt(t,e){return t.native?{x:t.x,y:t.y}:G.getRelativePosition(t,e)}function Qt(t,e){var i,n,o,r,a,s,l=t._getSortedVisibleDatasetMetas();for(n=0,r=l.length;n<r;++n)for(o=0,a=(i=l[n].data).length;o<a;++o)(s=i[o])._view.skip||e(s)}function te(t,e){var i=[];return Qt(t,(function(t){t.inRange(e.x,e.y)&&i.push(t)})),i}function ee(t,e,i,n){var o=Number.POSITIVE_INFINITY,r=[];return Qt(t,(function(t){if(!i||t.inRange(e.x,e.y)){var a=t.getCenterPoint(),s=n(e,a);s<o?(r=[t],o=s):s===o&&r.push(t)}})),r}function ie(t){var e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){var o=e?Math.abs(t.x-n.x):0,r=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ne(t,e,i){var n=Jt(e,t);i.axis=i.axis||"x";var o=ie(i.axis),r=i.intersect?te(t,n):ee(t,n,!1,o),a=[];return r.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[r[0]._index];e&&!e._view.skip&&a.push(e)})),a):[]}var oe={modes:{single:function(t,e){var i=Jt(e,t),n=[];return Qt(t,(function(t){if(t.inRange(i.x,i.y))return n.push(t),n})),n.slice(0,1)},label:ne,index:ne,dataset:function(t,e,i){var n=Jt(e,t);i.axis=i.axis||"xy";var o=ie(i.axis),r=i.intersect?te(t,n):ee(t,n,!1,o);return r.length>0&&(r=t.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(t,e){return ne(t,e,{intersect:!1})},point:function(t,e){return te(t,Jt(e,t))},nearest:function(t,e,i){var n=Jt(e,t);i.axis=i.axis||"xy";var o=ie(i.axis);return ee(t,n,i.intersect,o)},x:function(t,e,i){var n=Jt(e,t),o=[],r=!1;return Qt(t,(function(t){t.inXRange(n.x)&&o.push(t),t.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(o=[]),o},y:function(t,e,i){var n=Jt(e,t),o=[],r=!1;return Qt(t,(function(t){t.inYRange(n.y)&&o.push(t),t.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(o=[]),o}}},re=G.extend;function ae(t,e){return G.where(t,(function(t){return t.pos===e}))}function se(t,e){return t.sort((function(t,i){var n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function le(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function ce(t,e,i){var n,o,r=i.box,a=t.maxPadding;if(i.size&&(t[i.pos]-=i.size),i.size=i.horizontal?r.height:r.width,t[i.pos]+=i.size,r.getPadding){var s=r.getPadding();a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}if(n=e.outerWidth-le(a,t,"left","right"),o=e.outerHeight-le(a,t,"top","bottom"),n!==t.w||o!==t.h)return t.w=n,t.h=o,i.horizontal?n!==t.w:o!==t.h}function ue(t,e){var i=e.maxPadding;function n(t){var n={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function he(t,e,i){var n,o,r,a,s,l,c=[];for(n=0,o=t.length;n<o;++n)(a=(r=t[n]).box).update(r.width||e.w,r.height||e.h,ue(r.horizontal,e)),ce(e,i,r)&&(l=!0,c.length&&(s=!0)),a.fullWidth||c.push(r);return s&&he(c,e,i)||l}function de(t,e,i){var n,o,r,a,s=i.padding,l=e.x,c=e.y;for(n=0,o=t.length;n<o;++n)a=(r=t[n]).box,r.horizontal?(a.left=a.fullWidth?s.left:e.left,a.right=a.fullWidth?i.outerWidth-s.right:e.left+e.w,a.top=c,a.bottom=c+a.height,a.width=a.right-a.left,c=a.bottom):(a.left=l,a.right=l+a.width,a.top=e.top,a.bottom=e.top+e.h,a.height=a.bottom-a.top,l=a.right);e.x=l,e.y=c}A._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var pe,fe={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,o=["fullWidth","position","weight"],r=o.length,a=0;a<r;++a)n=o[a],i.hasOwnProperty(n)&&(e[n]=i[n])},update:function(t,e,i){if(t){var n=t.options.layout||{},o=G.options.toPadding(n.padding),r=e-o.width,a=i-o.height,s=function(t){var e=function(t){var e,i,n,o=[];for(e=0,i=(t||[]).length;e<i;++e)n=t[e],o.push({index:e,box:n,pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return o}(t),i=se(ae(e,"left"),!0),n=se(ae(e,"right")),o=se(ae(e,"top"),!0),r=se(ae(e,"bottom"));return{leftAndTop:i.concat(o),rightAndBottom:n.concat(r),chartArea:ae(e,"chartArea"),vertical:i.concat(n),horizontal:o.concat(r)}}(t.boxes),l=s.vertical,c=s.horizontal,u=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:r,vBoxMaxWidth:r/2/l.length,hBoxMaxHeight:a/2}),h=re({maxPadding:re({},o),w:r,h:a,x:o.left,y:o.top},o);!function(t,e){var i,n,o;for(i=0,n=t.length;i<n;++i)(o=t[i]).width=o.horizontal?o.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,o.height=o.horizontal&&e.hBoxMaxHeight}(l.concat(c),u),he(l,h,u),he(c,h,u)&&he(l,h,u),function(t){var e=t.maxPadding;function i(i){var n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(h),de(s.leftAndTop,h,u),h.x+=h.w,h.y+=h.h,de(s.rightAndBottom,h,u),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h},G.each(s.chartArea,(function(e){var i=e.box;re(i,t.chartArea),i.update(h.w,h.h)}))}}},ge=(pe=Object.freeze({__proto__:null,default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&pe.default||pe,me=["animationstart","webkitAnimationStart"],ve={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ye(t,e){var i=G.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var be=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function we(t,e,i){t.addEventListener(e,i,be)}function _e(t,e,i){t.removeEventListener(e,i,be)}function xe(t,e,i,n,o){return{type:t,chart:e,native:o||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function Ce(t){var e=document.createElement("div");return e.className=t||"",e}function Ee(t,e,i){var n,o,r,a,s=t.$chartjs||(t.$chartjs={}),l=s.resizer=function(t){var e=Ce("chartjs-size-monitor"),i=Ce("chartjs-size-monitor-expand"),n=Ce("chartjs-size-monitor-shrink");i.appendChild(Ce()),n.appendChild(Ce()),e.appendChild(i),e.appendChild(n),e._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var o=function(){e._reset(),t()};return we(i,"scroll",o.bind(i,"expand")),we(n,"scroll",o.bind(n,"shrink")),e}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&t.parentNode,o=n?n.clientWidth:0;e(xe("resize",i)),n&&n.clientWidth<o&&i.canvas&&e(xe("resize",i))}},r=!1,a=[],function(){a=Array.prototype.slice.call(arguments),o=o||this,r||(r=!0,G.requestAnimFrame.call(window,(function(){r=!1,n.apply(o,a)})))}));!function(t,e){var i=t.$chartjs||(t.$chartjs={}),n=i.renderProxy=function(t){"chartjs-render-animation"===t.animationName&&e()};G.each(me,(function(e){we(t,e,n)})),i.reflow=!!t.offsetParent,t.classList.add("chartjs-render-monitor")}(t,(function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}}))}function ke(t){var e=t.$chartjs||{},i=e.resizer;delete e.resizer,function(t){var e=t.$chartjs||{},i=e.renderProxy;i&&(G.each(me,(function(e){_e(t,e,i)})),delete e.renderProxy),t.classList.remove("chartjs-render-monitor")}(t),i&&i.parentNode&&i.parentNode.removeChild(i)}var Te={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var i=t.$chartjs||(t.$chartjs={});if(!i.containsStyles){i.containsStyles=!0,e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(e.host?e:document.head,ge)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(this._ensureLoaded(t),function(t,e){var i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===o||""===o){var r=ye(t,"width");void 0!==r&&(t.width=r)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var a=ye(t,"height");void 0!==r&&(t.height=a)}}(t,e),i):null},releaseContext:function(t){var e=t.canvas;if(e.$chartjs){var i=e.$chartjs.initial;["height","width"].forEach((function(t){var n=i[t];G.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)})),G.each(i.style||{},(function(t,i){e.style[i]=t})),e.width=e.width,delete e.$chartjs}},addEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var o=i.$chartjs||(i.$chartjs={});we(n,e,(o.proxies||(o.proxies={}))[t.id+"_"+e]=function(e){i(function(t,e){var i=ve[t.type]||t.type,n=G.getRelativePosition(t,e);return xe(i,e,n.x,n.y,t)}(e,t))})}else Ee(n,i,t)},removeEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var o=((i.$chartjs||{}).proxies||{})[t.id+"_"+e];o&&_e(n,e,o)}else ke(n)}};G.addEvent=we,G.removeEvent=_e;var Se=Te._enabled?Te:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Me=G.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Se);A._set("global",{plugins:{}});var Re={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,o,r,a,s,l=this.descriptors(t),c=l.length;for(n=0;n<c;++n)if("function"==typeof(s=(r=(o=l[n]).plugin)[e])&&((a=[t].concat(i||[])).push(o.options),!1===s.apply(r,a)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],n=[],o=t&&t.config||{},r=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach((function(t){if(-1===i.indexOf(t)){var e=t.id,o=r[e];!1!==o&&(!0===o&&(o=G.clone(A.global.plugins[e])),i.push(t),n.push({plugin:t,options:o||{}}))}})),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},Pe={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=G.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?G.merge({},[A.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=G.extend(this.defaults[t],e))},addScalesToLayout:function(t){G.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,fe.addBox(t,e)}))}},Le=G.valueOrDefault,Oe=G.rtl.getRtlAdapter;A._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:G.noop,title:function(t,e){var i="",n=e.labels,o=n?n.length:0;if(t.length>0){var r=t[0];r.label?i=r.label:r.xLabel?i=r.xLabel:o>0&&r.index<o&&(i=n[r.index])}return i},afterTitle:G.noop,beforeBody:G.noop,beforeLabel:G.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),G.isNullOrUndef(t.value)?i+=t.yLabel:i+=t.value,i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:G.noop,afterBody:G.noop,beforeFooter:G.noop,footer:G.noop,afterFooter:G.noop}}});var De={average:function(t){if(!t.length)return!1;var e,i,n=0,o=0,r=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x,o+=s.y,++r}}return{x:n/r,y:o/r}},nearest:function(t,e){var i,n,o,r=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var c=l.getCenterPoint(),u=G.distanceBetweenPoints(e,c);u<s&&(s=u,o=l)}}if(o){var h=o.tooltipPosition();r=h.x,a=h.y}return{x:r,y:a}}};function Ie(t,e){return e&&(G.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fe(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ae(t){var e=A.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Le(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Le(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Le(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Le(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Le(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Le(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Le(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Le(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Le(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ne(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function je(t){return Ie([],Fe(t))}var ze=U.extend({initialize:function(){this._model=Ae(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options,i=e.callbacks,n=i.beforeTitle.apply(t,arguments),o=i.title.apply(t,arguments),r=i.afterTitle.apply(t,arguments),a=[];return a=Ie(a,Fe(n)),a=Ie(a,Fe(o)),a=Ie(a,Fe(r))},getBeforeBody:function(){return je(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var i=this,n=i._options.callbacks,o=[];return G.each(t,(function(t){var r={before:[],lines:[],after:[]};Ie(r.before,Fe(n.beforeLabel.call(i,t,e))),Ie(r.lines,n.label.call(i,t,e)),Ie(r.after,Fe(n.afterLabel.call(i,t,e))),o.push(r)})),o},getAfterBody:function(){return je(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,i=e.beforeFooter.apply(t,arguments),n=e.footer.apply(t,arguments),o=e.afterFooter.apply(t,arguments),r=[];return r=Ie(r,Fe(i)),r=Ie(r,Fe(n)),r=Ie(r,Fe(o))},update:function(t){var e,i,n,o,r,a,s,l,c,u,h=this,d=h._options,p=h._model,f=h._model=Ae(d),g=h._active,m=h._data,v={xAlign:p.xAlign,yAlign:p.yAlign},y={x:p.x,y:p.y},b={width:p.width,height:p.height},w={x:p.caretX,y:p.caretY};if(g.length){f.opacity=1;var _=[],x=[];w=De[d.position].call(h,g,h._eventPosition);var C=[];for(e=0,i=g.length;e<i;++e)C.push((n=g[e],o=void 0,r=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,o=n._xScale,r=n._yScale||n._scale,a=n._index,s=n._datasetIndex,l=n._chart.getDatasetMeta(s).controller,c=l._getIndexScale(),u=l._getValueScale(),{xLabel:o?o.getLabelForIndex(a,s):"",yLabel:r?r.getLabelForIndex(a,s):"",label:c?""+c.getLabelForIndex(a,s):"",value:u?""+u.getLabelForIndex(a,s):"",index:a,datasetIndex:s,x:n._model.x,y:n._model.y}));d.filter&&(C=C.filter((function(t){return d.filter(t,m)}))),d.itemSort&&(C=C.sort((function(t,e){return d.itemSort(t,e,m)}))),G.each(C,(function(t){_.push(d.callbacks.labelColor.call(h,t,h._chart)),x.push(d.callbacks.labelTextColor.call(h,t,h._chart))})),f.title=h.getTitle(C,m),f.beforeBody=h.getBeforeBody(C,m),f.body=h.getBody(C,m),f.afterBody=h.getAfterBody(C,m),f.footer=h.getFooter(C,m),f.x=w.x,f.y=w.y,f.caretPadding=d.caretPadding,f.labelColors=_,f.labelTextColors=x,f.dataPoints=C,b=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,o=0,r=e.body,a=r.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,c=e.titleFontSize,u=e.bodyFontSize,h=e.footerFontSize;n+=s*c,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=a*u,n+=a?(a-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*h,n+=l?(l-1)*e.footerSpacing:0;var d=0,p=function(t){o=Math.max(o,i.measureText(t).width+d)};return i.font=G.fontString(c,e._titleFontStyle,e._titleFontFamily),G.each(e.title,p),i.font=G.fontString(u,e._bodyFontStyle,e._bodyFontFamily),G.each(e.beforeBody.concat(e.afterBody),p),d=e.displayColors?u+2:0,G.each(r,(function(t){G.each(t.before,p),G.each(t.lines,p),G.each(t.after,p)})),d=0,i.font=G.fontString(h,e._footerFontStyle,e._footerFontFamily),G.each(e.footer,p),{width:o+=2*e.xPadding,height:n}}(this,f),y=function(t,e,i,n){var o=t.x,r=t.y,a=t.caretSize,s=t.caretPadding,l=t.cornerRadius,c=i.xAlign,u=i.yAlign,h=a+s,d=l+s;return"right"===c?o-=e.width:"center"===c&&((o-=e.width/2)+e.width>n.width&&(o=n.width-e.width),o<0&&(o=0)),"top"===u?r+=h:r-="bottom"===u?e.height+h:e.height/2,"center"===u?"left"===c?o+=h:"right"===c&&(o-=h):"left"===c?o-=d:"right"===c&&(o+=d),{x:o,y:r}}(f,b,v=function(t,e){var i,n,o,r,a,s=t._model,l=t._chart,c=t._chart.chartArea,u="center",h="center";s.y<e.height?h="top":s.y>l.height-e.height&&(h="bottom");var d=(c.left+c.right)/2,p=(c.top+c.bottom)/2;"center"===h?(i=function(t){return t<=d},n=function(t){return t>d}):(i=function(t){return t<=e.width/2},n=function(t){return t>=l.width-e.width/2}),o=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},r=function(t){return t-e.width-s.caretSize-s.caretPadding<0},a=function(t){return t<=p?"top":"bottom"},i(s.x)?(u="left",o(s.x)&&(u="center",h=a(s.y))):n(s.x)&&(u="right",r(s.x)&&(u="center",h=a(s.y)));var f=t._options;return{xAlign:f.xAlign?f.xAlign:u,yAlign:f.yAlign?f.yAlign:h}}(this,b),h._chart)}else f.opacity=0;return f.xAlign=v.xAlign,f.yAlign=v.yAlign,f.x=y.x,f.y=y.y,f.width=b.width,f.height=b.height,f.caretX=w.x,f.caretY=w.y,h._model=f,t&&d.custom&&d.custom.call(h,f),h},drawCaret:function(t,e){var i=this._chart.ctx,n=this._view,o=this.getCaretPosition(t,e,n);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)},getCaretPosition:function(t,e,i){var n,o,r,a,s,l,c=i.caretSize,u=i.cornerRadius,h=i.xAlign,d=i.yAlign,p=t.x,f=t.y,g=e.width,m=e.height;if("center"===d)s=f+m/2,"left"===h?(o=(n=p)-c,r=n,a=s+c,l=s-c):(o=(n=p+g)+c,r=n,a=s-c,l=s+c);else if("left"===h?(n=(o=p+u+c)-c,r=o+c):"right"===h?(n=(o=p+g-u-c)-c,r=o+c):(n=(o=i.caretX)-c,r=o+c),"top"===d)s=(a=f)-c,l=a;else{s=(a=f+m)+c,l=a;var v=r;r=n,n=v}return{x1:n,x2:o,x3:r,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n,o,r,a=e.title,s=a.length;if(s){var l=Oe(e.rtl,e.x,e.width);for(t.x=Ne(e,e._titleAlign),i.textAlign=l.textAlign(e._titleAlign),i.textBaseline="middle",n=e.titleFontSize,o=e.titleSpacing,i.fillStyle=e.titleFontColor,i.font=G.fontString(n,e._titleFontStyle,e._titleFontFamily),r=0;r<s;++r)i.fillText(a[r],l.x(t.x),t.y+n/2),t.y+=n+o,r+1===s&&(t.y+=e.titleMarginBottom-o)}},drawBody:function(t,e,i){var n,o,r,a,s,l,c,u,h=e.bodyFontSize,d=e.bodySpacing,p=e._bodyAlign,f=e.body,g=e.displayColors,m=0,v=g?Ne(e,"left"):0,y=Oe(e.rtl,e.x,e.width),b=function(e){i.fillText(e,y.x(t.x+m),t.y+h/2),t.y+=h+d},w=y.textAlign(p);for(i.textAlign=p,i.textBaseline="middle",i.font=G.fontString(h,e._bodyFontStyle,e._bodyFontFamily),t.x=Ne(e,w),i.fillStyle=e.bodyFontColor,G.each(e.beforeBody,b),m=g&&"right"!==w?"center"===p?h/2+1:h+2:0,s=0,c=f.length;s<c;++s){for(n=f[s],o=e.labelTextColors[s],r=e.labelColors[s],i.fillStyle=o,G.each(n.before,b),l=0,u=(a=n.lines).length;l<u;++l){if(g){var _=y.x(v);i.fillStyle=e.legendColorBackground,i.fillRect(y.leftForLtr(_,h),t.y,h,h),i.lineWidth=1,i.strokeStyle=r.borderColor,i.strokeRect(y.leftForLtr(_,h),t.y,h,h),i.fillStyle=r.backgroundColor,i.fillRect(y.leftForLtr(y.xPlus(_,1),h-2),t.y+1,h-2,h-2),i.fillStyle=o}b(a[l])}G.each(n.after,b)}m=0,G.each(e.afterBody,b),t.y-=d},drawFooter:function(t,e,i){var n,o,r=e.footer,a=r.length;if(a){var s=Oe(e.rtl,e.x,e.width);for(t.x=Ne(e,e._footerAlign),t.y+=e.footerMarginTop,i.textAlign=s.textAlign(e._footerAlign),i.textBaseline="middle",n=e.footerFontSize,i.fillStyle=e.footerFontColor,i.font=G.fontString(n,e._footerFontStyle,e._footerFontFamily),o=0;o<a;++o)i.fillText(r[o],s.x(t.x),t.y+n/2),t.y+=n+e.footerSpacing}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth;var o=e.xAlign,r=e.yAlign,a=t.x,s=t.y,l=n.width,c=n.height,u=e.cornerRadius;i.beginPath(),i.moveTo(a+u,s),"top"===r&&this.drawCaret(t,n),i.lineTo(a+l-u,s),i.quadraticCurveTo(a+l,s,a+l,s+u),"center"===r&&"right"===o&&this.drawCaret(t,n),i.lineTo(a+l,s+c-u),i.quadraticCurveTo(a+l,s+c,a+l-u,s+c),"bottom"===r&&this.drawCaret(t,n),i.lineTo(a+u,s+c),i.quadraticCurveTo(a,s+c,a,s+c-u),"center"===r&&"left"===o&&this.drawCaret(t,n),i.lineTo(a,s+u),i.quadraticCurveTo(a,s,a+u,s),i.closePath(),i.fill(),e.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},o=Math.abs(e.opacity<.001)?0:e.opacity,r=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&r&&(t.save(),t.globalAlpha=o,this.drawBackground(n,e,t,i),n.y+=e.yPadding,G.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),G.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:(i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),n.reverse&&i._active.reverse()),(e=!G.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}}),Ze=De,Ge=ze;Ge.positioners=Ze;var He=G.valueOrDefault;function Be(){return G.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var o,r,a,s=i[t].length;for(e[t]||(e[t]=[]),o=0;o<s;++o)a=i[t][o],r=He(a.type,"xAxes"===t?"category":"linear"),o>=e[t].length&&e[t].push({}),!e[t][o].type||a.type&&a.type!==e[t][o].type?G.merge(e[t][o],[Pe.getScaleDefaults(r),a]):G.merge(e[t][o],a)}else G._merger(t,e,i,n)}})}function Ve(){return G.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var o=e[t]||{},r=i[t];"scales"===t?e[t]=Be(o,r):"scale"===t?e[t]=G.merge(o,[Pe.getScaleDefaults(r.type),r]):G._merger(t,e,i,n)}})}function We(t){var e=t.options;G.each(t.scales,(function(e){fe.removeBox(t,e)})),e=Ve(A.global,A[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function Ye(t,e,i){var n,o=function(t){return t.id===n};do{n=e+i++}while(G.findIndex(t,o)>=0);return n}function qe(t){return"top"===t||"bottom"===t}function Ue(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}A._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Xe=function(t,e){return this.construct(t,e),this};G.extend(Xe.prototype,{construct:function(t,e){var i=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Ve(A.global,A[t.type],t.options||{}),t}(e);var n=Me.acquireContext(t,e),o=n&&n.canvas,r=o&&o.height,a=o&&o.width;i.id=G.uid(),i.ctx=n,i.canvas=o,i.config=e,i.width=a,i.height=r,i.aspectRatio=r?a/r:null,i.options=e.options,i._bufferedRender=!1,i._layers=[],i.chart=i,i.controller=i,Xe.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}}),n&&o?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Re.notify(t,"beforeInit"),G.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),Re.notify(t,"afterInit"),t},clear:function(){return G.canvas.clear(this),this},stop:function(){return K.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,o=i.maintainAspectRatio&&e.aspectRatio||null,r=Math.max(0,Math.floor(G.getMaximumWidth(n))),a=Math.max(0,Math.floor(o?r/o:G.getMaximumHeight(n)));if((e.width!==r||e.height!==a)&&(n.width=e.width=r,n.height=e.height=a,n.style.width=r+"px",n.style.height=a+"px",G.retinaScale(e,i.devicePixelRatio),!t)){var s={width:r,height:a};Re.notify(e,"resize",[s]),i.onResize&&i.onResize(e,s),e.stop(),e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;G.each(e.xAxes,(function(t,i){t.id||(t.id=Ye(e.xAxes,"x-axis-",i))})),G.each(e.yAxes,(function(t,i){t.id||(t.id=Ye(e.yAxes,"y-axis-",i))})),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,i=t.scales||{},n=[],o=Object.keys(i).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),G.each(n,(function(e){var n=e.options,r=n.id,a=He(n.type,e.dtype);qe(n.position)!==qe(e.dposition)&&(n.position=e.dposition),o[r]=!0;var s=null;if(r in i&&i[r].type===a)(s=i[r]).options=n,s.ctx=t.ctx,s.chart=t;else{var l=Pe.getScaleConstructor(a);if(!l)return;s=new l({id:r,type:a,options:n,ctx:t.ctx,chart:t}),i[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),G.each(o,(function(t,e){t||delete i[e]})),t.scales=i,Pe.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,i=this,n=[],o=i.data.datasets;for(t=0,e=o.length;t<e;t++){var r=o[t],a=i.getDatasetMeta(t),s=r.type||i.config.type;if(a.type&&a.type!==s&&(i.destroyDatasetMeta(t),a=i.getDatasetMeta(t)),a.type=s,a.order=r.order||0,a.index=t,a.controller)a.controller.updateIndex(t),a.controller.linkScales();else{var l=Kt[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(i,t),n.push(a.controller)}}return n},resetElements:function(){var t=this;G.each(t.data.datasets,(function(e,i){t.getDatasetMeta(i).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),We(n),Re._invalidate(n),!1!==Re.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var o=n.buildOrUpdateControllers();for(e=0,i=n.data.datasets.length;e<i;e++)n.getDatasetMeta(e).controller.buildOrUpdateElements();n.updateLayout(),n.options.animation&&n.options.animation.duration&&G.each(o,(function(t){t.reset()})),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],Re.notify(n,"afterUpdate"),n._layers.sort(Ue("z","_idx")),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){var t=this;!1!==Re.notify(t,"beforeLayout")&&(fe.update(this,this.width,this.height),t._layers=[],G.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),Re.notify(t,"afterScaleUpdate"),Re.notify(t,"afterLayout"))},updateDatasets:function(){if(!1!==Re.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);Re.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==Re.notify(this,"beforeDatasetUpdate",[i])&&(e.controller._update(),Re.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=e.options.animation,n=He(t.duration,i&&i.duration),o=t.lazy;if(!1!==Re.notify(e,"beforeRender")){var r=function(t){Re.notify(e,"afterRender"),G.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new $({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=G.easing.effects[e.easing],n=e.currentStep,o=n/e.numSteps;t.draw(i(o),o,n)},onAnimationProgress:i.onProgress,onAnimationComplete:r});K.addAnimation(e,a,n,o)}else e.draw(),r(new $({numSteps:0,chart:e}));return e}},draw:function(t){var e,i,n=this;if(n.clear(),G.isNullOrUndef(t)&&(t=1),n.transition(t),!(n.width<=0||n.height<=0)&&!1!==Re.notify(n,"beforeDraw",[t])){for(i=n._layers,e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(n.chartArea);for(n.drawDatasets(t);e<i.length;++e)i[e].draw(n.chartArea);n._drawTooltip(t),Re.notify(n,"afterDraw",[t])}},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,i,n=[];for(e=0,i=(this.data.datasets||[]).length;e<i;++e)t&&!this.isDatasetVisible(e)||n.push(this.getDatasetMeta(e));return n.sort(Ue("order","index")),n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,i;if(!1!==Re.notify(this,"beforeDatasetsDraw",[t])){for(i=(e=this._getSortedVisibleDatasetMetas()).length-1;i>=0;--i)this.drawDataset(e[i],t);Re.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i={meta:t,index:t.index,easingValue:e};!1!==Re.notify(this,"beforeDatasetDraw",[i])&&(t.controller.draw(e),Re.notify(this,"afterDatasetDraw",[i]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==Re.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),Re.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return oe.modes.single(this,t)},getElementsAtEvent:function(t){return oe.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return oe.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=oe.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return oe.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),G.canvas.clear(i),Me.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Re.notify(i,"destroy"),delete Xe.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ge({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},i=function(){t.eventHandler.apply(t,arguments)};G.each(t.options.events,(function(n){Me.addEventListener(t,n,i),e[n]=i})),t.options.responsive&&(i=function(){t.resize()},Me.addEventListener(t,"resize",i),e.resize=i)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,G.each(e,(function(e,i){Me.removeEventListener(t,i,e)})))},updateHoverStyle:function(t,e,i){var n,o,r,a=i?"set":"remove";for(o=0,r=t.length;o<r;++o)(n=t[o])&&this.getDatasetMeta(n._datasetIndex).controller[a+"HoverStyle"](n);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==Re.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),Re.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;return o?e.render(o):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},o=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,o.mode,o),G.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,o.mode,!1),i.active.length&&o.mode&&i.updateHoverStyle(i.active,o.mode,!0),e=!G.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),Xe.instances={};var $e=Xe;function Ke(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Je(t){this.options=t||{}}Xe.Controller=Xe,Xe.types={},G.configMerge=Ve,G.scaleMerge=Be,G.extend(Je.prototype,{formats:Ke,parse:Ke,format:Ke,add:Ke,diff:Ke,startOf:Ke,endOf:Ke,_create:function(t){return t}}),Je.override=function(t){G.extend(Je.prototype,t)};var Qe={_date:Je},ti={formatters:{values:function(t){return G.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var o=G.log10(Math.abs(n)),r="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var a=G.log10(Math.abs(t)),s=Math.floor(a)-Math.floor(o);s=Math.max(Math.min(s,20),0),r=t.toExponential(s)}else{var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),r=t.toFixed(l)}else r="0";return r},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(G.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}},ei=G.isArray,ii=G.isNullOrUndef,ni=G.valueOrDefault,oi=G.valueAtIndexOrDefault;function ri(t,e,i){var n,o=t.getTicks().length,r=Math.min(e,o-1),a=t.getPixelForTick(r),s=t._startPixel,l=t._endPixel;if(!(i&&(n=1===o?Math.max(a-s,l-a):0===e?(t.getPixelForTick(1)-a)/2:(a-t.getPixelForTick(r-1))/2,(a+=r<e?n:-n)<s-1e-6||a>l+1e-6)))return a}function ai(t,e,i,n){var o,r,a,s,l,c,u,h,d,p,f,g,m,v=i.length,y=[],b=[],w=[];for(o=0;o<v;++o){if(s=i[o].label,l=i[o].major?e.major:e.minor,t.font=c=l.string,u=n[c]=n[c]||{data:{},gc:[]},h=l.lineHeight,d=p=0,ii(s)||ei(s)){if(ei(s))for(r=0,a=s.length;r<a;++r)f=s[r],ii(f)||ei(f)||(d=G.measureText(t,u.data,u.gc,d,f),p+=h)}else d=G.measureText(t,u.data,u.gc,d,s),p=h;y.push(d),b.push(p),w.push(h/2)}function _(t){return{width:y[t]||0,height:b[t]||0,offset:w[t]||0}}return function(t,e){G.each(t,(function(t){var i,n=t.gc,o=n.length/2;if(o>e){for(i=0;i<o;++i)delete t.data[n[i]];n.splice(0,o)}}))}(n,v),g=y.indexOf(Math.max.apply(null,y)),m=b.indexOf(Math.max.apply(null,b)),{first:_(0),last:_(v-1),widest:_(g),highest:_(m)}}function si(t){return t.drawTicks?t.tickMarkLength:0}function li(t){var e,i;return t.display?(e=G.options._parseFont(t),i=G.options.toPadding(t.padding),e.lineHeight+i.height):0}function ci(t,e){return G.extend(G.options._parseFont({fontFamily:ni(e.fontFamily,t.fontFamily),fontSize:ni(e.fontSize,t.fontSize),fontStyle:ni(e.fontStyle,t.fontStyle),lineHeight:ni(e.lineHeight,t.lineHeight)}),{color:G.options.resolve([e.fontColor,t.fontColor,A.global.defaultFontColor])})}function ui(t){var e=ci(t,t.minor);return{minor:e,major:t.major.enabled?ci(t,t.major):e}}function hi(t){var e,i,n,o=[];for(i=0,n=t.length;i<n;++i)void 0!==(e=t[i])._index&&o.push(e);return o}function di(t,e,i,n){var o,r,a,s,l=ni(i,0),c=Math.min(ni(n,t.length),t.length),u=0;for(e=Math.ceil(e),n&&(e=(o=n-i)/Math.floor(o/e)),s=l;s<0;)u++,s=Math.round(l+u*e);for(r=Math.max(l,0);r<c;r++)a=t[r],r===s?(a._index=r,u++,s=Math.round(l+u*e)):delete a.label}A._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:ti.formatters.values,minor:{},major:{}}});var pi=U.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){G.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,o,r,a,s,l=this,c=l.options.ticks,u=c.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=G.extend({left:0,right:0,top:0,bottom:0},i),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),a=l.buildTicks()||[],(!(a=l.afterBuildTicks(a)||a)||!a.length)&&l.ticks)for(a=[],n=0,o=l.ticks.length;n<o;++n)a.push({value:l.ticks[n],major:!1});return l._ticks=a,s=u<a.length,r=l._convertTicksToLabels(s?function(t,e){for(var i=[],n=t.length/e,o=0,r=t.length;o<r;o+=n)i.push(t[Math.floor(o)]);return i}(a,u):a),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=c.display&&(c.autoSkip||"auto"===c.source)?l._autoSkip(a):a,s&&(r=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=r,l.afterUpdate(),l.minSize},_configure:function(){var t,e,i=this,n=i.options.ticks.reverse;i.isHorizontal()?(t=i.left,e=i.right):(t=i.top,e=i.bottom,n=!n),i._startPixel=t,i._endPixel=e,i._reversePixels=n,i._length=e-t},afterUpdate:function(){G.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){G.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){G.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){G.callback(this.options.beforeDataLimits,[this])},determineDataLimits:G.noop,afterDataLimits:function(){G.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){G.callback(this.options.beforeBuildTicks,[this])},buildTicks:G.noop,afterBuildTicks:function(t){var e=this;return ei(t)&&t.length?G.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=G.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){G.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){G.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){G.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,i,n,o,r,a,s=this,l=s.options,c=l.ticks,u=s.getTicks().length,h=c.minRotation||0,d=c.maxRotation,p=h;!s._isVisible()||!c.display||h>=d||u<=1||!s.isHorizontal()?s.labelRotation=h:(e=(t=s._getLabelSizes()).widest.width,i=t.highest.height-t.highest.offset,n=Math.min(s.maxWidth,s.chart.width-e),e+6>(o=l.offset?s.maxWidth/u:n/(u-1))&&(o=n/(u-(l.offset?.5:1)),r=s.maxHeight-si(l.gridLines)-c.padding-li(l.scaleLabel),a=Math.sqrt(e*e+i*i),p=G.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/o,1)),Math.asin(Math.min(r/a,1))-Math.asin(i/a))),p=Math.max(h,Math.min(d,p))),s.labelRotation=p)},afterCalculateTickRotation:function(){G.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){G.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=t.chart,n=t.options,o=n.ticks,r=n.scaleLabel,a=n.gridLines,s=t._isVisible(),l="bottom"===n.position,c=t.isHorizontal();if(c?e.width=t.maxWidth:s&&(e.width=si(a)+li(r)),c?s&&(e.height=si(a)+li(r)):e.height=t.maxHeight,o.display&&s){var u=ui(o),h=t._getLabelSizes(),d=h.first,p=h.last,f=h.widest,g=h.highest,m=.4*u.minor.lineHeight,v=o.padding;if(c){var y=0!==t.labelRotation,b=G.toRadians(t.labelRotation),w=Math.cos(b),_=Math.sin(b),x=_*f.width+w*(g.height-(y?g.offset:0))+(y?0:m);e.height=Math.min(t.maxHeight,e.height+x+v);var C,E,k=t.getPixelForTick(0)-t.left,T=t.right-t.getPixelForTick(t.getTicks().length-1);y?(C=l?w*d.width+_*d.offset:_*(d.height-d.offset),E=l?_*(p.height-p.offset):w*p.width+_*p.offset):(C=d.width/2,E=p.width/2),t.paddingLeft=Math.max((C-k)*t.width/(t.width-k),0)+3,t.paddingRight=Math.max((E-T)*t.width/(t.width-T),0)+3}else{var S=o.mirror?0:f.width+v+m;e.width=Math.min(t.maxWidth,e.width+S),t.paddingTop=d.height/2,t.paddingBottom=p.height/2}}t.handleMargins(),c?(t.width=t._length=i.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=i.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){G.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(ii(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,i,n,o=this;for(o.ticks=t.map((function(t){return t.value})),o.beforeTickToLabelConversion(),e=o.convertTicksToLabels(t)||o.ticks,o.afterTickToLabelConversion(),i=0,n=t.length;i<n;++i)t[i].label=e[i];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=ai(t.ctx,ui(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,i,n,o;return ei(t)?(e=+this.getRightValue(t[0]),i=+this.getRightValue(t[1]),n=Math.min(e,i),o=Math.max(e,i)):(e=void 0,i=t=+this.getRightValue(t),n=t,o=t),{min:n,max:o,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:G.noop,getPixelForValue:G.noop,getValueForPixel:G.noop,getPixelForTick:function(t){var e=this.options.offset,i=this._ticks.length,n=1/Math.max(i-(e?0:1),1);return t<0||t>i-1?null:this.getPixelForDecimal(t*n+(e?n/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,i,n,o,r=this.options.ticks,a=this._length,s=r.maxTicksLimit||a/this._tickSize()+1,l=r.major.enabled?function(t){var e,i,n=[];for(e=0,i=t.length;e<i;e++)t[e].major&&n.push(e);return n}(t):[],c=l.length,u=l[0],h=l[c-1];if(c>s)return function(t,e,i){var n,o,r=0,a=e[0];for(i=Math.ceil(i),n=0;n<t.length;n++)o=t[n],n===a?(o._index=n,a=e[++r*i]):delete o.label}(t,l,c/s),hi(t);if(n=function(t,e,i,n){var o,r,a,s,l=function(t){var e,i,n=t.length;if(n<2)return!1;for(i=t[0],e=1;e<n;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),c=(e.length-1)/n;if(!l)return Math.max(c,1);for(a=0,s=(o=G.math._factorize(l)).length-1;a<s;a++)if((r=o[a])>c)return r;return Math.max(c,1)}(l,t,0,s),c>0){for(e=0,i=c-1;e<i;e++)di(t,n,l[e],l[e+1]);return o=c>1?(h-u)/(c-1):null,di(t,n,G.isNullOrUndef(o)?0:u-o,u),di(t,n,h,G.isNullOrUndef(o)?t.length:h+o),hi(t)}return di(t,n),hi(t)},_tickSize:function(){var t=this.options.ticks,e=G.toRadians(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,s=o?o.highest.height+r:0;return this.isHorizontal()?s*i>a*n?a/i:s/n:s*n<a*i?s/i:a/n},_isVisible:function(){var t,e,i,n=this.chart,o=this.options.display;if("auto"!==o)return!!o;for(t=0,e=n.data.datasets.length;t<e;++t)if(n.isDatasetVisible(t)&&((i=n.getDatasetMeta(t)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,i,n,o,r,a,s,l,c,u,h,d,p,f,g,m,v,y=this,b=y.chart,w=y.options,_=w.gridLines,x=w.position,C=_.offsetGridLines,E=y.isHorizontal(),k=y._ticksToDraw,T=k.length+(C?1:0),S=si(_),M=[],R=_.drawBorder?oi(_.lineWidth,0,0):0,P=R/2,L=G._alignPixel,O=function(t){return L(b,t,R)};for("top"===x?(e=O(y.bottom),s=y.bottom-S,c=e-P,h=O(t.top)+P,p=t.bottom):"bottom"===x?(e=O(y.top),h=t.top,p=O(t.bottom)-P,s=e+P,c=y.top+S):"left"===x?(e=O(y.right),a=y.right-S,l=e-P,u=O(t.left)+P,d=t.right):(e=O(y.left),u=t.left,d=O(t.right)-P,a=e+P,l=y.left+S),i=0;i<T;++i)n=k[i]||{},ii(n.label)&&i<k.length||(i===y.zeroLineIndex&&w.offset===C?(f=_.zeroLineWidth,g=_.zeroLineColor,m=_.zeroLineBorderDash||[],v=_.zeroLineBorderDashOffset||0):(f=oi(_.lineWidth,i,1),g=oi(_.color,i,"rgba(0,0,0,0.1)"),m=_.borderDash||[],v=_.borderDashOffset||0),void 0!==(o=ri(y,n._index||i,C))&&(r=L(b,o,f),E?a=l=u=d=r:s=c=h=p=r,M.push({tx1:a,ty1:s,tx2:l,ty2:c,x1:u,y1:h,x2:d,y2:p,width:f,color:g,borderDash:m,borderDashOffset:v})));return M.ticksLength=T,M.borderValue=e,M},_computeLabelItems:function(){var t,e,i,n,o,r,a,s,l,c,u,h,d=this,p=d.options,f=p.ticks,g=p.position,m=f.mirror,v=d.isHorizontal(),y=d._ticksToDraw,b=ui(f),w=f.padding,_=si(p.gridLines),x=-G.toRadians(d.labelRotation),C=[];for("top"===g?(r=d.bottom-_-w,a=x?"left":"center"):"bottom"===g?(r=d.top+_+w,a=x?"right":"center"):"left"===g?(o=d.right-(m?0:_)-w,a=m?"left":"right"):(o=d.left+(m?0:_)+w,a=m?"right":"left"),t=0,e=y.length;t<e;++t)n=(i=y[t]).label,ii(n)||(s=d.getPixelForTick(i._index||t)+f.labelOffset,c=(l=i.major?b.major:b.minor).lineHeight,u=ei(n)?n.length:1,v?(o=s,h="top"===g?((x?1:.5)-u)*c:(x?0:.5)*c):(r=s,h=(1-u)*c/2),C.push({x:o,y:r,rotation:x,label:n,font:l,textOffset:h,textAlign:a}));return C},_drawGrid:function(t){var e=this,i=e.options.gridLines;if(i.display){var n,o,r,a,s,l=e.ctx,c=e.chart,u=G._alignPixel,h=i.drawBorder?oi(i.lineWidth,0,0):0,d=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(r=0,a=d.length;r<a;++r)n=(s=d[r]).width,o=s.color,n&&o&&(l.save(),l.lineWidth=n,l.strokeStyle=o,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),i.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),i.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(h){var p,f,g,m,v=h,y=oi(i.lineWidth,d.ticksLength-1,1),b=d.borderValue;e.isHorizontal()?(p=u(c,e.left,v)-v/2,f=u(c,e.right,y)+y/2,g=m=b):(g=u(c,e.top,v)-v/2,m=u(c,e.bottom,y)+y/2,p=f=b),l.lineWidth=h,l.strokeStyle=oi(i.color,0),l.beginPath(),l.moveTo(p,g),l.lineTo(f,m),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,i,n,o,r,a,s,l,c=t.ctx,u=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,n=u.length;e<n;++e){if(a=(r=u[e]).font,c.save(),c.translate(r.x,r.y),c.rotate(r.rotation),c.font=a.string,c.fillStyle=a.color,c.textBaseline="middle",c.textAlign=r.textAlign,s=r.label,l=r.textOffset,ei(s))for(i=0,o=s.length;i<o;++i)c.fillText(""+s[i],0,l),l+=a.lineHeight;else c.fillText(s,0,l);c.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,i=t.options,n=i.scaleLabel;if(n.display){var o,r,a=ni(n.fontColor,A.global.defaultFontColor),s=G.options._parseFont(n),l=G.options.toPadding(n.padding),c=s.lineHeight/2,u=i.position,h=0;if(t.isHorizontal())o=t.left+t.width/2,r="bottom"===u?t.bottom-c-l.bottom:t.top+c+l.top;else{var d="left"===u;o=d?t.left+c+l.top:t.right-c-l.top,r=t.top+t.height/2,h=d?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(o,r),e.rotate(h),e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.font=s.string,e.fillText(n.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,i=e.ticks&&e.ticks.z||0,n=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&i!==n&&t.draw===t._draw?[{z:n,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:i,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,i=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(n){return(!t||n.type===t)&&(i?n.xAxisID===e.id:n.yAxisID===e.id)}))}});pi.prototype._draw=pi.prototype.draw;var fi=pi,gi=G.isNullOrUndef,mi=fi.extend({determineDataLimits:function(){var t,e=this,i=e._getLabels(),n=e.options.ticks,o=n.min,r=n.max,a=0,s=i.length-1;void 0!==o&&(t=i.indexOf(o))>=0&&(a=t),void 0!==r&&(t=i.indexOf(r))>=0&&(s=t),e.minIndex=a,e.maxIndex=s,e.min=i[a],e.max=i[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,i=this.maxIndex;this.ticks=0===e&&i===t.length-1?t:t.slice(e,i+1)},getLabelForIndex:function(t,e){var i=this.chart;return i.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(i.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,i=t.ticks;fi.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),i&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(i.length-(e?0:1),1))},getPixelForValue:function(t,e,i){var n,o,r,a=this;return gi(e)||gi(i)||(t=a.chart.data.datasets[i].data[e]),gi(t)||(n=a.isHorizontal()?t.x:t.y),(void 0!==n||void 0!==t&&isNaN(e))&&(o=a._getLabels(),t=G.valueOrDefault(n,t),e=-1!==(r=o.indexOf(t))?r:e,isNaN(e)&&(e=t)),a.getPixelForDecimal((e-a._startValue)/a._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),vi={position:"bottom"};mi._defaults=vi;var yi=G.noop,bi=G.isNullOrUndef,wi=fi.extend({getRightValue:function(t){return"string"==typeof t?+t:fi.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=G.sign(t.min),n=G.sign(t.max);i<0&&n<0?t.max=0:i>0&&n>0&&(t.min=0)}var o=void 0!==e.min||void 0!==e.suggestedMin,r=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),o!==r&&t.min>=t.max&&(o?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,i=e.stepSize,n=e.maxTicksLimit;return i?t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(t=this._computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:yi,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:G.valueOrDefault(e.fixedStepSize,e.stepSize)},o=t.ticks=function(t,e){var i,n,o,r,a=[],s=t.stepSize,l=s||1,c=t.maxTicks-1,u=t.min,h=t.max,d=t.precision,p=e.min,f=e.max,g=G.niceNum((f-p)/c/l)*l;if(g<1e-14&&bi(u)&&bi(h))return[p,f];(r=Math.ceil(f/g)-Math.floor(p/g))>c&&(g=G.niceNum(r*g/c/l)*l),s||bi(d)?i=Math.pow(10,G._decimalPlaces(g)):(i=Math.pow(10,d),g=Math.ceil(g*i)/i),n=Math.floor(p/g)*g,o=Math.ceil(f/g)*g,s&&(!bi(u)&&G.almostWhole(u/g,g/1e3)&&(n=u),!bi(h)&&G.almostWhole(h/g,g/1e3)&&(o=h)),r=(o-n)/g,r=G.almostEquals(r,Math.round(r),g/1e3)?Math.round(r):Math.ceil(r),n=Math.round(n*i)/i,o=Math.round(o*i)/i,a.push(bi(u)?n:u);for(var m=1;m<r;++m)a.push(Math.round((n+m*g)*i)/i);return a.push(bi(h)?o:h),a}(n,t);t.handleDirectionalChanges(),t.max=G.max(o),t.min=G.min(o),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),fi.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,i=e.getTicks(),n=e.min,o=e.max;fi.prototype._configure.call(e),e.options.offset&&i.length&&(n-=t=(o-n)/Math.max(i.length-1,1)/2,o+=t),e._startValue=n,e._endValue=o,e._valueRange=o-n}}),_i={position:"left",ticks:{callback:ti.formatters.linear}};function xi(t,e,i,n){var o,r,a=t.options,s=function(t,e,i){var n=[i.type,void 0===e&&void 0===i.stack?i.index:"",i.stack].join(".");return void 0===t[n]&&(t[n]={pos:[],neg:[]}),t[n]}(e,a.stacked,i),l=s.pos,c=s.neg,u=n.length;for(o=0;o<u;++o)r=t._parseValue(n[o]),isNaN(r.min)||isNaN(r.max)||i.data[o].hidden||(l[o]=l[o]||0,c[o]=c[o]||0,a.relativePoints?l[o]=100:r.min<0||r.max<0?c[o]+=r.min:l[o]+=r.max)}function Ci(t,e,i){var n,o,r=i.length;for(n=0;n<r;++n)o=t._parseValue(i[n]),isNaN(o.min)||isNaN(o.max)||e.data[n].hidden||(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}var Ei=wi.extend({determineDataLimits:function(){var t,e,i,n,o=this,r=o.options,a=o.chart.data.datasets,s=o._getMatchingVisibleMetas(),l=r.stacked,c={},u=s.length;if(o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<u;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<u;++t)i=a[(e=s[t]).index].data,l?xi(o,c,e,i):Ci(o,e,i);G.each(c,(function(t){n=t.pos.concat(t.neg),o.min=Math.min(o.min,G.min(n)),o.max=Math.max(o.max,G.max(n))})),o.min=G.isFinite(o.min)&&!isNaN(o.min)?o.min:0,o.max=G.isFinite(o.max)&&!isNaN(o.max)?o.max:1,o.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=G.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),ki=_i;Ei._defaults=ki;var Ti=G.valueOrDefault,Si=G.math.log10,Mi={position:"left",ticks:{callback:ti.formatters.logarithmic}};function Ri(t,e){return G.isFinite(t)&&t>=0?t:e}var Pi=fi.extend({determineDataLimits:function(){var t,e,i,n,o,r,a=this,s=a.options,l=a.chart,c=l.data.datasets,u=a.isHorizontal();function h(t){return u?t.xAxisID===a.id:t.yAxisID===a.id}a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,a.minNotZero=Number.POSITIVE_INFINITY;var d=s.stacked;if(void 0===d)for(t=0;t<c.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&h(e)&&void 0!==e.stack){d=!0;break}if(s.stacked||d){var p={};for(t=0;t<c.length;t++){var f=[(e=l.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(l.isDatasetVisible(t)&&h(e))for(void 0===p[f]&&(p[f]=[]),o=0,r=(n=c[t].data).length;o<r;o++){var g=p[f];i=a._parseValue(n[o]),isNaN(i.min)||isNaN(i.max)||e.data[o].hidden||i.min<0||i.max<0||(g[o]=g[o]||0,g[o]+=i.max)}}G.each(p,(function(t){if(t.length>0){var e=G.min(t),i=G.max(t);a.min=Math.min(a.min,e),a.max=Math.max(a.max,i)}}))}else for(t=0;t<c.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&h(e))for(o=0,r=(n=c[t].data).length;o<r;o++)i=a._parseValue(n[o]),isNaN(i.min)||isNaN(i.max)||e.data[o].hidden||i.min<0||i.max<0||(a.min=Math.min(i.min,a.min),a.max=Math.max(i.max,a.max),0!==i.min&&(a.minNotZero=Math.min(i.min,a.minNotZero)));a.min=G.isFinite(a.min)?a.min:null,a.max=G.isFinite(a.max)?a.max:null,a.minNotZero=G.isFinite(a.minNotZero)?a.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=Ri(e.min,t.min),t.max=Ri(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(Si(t.min))-1),t.max=Math.pow(10,Math.floor(Si(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(Si(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(Si(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(Si(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:Ri(e.min),max:Ri(e.max)},o=t.ticks=function(t,e){var i,n,o=[],r=Ti(t.min,Math.pow(10,Math.floor(Si(e.min)))),a=Math.floor(Si(e.max)),s=Math.ceil(e.max/Math.pow(10,a));0===r?(i=Math.floor(Si(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),o.push(r),r=n*Math.pow(10,i)):(i=Math.floor(Si(r)),n=Math.floor(r/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{o.push(r),10==++n&&(n=1,l=++i>=0?1:l),r=Math.round(n*Math.pow(10,i)*l)/l}while(i<a||i===a&&n<s);var c=Ti(t.max,r);return o.push(c),o}(n,t);t.max=G.max(o),t.min=G.min(o),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),fi.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(Si(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,i=0;fi.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),i=Ti(t.options.ticks.fontSize,A.global.defaultFontSize)/t._length),t._startValue=Si(e),t._valueOffset=i,t._valueRange=(Si(t.max)-Si(e))/(1-i)},getPixelForValue:function(t){var e=this,i=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(i=(Si(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this,i=e.getDecimalForPixel(t);return 0===i&&0===e.min?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}}),Li=Mi;Pi._defaults=Li;var Oi=G.valueOrDefault,Di=G.valueAtIndexOrDefault,Ii=G.options.resolve,Fi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:ti.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Ai(t){var e=t.ticks;return e.display&&t.display?Oi(e.fontSize,A.global.defaultFontSize)+2*e.backdropPaddingY:0}function Ni(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function ji(t){return 0===t||180===t?"center":t<180?"left":"right"}function zi(t,e,i,n){var o,r,a=i.y+n/2;if(G.isArray(e))for(o=0,r=e.length;o<r;++o)t.fillText(e[o],i.x,a),a+=n;else t.fillText(e,i.x,a)}function Zi(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function Gi(t){return G.isNumber(t)?t:0}var Hi=wi.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Ai(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;G.each(e.data.datasets,(function(o,r){if(e.isDatasetVisible(r)){var a=e.getDatasetMeta(r);G.each(o.data,(function(e,o){var r=+t.getRightValue(e);isNaN(r)||a.data[o].hidden||(i=Math.min(r,i),n=Math.max(r,n))}))}})),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Ai(this.options))},convertTicksToLabels:function(){var t=this;wi.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=G.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,i,n,o=G.options._parseFont(t.options.pointLabels),r={l:0,r:t.width,t:0,b:t.height-t.paddingTop},a={};t.ctx.font=o.string,t._pointLabelSizes=[];var s,l,c,u=t.chart.data.labels.length;for(e=0;e<u;e++){n=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=o.lineHeight,c=t.pointLabels[e],i=G.isArray(c)?{w:G.longestText(s,s.font,c),h:c.length*l}:{w:s.measureText(c).width,h:l},t._pointLabelSizes[e]=i;var h=t.getIndexAngle(e),d=G.toDegrees(h)%360,p=Ni(d,n.x,i.w,0,180),f=Ni(d,n.y,i.h,90,270);p.start<r.l&&(r.l=p.start,a.l=h),p.end>r.r&&(r.r=p.end,a.r=h),f.start<r.t&&(r.t=f.start,a.t=h),f.end>r.b&&(r.b=f.end,a.b=h)}t.setReductions(t.drawingArea,r,a)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this,o=e.l/Math.sin(i.l),r=Math.max(e.r-n.width,0)/Math.sin(i.r),a=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=Gi(o),r=Gi(r),a=Gi(a),s=Gi(s),n.drawingArea=Math.min(Math.floor(t-(o+r)/2),Math.floor(t-(a+s)/2)),n.setCenterPoint(o,r,a,s)},setCenterPoint:function(t,e,i,n){var o=this,r=o.width-e-o.drawingArea,a=t+o.drawingArea,s=i+o.drawingArea,l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+r)/2+o.left),o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(t){var e=this.chart,i=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(i<0?i+360:i)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(G.isNullOrUndef(t))return NaN;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,i=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0)},_drawGrid:function(){var t,e,i,n=this,o=n.ctx,r=n.options,a=r.gridLines,s=r.angleLines,l=Oi(s.lineWidth,a.lineWidth),c=Oi(s.color,a.color);if(r.pointLabels.display&&function(t){var e=t.ctx,i=t.options,n=i.pointLabels,o=Ai(i),r=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),a=G.options._parseFont(n);e.save(),e.font=a.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=0===s?o/2:0,c=t.getPointPosition(s,r+l+5),u=Di(n.fontColor,s,A.global.defaultFontColor);e.fillStyle=u;var h=t.getIndexAngle(s),d=G.toDegrees(h);e.textAlign=ji(d),Zi(d,t._pointLabelSizes[s],c),zi(e,t.pointLabels[s],c,a.lineHeight)}e.restore()}(n),a.display&&G.each(n.ticks,(function(t,i){0!==i&&(e=n.getDistanceFromCenterForValue(n.ticksAsNumbers[i]),function(t,e,i,n){var o,r=t.ctx,a=e.circular,s=t.chart.data.labels.length,l=Di(e.color,n-1),c=Di(e.lineWidth,n-1);if((a||s)&&l&&c){if(r.save(),r.strokeStyle=l,r.lineWidth=c,r.setLineDash&&(r.setLineDash(e.borderDash||[]),r.lineDashOffset=e.borderDashOffset||0),r.beginPath(),a)r.arc(t.xCenter,t.yCenter,i,0,2*Math.PI);else{o=t.getPointPosition(0,i),r.moveTo(o.x,o.y);for(var u=1;u<s;u++)o=t.getPointPosition(u,i),r.lineTo(o.x,o.y)}r.closePath(),r.stroke(),r.restore()}}(n,a,e,i))})),s.display&&l&&c){for(o.save(),o.lineWidth=l,o.strokeStyle=c,o.setLineDash&&(o.setLineDash(Ii([s.borderDash,a.borderDash,[]])),o.lineDashOffset=Ii([s.borderDashOffset,a.borderDashOffset,0])),t=n.chart.data.labels.length-1;t>=0;t--)e=n.getDistanceFromCenterForValue(r.ticks.reverse?n.min:n.max),i=n.getPointPosition(t,e),o.beginPath(),o.moveTo(n.xCenter,n.yCenter),o.lineTo(i.x,i.y),o.stroke();o.restore()}},_drawLabels:function(){var t=this,e=t.ctx,i=t.options.ticks;if(i.display){var n,o,r=t.getIndexAngle(0),a=G.options._parseFont(i),s=Oi(i.fontColor,A.global.defaultFontColor);e.save(),e.font=a.string,e.translate(t.xCenter,t.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",G.each(t.ticks,(function(r,l){(0!==l||i.reverse)&&(n=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),i.showLabelBackdrop&&(o=e.measureText(r).width,e.fillStyle=i.backdropColor,e.fillRect(-o/2-i.backdropPaddingX,-n-a.size/2-i.backdropPaddingY,o+2*i.backdropPaddingX,a.size+2*i.backdropPaddingY)),e.fillStyle=s,e.fillText(r,0,-n))})),e.restore()}},_drawTitle:G.noop}),Bi=Fi;Hi._defaults=Bi;var Vi=G._deprecated,Wi=G.options.resolve,Yi=G.valueOrDefault,qi=Number.MIN_SAFE_INTEGER||-9007199254740991,Ui=Number.MAX_SAFE_INTEGER||9007199254740991,Xi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$i=Object.keys(Xi);function Ki(t,e){return t-e}function Ji(t){return G.valueOrDefault(t.time.min,t.ticks.min)}function Qi(t){return G.valueOrDefault(t.time.max,t.ticks.max)}function tn(t,e,i,n){var o=function(t,e,i){for(var n,o,r,a=0,s=t.length-1;a>=0&&a<=s;){if(o=t[(n=a+s>>1)-1]||null,r=t[n],!o)return{lo:null,hi:r};if(r[e]<i)a=n+1;else{if(!(o[e]>i))return{lo:o,hi:r};s=n-1}}return{lo:r,hi:null}}(t,e,i),r=o.lo?o.hi?o.lo:t[t.length-2]:t[0],a=o.lo?o.hi?o.hi:t[t.length-1]:t[1],s=a[e]-r[e],l=s?(i-r[e])/s:0,c=(a[n]-r[n])*l;return r[n]+c}function en(t,e){var i=t._adapter,n=t.options.time,o=n.parser,r=o||n.format,a=e;return"function"==typeof o&&(a=o(a)),G.isFinite(a)||(a="string"==typeof r?i.parse(a,r):i.parse(a)),null!==a?+a:(o||"function"!=typeof r||(a=r(e),G.isFinite(a)||(a=i.parse(a))),a)}function nn(t,e){if(G.isNullOrUndef(e))return null;var i=t.options.time,n=en(t,t.getRightValue(e));return null===n||i.round&&(n=+t._adapter.startOf(n,i.round)),n}function on(t,e,i,n){var o,r,a,s=$i.length;for(o=$i.indexOf(t);o<s-1;++o)if(a=(r=Xi[$i[o]]).steps?r.steps:Ui,r.common&&Math.ceil((i-e)/(a*r.size))<=n)return $i[o];return $i[s-1]}function rn(t,e,i){var n,o,r=[],a={},s=e.length;for(n=0;n<s;++n)a[o=e[n]]=n,r.push({value:o,major:!1});return 0!==s&&i?function(t,e,i,n){var o,r,a=t._adapter,s=+a.startOf(e[0].value,n),l=e[e.length-1].value;for(o=s;o<=l;o=+a.add(o,1,n))(r=i[o])>=0&&(e[r].major=!0);return e}(t,r,a,i):r}var an=fi.extend({initialize:function(){this.mergeTicksOptions(),fi.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,i=e.time||(e.time={}),n=t._adapter=new Qe._date(e.adapters.date);return Vi("time scale",i.format,"time.format","time.parser"),Vi("time scale",i.min,"time.min","ticks.min"),Vi("time scale",i.max,"time.max","ticks.max"),G.mergeIf(i.displayFormats,n.formats()),fi.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),fi.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,o,r,a,s=this,l=s.chart,c=s._adapter,u=s.options,h=u.time.unit||"day",d=Ui,p=qi,f=[],g=[],m=[],v=s._getLabels();for(t=0,i=v.length;t<i;++t)m.push(nn(s,v[t]));for(t=0,i=(l.data.datasets||[]).length;t<i;++t)if(l.isDatasetVisible(t))if(o=l.data.datasets[t].data,G.isObject(o[0]))for(g[t]=[],e=0,n=o.length;e<n;++e)r=nn(s,o[e]),f.push(r),g[t][e]=r;else g[t]=m.slice(0),a||(f=f.concat(m),a=!0);else g[t]=[];m.length&&(d=Math.min(d,m[0]),p=Math.max(p,m[m.length-1])),f.length&&(f=i>1?function(t){var e,i,n,o={},r=[];for(e=0,i=t.length;e<i;++e)o[n=t[e]]||(o[n]=!0,r.push(n));return r}(f).sort(Ki):f.sort(Ki),d=Math.min(d,f[0]),p=Math.max(p,f[f.length-1])),d=nn(s,Ji(u))||d,p=nn(s,Qi(u))||p,d=d===Ui?+c.startOf(Date.now(),h):d,p=p===qi?+c.endOf(Date.now(),h)+1:p,s.min=Math.min(d,p),s.max=Math.max(d+1,p),s._table=[],s._timestamps={data:f,datasets:g,labels:m}},buildTicks:function(){var t,e,i,n=this,o=n.min,r=n.max,a=n.options,s=a.ticks,l=a.time,c=n._timestamps,u=[],h=n.getLabelCapacity(o),d=s.source,p=a.distribution;for(c="data"===d||"auto"===d&&"series"===p?c.data:"labels"===d?c.labels:function(t,e,i,n){var o,r=t._adapter,a=t.options,s=a.time,l=s.unit||on(s.minUnit,e,i,n),c=Wi([s.stepSize,s.unitStepSize,1]),u="week"===l&&s.isoWeekday,h=e,d=[];if(u&&(h=+r.startOf(h,"isoWeek",u)),h=+r.startOf(h,u?"day":l),r.diff(i,e,l)>1e5*c)throw e+" and "+i+" are too far apart with stepSize of "+c+" "+l;for(o=h;o<i;o=+r.add(o,c,l))d.push(o);return o!==i&&"ticks"!==a.bounds||d.push(o),d}(n,o,r,h),"ticks"===a.bounds&&c.length&&(o=c[0],r=c[c.length-1]),o=nn(n,Ji(a))||o,r=nn(n,Qi(a))||r,t=0,e=c.length;t<e;++t)(i=c[t])>=o&&i<=r&&u.push(i);return n.min=o,n.max=r,n._unit=l.unit||(s.autoSkip?on(l.minUnit,n.min,n.max,h):function(t,e,i,n,o){var r,a;for(r=$i.length-1;r>=$i.indexOf(i);r--)if(a=$i[r],Xi[a].common&&t._adapter.diff(o,n,a)>=e-1)return a;return $i[i?$i.indexOf(i):0]}(n,u.length,l.minUnit,n.min,n.max)),n._majorUnit=s.major.enabled&&"year"!==n._unit?function(t){for(var e=$i.indexOf(t)+1,i=$i.length;e<i;++e)if(Xi[$i[e]].common)return $i[e]}(n._unit):void 0,n._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var o,r,a,s,l,c=[],u=[e];for(o=0,r=t.length;o<r;++o)(s=t[o])>e&&s<i&&u.push(s);for(u.push(i),o=0,r=u.length;o<r;++o)l=u[o+1],a=u[o-1],s=u[o],void 0!==a&&void 0!==l&&Math.round((l+a)/2)===s||c.push({time:s,pos:o/(r-1)});return c}(n._timestamps.data,o,r,p),n._offsets=function(t,e,i,n,o){var r,a,s=0,l=0;return o.offset&&e.length&&(r=tn(t,"time",e[0],"pos"),s=1===e.length?1-r:(tn(t,"time",e[1],"pos")-r)/2,a=tn(t,"time",e[e.length-1],"pos"),l=1===e.length?a:(a-tn(t,"time",e[e.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(n._table,u,0,0,a),s.reverse&&u.reverse(),rn(n,u,n._majorUnit)},getLabelForIndex:function(t,e){var i=this,n=i._adapter,o=i.chart.data,r=i.options.time,a=o.labels&&t<o.labels.length?o.labels[t]:"",s=o.datasets[e].data[t];return G.isObject(s)&&(a=i.getRightValue(s)),r.tooltipFormat?n.format(en(i,a),r.tooltipFormat):"string"==typeof a?a:n.format(en(i,a),r.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var o=this._adapter,r=this.options,a=r.time.displayFormats,s=a[this._unit],l=this._majorUnit,c=a[l],u=i[e],h=r.ticks,d=l&&c&&u&&u.major,p=o.format(t,n||(d?c:s)),f=d?h.major:h.minor,g=Wi([f.callback,f.userCallback,h.callback,h.userCallback]);return g?g(p,e,i):p},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this._offsets,i=tn(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+i)*e.factor)},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=nn(this,t)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end,n=tn(this._table,"pos",i,"time");return this._adapter._create(n)},_getLabelSize:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=G.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),r=Math.sin(n),a=Yi(e.fontSize,A.global.defaultFontSize);return{w:i*o+a*r,h:i*r+a*o}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,i=e.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,r=e.tickFormatFunction(t,0,rn(e,[t],e._majorUnit),o),a=e._getLabelSize(r),s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);return e.options.offset&&s--,s>0?s:1}}),sn={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};an._defaults=sn;var ln={category:mi,linear:Ei,logarithmic:Pi,radialLinear:Hi,time:an},cn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Qe._date.override("function"==typeof t?{_id:"moment",formats:function(){return cn},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=t(e,i):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,i){return t(e).format(i)},add:function(e,i,n){return t(e).add(i,n).valueOf()},diff:function(e,i,n){return t(e).diff(t(i),n)},startOf:function(e,i,n){return e=t(e),"isoWeek"===i?e.isoWeekday(n).valueOf():e.startOf(i).valueOf()},endOf:function(e,i){return t(e).endOf(i).valueOf()},_create:function(e){return t(e)}}:{}),A._set("global",{plugins:{filler:{propagate:!0}}});var un={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),o=n&&i.isDatasetVisible(e)&&n.dataset._children||[],r=o.length||0;return r?function(t,e){return e<r&&o[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return G.isArray(e)?function(t,i){return e[i]}:function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}};function hn(t,e,i){var n,o=t._model||{},r=o.fill;if(void 0===r&&(r=!!o.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(n=parseFloat(r,10),isFinite(n)&&Math.floor(n)===n)return"-"!==r[0]&&"+"!==r[0]||(n=e+n),!(n===e||n<0||n>=i)&&n;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function dn(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,i,n,o,r,a=t.el._scale,s=a.options,l=a.chart.data.labels.length,c=t.fill,u=[];if(!l)return null;for(e=s.ticks.reverse?a.max:a.min,i=s.ticks.reverse?a.min:a.max,n=a.getPointPositionForValue(0,e),o=0;o<l;++o)r="start"===c||"end"===c?a.getPointPositionForValue(o,"start"===c?e:i):a.getBasePosition(o),s.gridLines.circular&&(r.cx=n.x,r.cy=n.y,r.angle=a.getIndexAngle(o)-Math.PI/2),u.push(r);return u}(t):function(t){var e,i=t.el._model||{},n=t.el._scale||{},o=t.fill,r=null;if(isFinite(o))return null;if("start"===o?r=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===o?r=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?r=i.scaleZero:n.getBasePixel&&(r=n.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if(G.isFinite(r))return{x:(e=n.isHorizontal())?r:null,y:e?null:r}}return null}(t)}function pn(t,e,i){var n,o=t[e].fill,r=[e];if(!i)return o;for(;!1!==o&&-1===r.indexOf(o);){if(!isFinite(o))return o;if(!(n=t[o]))return!1;if(n.visible)return o;r.push(o),o=n.fill}return!1}function fn(t){var e=t.fill,i="dataset";return!1===e?null:(isFinite(e)||(i="boundary"),un[i](t))}function gn(t){return t&&!t.skip}function mn(t,e,i,n,o){var r,a,s,l;if(n&&o){for(t.moveTo(e[0].x,e[0].y),r=1;r<n;++r)G.canvas.lineTo(t,e[r-1],e[r]);if(void 0===i[0].angle)for(t.lineTo(i[o-1].x,i[o-1].y),r=o-1;r>0;--r)G.canvas.lineTo(t,i[r],i[r-1],!0);else for(a=i[0].cx,s=i[0].cy,l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2)),r=o-1;r>0;--r)t.arc(a,s,l,i[r].angle,i[r-1].angle,!0)}}function vn(t,e,i,n,o,r){var a,s,l,c,u,h,d,p,f=e.length,g=n.spanGaps,m=[],v=[],y=0,b=0;for(t.beginPath(),a=0,s=f;a<s;++a)u=i(c=e[l=a%f]._view,l,n),h=gn(c),d=gn(u),r&&void 0===p&&h&&(s=f+(p=a+1)),h&&d?(y=m.push(c),b=v.push(u)):y&&b&&(g?(h&&m.push(c),d&&v.push(u)):(mn(t,m,v,y,b),y=b=0,m=[],v=[]));mn(t,m,v,y,b),t.closePath(),t.fillStyle=o,t.fill()}var yn={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,o,r,a=(t.data.datasets||[]).length,s=e.propagate,l=[];for(n=0;n<a;++n)r=null,(o=(i=t.getDatasetMeta(n)).dataset)&&o._model&&o instanceof _t.Line&&(r={visible:t.isDatasetVisible(n),fill:hn(o,n,a),chart:t,el:o}),i.$filler=r,l.push(r);for(n=0;n<a;++n)(r=l[n])&&(r.fill=pn(l,n,s),r.boundary=dn(r),r.mapper=fn(r))},beforeDatasetsDraw:function(t){var e,i,n,o,r,a,s,l=t._getSortedVisibleDatasetMetas(),c=t.ctx;for(i=l.length-1;i>=0;--i)(e=l[i].$filler)&&e.visible&&(o=(n=e.el)._view,r=n._children||[],a=e.mapper,s=o.backgroundColor||A.global.defaultColor,a&&s&&r.length&&(G.canvas.clipArea(c,t.chartArea),vn(c,r,a,o,s,n._loop),G.canvas.unclipArea(c)))}},bn=G.rtl.getRtlAdapter,wn=G.noop,_n=G.valueOrDefault;function xn(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}A._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,o=n.getDatasetMeta(i);o.hidden=null===o.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,i=t.options.legend||{},n=i.labels&&i.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(i){var o=i.controller.getStyle(n?0:void 0);return{text:e[i.index].label,fillStyle:o.backgroundColor,hidden:!t.isDatasetVisible(i.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:i.index}}),this)}}},legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data.datasets;for(o.setAttribute("class",t.id+"-legend"),e=0,i=r.length;e<i;e++)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[e].backgroundColor,r[e].label&&n.appendChild(document.createTextNode(r[e].label));return o.outerHTML}});var Cn=U.extend({initialize:function(t){G.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:wn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:wn,beforeSetDimensions:wn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:wn,beforeBuildLabels:wn,buildLabels:function(){var t=this,e=t.options.labels||{},i=G.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter((function(i){return e.filter(i,t.chart.data)}))),t.options.reverse&&i.reverse(),t.legendItems=i},afterBuildLabels:wn,beforeFit:wn,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,o=t.ctx,r=G.options._parseFont(i),a=r.size,s=t.legendHitBoxes=[],l=t.minSize,c=t.isHorizontal();if(c?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n){if(o.font=r.string,c){var u=t.lineWidths=[0],h=0;o.textAlign="left",o.textBaseline="middle",G.each(t.legendItems,(function(t,e){var n=xn(i,a)+a/2+o.measureText(t.text).width;(0===e||u[u.length-1]+n+2*i.padding>l.width)&&(h+=a+i.padding,u[u.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:n,height:a},u[u.length-1]+=n+i.padding})),l.height+=h}else{var d=i.padding,p=t.columnWidths=[],f=t.columnHeights=[],g=i.padding,m=0,v=0;G.each(t.legendItems,(function(t,e){var n=xn(i,a)+a/2+o.measureText(t.text).width;e>0&&v+a+2*d>l.height&&(g+=m+i.padding,p.push(m),f.push(v),m=0,v=0),m=Math.max(m,n),v+=a+d,s[e]={left:0,top:0,width:n,height:a}})),g+=m,p.push(m),f.push(v),l.width+=g}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:wn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,i=e.labels,n=A.global,o=n.defaultColor,r=n.elements.line,a=t.height,s=t.columnHeights,l=t.width,c=t.lineWidths;if(e.display){var u,h=bn(e.rtl,t.left,t.minSize.width),d=t.ctx,p=_n(i.fontColor,n.defaultFontColor),f=G.options._parseFont(i),g=f.size;d.textAlign=h.textAlign("left"),d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=p,d.fillStyle=p,d.font=f.string;var m=xn(i,g),v=t.legendHitBoxes,y=function(t,n){switch(e.align){case"start":return i.padding;case"end":return t-n;default:return(t-n+i.padding)/2}},b=t.isHorizontal();u=b?{x:t.left+y(l,c[0]),y:t.top+i.padding,line:0}:{x:t.left+i.padding,y:t.top+y(a,s[0]),line:0},G.rtl.overrideTextDirection(t.ctx,e.textDirection);var w=g+i.padding;G.each(t.legendItems,(function(e,n){var p=d.measureText(e.text).width,f=m+g/2+p,_=u.x,x=u.y;h.setWidth(t.minSize.width),b?n>0&&_+f+i.padding>t.left+t.minSize.width&&(x=u.y+=w,u.line++,_=u.x=t.left+y(l,c[u.line])):n>0&&x+w>t.top+t.minSize.height&&(_=u.x=_+t.columnWidths[u.line]+i.padding,u.line++,x=u.y=t.top+y(a,s[u.line]));var C=h.x(_);!function(t,e,n){if(!(isNaN(m)||m<=0)){d.save();var a=_n(n.lineWidth,r.borderWidth);if(d.fillStyle=_n(n.fillStyle,o),d.lineCap=_n(n.lineCap,r.borderCapStyle),d.lineDashOffset=_n(n.lineDashOffset,r.borderDashOffset),d.lineJoin=_n(n.lineJoin,r.borderJoinStyle),d.lineWidth=a,d.strokeStyle=_n(n.strokeStyle,o),d.setLineDash&&d.setLineDash(_n(n.lineDash,r.borderDash)),i&&i.usePointStyle){var s=m*Math.SQRT2/2,l=h.xPlus(t,m/2),c=e+g/2;G.canvas.drawPoint(d,n.pointStyle,s,l,c,n.rotation)}else d.fillRect(h.leftForLtr(t,m),e,m,g),0!==a&&d.strokeRect(h.leftForLtr(t,m),e,m,g);d.restore()}}(C,x,e),v[n].left=h.leftForLtr(C,v[n].width),v[n].top=x,function(t,e,i,n){var o=g/2,r=h.xPlus(t,m+o),a=e+o;d.fillText(i.text,r,a),i.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(r,a),d.lineTo(h.xPlus(r,n),a),d.stroke())}(C,x,e,p),b?u.x+=f+i.padding:u.y+=w})),G.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var i,n,o,r=this;if(t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom)for(o=r.legendHitBoxes,i=0;i<o.length;++i)if(t>=(n=o[i]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return r.legendItems[i];return null},handleEvent:function(t){var e,i=this,n=i.options,o="mouseup"===t.type?"click":t.type;if("mousemove"===o){if(!n.onHover&&!n.onLeave)return}else{if("click"!==o)return;if(!n.onClick)return}e=i._getLegendItemAt(t.x,t.y),"click"===o?e&&n.onClick&&n.onClick.call(i,t.native,e):(n.onLeave&&e!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,t.native,i._hoveredItem),i._hoveredItem=e),n.onHover&&e&&n.onHover.call(i,t.native,e))}});function En(t,e){var i=new Cn({ctx:t.ctx,options:e,chart:t});fe.configure(t,i,e),fe.addBox(t,i),t.legend=i}var kn={id:"legend",_element:Cn,beforeInit:function(t){var e=t.options.legend;e&&En(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(G.mergeIf(e,A.global.legend),i?(fe.configure(t,i,e),i.options=e):En(t,e)):i&&(fe.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}},Tn=G.noop;A._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Sn=U.extend({initialize:function(t){G.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:Tn,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Tn,beforeSetDimensions:Tn,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Tn,beforeBuildLabels:Tn,buildLabels:Tn,afterBuildLabels:Tn,beforeFit:Tn,fit:function(){var t,e=this,i=e.options,n=e.minSize={},o=e.isHorizontal();i.display?(t=(G.isArray(i.text)?i.text.length:1)*G.options._parseFont(i).lineHeight+2*i.padding,e.width=n.width=o?e.maxWidth:t,e.height=n.height=o?t:e.maxHeight):e.width=n.width=e.height=n.height=0},afterFit:Tn,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=t.options;if(i.display){var n,o,r,a=G.options._parseFont(i),s=a.lineHeight,l=s/2+i.padding,c=0,u=t.top,h=t.left,d=t.bottom,p=t.right;e.fillStyle=G.valueOrDefault(i.fontColor,A.global.defaultFontColor),e.font=a.string,t.isHorizontal()?(o=h+(p-h)/2,r=u+l,n=p-h):(o="left"===i.position?h+l:p-l,r=u+(d-u)/2,n=d-u,c=Math.PI*("left"===i.position?-.5:.5)),e.save(),e.translate(o,r),e.rotate(c),e.textAlign="center",e.textBaseline="middle";var f=i.text;if(G.isArray(f))for(var g=0,m=0;m<f.length;++m)e.fillText(f[m],0,g,n),g+=s;else e.fillText(f,0,0,n);e.restore()}}});function Mn(t,e){var i=new Sn({ctx:t.ctx,options:e,chart:t});fe.configure(t,i,e),fe.addBox(t,i),t.titleBlock=i}var Rn={},Pn=yn,Ln=kn,On={id:"title",_element:Sn,beforeInit:function(t){var e=t.options.title;e&&Mn(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(G.mergeIf(e,A.global.title),i?(fe.configure(t,i,e),i.options=e):Mn(t,e)):i&&(fe.removeBox(t,i),delete t.titleBlock)}};for(var Dn in Rn.filler=Pn,Rn.legend=Ln,Rn.title=On,$e.helpers=G,function(){function t(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function e(t){return null!=t&&"none"!==t}function i(i,n,o){var r=document.defaultView,a=G._getParentNode(i),s=r.getComputedStyle(i)[n],l=r.getComputedStyle(a)[n],c=e(s),u=e(l),h=Number.POSITIVE_INFINITY;return c||u?Math.min(c?t(s,i,o):h,u?t(l,a,o):h):"none"}G.where=function(t,e){if(G.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return G.each(t,(function(t){e(t)&&i.push(t)})),i},G.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=void 0===i?t:i;for(var n=0,o=t.length;n<o;++n)if(e.call(i,t[n],n,t))return n;return-1},G.findNextWhere=function(t,e,i){G.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var o=t[n];if(e(o))return o}},G.findPreviousWhere=function(t,e,i){G.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;n>=0;n--){var o=t[n];if(e(o))return o}},G.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},G.almostEquals=function(t,e,i){return Math.abs(t-e)<i},G.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t},G.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},G.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},G.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},G.toRadians=function(t){return t*(Math.PI/180)},G.toDegrees=function(t){return t*(180/Math.PI)},G._decimalPlaces=function(t){if(G.isFinite(t)){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}},G.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:o}},G.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},G.aliasPixel=function(t){return t%2==0?0:.5},G._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio,o=i/2;return Math.round((e-o)*n)/n+o},G.splineCurve=function(t,e,i,n){var o=t.skip?e:t,r=e,a=i.skip?e:i,s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),c=s/(s+l),u=l/(s+l),h=n*(c=isNaN(c)?0:c),d=n*(u=isNaN(u)?0:u);return{previous:{x:r.x-h*(a.x-o.x),y:r.y-h*(a.y-o.y)},next:{x:r.x+d*(a.x-o.x),y:r.y+d*(a.y-o.y)}}},G.EPSILON=Number.EPSILON||1e-14,G.splineCurveMonotone=function(t){var e,i,n,o,r,a,s,l,c,u=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),h=u.length;for(e=0;e<h;++e)if(!(n=u[e]).model.skip){if(i=e>0?u[e-1]:null,(o=e<h-1?u[e+1]:null)&&!o.model.skip){var d=o.model.x-n.model.x;n.deltaK=0!==d?(o.model.y-n.model.y)/d:0}!i||i.model.skip?n.mK=n.deltaK:!o||o.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(e=0;e<h-1;++e)n=u[e],o=u[e+1],n.model.skip||o.model.skip||(G.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=o.mK=0:(r=n.mK/n.deltaK,a=o.mK/n.deltaK,(l=Math.pow(r,2)+Math.pow(a,2))<=9||(s=3/Math.sqrt(l),n.mK=r*s*n.deltaK,o.mK=a*s*n.deltaK)));for(e=0;e<h;++e)(n=u[e]).model.skip||(i=e>0?u[e-1]:null,o=e<h-1?u[e+1]:null,i&&!i.model.skip&&(c=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-c,n.model.controlPointPreviousY=n.model.y-c*n.mK),o&&!o.model.skip&&(c=(o.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+c,n.model.controlPointNextY=n.model.y+c*n.mK))},G.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},G.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},G.niceNum=function(t,e){var i=Math.floor(G.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},G.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},G.getRelativePosition=function(t,e){var i,n,o=t.originalEvent||t,r=t.target||t.srcElement,a=r.getBoundingClientRect(),s=o.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=o.clientX,n=o.clientY);var l=parseFloat(G.getStyle(r,"padding-left")),c=parseFloat(G.getStyle(r,"padding-top")),u=parseFloat(G.getStyle(r,"padding-right")),h=parseFloat(G.getStyle(r,"padding-bottom")),d=a.right-a.left-l-u,p=a.bottom-a.top-c-h;return{x:i=Math.round((i-a.left-l)/d*r.width/e.currentDevicePixelRatio),y:n=Math.round((n-a.top-c)/p*r.height/e.currentDevicePixelRatio)}},G.getConstraintWidth=function(t){return i(t,"max-width","clientWidth")},G.getConstraintHeight=function(t){return i(t,"max-height","clientHeight")},G._calculatePadding=function(t,e,i){return(e=G.getStyle(t,e)).indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)},G._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},G.getMaximumWidth=function(t){var e=G._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-G._calculatePadding(e,"padding-left",i)-G._calculatePadding(e,"padding-right",i),o=G.getConstraintWidth(t);return isNaN(o)?n:Math.min(n,o)},G.getMaximumHeight=function(t){var e=G._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-G._calculatePadding(e,"padding-top",i)-G._calculatePadding(e,"padding-bottom",i),o=G.getConstraintHeight(t);return isNaN(o)?n:Math.min(n,o)},G.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},G.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,o=t.height,r=t.width;n.height=o*i,n.width=r*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=o+"px",n.style.width=r+"px")}},G.fontString=function(t,e,i){return e+" "+t+"px "+i},G.longestText=function(t,e,i,n){var o=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},r=n.garbageCollect=[],n.font=e),t.font=e;var a,s,l,c,u,h=0,d=i.length;for(a=0;a<d;a++)if(null!=(c=i[a])&&!0!==G.isArray(c))h=G.measureText(t,o,r,h,c);else if(G.isArray(c))for(s=0,l=c.length;s<l;s++)null==(u=c[s])||G.isArray(u)||(h=G.measureText(t,o,r,h,u));var p=r.length/2;if(p>i.length){for(a=0;a<p;a++)delete o[r[a]];r.splice(0,p)}return h},G.measureText=function(t,e,i,n,o){var r=e[o];return r||(r=e[o]=t.measureText(o).width,i.push(o)),r>n&&(n=r),n},G.numberOfLabelLines=function(t){var e=1;return G.each(t,(function(t){G.isArray(t)&&t.length>e&&(e=t.length)})),e},G.color=x?function(t){return t instanceof CanvasGradient&&(t=A.global.defaultColor),x(t)}:function(t){return console.error("Color.js not found!"),t},G.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:G.color(t).saturate(.5).darken(.1).rgbString()}}(),$e._adapters=Qe,$e.Animation=$,$e.animationService=K,$e.controllers=Kt,$e.DatasetController=it,$e.defaults=A,$e.Element=U,$e.elements=_t,$e.Interaction=oe,$e.layouts=fe,$e.platform=Me,$e.plugins=Re,$e.Scale=fi,$e.scaleService=Pe,$e.Ticks=ti,$e.Tooltip=Ge,$e.helpers.each(ln,(function(t,e){$e.scaleService.registerScaleType(e,t,t._defaults)})),Rn)Rn.hasOwnProperty(Dn)&&$e.plugins.register(Rn[Dn]);$e.platform.initialize();var In=$e;return"undefined"!=typeof window&&(window.Chart=$e),$e.Chart=$e,$e.Legend=Rn.legend._element,$e.Title=Rn.title._element,$e.pluginService=$e.plugins,$e.PluginBase=$e.Element.extend({}),$e.canvasHelpers=$e.helpers.canvas,$e.layoutService=$e.layouts,$e.LinearScaleBase=wi,$e.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){$e[t]=function(e,i){return new $e(e,$e.helpers.merge(i||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),In}(function(){try{return i(2470)}catch(t){}}())},9523:function(t,e,i){t.exports=function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,i=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),n={toTextLines:function(t){var i,n=[];for(t=[].concat(t);t.length;)"string"==typeof(i=t.pop())?n.unshift.apply(n,i.split("\n")):Array.isArray(i)?t.push.apply(t,i):e.isNullOrUndef(t)||n.unshift(""+i);return n},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,i){var n,o=[].concat(e),r=o.length,a=t.font,s=0;for(t.font=i.string,n=0;n<r;++n)s=Math.max(t.measureText(o[n]).width,s);return t.font=a,{height:r*i.lineHeight,width:s}},parseFont:function(i){var o=t.defaults.global,r=e.valueOrDefault(i.size,o.defaultFontSize),a={family:e.valueOrDefault(i.family,o.defaultFontFamily),lineHeight:e.options.toLineHeight(i.lineHeight,r),size:r,style:e.valueOrDefault(i.style,o.defaultFontStyle),weight:e.valueOrDefault(i.weight,null),string:""};return a.string=n.toFontString(a),a},bound:function(t,e,i){return Math.max(t,Math.min(e,i))},arrayDiff:function(t,e){var i,n,o,r,a=t.slice(),s=[];for(i=0,o=e.length;i<o;++i)r=e[i],-1===(n=a.indexOf(r))?s.push([r,1]):a.splice(n,1);for(i=0,o=a.length;i<o;++i)s.push([a[i],-1]);return s},rasterize:function(t){return Math.round(t*i)/i}};function o(t,e){var i=e.x,n=e.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=t.x-i,r=t.y-n,a=Math.sqrt(o*o+r*r);return{x:a?o/a:0,y:a?r/a:-1}}function r(t,e,i){var n=0;return t<i.left?n|=1:t>i.right&&(n|=2),e<i.top?n|=8:e>i.bottom&&(n|=4),n}function a(t,e){var i,n,o=e.anchor,a=t;return e.clamp&&(a=function(t,e){for(var i,n,o,a=t.x0,s=t.y0,l=t.x1,c=t.y1,u=r(a,s,e),h=r(l,c,e);u|h&&!(u&h);)8&(i=u||h)?(n=a+(l-a)*(e.top-s)/(c-s),o=e.top):4&i?(n=a+(l-a)*(e.bottom-s)/(c-s),o=e.bottom):2&i?(o=s+(c-s)*(e.right-a)/(l-a),n=e.right):1&i&&(o=s+(c-s)*(e.left-a)/(l-a),n=e.left),i===u?u=r(a=n,s=o,e):h=r(l=n,c=o,e);return{x0:a,x1:l,y0:s,y1:c}}(a,e.area)),"start"===o?(i=a.x0,n=a.y0):"end"===o?(i=a.x1,n=a.y1):(i=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),function(t,e,i,n,o){switch(o){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:o*=Math.PI/180,i=Math.cos(o),n=Math.sin(o)}return{x:t,y:e,vx:i,vy:n}}(i,n,t.vx,t.vy,e.align)}var s=function(t,e){var i=(t.startAngle+t.endAngle)/2,n=Math.cos(i),o=Math.sin(i),r=t.innerRadius,s=t.outerRadius;return a({x0:t.x+n*r,y0:t.y+o*r,x1:t.x+n*s,y1:t.y+o*s,vx:n,vy:o},e)},l=function(t,e){var i=o(t,e.origin),n=i.x*t.radius,r=i.y*t.radius;return a({x0:t.x-n,y0:t.y-r,x1:t.x+n,y1:t.y+r,vx:i.x,vy:i.y},e)},c=function(t,e){var i=o(t,e.origin),n=t.x,r=t.y,s=0,l=0;return t.horizontal?(n=Math.min(t.x,t.base),s=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),l=Math.abs(t.base-t.y)),a({x0:n,y0:r+l,x1:n+s,y1:r,vx:i.x,vy:i.y},e)},u=function(t,e){var i=o(t,e.origin);return a({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:i.x,vy:i.y},e)},h=t.helpers,d=n.rasterize;function p(t){var e=t._model.horizontal,i=t._scale||e&&t._xScale||t._yScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function f(t,e,i){var n=t.shadowBlur,o=i.stroked,r=d(i.x),a=d(i.y),s=d(i.w);o&&t.strokeText(e,r,a,s),i.filled&&(n&&o&&(t.shadowBlur=0),t.fillText(e,r,a,s),n&&o&&(t.shadowBlur=n))}var g=function(t,e,i,n){var o=this;o._config=t,o._index=n,o._model=null,o._rects=null,o._ctx=e,o._el=i};h.extend(g.prototype,{_modelize:function(e,i,o,r){var a,d=this._index,f=h.options.resolve,g=n.parseFont(f([o.font,{}],r,d)),m=f([o.color,t.defaults.global.defaultFontColor],r,d);return{align:f([o.align,"center"],r,d),anchor:f([o.anchor,"center"],r,d),area:r.chart.chartArea,backgroundColor:f([o.backgroundColor,null],r,d),borderColor:f([o.borderColor,null],r,d),borderRadius:f([o.borderRadius,0],r,d),borderWidth:f([o.borderWidth,0],r,d),clamp:f([o.clamp,!1],r,d),clip:f([o.clip,!1],r,d),color:m,display:e,font:g,lines:i,offset:f([o.offset,0],r,d),opacity:f([o.opacity,1],r,d),origin:p(this._el),padding:h.options.toPadding(f([o.padding,0],r,d)),positioner:(a=this._el,a instanceof t.elements.Arc?s:a instanceof t.elements.Point?l:a instanceof t.elements.Rectangle?c:u),rotation:f([o.rotation,0],r,d)*(Math.PI/180),size:n.textSize(this._ctx,i,g),textAlign:f([o.textAlign,"start"],r,d),textShadowBlur:f([o.textShadowBlur,0],r,d),textShadowColor:f([o.textShadowColor,m],r,d),textStrokeColor:f([o.textStrokeColor,m],r,d),textStrokeWidth:f([o.textStrokeWidth,0],r,d)}},update:function(t){var e,i,o,r=this,a=null,s=null,l=r._index,c=r._config,u=h.options.resolve([c.display,!0],t,l);u&&(e=t.dataset.data[l],i=h.valueOrDefault(h.callback(c.formatter,[e,t]),e),(o=h.isNullOrUndef(i)?[]:n.toTextLines(i)).length&&(s=function(t){var e=t.borderWidth||0,i=t.padding,n=t.size.height,o=t.size.width,r=-o/2,a=-n/2;return{frame:{x:r-i.left-e,y:a-i.top-e,w:o+i.width+2*e,h:n+i.height+2*e},text:{x:r,y:a,w:o,h:n}}}(a=r._modelize(u,o,c,t)))),r._model=a,r._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var i,o=t.ctx,r=this._model,a=this._rects;this.visible()&&(o.save(),r.clip&&(i=r.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=n.bound(0,r.opacity,1),o.translate(d(e.x),d(e.y)),o.rotate(r.rotation),function(t,e,i){var n=i.backgroundColor,o=i.borderColor,r=i.borderWidth;(n||o&&r)&&(t.beginPath(),h.canvas.roundedRect(t,d(e.x)+r/2,d(e.y)+r/2,d(e.w)-r,d(e.h)-r,i.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),o&&r&&(t.strokeStyle=o,t.lineWidth=r,t.lineJoin="miter",t.stroke()))}(o,a.frame,r),function(t,e,i,n){var o,r=n.textAlign,a=n.color,s=!!a,l=n.font,c=e.length,u=n.textStrokeColor,h=n.textStrokeWidth,d=u&&h;if(c&&(s||d))for(i=function(t,e,i){var n=i.lineHeight,o=t.w,r=t.x;return"center"===e?r+=o/2:"end"!==e&&"right"!==e||(r+=o),{h:n,w:o,x:r,y:t.y+n/2}}(i,r,l),t.font=l.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,s&&(t.fillStyle=a),d&&(t.lineJoin="round",t.lineWidth=h,t.strokeStyle=u),o=0,c=e.length;o<c;++o)f(t,e[o],{stroked:d,filled:s,w:i.w,x:i.x,y:i.y+i.h*o})}(o,r.lines,a.text,r),o.restore())}});var m=t.helpers,v=Number.MIN_SAFE_INTEGER||-9007199254740991,y=Number.MAX_SAFE_INTEGER||9007199254740991;function b(t,e,i){var n=Math.cos(i),o=Math.sin(i),r=e.x,a=e.y;return{x:r+n*(t.x-r)-o*(t.y-a),y:a+o*(t.x-r)+n*(t.y-a)}}function w(t,e){var i,n,o,r,a,s=y,l=v,c=e.origin;for(i=0;i<t.length;++i)o=(n=t[i]).x-c.x,r=n.y-c.y,a=e.vx*o+e.vy*r,s=Math.min(s,a),l=Math.max(l,a);return{min:s,max:l}}function _(t,e){var i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var x=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function C(t,e,i){var n=e.positioner(t,e),o=n.vx,r=n.vy;if(!o&&!r)return{x:n.x,y:n.y};var a=i.w,s=i.h,l=e.rotation,c=Math.abs(a/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),u=Math.abs(a/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),h=1/Math.max(Math.abs(o),Math.abs(r));return c*=o*h,u*=r*h,c+=e.offset*o,u+=e.offset*r,{x:n.x+c,y:n.y+u}}m.extend(x.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,i){this._rotation=i,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=b(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,i,n,o=this._points(),r=t._points(),a=[_(o[0],o[1]),_(o[0],o[3])];for(this._rotation!==t._rotation&&a.push(_(r[0],r[1]),_(r[0],r[3])),e=0;e<a.length;++e)if(i=w(o,a[e]),n=w(r,a[e]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,i=this.center();return[b({x:t.x,y:t.y},i,e),b({x:t.x+t.w,y:t.y},i,e),b({x:t.x+t.w,y:t.y+t.h},i,e),b({x:t.x,y:t.y+t.h},i,e)]}});var E={prepare:function(t){var e,i,n,o,r,a=[];for(e=0,n=t.length;e<n;++e)for(i=0,o=t[e].length;i<o;++i)r=t[e][i],a.push(r),r.$layout={_box:new x,_hidable:!1,_visible:!0,_set:e,_idx:i};return a.sort((function(t,e){var i=t.$layout,n=e.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx})),this.update(a),a},update:function(t){var e,i,n,o,r,a=!1;for(e=0,i=t.length;e<i;++e)o=(n=t[e]).model(),(r=n.$layout)._hidable=o&&"auto"===o.display,r._visible=n.visible(),a|=r._hidable;a&&function(t){var e,i,n,o,r,a;for(e=0,i=t.length;e<i;++e)(o=(n=t[e]).$layout)._visible&&(r=n.geometry(),a=C(n._el._model,n.model(),r),o._box.update(a,r,n.rotation()));!function(t,e){var i,n,o,r;for(i=t.length-1;i>=0;--i)for(o=t[i].$layout,n=i-1;n>=0&&o._visible;--n)(r=t[n].$layout)._visible&&o._box.intersects(r._box)&&e(o,r)}(t,(function(t,e){var i=t._hidable,n=e._hidable;i&&n||n?e._visible=!1:i&&(t._visible=!1)}))}(t)},lookup:function(t,e){var i,n;for(i=t.length-1;i>=0;--i)if((n=t[i].$layout)&&n._visible&&n._box.contains(e))return t[i];return null},draw:function(t,e){var i,n,o,r,a,s;for(i=0,n=e.length;i<n;++i)(r=(o=e[i]).$layout)._visible&&(a=o.geometry(),s=C(o._el._view,o.model(),a),r._box.update(s,a,o.rotation()),o.draw(t,s))}},k=t.helpers,T={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(k.isNullOrUndef(t))return null;var e,i,n,o=t;if(k.isObject(t))if(k.isNullOrUndef(t.label))if(k.isNullOrUndef(t.r))for(o="",n=0,i=(e=Object.keys(t)).length;n<i;++n)o+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else o=t.r;else o=t.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},S=t.helpers,M="$datalabels";function R(t,e,i){if(e){var n,o=i.$context,r=i.$groups;e[r._set]&&(n=e[r._set][r._key])&&!0===S.callback(n,[o])&&(t[M]._dirty=!0,i.update(o))}}function P(t,e){var i,n,o=t[M],r=o._listeners;if(r.enter||r.leave){if("mousemove"===e.type)n=E.lookup(o._labels,e);else if("mouseout"!==e.type)return;i=o._hovered,o._hovered=n,function(t,e,i,n){var o,r;(i||n)&&(i?n?i!==n&&(r=o=!0):r=!0:o=!0,r&&R(t,e.leave,i),o&&R(t,e.enter,n))}(t,r,i,n)}}t.defaults.global.plugins.datalabels=T;var L={id:"datalabels",beforeInit:function(t){t[M]={_actives:[]}},beforeUpdate:function(t){var e=t[M];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,i){var n,o,r,a,s,l,c,u,h=e.index,d=t[M],p=d._datasets[h]=[],f=t.isDatasetVisible(h),m=t.data.datasets[h],v=function(t,e){var i,n,o,r=t.datalabels,a=[];return!1===r?null:(!0===r&&(r={}),e=S.merge({},[e,r]),n=e.labels||{},o=Object.keys(n),delete e.labels,o.length?o.forEach((function(t){n[t]&&a.push(S.merge({},[e,n[t],{_key:t}]))})):a.push(e),i=a.reduce((function(t,e){return S.each(e.listeners||{},(function(i,n){t[n]=t[n]||{},t[n][e._key||"$default"]=i})),delete e.listeners,t}),{}),{labels:a,listeners:i})}(m,i),y=e.meta.data||[],b=t.ctx;for(b.save(),n=0,r=y.length;n<r;++n)if((c=y[n])[M]=[],f&&c&&!c.hidden&&!c._model.skip)for(o=0,a=v.labels.length;o<a;++o)l=(s=v.labels[o])._key,(u=new g(s,b,c,n)).$groups={_set:h,_key:l||"$default"},u.$context={active:!1,chart:t,dataIndex:n,dataset:m,datasetIndex:h},u.update(u.$context),c[M].push(u),p.push(u);b.restore(),S.merge(d._listeners,v.listeners,{merger:function(t,i,n){i[t]=i[t]||{},i[t][e.index]=n[t],d._listened=!0}})},afterUpdate:function(t,e){t[M]._labels=E.prepare(t[M]._datasets,e)},afterDatasetsDraw:function(t){E.draw(t,t[M]._labels)},beforeEvent:function(t,e){if(t[M]._listened)switch(e.type){case"mousemove":case"mouseout":P(t,e);break;case"click":!function(t,e){var i=t[M],n=i._listeners.click,o=n&&E.lookup(i._labels,e);o&&R(t,n,o)}(t,e)}},afterEvent:function(e){var i,o,r,a,s,l,c,u=e[M],h=u._actives,d=u._actives=e.lastActive||[],p=n.arrayDiff(h,d);for(i=0,o=p.length;i<o;++i)if((s=p[i])[1])for(r=0,a=(c=s[0][M]||[]).length;r<a;++r)(l=c[r]).$context.active=1===s[1],l.update(l.$context);(u._dirty||p.length)&&(E.update(u._labels),function(e){if(!e.animating){for(var i=t.animationService.animations,n=0,o=i.length;n<o;++n)if(i[n].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete u._dirty}};return t.plugins.register(L),L}(i(7757))},5792:function(t){t.exports=function(){"use strict";for(var t=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t<e?e:t>i?i:t},e={},i=0,n=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<n.length;i+=1){var o=n[i];e["[object "+o+"]"]=o.toLowerCase()}var r=function(t){return e[Object.prototype.toString.call(t)]||"object"},a=Math.PI,s={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var i=0;i<=3;i++)i<3?((e[i]<0||e[i]>255)&&(e._clipped=!0),e[i]=t(e[i],0,255)):3===i&&(e[i]=t(e[i],0,1));return e},limit:t,type:r,unpack:function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==r(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==r(t[e])?t[e].toLowerCase():null},PI:a,TWOPI:2*a,PITHIRD:a/3,DEG2RAD:a/180,RAD2DEG:180/a},l={format:{},autodetect:[]},c=s.last,u=s.clip_rgb,h=s.type,d=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=this;if("object"===h(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var n=c(t),o=!1;if(!n){o=!0,l.sorted||(l.autodetect=l.autodetect.sort((function(t,e){return e.p-t.p})),l.sorted=!0);for(var r=0,a=l.autodetect;r<a.length;r+=1){var s=a[r];if(n=s.test.apply(s,t))break}}if(!l.format[n])throw new Error("unknown format: "+t);var d=l.format[n].apply(null,o?t:t.slice(0,-1));i._rgb=u(d),3===i._rgb.length&&i._rgb.push(1)};d.prototype.toString=function(){return"function"==h(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=d,f=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f.Color,[null].concat(t)))};f.Color=p,f.version="2.1.0";var g=f,m=s.unpack,v=Math.max,y=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=m(t,"rgb"),n=i[0],o=i[1],r=i[2],a=1-v(n/=255,v(o/=255,r/=255)),s=a<1?1/(1-a):0,l=(1-n-a)*s,c=(1-o-a)*s,u=(1-r-a)*s;return[l,c,u,a]},b=s.unpack,w=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=(t=b(t,"cmyk"))[0],n=t[1],o=t[2],r=t[3],a=t.length>4?t[4]:1;return 1===r?[0,0,0,a]:[i>=1?0:255*(1-i)*(1-r),n>=1?0:255*(1-n)*(1-r),o>=1?0:255*(1-o)*(1-r),a]},_=s.unpack,x=s.type;p.prototype.cmyk=function(){return y(this._rgb)},g.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["cmyk"])))},l.format.cmyk=w,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=_(t,"cmyk"),"array"===x(t)&&4===t.length)return"cmyk"}});var C=s.unpack,E=s.last,k=function(t){return Math.round(100*t)/100},T=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=C(t,"hsla"),n=E(t)||"lsa";return i[0]=k(i[0]||0),i[1]=k(100*i[1])+"%",i[2]=k(100*i[2])+"%","hsla"===n||i.length>3&&i[3]<1?(i[3]=i.length>3?i[3]:1,n="hsla"):i.length=3,n+"("+i.join(",")+")"},S=s.unpack,M=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=(t=S(t,"rgba"))[0],n=t[1],o=t[2];i/=255,n/=255,o/=255;var r,a,s=Math.min(i,n,o),l=Math.max(i,n,o),c=(l+s)/2;return l===s?(r=0,a=Number.NaN):r=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),i==l?a=(n-o)/(l-s):n==l?a=2+(o-i)/(l-s):o==l&&(a=4+(i-n)/(l-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,r,c,t[3]]:[a,r,c]},R=s.unpack,P=s.last,L=Math.round,O=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=R(t,"rgba"),n=P(t)||"rgb";return"hsl"==n.substr(0,3)?T(M(i),n):(i[0]=L(i[0]),i[1]=L(i[1]),i[2]=L(i[2]),("rgba"===n||i.length>3&&i[3]<1)&&(i[3]=i.length>3?i[3]:1,n="rgba"),n+"("+i.slice(0,"rgb"===n?3:4).join(",")+")")},D=s.unpack,I=Math.round,F=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var n,o,r,a=(e=D(e,"hsl"))[0],s=e[1],l=e[2];if(0===s)n=o=r=255*l;else{var c=[0,0,0],u=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,d=2*l-h,p=a/360;c[0]=p+1/3,c[1]=p,c[2]=p-1/3;for(var f=0;f<3;f++)c[f]<0&&(c[f]+=1),c[f]>1&&(c[f]-=1),6*c[f]<1?u[f]=d+6*(h-d)*c[f]:2*c[f]<1?u[f]=h:3*c[f]<2?u[f]=d+(h-d)*(2/3-c[f])*6:u[f]=d;n=(t=[I(255*u[0]),I(255*u[1]),I(255*u[2])])[0],o=t[1],r=t[2]}return e.length>3?[n,o,r,e[3]]:[n,o,r,1]},A=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,N=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,j=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Z=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,G=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,H=Math.round,B=function(t){var e;if(t=t.toLowerCase().trim(),l.format.named)try{return l.format.named(t)}catch(t){}if(e=t.match(A)){for(var i=e.slice(1,4),n=0;n<3;n++)i[n]=+i[n];return i[3]=1,i}if(e=t.match(N)){for(var o=e.slice(1,5),r=0;r<4;r++)o[r]=+o[r];return o}if(e=t.match(j)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=H(2.55*a[s]);return a[3]=1,a}if(e=t.match(z)){for(var c=e.slice(1,5),u=0;u<3;u++)c[u]=H(2.55*c[u]);return c[3]=+c[3],c}if(e=t.match(Z)){var h=e.slice(1,4);h[1]*=.01,h[2]*=.01;var d=F(h);return d[3]=1,d}if(e=t.match(G)){var p=e.slice(1,4);p[1]*=.01,p[2]*=.01;var f=F(p);return f[3]=+e[4],f}};B.test=function(t){return A.test(t)||N.test(t)||j.test(t)||z.test(t)||Z.test(t)||G.test(t)};var V=B,W=s.type;p.prototype.css=function(t){return O(this._rgb,t)},g.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["css"])))},l.format.css=V,l.autodetect.push({p:5,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===W(t)&&V.test(t))return"css"}});var Y=s.unpack;l.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=Y(t,"rgba");return i[0]*=255,i[1]*=255,i[2]*=255,i},g.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["gl"])))},p.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var q=s.unpack,U=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n=q(t,"rgb"),o=n[0],r=n[1],a=n[2],s=Math.min(o,r,a),l=Math.max(o,r,a),c=l-s,u=100*c/255,h=s/(255-c)*100;return 0===c?i=Number.NaN:(o===l&&(i=(r-a)/c),r===l&&(i=2+(a-o)/c),a===l&&(i=4+(o-r)/c),(i*=60)<0&&(i+=360)),[i,u,h]},X=s.unpack,$=Math.floor,K=function(){for(var t,e,i,n,o,r,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=X(a,"hcg"))[0],d=a[1],p=a[2];p*=255;var f=255*d;if(0===d)l=c=u=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var g=$(h/=60),m=h-g,v=p*(1-d),y=v+f*(1-m),b=v+f*m,w=v+f;switch(g){case 0:l=(t=[w,b,v])[0],c=t[1],u=t[2];break;case 1:l=(e=[y,w,v])[0],c=e[1],u=e[2];break;case 2:l=(i=[v,w,b])[0],c=i[1],u=i[2];break;case 3:l=(n=[v,y,w])[0],c=n[1],u=n[2];break;case 4:l=(o=[b,v,w])[0],c=o[1],u=o[2];break;case 5:l=(r=[w,v,y])[0],c=r[1],u=r[2]}}return[l,c,u,a.length>3?a[3]:1]},J=s.unpack,Q=s.type;p.prototype.hcg=function(){return U(this._rgb)},g.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcg"])))},l.format.hcg=K,l.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=J(t,"hcg"),"array"===Q(t)&&3===t.length)return"hcg"}});var tt=s.unpack,et=s.last,it=Math.round,nt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tt(t,"rgba"),n=i[0],o=i[1],r=i[2],a=i[3],s=et(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l=(n=it(n))<<16|(o=it(o))<<8|(r=it(r)),c="000000"+l.toString(16);c=c.substr(c.length-6);var u="0"+it(255*a).toString(16);switch(u=u.substr(u.length-2),s.toLowerCase()){case"rgba":return"#"+c+u;case"argb":return"#"+u+c;default:return"#"+c}},ot=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,rt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,at=function(t){if(t.match(ot)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(rt)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var i=parseInt(t,16);return[i>>24&255,i>>16&255,i>>8&255,Math.round((255&i)/255*100)/100]}throw new Error("unknown hex color: "+t)},st=s.type;p.prototype.hex=function(t){return nt(this._rgb,t)},g.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hex"])))},l.format.hex=at,l.autodetect.push({p:4,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===st(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var lt=s.unpack,ct=s.TWOPI,ut=Math.min,ht=Math.sqrt,dt=Math.acos,pt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n=lt(t,"rgb"),o=n[0],r=n[1],a=n[2],s=ut(o/=255,r/=255,a/=255),l=(o+r+a)/3,c=l>0?1-s/l:0;return 0===c?i=NaN:(i=(o-r+(o-a))/2,i/=ht((o-r)*(o-r)+(o-a)*(r-a)),i=dt(i),a>r&&(i=ct-i),i/=ct),[360*i,c,l]},ft=s.unpack,gt=s.limit,mt=s.TWOPI,vt=s.PITHIRD,yt=Math.cos,bt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n,o,r=(t=ft(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(r)&&(r=0),isNaN(a)&&(a=0),r>360&&(r-=360),r<0&&(r+=360),(r/=360)<1/3?n=1-((o=(1-a)/3)+(i=(1+a*yt(mt*r)/yt(vt-mt*r))/3)):r<2/3?o=1-((i=(1-a)/3)+(n=(1+a*yt(mt*(r-=1/3))/yt(vt-mt*r))/3)):i=1-((n=(1-a)/3)+(o=(1+a*yt(mt*(r-=2/3))/yt(vt-mt*r))/3)),[255*(i=gt(s*i*3)),255*(n=gt(s*n*3)),255*(o=gt(s*o*3)),t.length>3?t[3]:1]},wt=s.unpack,_t=s.type;p.prototype.hsi=function(){return pt(this._rgb)},g.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsi"])))},l.format.hsi=bt,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=wt(t,"hsi"),"array"===_t(t)&&3===t.length)return"hsi"}});var xt=s.unpack,Ct=s.type;p.prototype.hsl=function(){return M(this._rgb)},g.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsl"])))},l.format.hsl=F,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=xt(t,"hsl"),"array"===Ct(t)&&3===t.length)return"hsl"}});var Et=s.unpack,kt=Math.min,Tt=Math.max,St=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n,o,r=(t=Et(t,"rgb"))[0],a=t[1],s=t[2],l=kt(r,a,s),c=Tt(r,a,s),u=c-l;return o=c/255,0===c?(i=Number.NaN,n=0):(n=u/c,r===c&&(i=(a-s)/u),a===c&&(i=2+(s-r)/u),s===c&&(i=4+(r-a)/u),(i*=60)<0&&(i+=360)),[i,n,o]},Mt=s.unpack,Rt=Math.floor,Pt=function(){for(var t,e,i,n,o,r,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=Mt(a,"hsv"))[0],d=a[1],p=a[2];if(p*=255,0===d)l=c=u=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var f=Rt(h/=60),g=h-f,m=p*(1-d),v=p*(1-d*g),y=p*(1-d*(1-g));switch(f){case 0:l=(t=[p,y,m])[0],c=t[1],u=t[2];break;case 1:l=(e=[v,p,m])[0],c=e[1],u=e[2];break;case 2:l=(i=[m,p,y])[0],c=i[1],u=i[2];break;case 3:l=(n=[m,v,p])[0],c=n[1],u=n[2];break;case 4:l=(o=[y,m,p])[0],c=o[1],u=o[2];break;case 5:l=(r=[p,m,v])[0],c=r[1],u=r[2]}}return[l,c,u,a.length>3?a[3]:1]},Lt=s.unpack,Ot=s.type;p.prototype.hsv=function(){return St(this._rgb)},g.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsv"])))},l.format.hsv=Pt,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Lt(t,"hsv"),"array"===Ot(t)&&3===t.length)return"hsv"}});var Dt=18,It=.95047,Ft=1,At=1.08883,Nt=.137931034,jt=.206896552,zt=.12841855,Zt=.008856452,Gt=s.unpack,Ht=Math.pow,Bt=function(t){return(t/=255)<=.04045?t/12.92:Ht((t+.055)/1.055,2.4)},Vt=function(t){return t>Zt?Ht(t,1/3):t/zt+Nt},Wt=function(t,e,i){return t=Bt(t),e=Bt(e),i=Bt(i),[Vt((.4124564*t+.3575761*e+.1804375*i)/It),Vt((.2126729*t+.7151522*e+.072175*i)/Ft),Vt((.0193339*t+.119192*e+.9503041*i)/At)]},Yt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=Gt(t,"rgb"),n=i[0],o=i[1],r=i[2],a=Wt(n,o,r),s=a[0],l=a[1],c=a[2],u=116*l-16;return[u<0?0:u,500*(s-l),200*(l-c)]},qt=s.unpack,Ut=Math.pow,Xt=function(t){return 255*(t<=.00304?12.92*t:1.055*Ut(t,1/2.4)-.055)},$t=function(t){return t>jt?t*t*t:zt*(t-Nt)},Kt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n,o,r=(t=qt(t,"lab"))[0],a=t[1],s=t[2];return n=(r+16)/116,i=isNaN(a)?n:n+a/500,o=isNaN(s)?n:n-s/200,n=Ft*$t(n),i=It*$t(i),o=At*$t(o),[Xt(3.2404542*i-1.5371385*n-.4985314*o),Xt(-.969266*i+1.8760108*n+.041556*o),Xt(.0556434*i-.2040259*n+1.0572252*o),t.length>3?t[3]:1]},Jt=s.unpack,Qt=s.type;p.prototype.lab=function(){return Yt(this._rgb)},g.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lab"])))},l.format.lab=Kt,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Jt(t,"lab"),"array"===Qt(t)&&3===t.length)return"lab"}});var te=s.unpack,ee=s.RAD2DEG,ie=Math.sqrt,ne=Math.atan2,oe=Math.round,re=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=te(t,"lab"),n=i[0],o=i[1],r=i[2],a=ie(o*o+r*r),s=(ne(r,o)*ee+360)%360;return 0===oe(1e4*a)&&(s=Number.NaN),[n,a,s]},ae=s.unpack,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=ae(t,"rgb"),n=i[0],o=i[1],r=i[2],a=Yt(n,o,r),s=a[0],l=a[1],c=a[2];return re(s,l,c)},le=s.unpack,ce=s.DEG2RAD,ue=Math.sin,he=Math.cos,de=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=le(t,"lch"),n=i[0],o=i[1],r=i[2];return isNaN(r)&&(r=0),[n,he(r*=ce)*o,ue(r)*o]},pe=s.unpack,fe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=(t=pe(t,"lch"))[0],n=t[1],o=t[2],r=de(i,n,o),a=r[0],s=r[1],l=r[2],c=Kt(a,s,l),u=c[0],h=c[1],d=c[2];return[u,h,d,t.length>3?t[3]:1]},ge=s.unpack,me=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=ge(t,"hcl").reverse();return fe.apply(void 0,i)},ve=s.unpack,ye=s.type;p.prototype.lch=function(){return se(this._rgb)},p.prototype.hcl=function(){return se(this._rgb).reverse()},g.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lch"])))},g.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcl"])))},l.format.lch=fe,l.format.hcl=me,["lch","hcl"].forEach((function(t){return l.autodetect.push({p:2,test:function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(e=ve(e,t),"array"===ye(e)&&3===e.length)return t}})}));var be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},we=s.type;p.prototype.name=function(){for(var t=nt(this._rgb,"rgb"),e=0,i=Object.keys(be);e<i.length;e+=1){var n=i[e];if(be[n]===t)return n.toLowerCase()}return t},l.format.named=function(t){if(t=t.toLowerCase(),be[t])return at(be[t]);throw new Error("unknown color name: "+t)},l.autodetect.push({p:5,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===we(t)&&be[t.toLowerCase()])return"named"}});var _e=s.unpack,xe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=_e(t,"rgb"),n=i[0],o=i[1],r=i[2];return(n<<16)+(o<<8)+r},Ce=s.type,Ee=function(t){if("number"==Ce(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},ke=s.type;p.prototype.num=function(){return xe(this._rgb)},g.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["num"])))},l.format.num=Ee,l.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===ke(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Te=s.unpack,Se=s.type,Me=Math.round;p.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Me)},p.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,i){return i<3?!1===t?e:Me(e):e}))},g.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["rgb"])))},l.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=Te(t,"rgba");return void 0===i[3]&&(i[3]=1),i},l.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Te(t,"rgba"),"array"===Se(t)&&(3===t.length||4===t.length&&"number"==Se(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var Re=Math.log,Pe=function(t){var e,i,n,o=t/100;return o<66?(e=255,i=-155.25485562709179-.44596950469579133*(i=o-2)+104.49216199393888*Re(i),n=o<20?0:.8274096064007395*(n=o-10)-254.76935184120902+115.67994401066147*Re(n)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*Re(e),i=325.4494125711974+.07943456536662342*(i=o-50)-28.0852963507957*Re(i),n=255),[e,i,n,1]},Le=s.unpack,Oe=Math.round,De=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i,n=Le(t,"rgb"),o=n[0],r=n[2],a=1e3,s=4e4,l=.4;s-a>l;){var c=Pe(i=.5*(s+a));c[2]/c[0]>=r/o?s=i:a=i}return Oe(i)};p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return De(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=Pe;var Ie=s.type;p.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Ie(t)?e?(this._rgb[3]=t,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=Dt*t,new p(e,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(t){var e=t.split("."),i=e[0],n=e[1],o=this[i]();if(n){var r=i.indexOf(n);if(r>-1)return o[r];throw new Error("unknown channel "+n+" in mode "+i)}return o};var Fe=s.type,Ae=Math.pow;p.prototype.luminance=function(t){if(void 0!==t&&"number"===Fe(t)){if(0===t)return new p([0,0,0,this._rgb[3]],"rgb");if(1===t)return new p([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),i=20,n=function(e,o){var r=e.interpolate(o,.5,"rgb"),a=r.luminance();return Math.abs(t-a)<1e-7||!i--?r:a>t?n(e,r):n(r,o)},o=(e>t?n(new p([0,0,0]),this):n(this,new p([255,255,255]))).rgb();return new p(o.concat([this._rgb[3]]))}return Ne.apply(void 0,this._rgb.slice(0,3))};var Ne=function(t,e,i){return.2126*(t=je(t))+.7152*(e=je(e))+.0722*(i=je(i))},je=function(t){return(t/=255)<=.03928?t/12.92:Ae((t+.055)/1.055,2.4)},ze={},Ze=s.type,Ge=function(t,e,i){void 0===i&&(i=.5);for(var n=[],o=arguments.length-3;o-- >0;)n[o]=arguments[o+3];var r=n[0]||"lrgb";if(ze[r]||n.length||(r=Object.keys(ze)[0]),!ze[r])throw new Error("interpolation mode "+r+" is not defined");return"object"!==Ze(t)&&(t=new p(t)),"object"!==Ze(e)&&(e=new p(e)),ze[r](t,e,i).alpha(t.alpha()+i*(e.alpha()-t.alpha()))};p.prototype.mix=p.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];return Ge.apply(void 0,[this,t,e].concat(i))},p.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,i=e[3];return t?(this._rgb=[e[0]*i,e[1]*i,e[2]*i,i],this):new p([e[0]*i,e[1]*i,e[2]*i,i],"rgb")},p.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=Dt*t,e[1]<0&&(e[1]=0),new p(e,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var He=s.type;p.prototype.set=function(t,e,i){void 0===i&&(i=!1);var n=t.split("."),o=n[0],r=n[1],a=this[o]();if(r){var s=o.indexOf(r);if(s>-1){if("string"==He(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==He(e))throw new Error("unsupported value for Color.set");a[s]=e}var l=new p(a,o);return i?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+r+" in mode "+o)}return a},ze.rgb=function(t,e,i){var n=t._rgb,o=e._rgb;return new p(n[0]+i*(o[0]-n[0]),n[1]+i*(o[1]-n[1]),n[2]+i*(o[2]-n[2]),"rgb")};var Be=Math.sqrt,Ve=Math.pow;ze.lrgb=function(t,e,i){var n=t._rgb,o=n[0],r=n[1],a=n[2],s=e._rgb,l=s[0],c=s[1],u=s[2];return new p(Be(Ve(o,2)*(1-i)+Ve(l,2)*i),Be(Ve(r,2)*(1-i)+Ve(c,2)*i),Be(Ve(a,2)*(1-i)+Ve(u,2)*i),"rgb")},ze.lab=function(t,e,i){var n=t.lab(),o=e.lab();return new p(n[0]+i*(o[0]-n[0]),n[1]+i*(o[1]-n[1]),n[2]+i*(o[2]-n[2]),"lab")};var We=function(t,e,i,n){var o,r,a,s,l,c,u,h,d,f,g,m;return"hsl"===n?(a=t.hsl(),s=e.hsl()):"hsv"===n?(a=t.hsv(),s=e.hsv()):"hcg"===n?(a=t.hcg(),s=e.hcg()):"hsi"===n?(a=t.hsi(),s=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",a=t.hcl(),s=e.hcl()),"h"===n.substr(0,1)&&(l=(o=a)[0],u=o[1],d=o[2],c=(r=s)[0],h=r[1],f=r[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?m=Number.NaN:(m=c,1!=d&&0!=d||"hsv"==n||(g=h)):(m=l,1!=f&&0!=f||"hsv"==n||(g=u)):m=l+i*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===g&&(g=u+i*(h-u)),new p([m,g,d+i*(f-d)],n)},Ye=function(t,e,i){return We(t,e,i,"lch")};ze.lch=Ye,ze.hcl=Ye,ze.num=function(t,e,i){var n=t.num(),o=e.num();return new p(n+i*(o-n),"num")},ze.hcg=function(t,e,i){return We(t,e,i,"hcg")},ze.hsi=function(t,e,i){return We(t,e,i,"hsi")},ze.hsl=function(t,e,i){return We(t,e,i,"hsl")},ze.hsv=function(t,e,i){return We(t,e,i,"hsv")};var qe=s.clip_rgb,Ue=Math.pow,Xe=Math.sqrt,$e=Math.PI,Ke=Math.cos,Je=Math.sin,Qe=Math.atan2,ti=function(t,e){for(var i=t.length,n=[0,0,0,0],o=0;o<t.length;o++){var r=t[o],a=e[o]/i,s=r._rgb;n[0]+=Ue(s[0],2)*a,n[1]+=Ue(s[1],2)*a,n[2]+=Ue(s[2],2)*a,n[3]+=s[3]*a}return n[0]=Xe(n[0]),n[1]=Xe(n[1]),n[2]=Xe(n[2]),n[3]>.9999999&&(n[3]=1),new p(qe(n))},ei=s.type,ii=Math.pow,ni=function(t){var e="rgb",i=g("#ccc"),n=0,o=[0,1],r=[],a=[0,0],s=!1,l=[],c=!1,u=0,h=1,d=!1,p={},f=!0,m=1,v=function(t){if((t=t||["#fff","#000"])&&"string"===ei(t)&&g.brewer&&g.brewer[t.toLowerCase()]&&(t=g.brewer[t.toLowerCase()]),"array"===ei(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=g(t[e]);r.length=0;for(var i=0;i<t.length;i++)r.push(i/(t.length-1))}return _(),l=t},y=function(t){return t},b=function(t){return t},w=function(t,n){var o,c;if(null==n&&(n=!1),isNaN(t)||null===t)return i;c=n?t:s&&s.length>2?function(t){if(null!=s){for(var e=s.length-1,i=0;i<e&&t>=s[i];)i++;return i-1}return 0}(t)/(s.length-2):h!==u?(t-u)/(h-u):1,c=b(c),n||(c=y(c)),1!==m&&(c=ii(c,m)),c=a[0]+c*(1-a[0]-a[1]),c=Math.min(1,Math.max(0,c));var d=Math.floor(1e4*c);if(f&&p[d])o=p[d];else{if("array"===ei(l))for(var v=0;v<r.length;v++){var w=r[v];if(c<=w){o=l[v];break}if(c>=w&&v===r.length-1){o=l[v];break}if(c>w&&c<r[v+1]){c=(c-w)/(r[v+1]-w),o=g.interpolate(l[v],l[v+1],c,e);break}}else"function"===ei(l)&&(o=l(c));f&&(p[d]=o)}return o},_=function(){return p={}};v(t);var x=function(t){var e=g(w(t));return c&&e[c]?e[c]():e};return x.classes=function(t){if(null!=t){if("array"===ei(t))s=t,o=[t[0],t[t.length-1]];else{var e=g.analyze(o);s=0===t?[e.min,e.max]:g.limits(e,"e",t)}return x}return s},x.domain=function(t){if(!arguments.length)return o;u=t[0],h=t[t.length-1],r=[];var e=l.length;if(t.length===e&&u!==h)for(var i=0,n=Array.from(t);i<n.length;i+=1){var a=n[i];r.push((a-u)/(h-u))}else{for(var s=0;s<e;s++)r.push(s/(e-1));if(t.length>2){var c=t.map((function(e,i){return i/(t.length-1)})),d=t.map((function(t){return(t-u)/(h-u)}));d.every((function(t,e){return c[e]===t}))||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=d[e+1];)e++;var i=(t-d[e])/(d[e+1]-d[e]);return c[e]+i*(c[e+1]-c[e])})}}return o=[u,h],x},x.mode=function(t){return arguments.length?(e=t,_(),x):e},x.range=function(t,e){return v(t),x},x.out=function(t){return c=t,x},x.spread=function(t){return arguments.length?(n=t,x):n},x.correctLightness=function(t){return null==t&&(t=!0),d=t,_(),y=d?function(t){for(var e=w(0,!0).lab()[0],i=w(1,!0).lab()[0],n=e>i,o=w(t,!0).lab()[0],r=e+(i-e)*t,a=o-r,s=0,l=1,c=20;Math.abs(a)>.01&&c-- >0;)n&&(a*=-1),a<0?(s=t,t+=.5*(l-t)):(l=t,t+=.5*(s-t)),o=w(t,!0).lab()[0],a=o-r;return t}:function(t){return t},x},x.padding=function(t){return null!=t?("number"===ei(t)&&(t=[t,t]),a=t,x):a},x.colors=function(e,i){arguments.length<2&&(i="hex");var n=[];if(0===arguments.length)n=l.slice(0);else if(1===e)n=[x(.5)];else if(e>1){var r=o[0],a=o[1]-r;n=oi(0,e,!1).map((function(t){return x(r+t/(e-1)*a)}))}else{t=[];var c=[];if(s&&s.length>2)for(var u=1,h=s.length,d=1<=h;d?u<h:u>h;d?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=o;n=c.map((function(t){return x(t)}))}return g[i]&&(n=n.map((function(t){return t[i]()}))),n},x.cache=function(t){return null!=t?(f=t,x):f},x.gamma=function(t){return null!=t?(m=t,x):m},x.nodata=function(t){return null!=t?(i=g(t),x):i},x};function oi(t,e,i){for(var n=[],o=t<e,r=i?o?e+1:e-1:e,a=t;o?a<r:a>r;o?a++:a--)n.push(a);return n}var ri=function(t){var e,i,n,o,r,a,s;if(2===(t=t.map((function(t){return new p(t)}))).length)e=t.map((function(t){return t.lab()})),r=e[0],a=e[1],o=function(t){var e=[0,1,2].map((function(e){return r[e]+t*(a[e]-r[e])}));return new p(e,"lab")};else if(3===t.length)i=t.map((function(t){return t.lab()})),r=i[0],a=i[1],s=i[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*r[e]+2*(1-t)*t*a[e]+t*t*s[e]}));return new p(e,"lab")};else if(4===t.length){var l;n=t.map((function(t){return t.lab()})),r=n[0],a=n[1],s=n[2],l=n[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*r[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]}));return new p(e,"lab")}}else if(5===t.length){var c=ri(t.slice(0,3)),u=ri(t.slice(2,5));o=function(t){return t<.5?c(2*t):u(2*(t-.5))}}return o},ai=function(t,e,i){if(!ai[i])throw new Error("unknown blend mode "+i);return ai[i](t,e)},si=function(t){return function(e,i){var n=g(i).rgb(),o=g(e).rgb();return g.rgb(t(n,o))}},li=function(t){return function(e,i){var n=[];return n[0]=t(e[0],i[0]),n[1]=t(e[1],i[1]),n[2]=t(e[2],i[2]),n}};ai.normal=si(li((function(t){return t}))),ai.multiply=si(li((function(t,e){return t*e/255}))),ai.screen=si(li((function(t,e){return 255*(1-(1-t/255)*(1-e/255))}))),ai.overlay=si(li((function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))}))),ai.darken=si(li((function(t,e){return t>e?e:t}))),ai.lighten=si(li((function(t,e){return t>e?t:e}))),ai.dodge=si(li((function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t}))),ai.burn=si(li((function(t,e){return 255*(1-(1-e/255)/(t/255))})));for(var ci=ai,ui=s.type,hi=s.clip_rgb,di=s.TWOPI,pi=Math.pow,fi=Math.sin,gi=Math.cos,mi=Math.floor,vi=Math.random,yi=Math.log,bi=Math.pow,wi=Math.floor,_i=Math.abs,xi=function(t,e){void 0===e&&(e=null);var i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===r(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===r(t)&&(t=t[e]),null==t||isNaN(t)||(i.values.push(t),i.sum+=t,t<i.min&&(i.min=t),t>i.max&&(i.max=t),i.count+=1)})),i.domain=[i.min,i.max],i.limits=function(t,e){return Ci(i,t,e)},i},Ci=function(t,e,i){void 0===e&&(e="equal"),void 0===i&&(i=7),"array"==r(t)&&(t=xi(t));var n=t.min,o=t.max,a=t.values.sort((function(t,e){return t-e}));if(1===i)return[n,o];var s=[];if("c"===e.substr(0,1)&&(s.push(n),s.push(o)),"e"===e.substr(0,1)){s.push(n);for(var l=1;l<i;l++)s.push(n+l/i*(o-n));s.push(o)}else if("l"===e.substr(0,1)){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*yi(n),u=Math.LOG10E*yi(o);s.push(n);for(var h=1;h<i;h++)s.push(bi(10,c+h/i*(u-c)));s.push(o)}else if("q"===e.substr(0,1)){s.push(n);for(var d=1;d<i;d++){var p=(a.length-1)*d/i,f=wi(p);if(f===p)s.push(a[f]);else{var g=p-f;s.push(a[f]*(1-g)+a[f+1]*g)}}s.push(o)}else if("k"===e.substr(0,1)){var m,v=a.length,y=new Array(v),b=new Array(i),w=!0,_=0,x=null;(x=[]).push(n);for(var C=1;C<i;C++)x.push(n+C/i*(o-n));for(x.push(o);w;){for(var E=0;E<i;E++)b[E]=0;for(var k=0;k<v;k++)for(var T=a[k],S=Number.MAX_VALUE,M=void 0,R=0;R<i;R++){var P=_i(x[R]-T);P<S&&(S=P,M=R),b[M]++,y[k]=M}for(var L=new Array(i),O=0;O<i;O++)L[O]=null;for(var D=0;D<v;D++)null===L[m=y[D]]?L[m]=a[D]:L[m]+=a[D];for(var I=0;I<i;I++)L[I]*=1/b[I];w=!1;for(var F=0;F<i;F++)if(L[F]!==x[F]){w=!0;break}x=L,++_>200&&(w=!1)}for(var A={},N=0;N<i;N++)A[N]=[];for(var j=0;j<v;j++)A[m=y[j]].push(a[j]);for(var z=[],Z=0;Z<i;Z++)z.push(A[Z][0]),z.push(A[Z][A[Z].length-1]);z=z.sort((function(t,e){return t-e})),s.push(z[0]);for(var G=1;G<z.length;G+=2){var H=z[G];isNaN(H)||-1!==s.indexOf(H)||s.push(H)}}return s},Ei={analyze:xi,limits:Ci},ki=Math.sqrt,Ti=Math.atan2,Si=Math.abs,Mi=Math.cos,Ri=Math.PI,Pi={cool:function(){return ni([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return ni(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Li={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Oi=0,Di=Object.keys(Li);Oi<Di.length;Oi+=1){var Ii=Di[Oi];Li[Ii.toLowerCase()]=Li[Ii]}var Fi=Li;return g.average=function(t,e,i){void 0===e&&(e="lrgb"),void 0===i&&(i=null);var n=t.length;i||(i=Array.from(new Array(n)).map((function(){return 1})));var o=n/i.reduce((function(t,e){return t+e}));if(i.forEach((function(t,e){i[e]*=o})),t=t.map((function(t){return new p(t)})),"lrgb"===e)return ti(t,i);for(var r=t.shift(),a=r.get(e),s=[],l=0,c=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*i[0],s.push(isNaN(a[u])?0:i[0]),"h"===e.charAt(u)&&!isNaN(a[u])){var h=a[u]/180*$e;l+=Ke(h)*i[0],c+=Je(h)*i[0]}var d=r.alpha()*i[0];t.forEach((function(t,n){var o=t.get(e);d+=t.alpha()*i[n+1];for(var r=0;r<a.length;r++)if(!isNaN(o[r]))if(s[r]+=i[n+1],"h"===e.charAt(r)){var u=o[r]/180*$e;l+=Ke(u)*i[n+1],c+=Je(u)*i[n+1]}else a[r]+=o[r]*i[n+1]}));for(var f=0;f<a.length;f++)if("h"===e.charAt(f)){for(var g=Qe(c/s[f],l/s[f])/$e*180;g<0;)g+=360;for(;g>=360;)g-=360;a[f]=g}else a[f]=a[f]/s[f];return d/=n,new p(a,e).alpha(d>.99999?1:d,!0)},g.bezier=function(t){var e=ri(t);return e.scale=function(){return ni(e)},e},g.blend=ci,g.cubehelix=function(t,e,i,n,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=[0,1]);var r,a=0;"array"===ui(o)?r=o[1]-o[0]:(r=0,o=[o,o]);var s=function(s){var l=di*((t+120)/360+e*s),c=pi(o[0]+r*s,n),u=(0!==a?i[0]+s*a:i)*c*(1-c)/2,h=gi(l),d=fi(l);return g(hi([255*(c+u*(-.14861*h+1.78277*d)),255*(c+u*(-.29227*h-.90649*d)),255*(c+u*(1.97294*h)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?i:("array"===ui(i=t)?0==(a=i[1]-i[0])&&(i=i[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===ui(t)?(o=t,r=t[1]-t[0]):(o=[t,t],r=0),s)},s.scale=function(){return g.scale(s)},s.hue(i),s},g.mix=g.interpolate=Ge,g.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(mi(16*vi()));return new p(t,"hex")},g.scale=ni,g.analyze=Ei.analyze,g.contrast=function(t,e){t=new p(t),e=new p(e);var i=t.luminance(),n=e.luminance();return i>n?(i+.05)/(n+.05):(n+.05)/(i+.05)},g.deltaE=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=1),t=new p(t),e=new p(e);for(var o=Array.from(t.lab()),r=o[0],a=o[1],s=o[2],l=Array.from(e.lab()),c=l[0],u=l[1],h=l[2],d=ki(a*a+s*s),f=ki(u*u+h*h),g=r<16?.511:.040975*r/(1+.01765*r),m=.0638*d/(1+.0131*d)+.638,v=d<1e-6?0:180*Ti(s,a)/Ri;v<0;)v+=360;for(;v>=360;)v-=360;var y=v>=164&&v<=345?.56+Si(.2*Mi(Ri*(v+168)/180)):.36+Si(.4*Mi(Ri*(v+35)/180)),b=d*d*d*d,w=ki(b/(b+1900)),_=m*(w*y+1-w),x=d-f,C=a-u,E=s-h,k=(r-c)/(i*g),T=x/(n*m);return ki(k*k+T*T+(C*C+E*E-x*x)/(_*_))},g.distance=function(t,e,i){void 0===i&&(i="lab"),t=new p(t),e=new p(e);var n=t.get(i),o=e.get(i),r=0;for(var a in n){var s=(n[a]||0)-(o[a]||0);r+=s*s}return Math.sqrt(r)},g.limits=Ei.limits,g.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(p,[null].concat(t))),!0}catch(t){return!1}},g.scales=Pi,g.colors=be,g.brewer=Fi,g}()},3225:()=>{var t=null,e=null;function i(t,i,n){t.addEventListener(i,(function(t){var o=new MouseEvent(n,t);o.pointerId=1,o.isPrimary=!0,o.pointerType="mouse",o.width=1,o.height=1,o.tiltX=0,o.tiltY=0,"buttons"in t&&0!==t.buttons?o.pressure=.5:o.pressure=0;var r=t.target;null!==e&&(r=e,"mouseup"===i&&(e=null)),r.dispatchEvent(o),o.defaultPrevented&&t.preventDefault()}))}function n(e,i,n){e.addEventListener(i,(function(e){for(var o=e.changedTouches,r=o.length,a=0;a<r;a++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=e.ctrlKey,s.shiftKey=e.shiftKey,s.altKey=e.altKey,s.metaKey=e.metaKey;var l=o.item(a);s.clientX=l.clientX,s.clientY=l.clientY,s.screenX=l.screenX,s.screenY=l.screenY,s.pageX=l.pageX,s.pageY=l.pageY;var c=l.target.getBoundingClientRect();s.offsetX=l.clientX-c.left,s.offsetY=l.clientY-c.top,s.pointerId=1+l.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===i&&null===t&&(t=l.identifier),s.isPrimary=l.identifier===t,"touchend"===i&&s.isPrimary&&(t=null),e.target.dispatchEvent(s),s.defaultPrevented&&e.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),n(document,"touchstart","pointerdown"),n(document,"touchmove","pointermove"),n(document,"touchend","pointerup"))},4953:function(t){t.exports=function(){"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],i={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(t){return"undefined"!=typeof console&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},n={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},o=function(t){return("0"+t).slice(-2)},r=function(t){return!0===t?1:0};function a(t,e,i){var n;return void 0===i&&(i=!1),function(){var o=this,r=arguments;null!==n&&clearTimeout(n),n=window.setTimeout((function(){n=null,i||t.apply(o,r)}),e),i&&!n&&t.apply(o,r)}}var s=function(t){return t instanceof Array?t:[t]};function l(t,e,i){if(!0===i)return t.classList.add(e);t.classList.remove(e)}function c(t,e,i){var n=window.document.createElement(t);return e=e||"",i=i||"",n.className=e,void 0!==i&&(n.textContent=i),n}function u(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function h(t,e){var i=c("div","numInputWrapper"),n=c("input","numInput "+t),o=c("span","arrowUp"),r=c("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?n.type="number":(n.type="text",n.pattern="\\d*"),void 0!==e)for(var a in e)n.setAttribute(a,e[a]);return i.appendChild(n),i.appendChild(o),i.appendChild(r),i}var d=function(){},p=function(t,e,i){return i.months[e?"shorthand":"longhand"][t]},f={D:d,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,i){t.setHours(t.getHours()%12+12*r(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e,i){var n=parseInt(e),o=new Date(t.getFullYear(),0,2+7*(n-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+i.firstDayOfWeek),o},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:d,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:d,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},g={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},m={Z:function(t){return t.toISOString()},D:function(t,e,i){return e.weekdays.shorthand[m.w(t,e,i)]},F:function(t,e,i){return p(m.n(t,e,i)-1,!1,e)},G:function(t,e,i){return o(m.h(t,e,i))},H:function(t){return o(t.getHours())},J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[r(t.getHours()>11)]},M:function(t,e){return p(t.getMonth(),!0,e)},S:function(t){return o(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,i){return i.getWeek(t)},Y:function(t){return t.getFullYear()},d:function(t){return o(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return o(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return o(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},v=function(t){var e=t.config,o=void 0===e?i:e,r=t.l10n,a=void 0===r?n:r;return function(t,e,i){var n=i||a;return void 0!==o.formatDate?o.formatDate(t,e,n):e.split("").map((function(e,i,r){return m[e]&&"\\"!==r[i-1]?m[e](t,n,o):"\\"!==e?e:""})).join("")}},y=function(t){var e=t.config,o=void 0===e?i:e,r=t.l10n,a=void 0===r?n:r;return function(t,e,n,r){if(0===t||t){var s,l=r||a,c=t;if(t instanceof Date)s=new Date(t.getTime());else if("string"!=typeof t&&void 0!==t.toFixed)s=new Date(t);else if("string"==typeof t){var u=e||(o||i).dateFormat,h=String(t).trim();if("today"===h)s=new Date,n=!0;else if(/Z$/.test(h)||/GMT$/.test(h))s=new Date(t);else if(o&&o.parseDate)s=o.parseDate(t,u);else{s=o&&o.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var d=void 0,p=[],m=0,v=0,y="";m<u.length;m++){var b=u[m],w="\\"===b,_="\\"===u[m-1]||w;if(g[b]&&!_){y+=g[b];var x=new RegExp(y).exec(t);x&&(d=!0)&&p["Y"!==b?"push":"unshift"]({fn:f[b],val:x[++v]})}else w||(y+=".");p.forEach((function(t){var e=t.fn,i=t.val;return s=e(s,i,l)||s}))}s=d?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===n&&s.setHours(0,0,0,0),s;o.errorHandler(new Error("Invalid date provided: "+c))}}};function b(t,e,i){return void 0===i&&(i=!0),!1!==i?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var w=864e5;function _(d,f){var m={config:t({},i,C.defaultConfig),l10n:n};function _(t){return t.bind(m)}function x(){var t=m.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==m.calendarContainer&&(m.calendarContainer.style.visibility="hidden",m.calendarContainer.style.display="block"),void 0!==m.daysContainer){var e=(m.days.offsetWidth+1)*t.showMonths;m.daysContainer.style.width=e+"px",m.calendarContainer.style.width=e+(void 0!==m.weekWrapper?m.weekWrapper.offsetWidth:0)+"px",m.calendarContainer.style.removeProperty("visibility"),m.calendarContainer.style.removeProperty("display")}}))}function E(t){0===m.selectedDates.length&&it(),void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();var e="keydown"===t.type,i=t.target;void 0!==m.amPM&&t.target===m.amPM&&(m.amPM.textContent=m.l10n.amPM[r(m.amPM.textContent===m.l10n.amPM[0])]);var n=parseFloat(i.getAttribute("min")),a=parseFloat(i.getAttribute("max")),s=parseFloat(i.getAttribute("step")),l=parseInt(i.value,10),c=t.delta||(e?38===t.which?1:-1:0),u=l+s*c;if(void 0!==i.value&&2===i.value.length){var h=i===m.hourElement,d=i===m.minuteElement;u<n?(u=a+u+r(!h)+(r(h)&&r(!m.amPM)),d&&F(void 0,-1,m.hourElement)):u>a&&(u=i===m.hourElement?u-a-r(!m.amPM):n,d&&F(void 0,1,m.hourElement)),m.amPM&&h&&(1===s?u+l===23:Math.abs(u-l)>s)&&(m.amPM.textContent=m.l10n.amPM[r(m.amPM.textContent===m.l10n.amPM[0])]),i.value=o(u)}}(t);var e=m._input.value;k(),vt(),m._input.value!==e&&m._debouncedChange()}function k(){if(void 0!==m.hourElement&&void 0!==m.minuteElement){var t,e,i=(parseInt(m.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(m.minuteElement.value,10)||0)%60,o=void 0!==m.secondElement?(parseInt(m.secondElement.value,10)||0)%60:0;void 0!==m.amPM&&(t=i,e=m.amPM.textContent,i=t%12+12*r(e===m.l10n.amPM[1]));var a=void 0!==m.config.minTime||m.config.minDate&&m.minDateHasTime&&m.latestSelectedDateObj&&0===b(m.latestSelectedDateObj,m.config.minDate,!0);if(void 0!==m.config.maxTime||m.config.maxDate&&m.maxDateHasTime&&m.latestSelectedDateObj&&0===b(m.latestSelectedDateObj,m.config.maxDate,!0)){var s=void 0!==m.config.maxTime?m.config.maxTime:m.config.maxDate;(i=Math.min(i,s.getHours()))===s.getHours()&&(n=Math.min(n,s.getMinutes())),n===s.getMinutes()&&(o=Math.min(o,s.getSeconds()))}if(a){var l=void 0!==m.config.minTime?m.config.minTime:m.config.minDate;(i=Math.max(i,l.getHours()))===l.getHours()&&(n=Math.max(n,l.getMinutes())),n===l.getMinutes()&&(o=Math.max(o,l.getSeconds()))}M(i,n,o)}}function T(t){var e=t||m.latestSelectedDateObj;e&&M(e.getHours(),e.getMinutes(),e.getSeconds())}function S(){var t=m.config.defaultHour,e=m.config.defaultMinute,i=m.config.defaultSeconds;if(void 0!==m.config.minDate){var n=m.config.minDate.getHours(),o=m.config.minDate.getMinutes();(t=Math.max(t,n))===n&&(e=Math.max(o,e)),t===n&&e===o&&(i=m.config.minDate.getSeconds())}if(void 0!==m.config.maxDate){var r=m.config.maxDate.getHours(),a=m.config.maxDate.getMinutes();(t=Math.min(t,r))===r&&(e=Math.min(a,e)),t===r&&e===a&&(i=m.config.maxDate.getSeconds())}M(t,e,i)}function M(t,e,i){void 0!==m.latestSelectedDateObj&&m.latestSelectedDateObj.setHours(t%24,e,i||0,0),m.hourElement&&m.minuteElement&&!m.isMobile&&(m.hourElement.value=o(m.config.time_24hr?t:(12+t)%12+12*r(t%12==0)),m.minuteElement.value=o(e),void 0!==m.amPM&&(m.amPM.textContent=m.l10n.amPM[r(t>=12)]),void 0!==m.secondElement&&(m.secondElement.value=o(i)))}function R(t){var e=parseInt(t.target.value)+(t.delta||0);(e/1e3>1||"Enter"===t.key&&!/[^\d]/.test(e.toString()))&&$(e)}function P(t,e,i,n){return e instanceof Array?e.forEach((function(e){return P(t,e,i,n)})):t instanceof Array?t.forEach((function(t){return P(t,e,i,n)})):(t.addEventListener(e,i,n),void m._handlers.push({element:t,event:e,handler:i,options:n}))}function L(t){return function(e){1===e.which&&t(e)}}function O(){dt("onChange")}function D(t,e){var i=void 0!==t?m.parseDate(t):m.latestSelectedDateObj||(m.config.minDate&&m.config.minDate>m.now?m.config.minDate:m.config.maxDate&&m.config.maxDate<m.now?m.config.maxDate:m.now),n=m.currentYear,o=m.currentMonth;try{void 0!==i&&(m.currentYear=i.getFullYear(),m.currentMonth=i.getMonth())}catch(t){t.message="Invalid date supplied: "+i,m.config.errorHandler(t)}e&&m.currentYear!==n&&(dt("onYearChange"),H()),!e||m.currentYear===n&&m.currentMonth===o||dt("onMonthChange"),m.redraw()}function I(t){~t.target.className.indexOf("arrow")&&F(t,t.target.classList.contains("arrowUp")?1:-1)}function F(t,e,i){var n=t&&t.target,o=i||n&&n.parentNode&&n.parentNode.firstChild,r=pt("increment");r.delta=e,o&&o.dispatchEvent(r)}function A(t,e,i,n){var o=K(e,!0),r=c("span","flatpickr-day "+t,e.getDate().toString());return r.dateObj=e,r.$i=n,r.setAttribute("aria-label",m.formatDate(e,m.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===b(e,m.now)&&(m.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),o?(r.tabIndex=-1,ft(e)&&(r.classList.add("selected"),m.selectedDateElem=r,"range"===m.config.mode&&(l(r,"startRange",m.selectedDates[0]&&0===b(e,m.selectedDates[0],!0)),l(r,"endRange",m.selectedDates[1]&&0===b(e,m.selectedDates[1],!0)),"nextMonthDay"===t&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===m.config.mode&&function(t){return!("range"!==m.config.mode||m.selectedDates.length<2)&&b(t,m.selectedDates[0])>=0&&b(t,m.selectedDates[1])<=0}(e)&&!ft(e)&&r.classList.add("inRange"),m.weekNumbers&&1===m.config.showMonths&&"prevMonthDay"!==t&&i%7==1&&m.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+m.config.getWeek(e)+"</span>"),dt("onDayCreate",r),r}function N(t){t.focus(),"range"===m.config.mode&&tt(t)}function j(t){for(var e=t>0?0:m.config.showMonths-1,i=t>0?m.config.showMonths:-1,n=e;n!=i;n+=t)for(var o=m.daysContainer.children[n],r=t>0?0:o.children.length-1,a=t>0?o.children.length:-1,s=r;s!=a;s+=t){var l=o.children[s];if(-1===l.className.indexOf("hidden")&&K(l.dateObj))return l}}function z(t,e){var i=J(document.activeElement||document.body),n=void 0!==t?t:i?document.activeElement:void 0!==m.selectedDateElem&&J(m.selectedDateElem)?m.selectedDateElem:void 0!==m.todayDateElem&&J(m.todayDateElem)?m.todayDateElem:j(e>0?1:-1);return void 0===n?m._input.focus():i?void function(t,e){for(var i=-1===t.className.indexOf("Month")?t.dateObj.getMonth():m.currentMonth,n=e>0?m.config.showMonths:-1,o=e>0?1:-1,r=i-m.currentMonth;r!=n;r+=o)for(var a=m.daysContainer.children[r],s=i-m.currentMonth===r?t.$i+e:e<0?a.children.length-1:0,l=a.children.length,c=s;c>=0&&c<l&&c!=(e>0?l:-1);c+=o){var u=a.children[c];if(-1===u.className.indexOf("hidden")&&K(u.dateObj)&&Math.abs(t.$i-c)>=Math.abs(e))return N(u)}m.changeMonth(o),z(j(o),0)}(n,e):N(n)}function Z(t,e){for(var i=(new Date(t,e,1).getDay()-m.l10n.firstDayOfWeek+7)%7,n=m.utils.getDaysInMonth((e-1+12)%12),o=m.utils.getDaysInMonth(e),r=window.document.createDocumentFragment(),a=m.config.showMonths>1,s=a?"prevMonthDay hidden":"prevMonthDay",l=a?"nextMonthDay hidden":"nextMonthDay",u=n+1-i,h=0;u<=n;u++,h++)r.appendChild(A(s,new Date(t,e-1,u),u,h));for(u=1;u<=o;u++,h++)r.appendChild(A("",new Date(t,e,u),u,h));for(var d=o+1;d<=42-i&&(1===m.config.showMonths||h%7!=0);d++,h++)r.appendChild(A(l,new Date(t,e+1,d%o),d,h));var p=c("div","dayContainer");return p.appendChild(r),p}function G(){if(void 0!==m.daysContainer){u(m.daysContainer),m.weekNumbers&&u(m.weekNumbers);for(var t=document.createDocumentFragment(),e=0;e<m.config.showMonths;e++){var i=new Date(m.currentYear,m.currentMonth,1);i.setMonth(m.currentMonth+e),t.appendChild(Z(i.getFullYear(),i.getMonth()))}m.daysContainer.appendChild(t),m.days=m.daysContainer.firstChild,"range"===m.config.mode&&1===m.selectedDates.length&&tt()}}function H(){if(!(m.config.showMonths>1||"dropdown"!==m.config.monthSelectorType)){var t=function(t){return!(void 0!==m.config.minDate&&m.currentYear===m.config.minDate.getFullYear()&&t<m.config.minDate.getMonth()||void 0!==m.config.maxDate&&m.currentYear===m.config.maxDate.getFullYear()&&t>m.config.maxDate.getMonth())};m.monthsDropdownContainer.tabIndex=-1,m.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++)if(t(e)){var i=c("option","flatpickr-monthDropdown-month");i.value=new Date(m.currentYear,e).getMonth().toString(),i.textContent=p(e,m.config.shorthandCurrentMonth,m.l10n),i.tabIndex=-1,m.currentMonth===e&&(i.selected=!0),m.monthsDropdownContainer.appendChild(i)}}}function B(){var t,e=c("div","flatpickr-month"),i=window.document.createDocumentFragment();m.config.showMonths>1||"static"===m.config.monthSelectorType?t=c("span","cur-month"):(m.monthsDropdownContainer=c("select","flatpickr-monthDropdown-months"),P(m.monthsDropdownContainer,"change",(function(t){var e=t.target,i=parseInt(e.value,10);m.changeMonth(i-m.currentMonth),dt("onMonthChange")})),H(),t=m.monthsDropdownContainer);var n=h("cur-year",{tabindex:"-1"}),o=n.getElementsByTagName("input")[0];o.setAttribute("aria-label",m.l10n.yearAriaLabel),m.config.minDate&&o.setAttribute("min",m.config.minDate.getFullYear().toString()),m.config.maxDate&&(o.setAttribute("max",m.config.maxDate.getFullYear().toString()),o.disabled=!!m.config.minDate&&m.config.minDate.getFullYear()===m.config.maxDate.getFullYear());var r=c("div","flatpickr-current-month");return r.appendChild(t),r.appendChild(n),i.appendChild(r),e.appendChild(i),{container:e,yearElement:o,monthElement:t}}function V(){u(m.monthNav),m.monthNav.appendChild(m.prevMonthNav),m.config.showMonths&&(m.yearElements=[],m.monthElements=[]);for(var t=m.config.showMonths;t--;){var e=B();m.yearElements.push(e.yearElement),m.monthElements.push(e.monthElement),m.monthNav.appendChild(e.container)}m.monthNav.appendChild(m.nextMonthNav)}function W(){m.weekdayContainer?u(m.weekdayContainer):m.weekdayContainer=c("div","flatpickr-weekdays");for(var t=m.config.showMonths;t--;){var e=c("div","flatpickr-weekdaycontainer");m.weekdayContainer.appendChild(e)}return Y(),m.weekdayContainer}function Y(){if(m.weekdayContainer){var t=m.l10n.firstDayOfWeek,e=m.l10n.weekdays.shorthand.slice();t>0&&t<e.length&&(e=e.splice(t,e.length).concat(e.splice(0,t)));for(var i=m.config.showMonths;i--;)m.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+e.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function q(t,e){void 0===e&&(e=!0);var i=e?t:t-m.currentMonth;i<0&&!0===m._hidePrevMonthArrow||i>0&&!0===m._hideNextMonthArrow||(m.currentMonth+=i,(m.currentMonth<0||m.currentMonth>11)&&(m.currentYear+=m.currentMonth>11?1:-1,m.currentMonth=(m.currentMonth+12)%12,dt("onYearChange"),H()),G(),dt("onMonthChange"),gt())}function U(t){return!(!m.config.appendTo||!m.config.appendTo.contains(t))||m.calendarContainer.contains(t)}function X(t){if(m.isOpen&&!m.config.inline){var e="function"==typeof(a=t).composedPath?a.composedPath()[0]:a.target,i=U(e),n=e===m.input||e===m.altInput||m.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(m.input)||~t.path.indexOf(m.altInput)),o="blur"===t.type?n&&t.relatedTarget&&!U(t.relatedTarget):!n&&!i&&!U(t.relatedTarget),r=!m.config.ignoredFocusElements.some((function(t){return t.contains(e)}));o&&r&&(void 0!==m.timeContainer&&void 0!==m.minuteElement&&void 0!==m.hourElement&&E(),m.close(),"range"===m.config.mode&&1===m.selectedDates.length&&(m.clear(!1),m.redraw()))}var a}function $(t){if(!(!t||m.config.minDate&&t<m.config.minDate.getFullYear()||m.config.maxDate&&t>m.config.maxDate.getFullYear())){var e=t,i=m.currentYear!==e;m.currentYear=e||m.currentYear,m.config.maxDate&&m.currentYear===m.config.maxDate.getFullYear()?m.currentMonth=Math.min(m.config.maxDate.getMonth(),m.currentMonth):m.config.minDate&&m.currentYear===m.config.minDate.getFullYear()&&(m.currentMonth=Math.max(m.config.minDate.getMonth(),m.currentMonth)),i&&(m.redraw(),dt("onYearChange"),H())}}function K(t,e){void 0===e&&(e=!0);var i=m.parseDate(t,void 0,e);if(m.config.minDate&&i&&b(i,m.config.minDate,void 0!==e?e:!m.minDateHasTime)<0||m.config.maxDate&&i&&b(i,m.config.maxDate,void 0!==e?e:!m.maxDateHasTime)>0)return!1;if(0===m.config.enable.length&&0===m.config.disable.length)return!0;if(void 0===i)return!1;for(var n=m.config.enable.length>0,o=n?m.config.enable:m.config.disable,r=0,a=void 0;r<o.length;r++){if("function"==typeof(a=o[r])&&a(i))return n;if(a instanceof Date&&void 0!==i&&a.getTime()===i.getTime())return n;if("string"==typeof a&&void 0!==i){var s=m.parseDate(a,void 0,!0);return s&&s.getTime()===i.getTime()?n:!n}if("object"==typeof a&&void 0!==i&&a.from&&a.to&&i.getTime()>=a.from.getTime()&&i.getTime()<=a.to.getTime())return n}return!n}function J(t){return void 0!==m.daysContainer&&-1===t.className.indexOf("hidden")&&m.daysContainer.contains(t)}function Q(t){var e=t.target===m._input,i=m.config.allowInput,n=m.isOpen&&(!i||!e),o=m.config.inline&&e&&!i;if(13===t.keyCode&&e){if(i)return m.setDate(m._input.value,!0,t.target===m.altInput?m.config.altFormat:m.config.dateFormat),t.target.blur();m.open()}else if(U(t.target)||n||o){var r=!!m.timeContainer&&m.timeContainer.contains(t.target);switch(t.keyCode){case 13:r?(t.preventDefault(),E(),st()):lt(t);break;case 27:t.preventDefault(),st();break;case 8:case 46:e&&!m.config.allowInput&&(t.preventDefault(),m.clear());break;case 37:case 39:if(r||e)m.hourElement&&m.hourElement.focus();else if(t.preventDefault(),void 0!==m.daysContainer&&(!1===i||document.activeElement&&J(document.activeElement))){var a=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),q(a),z(j(1),0)):z(void 0,a)}break;case 38:case 40:t.preventDefault();var s=40===t.keyCode?1:-1;m.daysContainer&&void 0!==t.target.$i||t.target===m.input||t.target===m.altInput?t.ctrlKey?(t.stopPropagation(),$(m.currentYear-s),z(j(1),0)):r||z(void 0,7*s):t.target===m.currentYearElement?$(m.currentYear-s):m.config.enableTime&&(!r&&m.hourElement&&m.hourElement.focus(),E(t),m._debouncedChange());break;case 9:if(r){var l=[m.hourElement,m.minuteElement,m.secondElement,m.amPM].concat(m.pluginElements).filter((function(t){return t})),c=l.indexOf(t.target);if(-1!==c){var u=l[c+(t.shiftKey?-1:1)];t.preventDefault(),(u||m._input).focus()}}else!m.config.noCalendar&&m.daysContainer&&m.daysContainer.contains(t.target)&&t.shiftKey&&(t.preventDefault(),m._input.focus())}}if(void 0!==m.amPM&&t.target===m.amPM)switch(t.key){case m.l10n.amPM[0].charAt(0):case m.l10n.amPM[0].charAt(0).toLowerCase():m.amPM.textContent=m.l10n.amPM[0],k(),vt();break;case m.l10n.amPM[1].charAt(0):case m.l10n.amPM[1].charAt(0).toLowerCase():m.amPM.textContent=m.l10n.amPM[1],k(),vt()}(e||U(t.target))&&dt("onKeyDown",t)}function tt(t){if(1===m.selectedDates.length&&(!t||t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled"))){for(var e=t?t.dateObj.getTime():m.days.firstElementChild.dateObj.getTime(),i=m.parseDate(m.selectedDates[0],void 0,!0).getTime(),n=Math.min(e,m.selectedDates[0].getTime()),o=Math.max(e,m.selectedDates[0].getTime()),r=!1,a=0,s=0,l=n;l<o;l+=w)K(new Date(l),!0)||(r=r||l>n&&l<o,l<i&&(!a||l>a)?a=l:l>i&&(!s||l<s)&&(s=l));for(var c=0;c<m.config.showMonths;c++)for(var u=m.daysContainer.children[c],h=function(n,o){var l,c,h,d=u.children[n],p=d.dateObj.getTime(),f=a>0&&p<a||s>0&&p>s;return f?(d.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((function(t){d.classList.remove(t)})),"continue"):r&&!f?"continue":(["startRange","inRange","endRange","notAllowed"].forEach((function(t){d.classList.remove(t)})),void(void 0!==t&&(t.classList.add(e<=m.selectedDates[0].getTime()?"startRange":"endRange"),i<e&&p===i?d.classList.add("startRange"):i>e&&p===i&&d.classList.add("endRange"),p>=a&&(0===s||p<=s)&&(c=i,h=e,(l=p)>Math.min(c,h)&&l<Math.max(c,h))&&d.classList.add("inRange"))))},d=0,p=u.children.length;d<p;d++)h(d)}}function et(){!m.isOpen||m.config.static||m.config.inline||rt()}function it(){m.setDate(void 0!==m.config.minDate?new Date(m.config.minDate.getTime()):new Date,!0),S(),vt()}function nt(t){return function(e){var i=m.config["_"+t+"Date"]=m.parseDate(e,m.config.dateFormat),n=m.config["_"+("min"===t?"max":"min")+"Date"];void 0!==i&&(m["min"===t?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),m.selectedDates&&(m.selectedDates=m.selectedDates.filter((function(t){return K(t)})),m.selectedDates.length||"min"!==t||T(i),vt()),m.daysContainer&&(at(),void 0!==i?m.currentYearElement[t]=i.getFullYear().toString():m.currentYearElement.removeAttribute(t),m.currentYearElement.disabled=!!n&&void 0!==i&&n.getFullYear()===i.getFullYear())}}function ot(){"object"!=typeof m.config.locale&&void 0===C.l10ns[m.config.locale]&&m.config.errorHandler(new Error("flatpickr: invalid locale "+m.config.locale)),m.l10n=t({},C.l10ns.default,"object"==typeof m.config.locale?m.config.locale:"default"!==m.config.locale?C.l10ns[m.config.locale]:void 0),g.K="("+m.l10n.amPM[0]+"|"+m.l10n.amPM[1]+"|"+m.l10n.amPM[0].toLowerCase()+"|"+m.l10n.amPM[1].toLowerCase()+")",void 0===t({},f,JSON.parse(JSON.stringify(d.dataset||{}))).time_24hr&&void 0===C.defaultConfig.time_24hr&&(m.config.time_24hr=m.l10n.time_24hr),m.formatDate=v(m),m.parseDate=y({config:m.config,l10n:m.l10n})}function rt(t){if(void 0!==m.calendarContainer){dt("onPreCalendarPosition");var e=t||m._positionElement,i=Array.prototype.reduce.call(m.calendarContainer.children,(function(t,e){return t+e.offsetHeight}),0),n=m.calendarContainer.offsetWidth,o=m.config.position.split(" "),r=o[0],a=o.length>1?o[1]:null,s=e.getBoundingClientRect(),c=window.innerHeight-s.bottom,u="above"===r||"below"!==r&&c<i&&s.top>i,h=window.pageYOffset+s.top+(u?-i-2:e.offsetHeight+2);if(l(m.calendarContainer,"arrowTop",!u),l(m.calendarContainer,"arrowBottom",u),!m.config.inline){var d=window.pageXOffset+s.left-(null!=a&&"center"===a?(n-s.width)/2:0),p=window.document.body.offsetWidth-(window.pageXOffset+s.right),f=d+n>window.document.body.offsetWidth,g=p+n>window.document.body.offsetWidth;if(l(m.calendarContainer,"rightMost",f),!m.config.static)if(m.calendarContainer.style.top=h+"px",f)if(g){var v=document.styleSheets[0];if(void 0===v)return;var y=window.document.body.offsetWidth,b=Math.max(0,y/2-n/2),w=v.cssRules.length,_="{left:"+s.left+"px;right:auto;}";l(m.calendarContainer,"rightMost",!1),l(m.calendarContainer,"centerMost",!0),v.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+_,w),m.calendarContainer.style.left=b+"px",m.calendarContainer.style.right="auto"}else m.calendarContainer.style.left="auto",m.calendarContainer.style.right=p+"px";else m.calendarContainer.style.left=d+"px",m.calendarContainer.style.right="auto"}}}function at(){m.config.noCalendar||m.isMobile||(gt(),G())}function st(){m._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(m.close,0):m.close()}function lt(t){t.preventDefault(),t.stopPropagation();var e=function t(e,i){return i(e)?e:e.parentNode?t(e.parentNode,i):void 0}(t.target,(function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")}));if(void 0!==e){var i=e,n=m.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=(n.getMonth()<m.currentMonth||n.getMonth()>m.currentMonth+m.config.showMonths-1)&&"range"!==m.config.mode;if(m.selectedDateElem=i,"single"===m.config.mode)m.selectedDates=[n];else if("multiple"===m.config.mode){var r=ft(n);r?m.selectedDates.splice(parseInt(r),1):m.selectedDates.push(n)}else"range"===m.config.mode&&(2===m.selectedDates.length&&m.clear(!1,!1),m.latestSelectedDateObj=n,m.selectedDates.push(n),0!==b(n,m.selectedDates[0],!0)&&m.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()})));if(k(),o){var a=m.currentYear!==n.getFullYear();m.currentYear=n.getFullYear(),m.currentMonth=n.getMonth(),a&&(dt("onYearChange"),H()),dt("onMonthChange")}if(gt(),G(),vt(),m.config.enableTime&&setTimeout((function(){return m.showTimeInput=!0}),50),o||"range"===m.config.mode||1!==m.config.showMonths?void 0!==m.selectedDateElem&&void 0===m.hourElement&&m.selectedDateElem&&m.selectedDateElem.focus():N(i),void 0!==m.hourElement&&void 0!==m.hourElement&&m.hourElement.focus(),m.config.closeOnSelect){var s="single"===m.config.mode&&!m.config.enableTime,l="range"===m.config.mode&&2===m.selectedDates.length&&!m.config.enableTime;(s||l)&&st()}O()}}m.parseDate=y({config:m.config,l10n:m.l10n}),m._handlers=[],m.pluginElements=[],m.loadedPlugins=[],m._bind=P,m._setHoursFromDate=T,m._positionCalendar=rt,m.changeMonth=q,m.changeYear=$,m.clear=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),m.input.value="",void 0!==m.altInput&&(m.altInput.value=""),void 0!==m.mobileInput&&(m.mobileInput.value=""),m.selectedDates=[],m.latestSelectedDateObj=void 0,!0===e&&(m.currentYear=m._initialDate.getFullYear(),m.currentMonth=m._initialDate.getMonth()),m.showTimeInput=!1,!0===m.config.enableTime&&S(),m.redraw(),t&&dt("onChange")},m.close=function(){m.isOpen=!1,m.isMobile||(void 0!==m.calendarContainer&&m.calendarContainer.classList.remove("open"),void 0!==m._input&&m._input.classList.remove("active")),dt("onClose")},m._createElement=c,m.destroy=function(){void 0!==m.config&&dt("onDestroy");for(var t=m._handlers.length;t--;){var e=m._handlers[t];e.element.removeEventListener(e.event,e.handler,e.options)}if(m._handlers=[],m.mobileInput)m.mobileInput.parentNode&&m.mobileInput.parentNode.removeChild(m.mobileInput),m.mobileInput=void 0;else if(m.calendarContainer&&m.calendarContainer.parentNode)if(m.config.static&&m.calendarContainer.parentNode){var i=m.calendarContainer.parentNode;if(i.lastChild&&i.removeChild(i.lastChild),i.parentNode){for(;i.firstChild;)i.parentNode.insertBefore(i.firstChild,i);i.parentNode.removeChild(i)}}else m.calendarContainer.parentNode.removeChild(m.calendarContainer);m.altInput&&(m.input.type="text",m.altInput.parentNode&&m.altInput.parentNode.removeChild(m.altInput),delete m.altInput),m.input&&(m.input.type=m.input._type,m.input.classList.remove("flatpickr-input"),m.input.removeAttribute("readonly"),m.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(t){try{delete m[t]}catch(t){}}))},m.isEnabled=K,m.jumpToDate=D,m.open=function(t,e){if(void 0===e&&(e=m._positionElement),!0===m.isMobile)return t&&(t.preventDefault(),t.target&&t.target.blur()),void 0!==m.mobileInput&&(m.mobileInput.focus(),m.mobileInput.click()),void dt("onOpen");if(!m._input.disabled&&!m.config.inline){var i=m.isOpen;m.isOpen=!0,i||(m.calendarContainer.classList.add("open"),m._input.classList.add("active"),dt("onOpen"),rt(e)),!0===m.config.enableTime&&!0===m.config.noCalendar&&(0===m.selectedDates.length&&it(),!1!==m.config.allowInput||void 0!==t&&m.timeContainer.contains(t.relatedTarget)||setTimeout((function(){return m.hourElement.select()}),50))}},m.redraw=at,m.set=function(t,i){if(null!==t&&"object"==typeof t)for(var n in Object.assign(m.config,t),t)void 0!==ct[n]&&ct[n].forEach((function(t){return t()}));else m.config[t]=i,void 0!==ct[t]?ct[t].forEach((function(t){return t()})):e.indexOf(t)>-1&&(m.config[t]=s(i));m.redraw(),vt(!1)},m.setDate=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=m.config.dateFormat),0!==t&&!t||t instanceof Array&&0===t.length)return m.clear(e);ut(t,i),m.showTimeInput=m.selectedDates.length>0,m.latestSelectedDateObj=m.selectedDates[m.selectedDates.length-1],m.redraw(),D(),T(),0===m.selectedDates.length&&m.clear(!1),vt(e),e&&dt("onChange")},m.toggle=function(t){if(!0===m.isOpen)return m.close();m.open(t)};var ct={locale:[ot,Y],showMonths:[V,x,W],minDate:[D],maxDate:[D]};function ut(t,e){var i=[];if(t instanceof Array)i=t.map((function(t){return m.parseDate(t,e)}));else if(t instanceof Date||"number"==typeof t)i=[m.parseDate(t,e)];else if("string"==typeof t)switch(m.config.mode){case"single":case"time":i=[m.parseDate(t,e)];break;case"multiple":i=t.split(m.config.conjunction).map((function(t){return m.parseDate(t,e)}));break;case"range":i=t.split(m.l10n.rangeSeparator).map((function(t){return m.parseDate(t,e)}))}else m.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));m.selectedDates=i.filter((function(t){return t instanceof Date&&K(t,!1)})),"range"===m.config.mode&&m.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()}))}function ht(t){return t.slice().map((function(t){return"string"==typeof t||"number"==typeof t||t instanceof Date?m.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:m.parseDate(t.from,void 0),to:m.parseDate(t.to,void 0)}:t})).filter((function(t){return t}))}function dt(t,e){if(void 0!==m.config){var i=m.config[t];if(void 0!==i&&i.length>0)for(var n=0;i[n]&&n<i.length;n++)i[n](m.selectedDates,m.input.value,m,e);"onChange"===t&&(m.input.dispatchEvent(pt("change")),m.input.dispatchEvent(pt("input")))}}function pt(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function ft(t){for(var e=0;e<m.selectedDates.length;e++)if(0===b(m.selectedDates[e],t))return""+e;return!1}function gt(){m.config.noCalendar||m.isMobile||!m.monthNav||(m.yearElements.forEach((function(t,e){var i=new Date(m.currentYear,m.currentMonth,1);i.setMonth(m.currentMonth+e),m.config.showMonths>1||"static"===m.config.monthSelectorType?m.monthElements[e].textContent=p(i.getMonth(),m.config.shorthandCurrentMonth,m.l10n)+" ":m.monthsDropdownContainer.value=i.getMonth().toString(),t.value=i.getFullYear().toString()})),m._hidePrevMonthArrow=void 0!==m.config.minDate&&(m.currentYear===m.config.minDate.getFullYear()?m.currentMonth<=m.config.minDate.getMonth():m.currentYear<m.config.minDate.getFullYear()),m._hideNextMonthArrow=void 0!==m.config.maxDate&&(m.currentYear===m.config.maxDate.getFullYear()?m.currentMonth+1>m.config.maxDate.getMonth():m.currentYear>m.config.maxDate.getFullYear()))}function mt(t){return m.selectedDates.map((function(e){return m.formatDate(e,t)})).filter((function(t,e,i){return"range"!==m.config.mode||m.config.enableTime||i.indexOf(t)===e})).join("range"!==m.config.mode?m.config.conjunction:m.l10n.rangeSeparator)}function vt(t){void 0===t&&(t=!0),void 0!==m.mobileInput&&m.mobileFormatStr&&(m.mobileInput.value=void 0!==m.latestSelectedDateObj?m.formatDate(m.latestSelectedDateObj,m.mobileFormatStr):""),m.input.value=mt(m.config.dateFormat),void 0!==m.altInput&&(m.altInput.value=mt(m.config.altFormat)),!1!==t&&dt("onValueUpdate")}function yt(t){var e=m.prevMonthNav.contains(t.target),i=m.nextMonthNav.contains(t.target);e||i?q(e?-1:1):m.yearElements.indexOf(t.target)>=0?t.target.select():t.target.classList.contains("arrowUp")?m.changeYear(m.currentYear+1):t.target.classList.contains("arrowDown")&&m.changeYear(m.currentYear-1)}return function(){m.element=m.input=d,m.isOpen=!1,function(){var n=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=t({},f,JSON.parse(JSON.stringify(d.dataset||{}))),r={};m.config.parseDate=o.parseDate,m.config.formatDate=o.formatDate,Object.defineProperty(m.config,"enable",{get:function(){return m.config._enable},set:function(t){m.config._enable=ht(t)}}),Object.defineProperty(m.config,"disable",{get:function(){return m.config._disable},set:function(t){m.config._disable=ht(t)}});var a="time"===o.mode;if(!o.dateFormat&&(o.enableTime||a)){var l=C.defaultConfig.dateFormat||i.dateFormat;r.dateFormat=o.noCalendar||a?"H:i"+(o.enableSeconds?":S":""):l+" H:i"+(o.enableSeconds?":S":"")}if(o.altInput&&(o.enableTime||a)&&!o.altFormat){var c=C.defaultConfig.altFormat||i.altFormat;r.altFormat=o.noCalendar||a?"h:i"+(o.enableSeconds?":S K":" K"):c+" h:i"+(o.enableSeconds?":S":"")+" K"}o.altInputClass||(m.config.altInputClass=m.input.className+" "+m.config.altInputClass),Object.defineProperty(m.config,"minDate",{get:function(){return m.config._minDate},set:nt("min")}),Object.defineProperty(m.config,"maxDate",{get:function(){return m.config._maxDate},set:nt("max")});var u=function(t){return function(e){m.config["min"===t?"_minTime":"_maxTime"]=m.parseDate(e,"H:i:S")}};Object.defineProperty(m.config,"minTime",{get:function(){return m.config._minTime},set:u("min")}),Object.defineProperty(m.config,"maxTime",{get:function(){return m.config._maxTime},set:u("max")}),"time"===o.mode&&(m.config.noCalendar=!0,m.config.enableTime=!0),Object.assign(m.config,r,o);for(var h=0;h<n.length;h++)m.config[n[h]]=!0===m.config[n[h]]||"true"===m.config[n[h]];for(e.filter((function(t){return void 0!==m.config[t]})).forEach((function(t){m.config[t]=s(m.config[t]||[]).map(_)})),m.isMobile=!m.config.disableMobile&&!m.config.inline&&"single"===m.config.mode&&!m.config.disable.length&&!m.config.enable.length&&!m.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),h=0;h<m.config.plugins.length;h++){var p=m.config.plugins[h](m)||{};for(var g in p)e.indexOf(g)>-1?m.config[g]=s(p[g]).map(_).concat(m.config[g]):void 0===o[g]&&(m.config[g]=p[g])}dt("onParseConfig")}(),ot(),m.input=m.config.wrap?d.querySelector("[data-input]"):d,m.input?(m.input._type=m.input.type,m.input.type="text",m.input.classList.add("flatpickr-input"),m._input=m.input,m.config.altInput&&(m.altInput=c(m.input.nodeName,m.config.altInputClass),m._input=m.altInput,m.altInput.placeholder=m.input.placeholder,m.altInput.disabled=m.input.disabled,m.altInput.required=m.input.required,m.altInput.tabIndex=m.input.tabIndex,m.altInput.type="text",m.input.setAttribute("type","hidden"),!m.config.static&&m.input.parentNode&&m.input.parentNode.insertBefore(m.altInput,m.input.nextSibling)),m.config.allowInput||m._input.setAttribute("readonly","readonly"),m._positionElement=m.config.positionElement||m._input):m.config.errorHandler(new Error("Invalid input element specified")),function(){m.selectedDates=[],m.now=m.parseDate(m.config.now)||new Date;var t=m.config.defaultDate||("INPUT"!==m.input.nodeName&&"TEXTAREA"!==m.input.nodeName||!m.input.placeholder||m.input.value!==m.input.placeholder?m.input.value:null);t&&ut(t,m.config.dateFormat),m._initialDate=m.selectedDates.length>0?m.selectedDates[0]:m.config.minDate&&m.config.minDate.getTime()>m.now.getTime()?m.config.minDate:m.config.maxDate&&m.config.maxDate.getTime()<m.now.getTime()?m.config.maxDate:m.now,m.currentYear=m._initialDate.getFullYear(),m.currentMonth=m._initialDate.getMonth(),m.selectedDates.length>0&&(m.latestSelectedDateObj=m.selectedDates[0]),void 0!==m.config.minTime&&(m.config.minTime=m.parseDate(m.config.minTime,"H:i")),void 0!==m.config.maxTime&&(m.config.maxTime=m.parseDate(m.config.maxTime,"H:i")),m.minDateHasTime=!!m.config.minDate&&(m.config.minDate.getHours()>0||m.config.minDate.getMinutes()>0||m.config.minDate.getSeconds()>0),m.maxDateHasTime=!!m.config.maxDate&&(m.config.maxDate.getHours()>0||m.config.maxDate.getMinutes()>0||m.config.maxDate.getSeconds()>0),Object.defineProperty(m,"showTimeInput",{get:function(){return m._showTimeInput},set:function(t){m._showTimeInput=t,m.calendarContainer&&l(m.calendarContainer,"showTimeInput",t),m.isOpen&&rt()}})}(),m.utils={getDaysInMonth:function(t,e){return void 0===t&&(t=m.currentMonth),void 0===e&&(e=m.currentYear),1===t&&(e%4==0&&e%100!=0||e%400==0)?29:m.l10n.daysInMonth[t]}},m.isMobile||function(){var t=window.document.createDocumentFragment();if(m.calendarContainer=c("div","flatpickr-calendar"),m.calendarContainer.tabIndex=-1,!m.config.noCalendar){if(t.appendChild((m.monthNav=c("div","flatpickr-months"),m.yearElements=[],m.monthElements=[],m.prevMonthNav=c("span","flatpickr-prev-month"),m.prevMonthNav.innerHTML=m.config.prevArrow,m.nextMonthNav=c("span","flatpickr-next-month"),m.nextMonthNav.innerHTML=m.config.nextArrow,V(),Object.defineProperty(m,"_hidePrevMonthArrow",{get:function(){return m.__hidePrevMonthArrow},set:function(t){m.__hidePrevMonthArrow!==t&&(l(m.prevMonthNav,"flatpickr-disabled",t),m.__hidePrevMonthArrow=t)}}),Object.defineProperty(m,"_hideNextMonthArrow",{get:function(){return m.__hideNextMonthArrow},set:function(t){m.__hideNextMonthArrow!==t&&(l(m.nextMonthNav,"flatpickr-disabled",t),m.__hideNextMonthArrow=t)}}),m.currentYearElement=m.yearElements[0],gt(),m.monthNav)),m.innerContainer=c("div","flatpickr-innerContainer"),m.config.weekNumbers){var e=function(){m.calendarContainer.classList.add("hasWeeks");var t=c("div","flatpickr-weekwrapper");t.appendChild(c("span","flatpickr-weekday",m.l10n.weekAbbreviation));var e=c("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}(),i=e.weekWrapper,n=e.weekNumbers;m.innerContainer.appendChild(i),m.weekNumbers=n,m.weekWrapper=i}m.rContainer=c("div","flatpickr-rContainer"),m.rContainer.appendChild(W()),m.daysContainer||(m.daysContainer=c("div","flatpickr-days"),m.daysContainer.tabIndex=-1),G(),m.rContainer.appendChild(m.daysContainer),m.innerContainer.appendChild(m.rContainer),t.appendChild(m.innerContainer)}m.config.enableTime&&t.appendChild(function(){m.calendarContainer.classList.add("hasTime"),m.config.noCalendar&&m.calendarContainer.classList.add("noCalendar"),m.timeContainer=c("div","flatpickr-time"),m.timeContainer.tabIndex=-1;var t=c("span","flatpickr-time-separator",":"),e=h("flatpickr-hour",{"aria-label":m.l10n.hourAriaLabel});m.hourElement=e.getElementsByTagName("input")[0];var i=h("flatpickr-minute",{"aria-label":m.l10n.minuteAriaLabel});if(m.minuteElement=i.getElementsByTagName("input")[0],m.hourElement.tabIndex=m.minuteElement.tabIndex=-1,m.hourElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getHours():m.config.time_24hr?m.config.defaultHour:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(m.config.defaultHour)),m.minuteElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getMinutes():m.config.defaultMinute),m.hourElement.setAttribute("step",m.config.hourIncrement.toString()),m.minuteElement.setAttribute("step",m.config.minuteIncrement.toString()),m.hourElement.setAttribute("min",m.config.time_24hr?"0":"1"),m.hourElement.setAttribute("max",m.config.time_24hr?"23":"12"),m.minuteElement.setAttribute("min","0"),m.minuteElement.setAttribute("max","59"),m.timeContainer.appendChild(e),m.timeContainer.appendChild(t),m.timeContainer.appendChild(i),m.config.time_24hr&&m.timeContainer.classList.add("time24hr"),m.config.enableSeconds){m.timeContainer.classList.add("hasSeconds");var n=h("flatpickr-second");m.secondElement=n.getElementsByTagName("input")[0],m.secondElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getSeconds():m.config.defaultSeconds),m.secondElement.setAttribute("step",m.minuteElement.getAttribute("step")),m.secondElement.setAttribute("min","0"),m.secondElement.setAttribute("max","59"),m.timeContainer.appendChild(c("span","flatpickr-time-separator",":")),m.timeContainer.appendChild(n)}return m.config.time_24hr||(m.amPM=c("span","flatpickr-am-pm",m.l10n.amPM[r((m.latestSelectedDateObj?m.hourElement.value:m.config.defaultHour)>11)]),m.amPM.title=m.l10n.toggleTitle,m.amPM.tabIndex=-1,m.timeContainer.appendChild(m.amPM)),m.timeContainer}()),l(m.calendarContainer,"rangeMode","range"===m.config.mode),l(m.calendarContainer,"animate",!0===m.config.animate),l(m.calendarContainer,"multiMonth",m.config.showMonths>1),m.calendarContainer.appendChild(t);var a=void 0!==m.config.appendTo&&void 0!==m.config.appendTo.nodeType;if((m.config.inline||m.config.static)&&(m.calendarContainer.classList.add(m.config.inline?"inline":"static"),m.config.inline&&(!a&&m.element.parentNode?m.element.parentNode.insertBefore(m.calendarContainer,m._input.nextSibling):void 0!==m.config.appendTo&&m.config.appendTo.appendChild(m.calendarContainer)),m.config.static)){var s=c("div","flatpickr-wrapper");m.element.parentNode&&m.element.parentNode.insertBefore(s,m.element),s.appendChild(m.element),m.altInput&&s.appendChild(m.altInput),s.appendChild(m.calendarContainer)}m.config.static||m.config.inline||(void 0!==m.config.appendTo?m.config.appendTo:window.document.body).appendChild(m.calendarContainer)}(),function(){if(m.config.wrap&&["open","close","toggle","clear"].forEach((function(t){Array.prototype.forEach.call(m.element.querySelectorAll("[data-"+t+"]"),(function(e){return P(e,"click",m[t])}))})),m.isMobile)!function(){var t=m.config.enableTime?m.config.noCalendar?"time":"datetime-local":"date";m.mobileInput=c("input",m.input.className+" flatpickr-mobile"),m.mobileInput.step=m.input.getAttribute("step")||"any",m.mobileInput.tabIndex=1,m.mobileInput.type=t,m.mobileInput.disabled=m.input.disabled,m.mobileInput.required=m.input.required,m.mobileInput.placeholder=m.input.placeholder,m.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",m.selectedDates.length>0&&(m.mobileInput.defaultValue=m.mobileInput.value=m.formatDate(m.selectedDates[0],m.mobileFormatStr)),m.config.minDate&&(m.mobileInput.min=m.formatDate(m.config.minDate,"Y-m-d")),m.config.maxDate&&(m.mobileInput.max=m.formatDate(m.config.maxDate,"Y-m-d")),m.input.type="hidden",void 0!==m.altInput&&(m.altInput.type="hidden");try{m.input.parentNode&&m.input.parentNode.insertBefore(m.mobileInput,m.input.nextSibling)}catch(t){}P(m.mobileInput,"change",(function(t){m.setDate(t.target.value,!1,m.mobileFormatStr),dt("onChange"),dt("onClose")}))}();else{var t=a(et,50);m._debouncedChange=a(O,300),m.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&P(m.daysContainer,"mouseover",(function(t){"range"===m.config.mode&&tt(t.target)})),P(window.document.body,"keydown",Q),m.config.inline||m.config.static||P(window,"resize",t),void 0!==window.ontouchstart?P(window.document,"touchstart",X):P(window.document,"mousedown",L(X)),P(window.document,"focus",X,{capture:!0}),!0===m.config.clickOpens&&(P(m._input,"focus",m.open),P(m._input,"mousedown",L(m.open))),void 0!==m.daysContainer&&(P(m.monthNav,"mousedown",L(yt)),P(m.monthNav,["keyup","increment"],R),P(m.daysContainer,"mousedown",L(lt))),void 0!==m.timeContainer&&void 0!==m.minuteElement&&void 0!==m.hourElement&&(P(m.timeContainer,["increment"],E),P(m.timeContainer,"blur",E,{capture:!0}),P(m.timeContainer,"mousedown",L(I)),P([m.hourElement,m.minuteElement],["focus","click"],(function(t){return t.target.select()})),void 0!==m.secondElement&&P(m.secondElement,"focus",(function(){return m.secondElement&&m.secondElement.select()})),void 0!==m.amPM&&P(m.amPM,"mousedown",L((function(t){E(t),O()}))))}}(),(m.selectedDates.length||m.config.noCalendar)&&(m.config.enableTime&&T(m.config.noCalendar?m.latestSelectedDateObj||m.config.minDate:void 0),vt(!1)),x(),m.showTimeInput=m.selectedDates.length>0||m.config.noCalendar;var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!m.isMobile&&n&&rt(),dt("onReady")}(),m}function x(t,e){for(var i=Array.prototype.slice.call(t).filter((function(t){return t instanceof HTMLElement})),n=[],o=0;o<i.length;o++){var r=i[o];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=_(r,e||{}),n.push(r._flatpickr)}catch(t){console.error(t)}}return 1===n.length?n[0]:n}"function"!=typeof Object.assign&&(Object.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var n=function(e){e&&Object.keys(e).forEach((function(i){return t[i]=e[i]}))},o=0,r=e;o<r.length;o++){var a=r[o];n(a)}return t}),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return x(this,t)},HTMLElement.prototype.flatpickr=function(t){return x([this],t)});var C=function(t,e){return"string"==typeof t?x(window.document.querySelectorAll(t),e):t instanceof Node?x([t],e):x(t,e)};return C.defaultConfig={},C.l10ns={en:t({},n),default:t({},n)},C.localize=function(e){C.l10ns.default=t({},C.l10ns.default,e)},C.setDefaults=function(e){C.defaultConfig=t({},C.defaultConfig,e)},C.parseDate=y({}),C.formatDate=v({}),C.compareDates=b,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return x(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=C),C}()},645:(t,e)=>{e.read=function(t,e,i,n,o){var r,a,s=8*o-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?o-1:0,d=i?-1:1,p=t[e+h];for(h+=d,r=p&(1<<-u)-1,p>>=-u,u+=s;u>0;r=256*r+t[e+h],h+=d,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=n;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),r-=c}return(p?-1:1)*a*Math.pow(2,r-n)},e.write=function(t,e,i,n,o,r){var a,s,l,c=8*r-o-1,u=(1<<c)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,o),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[i+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*g}},1168:t=>{function e(t){this.message=t}e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,r=0,a=0,s="";o=i.charAt(a++);~o&&(n=r%4?64*n+o:o,r++%4)?s+=String.fromCharCode(255&n>>(-2*r&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s}},4491:(t,e,i)=>{var n=i(1168);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(e)}catch(t){return n(e)}}},6489:(t,e,i)=>{"use strict";var n=i(4491);function o(t){this.message=t}o.prototype=new Error,o.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new o("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(n(t.split(".")[i]))}catch(t){throw new o("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=o},8552:(t,e,i)=>{var n=i(852)(i(5639),"DataView");t.exports=n},1989:(t,e,i)=>{var n=i(1789),o=i(401),r=i(7667),a=i(1327),s=i(1866);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},8407:(t,e,i)=>{var n=i(7040),o=i(4125),r=i(2117),a=i(7518),s=i(4705);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},7071:(t,e,i)=>{var n=i(852)(i(5639),"Map");t.exports=n},3369:(t,e,i)=>{var n=i(4785),o=i(1285),r=i(6e3),a=i(9916),s=i(5265);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},3818:(t,e,i)=>{var n=i(852)(i(5639),"Promise");t.exports=n},8525:(t,e,i)=>{var n=i(852)(i(5639),"Set");t.exports=n},6384:(t,e,i)=>{var n=i(8407),o=i(7465),r=i(3779),a=i(7599),s=i(4758),l=i(4309);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},2705:(t,e,i)=>{var n=i(5639).Symbol;t.exports=n},1149:(t,e,i)=>{var n=i(5639).Uint8Array;t.exports=n},577:(t,e,i)=>{var n=i(852)(i(5639),"WeakMap");t.exports=n},7412:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}},4963:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,o=0,r=[];++i<n;){var a=t[i];e(a,i,t)&&(r[o++]=a)}return r}},4636:(t,e,i)=>{var n=i(2545),o=i(5694),r=i(1469),a=i(4144),s=i(5776),l=i(6719),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=r(t),u=!i&&o(t),h=!i&&!u&&a(t),d=!i&&!u&&!h&&l(t),p=i||u||h||d,f=p?n(t.length,String):[],g=f.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||f.push(m);return f}},2488:t=>{t.exports=function(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t}},4865:(t,e,i)=>{var n=i(9465),o=i(7813),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var a=t[e];r.call(t,e)&&o(a,i)&&(void 0!==i||e in t)||n(t,e,i)}},8470:(t,e,i)=>{var n=i(7813);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},4037:(t,e,i)=>{var n=i(8363),o=i(3674);t.exports=function(t,e){return t&&n(e,o(e),t)}},3886:(t,e,i)=>{var n=i(8363),o=i(1704);t.exports=function(t,e){return t&&n(e,o(e),t)}},9465:(t,e,i)=>{var n=i(8777);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},5990:(t,e,i)=>{var n=i(6384),o=i(7412),r=i(4865),a=i(4037),s=i(3886),l=i(4626),c=i(278),u=i(8805),h=i(1911),d=i(8234),p=i(6904),f=i(4160),g=i(3824),m=i(9148),v=i(8517),y=i(1469),b=i(4144),w=i(6688),_=i(3218),x=i(2928),C=i(3674),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,t.exports=function t(e,i,k,T,S,M){var R,P=1&i,L=2&i,O=4&i;if(k&&(R=S?k(e,T,S,M):k(e)),void 0!==R)return R;if(!_(e))return e;var D=y(e);if(D){if(R=g(e),!P)return c(e,R)}else{var I=f(e),F="[object Function]"==I||"[object GeneratorFunction]"==I;if(b(e))return l(e,P);if("[object Object]"==I||"[object Arguments]"==I||F&&!S){if(R=L||F?{}:v(e),!P)return L?h(e,s(R,e)):u(e,a(R,e))}else{if(!E[I])return S?e:{};R=m(e,I,P)}}M||(M=new n);var A=M.get(e);if(A)return A;M.set(e,R),x(e)?e.forEach((function(n){R.add(t(n,i,k,n,e,M))})):w(e)&&e.forEach((function(n,o){R.set(o,t(n,i,k,o,e,M))}));var N=O?L?p:d:L?keysIn:C,j=D?void 0:N(e);return o(j||e,(function(n,o){j&&(n=e[o=n]),r(R,o,t(n,i,k,o,e,M))})),R}},3118:(t,e,i)=>{var n=i(3218),o=Object.create,r=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();t.exports=r},8866:(t,e,i)=>{var n=i(2488),o=i(1469);t.exports=function(t,e,i){var r=e(t);return o(t)?r:n(r,i(t))}},4239:(t,e,i)=>{var n=i(2705),o=i(9607),r=i(2333),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):r(t)}},9454:(t,e,i)=>{var n=i(4239),o=i(7005);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},5588:(t,e,i)=>{var n=i(4160),o=i(7005);t.exports=function(t){return o(t)&&"[object Map]"==n(t)}},8458:(t,e,i)=>{var n=i(3560),o=i(5346),r=i(3218),a=i(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||o(t))&&(n(t)?d:s).test(a(t))}},9221:(t,e,i)=>{var n=i(4160),o=i(7005);t.exports=function(t){return o(t)&&"[object Set]"==n(t)}},8749:(t,e,i)=>{var n=i(4239),o=i(1780),r=i(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&o(t.length)&&!!a[n(t)]}},280:(t,e,i)=>{var n=i(5726),o=i(6916),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var i in Object(t))r.call(t,i)&&"constructor"!=i&&e.push(i);return e}},313:(t,e,i)=>{var n=i(3218),o=i(5726),r=i(3498),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=o(t),i=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&i.push(s);return i}},2545:t=>{t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},4318:(t,e,i)=>{var n=i(1149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},4626:(t,e,i)=>{t=i.nmd(t);var n=i(5639),o=e&&!e.nodeType&&e,r=o&&t&&!t.nodeType&&t,a=r&&r.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=s?s(i):new t.constructor(i);return t.copy(n),n}},7157:(t,e,i)=>{var n=i(4318);t.exports=function(t,e){var i=e?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}},3147:t=>{var e=/\w*$/;t.exports=function(t){var i=new t.constructor(t.source,e.exec(t));return i.lastIndex=t.lastIndex,i}},419:(t,e,i)=>{var n=i(2705),o=n?n.prototype:void 0,r=o?o.valueOf:void 0;t.exports=function(t){return r?Object(r.call(t)):{}}},7133:(t,e,i)=>{var n=i(4318);t.exports=function(t,e){var i=e?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},278:t=>{t.exports=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},8363:(t,e,i)=>{var n=i(4865),o=i(9465);t.exports=function(t,e,i,r){var a=!i;i||(i={});for(var s=-1,l=e.length;++s<l;){var c=e[s],u=r?r(i[c],t[c],c,i,t):void 0;void 0===u&&(u=t[c]),a?o(i,c,u):n(i,c,u)}return i}},8805:(t,e,i)=>{var n=i(8363),o=i(9551);t.exports=function(t,e){return n(t,o(t),e)}},1911:(t,e,i)=>{var n=i(8363),o=i(1442);t.exports=function(t,e){return n(t,o(t),e)}},4429:(t,e,i)=>{var n=i(5639)["__core-js_shared__"];t.exports=n},8777:(t,e,i)=>{var n=i(852),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},1957:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},8234:(t,e,i)=>{var n=i(8866),o=i(9551),r=i(3674);t.exports=function(t){return n(t,r,o)}},6904:(t,e,i)=>{var n=i(8866),o=i(1442),r=i(1704);t.exports=function(t){return n(t,r,o)}},5050:(t,e,i)=>{var n=i(7019);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},852:(t,e,i)=>{var n=i(8458),o=i(7801);t.exports=function(t,e){var i=o(t,e);return n(i)?i:void 0}},5924:(t,e,i)=>{var n=i(5569)(Object.getPrototypeOf,Object);t.exports=n},9607:(t,e,i)=>{var n=i(2705),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=r.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=i:delete t[s]),o}},9551:(t,e,i)=>{var n=i(4963),o=i(479),r=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return r.call(t,e)})))}:o;t.exports=s},1442:(t,e,i)=>{var n=i(2488),o=i(5924),r=i(9551),a=i(479),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,r(t)),t=o(t);return e}:a;t.exports=s},4160:(t,e,i)=>{var n=i(8552),o=i(7071),r=i(3818),a=i(8525),s=i(577),l=i(4239),c=i(346),u=c(n),h=c(o),d=c(r),p=c(a),f=c(s),g=l;(n&&"[object DataView]"!=g(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=g(new o)||r&&"[object Promise]"!=g(r.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=l(t),i="[object Object]"==e?t.constructor:void 0,n=i?c(i):"";if(n)switch(n){case u:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return e}),t.exports=g},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1789:(t,e,i)=>{var n=i(4536);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,i)=>{var n=i(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return o.call(e,t)?e[t]:void 0}},1327:(t,e,i)=>{var n=i(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},1866:(t,e,i)=>{var n=i(4536);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},3824:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var i=t.length,n=new t.constructor(i);return i&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},9148:(t,e,i)=>{var n=i(4318),o=i(7157),r=i(3147),a=i(419),s=i(7133);t.exports=function(t,e,i){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return o(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,i);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return r(t);case"[object Set]":return new l;case"[object Symbol]":return a(t)}}},8517:(t,e,i)=>{var n=i(3118),o=i(5924),r=i(5726);t.exports=function(t){return"function"!=typeof t.constructor||r(t)?{}:n(o(t))}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,i){var n=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<i}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,i)=>{var n,o=i(4429),r=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!r&&r in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||e)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,i)=>{var n=i(8470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0)&&(i==e.length-1?e.pop():o.call(e,i,1),--this.size,!0)}},2117:(t,e,i)=>{var n=i(8470);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},7518:(t,e,i)=>{var n=i(8470);t.exports=function(t){return n(this.__data__,t)>-1}},4705:(t,e,i)=>{var n=i(8470);t.exports=function(t,e){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,e])):i[o][1]=e,this}},4785:(t,e,i)=>{var n=i(1989),o=i(8407),r=i(7071);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(r||o),string:new n}}},1285:(t,e,i)=>{var n=i(5050);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).get(t)}},9916:(t,e,i)=>{var n=i(5050);t.exports=function(t){return n(this,t).has(t)}},5265:(t,e,i)=>{var n=i(5050);t.exports=function(t,e){var i=n(this,t),o=i.size;return i.set(t,e),this.size+=i.size==o?0:1,this}},4536:(t,e,i)=>{var n=i(852)(Object,"create");t.exports=n},6916:(t,e,i)=>{var n=i(5569)(Object.keys,Object);t.exports=n},3498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},1167:(t,e,i)=>{t=i.nmd(t);var n=i(1957),o=e&&!e.nodeType&&e,r=o&&t&&!t.nodeType&&t,a=r&&r.exports===o&&n.process,s=function(){try{var t=r&&r.require&&r.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(i){return t(e(i))}}},5639:(t,e,i)=>{var n=i(1957),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();t.exports=r},7465:(t,e,i)=>{var n=i(8407);t.exports=function(){this.__data__=new n,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,i)=>{var n=i(8407),o=i(7071),r=i(3369);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(t,e),this.size=i.size,this}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},361:(t,e,i)=>{var n=i(5990);t.exports=function(t){return n(t,5)}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5694:(t,e,i)=>{var n=i(9454),o=i(7005),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,i)=>{var n=i(3560),o=i(1780);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},4144:(t,e,i)=>{t=i.nmd(t);var n=i(5639),o=i(5062),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,s=a&&a.exports===r?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;t.exports=l},3560:(t,e,i)=>{var n=i(4239),o=i(3218);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},6688:(t,e,i)=>{var n=i(5588),o=i(1717),r=i(1167),a=r&&r.isMap,s=a?o(a):n;t.exports=s},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2928:(t,e,i)=>{var n=i(9221),o=i(1717),r=i(1167),a=r&&r.isSet,s=a?o(a):n;t.exports=s},6719:(t,e,i)=>{var n=i(8749),o=i(1717),r=i(1167),a=r&&r.isTypedArray,s=a?o(a):n;t.exports=s},3674:(t,e,i)=>{var n=i(4636),o=i(280),r=i(8612);t.exports=function(t){return r(t)?n(t):o(t)}},1704:(t,e,i)=>{var n=i(4636),o=i(313),r=i(8612);t.exports=function(t){return r(t)?n(t,!0):o(t)}},479:t=>{t.exports=function(){return[]}},5062:t=>{t.exports=function(){return!1}},5045:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n,o=i(9179),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===o.q4?o.q4:"v"+o.q4.split("-")[0])+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return r(e,t),e}(Error)},8426:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n,o=i(5045),r=i(9629),a=i(8493),s=i(9520),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c="length",u=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.element=i,o.index=n,o}return l(e,t),e}(s.ZP);const h=function(t){function e(e,i){var n=t.call(this)||this,o=i||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var r=0,a=n.array_.length;r<a;++r)n.assertUnique_(n.array_[r],r);return n.updateLength_(),n}return l(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(c)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(r.Z.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(r.Z.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(r.Z.REMOVE,n,t)),this.dispatchEvent(new u(r.Z.ADD,e,t))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(c,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new o.Z(58)},e}(a.ZP)},9629:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ADD:"add",REMOVE:"remove"}},967:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}()},3068:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n,o=i(8906),r=i(3002),a=i(3381),s=i(8493),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const c=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener((0,s.v_)(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var o=e;i.setProperties(o)}return i}return l(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,r.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=(0,r.oL)(t,a.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:((0,o.h)("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener((0,s.v_)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener((0,s.v_)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(s.ZP)},2022:(t,e,i)=>{"use strict";i.d(e,{K:()=>h});var n,o=i(9217),r=i(1256),a=i(3002),s=i(3381),l=i(1915),c=i(1358),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});!function(t){function e(e,i,n,o,a,s){var l=t.call(this,e,i,n,r.Z.IDLE)||this;return l.src_=o,l.image_=new Image,null!==a&&(l.image_.crossOrigin=a),l.unlisten_=null,l.state=r.Z.IDLE,l.imageLoadFunction_=s,l}u(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=r.Z.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,l.Cr)(this.extent)/this.image_.height),this.state=r.Z.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=r.Z.IDLE&&this.state!=r.Z.ERROR||(this.state=r.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(o.Z);function h(t,e,i){var n=t;if(n.src&&c.Tp){var o=n.decode(),r=!0;return o.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){r=!1}}var l=[(0,a.Vx)(n,s.Z.LOAD,e),(0,a.Vx)(n,s.Z.ERROR,i)];return function(){l.forEach(a.bN)}}},9217:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n,o=i(9179),r=i(6575),a=i(3381),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const l=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=n,r.resolution=i,r.state=o,r}return s(e,t),e.prototype.changed=function(){this.dispatchEvent(a.Z.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return(0,o.O3)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){(0,o.O3)()},e}(r.Z)},1256:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},2062:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n,o=i(255),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e,i,n,o,r){var a=t.call(this,e,i,r)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==o&&o,a}return r(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(o.Z)},6:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(3381);const o={SINGLECLICK:"singleclick",CLICK:n.Z.CLICK,DBLCLICK:n.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},6968:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n,o=i(2062),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e,i,n,o,r){var a=t.call(this,e,i,n,o,r)||this;return a.pointerEvent=n,a}return r(e,t),e}(o.Z)},255:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n,o=i(9520),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.map=i,o.frameState=void 0!==n?n:null,o}return r(e,t),e}(o.ZP)},188:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},9850:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},8493:(t,e,i)=>{"use strict";i.d(e,{v_:()=>p,ZP:()=>f});var n,o=i(9179),r=i(3910),a=i(6834),s=i(9520),l=i(3580),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.key=i,o.oldValue=n,o}return c(e,t),e}(s.ZP),h=function(t){function e(e){var i=t.call(this)||this;return(0,o.sq)(i),i.values_={},void 0!==e&&i.setProperties(e),i}return c(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return(0,l.f0)({},this.values_)},e.prototype.notify=function(t,e){var i;i=p(t),this.dispatchEvent(new u(i,t,e)),i=r.Z.PROPERTYCHANGE,this.dispatchEvent(new u(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(a.Z),d={};function p(t){return d.hasOwnProperty(t)?d[t]:d[t]="change:"+t}const f=h},3910:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},6834:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n,o=i(3002),r=i(6575),a=i(3381),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const l=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return s(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(a.Z.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=(0,o.oL)(this,t[r],e);return n}return(0,o.oL)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=(0,o.Vx)(this,t[r],e);return n}return(0,o.Vx)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(r.Z)},3409:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n,o=i(188),r=i(8493),a=i(2868),s=i(7644),l=i(5386),c=i(3002),u=i(1915),h=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d="element",p="map",f="offset",g="position",m="positioning";const v=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s.$A,i.element.style.position="absolute";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener((0,r.v_)(d),i.handleElementChanged),i.addEventListener((0,r.v_)(p),i.handleMapChanged),i.addEventListener((0,r.v_)(f),i.handleOffsetChanged),i.addEventListener((0,r.v_)(g),i.handlePositionChanged),i.addEventListener((0,r.v_)(m),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:a.Z.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return h(e,t),e.prototype.getElement=function(){return this.get(d)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(p)},e.prototype.getOffset=function(){return this.get(f)},e.prototype.getPosition=function(){return this.get(g)},e.prototype.getPositioning=function(){return this.get(m)},e.prototype.handleElementChanged=function(){(0,l.ep)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,c.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,c.oL)(t,o.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(d,t)},e.prototype.setMap=function(t){this.set(p,t)},e.prototype.setOffset=function(t){this.set(f,t)},e.prototype.setPosition=function(t){this.set(g,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(g)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[(0,l.iO)(n),(0,l.Pb)(n)]),r=void 0===t.margin?20:t.margin;if(!(0,u.r4)(i,o)){var a=o[0]-i[0],s=i[2]-o[2],c=o[1]-i[1],h=i[3]-o[3],d=[0,0];if(a<0?d[0]=a-r:s<0&&(d[0]=Math.abs(s)+r),c<0?d[1]=c-r:h<0&&(d[1]=Math.abs(h)+r),0!==d[0]||0!==d[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p),m=[f[0]+d[0],f[1]+d[1]],v=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(m),duration:v.duration,easing:v.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(m,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",l="0%",c="0%";o==a.Z.BOTTOM_RIGHT||o==a.Z.CENTER_RIGHT||o==a.Z.TOP_RIGHT?l="-100%":o!=a.Z.BOTTOM_CENTER&&o!=a.Z.CENTER_CENTER&&o!=a.Z.TOP_CENTER||(l="-50%"),o==a.Z.BOTTOM_LEFT||o==a.Z.BOTTOM_CENTER||o==a.Z.BOTTOM_RIGHT?c="-100%":o!=a.Z.CENTER_LEFT&&o!=a.Z.CENTER_CENTER&&o!=a.Z.CENTER_RIGHT||(c="-50%");var u="translate("+l+", "+c+") translate("+r+", "+s+")";this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u,i.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(r.ZP)},2868:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},6993:(t,e,i)=>{"use strict";i.d(e,{Z:()=>B});var n,o=i(8426),r=i(9629),a=i(2062),s=(i(3225),i(1358)),l=i(6),c=i(6968),u=i(3002),h=i(6575),d=i(669),p=i(3381),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const g=function(t){function e(e,i){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i?i*s.MP:s.MP,n.down_=null;var o=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=o,n.pointerdownListenerKey_=(0,u.oL)(o,d.Z.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=(0,u.oL)(o,d.Z.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(p.Z.TOUCHMOVE,n.boundHandleTouchMove_,!!s.bM&&{passive:!1}),n}return f(e,t),e.prototype.emulateClick_=function(t){var e=new c.Z(l.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new c.Z(l.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new c.Z(l.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==l.Z.POINTERUP||e.type==l.Z.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==l.Z.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new c.Z(l.Z.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(u.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new c.Z(l.Z.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push((0,u.oL)(document,l.Z.POINTERMOVE,this.handlePointerMove_,this),(0,u.oL)(document,l.Z.POINTERUP,this.handlePointerUp_,this),(0,u.oL)(this.element_,l.Z.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new c.Z(l.Z.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new c.Z(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,u.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(p.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,u.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(u.bN),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(h.Z);var m=i(255),v=i(188),y=i(9850),b=i(7208),w=i(8493),_=i(3910),x=i(9900),C=i(8906),E=i(3580);const k=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,E.ZH)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){(0,C.h)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,o=e[t],r=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),c=l<n&&i[l]<i[s]?l:s;e[t]=e[c],i[t]=i[c],t=c}e[t]=o,i[t]=r,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,o=i[e],r=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>r))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=o,n[e]=r},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,o=this.elements_,r=this.priorities_,a=0,s=o.length;for(e=0;e<s;++e)(i=n(t=o[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[a]=i,o[a++]=t);o.length=a,r.length=a,this.heapify_()},t}();var T=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const S=function(t){function e(e,i){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return T(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&e[0].addEventListener(p.Z.CHANGE,this.boundHandleTileChange_);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&i===x.Z.LOADED||i===x.Z.ERROR||i===x.Z.EMPTY){e.removeEventListener(p.Z.CHANGE,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(i=this.dequeue()[0]).getKey(),i.getState()!==x.Z.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,i.load())},e}(k);var M=i(2138),R=i(6908),P=i(5386),L=i(1915),O=i(4011),D=i(9179),I=i(410),F=i(2418),A=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),N="layers";const j=function(t){function e(e){var i=this,n=e||{},r=(0,E.f0)({},n);delete r.layers;var a=n.layers;return(i=t.call(this,r)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener((0,w.v_)(N),i.handleLayersChanged_),a?Array.isArray(a)?a=new o.Z(a.slice(),{unique:!0}):(0,C.h)("function"==typeof a.getArray,43):a=new o.Z(void 0,{unique:!0}),i.setLayers(a),i}return A(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(u.bN),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push((0,u.oL)(t,r.Z.ADD,this.handleLayersAdd_,this),(0,u.oL)(t,r.Z.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(u.bN);(0,E.ZH)(this.listenerKeys_);for(var i=t.getArray(),n=0,o=i.length;n<o;n++){var a=i[n];this.listenerKeys_[(0,D.sq)(a)]=[(0,u.oL)(a,_.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.oL)(a,p.Z.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[(0,D.sq)(e)]=[(0,u.oL)(e,_.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.oL)(e,p.Z.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=(0,D.sq)(e);this.listenerKeys_[i].forEach(u.bN),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(N)},e.prototype.setLayers=function(t){this.set(N,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),o=i,r=e.length;o<r;o++){var a=e[o];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,L.Ed)(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return F.Z.READY},e}(I.Z);var z=i(596),Z=i(2359),G=i(3272),H=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const B=function(t){function e(e){var i=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,a={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new j({layers:t.layers});a[y.Z.LAYERGROUP]=s,a[y.Z.TARGET]=t.target,a[y.Z.VIEW]=void 0!==t.view?t.view:new M.ZP,void 0!==t.controls&&(Array.isArray(t.controls)?i=new o.Z(t.controls.slice()):((0,C.h)("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new o.Z(t.interactions.slice()):((0,C.h)("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new o.Z(t.overlays.slice()):((0,C.h)("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new o.Z;return{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:a}}(e);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:s.MP,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=(0,Z.Ue)(),i.pixelToCoordinateTransform_=(0,Z.Ue)(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=new g(i,e.moveTolerance);var a=i.handleMapBrowserEvent.bind(i);for(var c in l.Z)i.mapBrowserEventHandler_.addEventListener(l.Z[c],a);i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null;var u=i.handleBrowserEvent.bind(i);return i.viewport_.addEventListener(p.Z.CONTEXTMENU,u,!1),i.viewport_.addEventListener(p.Z.WHEEL,u,!!s.bM&&{passive:!1}),i.controls=n.controls||new o.Z,i.interactions=n.interactions||new o.Z,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new S(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addEventListener((0,w.v_)(y.Z.LAYERGROUP),i.handleLayerGroupChanged_),i.addEventListener((0,w.v_)(y.Z.VIEW),i.handleViewChanged_),i.addEventListener((0,w.v_)(y.Z.SIZE),i.handleSizeChanged_),i.addEventListener((0,w.v_)(y.Z.TARGET),i.handleTargetChanged_),i.setProperties(n.values),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.controls.addEventListener(r.Z.ADD,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(r.Z.REMOVE,function(t){t.element.setMap(null)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.addEventListener(r.Z.ADD,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(r.Z.REMOVE,function(t){t.element.setMap(null)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i.overlays_.addEventListener(r.Z.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(i)),i.overlays_.addEventListener(r.Z.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(i)),i}return H(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(p.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(p.Z.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(p.Z.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,r=void 0!==i.layerFilter?i.layerFilter:O.uX,a=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},o=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,r=n.layerFilter||O.uX;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:O.uX,o=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,r,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(y.Z.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return(0,G.lO)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?(0,Z.nn)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(y.Z.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=(0,G.Vs)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?(0,Z.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(y.Z.SIZE)},e.prototype.getView=function(){return this.get(y.Z.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){return function(t,e,i,n,o){if(!t||!(i in t.wantedTiles))return 1/0;if(!t.wantedTiles[i][e.getKey()])return 1/0;var r=t.viewState.center,a=n[0]-r[0],s=n[1]-r[1];return 65536*Math.log(o)+Math.sqrt(a*a+s*s)/o}(this.frameState_,t,e,i,n)},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new a.Z(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=i.length-1;n>=0;n--){var o=i[n];if(o.getActive())if(!o.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var o=t.viewHints;if(o[R.Z.ANIMATING]||o[R.Z.INTERACTING]){var r=!s.Tp&&Date.now()-t.time>8;i=r?0:8,n=r?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(b.Z.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(b.Z.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,l=0,c=a.length;l<c;++l)a[l](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)(0,u.bN)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[(0,u.oL)(n,p.Z.KEYDOWN,this.handleBrowserEvent,this),(0,u.oL)(n,p.Z.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(p.Z.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),(0,P.ZF)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(p.Z.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,u.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,u.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,u.oL)(t,_.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,u.oL)(t,p.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(u.bN),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[(0,u.oL)(t,_.Z.PROPERTYCHANGE,this.render,this),(0,u.oL)(t,p.Z.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),i=this.getView(),n=this.frameState_,o=null;if(void 0!==e&&(0,z.py)(e)&&i&&i.isDef()){var r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:(0,L.p8)(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:r,wantedTiles:{}}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n)(!this.previousExtent_||!(0,L.xb)(this.previousExtent_)&&!(0,L.fS)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new m.Z(v.Z.MOVESTART,this,n)),this.previousExtent_=(0,L.YN)(this.previousExtent_));this.previousExtent_&&!o.viewHints[R.Z.ANIMATING]&&!o.viewHints[R.Z.INTERACTING]&&!(0,L.fS)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new m.Z(v.Z.MOVEEND,this,o)),(0,L.d9)(o.extent,this.previousExtent_))}this.dispatchEvent(new m.Z(v.Z.POSTRENDER,this,o)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(y.Z.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(y.Z.SIZE,t)},e.prototype.setTarget=function(t){this.set(y.Z.TARGET,t)},e.prototype.setView=function(t){this.set(y.Z.VIEW,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},e}(w.ZP)},9900:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},2138:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>R});var n=i(508),o=i(4011),r=i(1882);function a(t,e,i){return function(n,o,a,s){if(n){var l=e?0:a[0]*o,c=e?0:a[1]*o,u=t[0]+l/2,h=t[2]-l/2,d=t[1]+c/2,p=t[3]-c/2;u>h&&(h=u=(h+u)/2),d>p&&(p=d=(p+d)/2);var f=(0,r.uZ)(n[0],u,h),g=(0,r.uZ)(n[1],d,p),m=30*o;return s&&i&&(f+=-m*Math.log(1+Math.max(0,u-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-h)/m),g+=-m*Math.log(1+Math.max(0,d-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-p)/m)),[f,g]}}}function s(t){return t}var l=i(8493),c=i(9682),u=i(1915);function h(t,e,i,n){var o=(0,u.dz)(e)/i[0],r=(0,u.Cr)(e)/i[1];return n?Math.min(t,Math.max(o,r)):Math.min(t,Math.min(o,r))}function d(t,e,i){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,r.uZ)(n,i/2,2*e)}function p(t,e,i,n,o){return function(a,s,l,c){if(void 0!==a){var u=n?h(t,n,l,o):t;return(void 0===i||i)&&c?d(a,u,e):(0,r.uZ)(a,e,u)}}}var f,g=i(8642),m=i(6908),v=i(6340),y=i(8906),b=i(728),w=i(6320),_=i(8795),x=i(8739),C=i(3580),E=i(3272),k=i(868),T=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function S(t,e){setTimeout((function(){t(e)}),0)}function M(t){return!(t.sourceCenter&&t.targetCenter&&!(0,b.fS)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}const R=function(t){function e(e){var i=t.call(this)||this,n=(0,C.f0)({},e);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=(0,E.UQ)(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.cancelAnchor_=void 0,n.center&&(n.center=(0,E.Vs)(n.center,i.projection_)),n.extent&&(n.extent=(0,E.dY)(n.extent,i.projection_)),i.applyOptions_(n),i}return T(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,i,o,a=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,l=void 0!==t.zoomFactor?t.zoomFactor:2,f=void 0!==t.multiWorld&&t.multiWorld,g=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,m=void 0!==t.showFullExtent&&t.showFullExtent,v=(0,E.UQ)(t.projection,"EPSG:3857"),y=v.getExtent(),b=t.constrainOnlyCenter,w=t.extent;f||w||!v.isGlobal()||(b=!1,w=y);if(void 0!==t.resolutions){var _=t.resolutions;i=_[a],o=void 0!==_[s]?_[s]:_[_.length-1],e=t.constrainResolution?function(t,e,i,n){return function(o,a,s,l){if(void 0!==o){var u=t[0],p=t[t.length-1],f=i?h(u,i,s,n):u;if(l)return void 0===e||e?d(o,f,p):(0,r.uZ)(o,p,f);var g=Math.min(f,o),m=Math.floor((0,c.h7)(t,g,a));return t[m]>f&&m<t.length-1?t[m+1]:t[m]}}}(_,g,!b&&w,m):p(i,o,g,!b&&w,m)}else{var x=(y?Math.max((0,u.dz)(y),(0,u.Cr)(y)):360*E.Wm[k.Z.DEGREES]/v.getMetersPerUnit())/n.S/Math.pow(2,0),C=x/Math.pow(2,28);void 0!==(i=t.maxResolution)?a=0:i=x/Math.pow(l,a),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,s):x/Math.pow(l,s):C),s=a+Math.floor(Math.log(i/o)/Math.log(l)),o=i/Math.pow(l,s-a),e=t.constrainResolution?function(t,e,i,n,o,a){return function(s,l,c,u){if(void 0!==s){var p=o?h(e,o,c,a):e,f=void 0!==i?i:0;if(u)return void 0===n||n?d(s,p,f):(0,r.uZ)(s,f,p);var g=Math.ceil(Math.log(e/p)/Math.log(t)-1e-9),m=-l*(.5-1e-9)+.5,v=Math.min(p,s),y=Math.floor(Math.log(e/v)/Math.log(t)+m),b=Math.max(g,y),w=e/Math.pow(t,b);return(0,r.uZ)(w,f,p)}}}(l,i,o,g,!b&&w,m):p(i,o,g,!b&&w,m)}return{constraint:e,maxResolution:i,minResolution:o,minZoom:a,zoomFactor:l}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return a(t.extent,t.constrainOnlyCenter,e)}var i=(0,E.UQ)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var n=i.getExtent().slice();return n[0]=-1/0,n[2]=1/0,a(n,!1,!1)}return s}(t),o=e.constraint,l=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,g.Gw)():!1===e?g.YP:"number"==typeof e?(0,g.gE)(e):g.YP}return g.h$}(t);this.constraints_={center:i,resolution:o,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=(0,C.f0)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),(0,C.f0)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var n=arguments[i];n.center&&((n=(0,C.f0)({},n)).center=(0,E.Vs)(n.center,this.getProjection())),n.anchor&&((n=(0,C.f0)({},n)).anchor=(0,E.Vs)(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&S(e,!0))}for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_,c=[],u=0;u<i;++u){var h=arguments[u],d={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||w.rd,callback:e};if(h.center&&(d.sourceCenter=a,d.targetCenter=h.center.slice(),a=d.targetCenter),void 0!==h.zoom?(d.sourceResolution=s,d.targetResolution=this.getResolutionForZoom(h.zoom),s=d.targetResolution):h.resolution&&(d.sourceResolution=s,d.targetResolution=h.resolution,s=d.targetResolution),void 0!==h.rotation){d.sourceRotation=l;var p=(0,r.$W)(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+p,l=d.targetRotation}M(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(m.Z.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[m.Z.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[m.Z.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(m.Z.ANIMATING,-this.hints_[m.Z.ANIMATING]);for(var e=0,i=this.animations_.length;e<i;++e){var n=this.animations_[e];if(n[0].callback&&S(n[0].callback,!1),!t)for(var o=0,r=n.length;o<r;++o){var a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],o=!0,a=0,s=n.length;a<s;++a){var l=n[a];if(!l.complete){var c=t-l.start,u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):o=!1;var h=l.easing(u);if(l.sourceCenter){var d=l.sourceCenter[0],p=l.sourceCenter[1],f=d+h*(l.targetCenter[0]-d),g=p+h*(l.targetCenter[1]-p);this.targetCenter_=[f,g]}if(l.sourceResolution&&l.targetResolution){var v=1===h?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){var y=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(v,0,y,!0);this.targetCenter_=this.calculateCenterZoom(b,l.anchor)}this.targetResolution_=v,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var w=1===h?(0,r.$W)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){var _=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(_,l.anchor)}this.targetRotation_=w}if(this.applyTargetState_(!0),e=!0,!l.complete)break}}if(o){this.animations_[i]=null,this.setHint(m.Z.ANIMATING,-1);var x=n[0].callback;x&&S(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,b.U1)(i,t-this.getRotation()),(0,b.IH)(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenterInternal(),o=this.getResolution();void 0!==n&&void 0!==o&&(i=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]);return i},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?(0,E.lO)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(v.Z.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return(0,E.Fj)(e,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),i=this.getCenterInternal();(0,y.h)(i,1);var n=this.getResolution();(0,y.h)(void 0!==n,2);var o=this.getRotation();return(0,y.h)(void 0!==o,3),(0,u.p8)(i,n,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(v.Z.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal((0,E.dY)(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSize_(),n=(0,u.dz)(t)/i[0],o=(0,u.Cr)(t)/i[1];return Math.max(n,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(v.Z.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/o}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:i,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var o=(0,c.h7)(this.resolutions_,t,1);n=o,e=this.resolutions_[o],i=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,r.uZ)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,r.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var i,n=(0,C.f0)({size:this.getViewportSize_()},e||{});if((0,y.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,y.h)(!(0,u.xb)(t),25);var o=(0,E.dY)(t,this.getProjection());i=(0,x.oJ)(o)}else if(t.getType()===_.Z.CIRCLE){o=(0,E.dY)(t.getExtent(),this.getProjection());(i=(0,x.oJ)(o)).rotate(this.getRotation(),(0,u.qg)(o))}else{var r=(0,E.Cs)();i=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(i,n)},e.prototype.fitInternal=function(t,e){var i=e||{},n=i.size;n||(n=this.getViewportSize_());var r,a=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;r=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;for(var l=t.getFlatCoordinates(),c=this.getRotation(),u=Math.cos(-c),h=Math.sin(-c),d=1/0,p=1/0,f=-1/0,g=-1/0,m=t.getStride(),v=0,y=l.length;v<y;v+=m){var b=l[v]*u-l[v+1]*h,w=l[v]*h+l[v+1]*u;d=Math.min(d,b),p=Math.min(p,w),f=Math.max(f,b),g=Math.max(g,w)}var _=this.getResolutionForExtentInternal([d,p,f,g],[n[0]-a[1]-a[3],n[1]-a[0]-a[2]]);_=isNaN(_)?r:Math.max(_,r),_=this.getConstrainedResolution(_,s?0:1),h=-h;var x=(d+f)/2,C=(p+g)/2,E=[(x+=(a[1]-a[3])/2*_)*u-(C+=(a[0]-a[2])/2*_)*h,C*u+x*h],k=i.callback?i.callback:o.Zn;void 0!==i.duration?this.animateInternal({resolution:_,center:this.getConstrainedCenter(E,_),duration:i.duration,easing:i.easing},k):(this.targetResolution_=_,this.targetCenter_=E,this.applyTargetState_(!1,!0),S(k,!0))},e.prototype.centerOn=function(t,e,i){this.centerOnInternal((0,E.Vs)(t,this.getProjection()),e,i)},e.prototype.centerOnInternal=function(t,e,i){var n=this.getRotation(),o=Math.cos(-n),r=Math.sin(-n),a=t[0]*o-t[1]*r,s=t[1]*o+t[0]*r,l=this.getResolution(),c=(a+=(e[0]/2-i[0])*l)*o-(s+=(i[1]-e[1]/2)*l)*(r=-r),u=s*o+a*r;this.setCenterInternal([c,u])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=(0,E.lO)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var i=e&&(0,E.Vs)(e,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=(0,E.Vs)(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal((0,E.Vs)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,r,o,i);this.get(v.Z.ROTATION)!==n&&this.set(v.Z.ROTATION,n),this.get(v.Z.RESOLUTION)!==r&&this.set(v.Z.RESOLUTION,r),this.get(v.Z.CENTER)&&(0,b.fS)(this.get(v.Z.CENTER),a)||this.set(v.Z.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,i){var n=void 0!==t?t:200,o=e||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,o,a),l=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var c=i||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&(0,b.fS)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:s,duration:n,easing:w.Vv,anchor:c}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(m.Z.INTERACTING,1)},e.prototype.endInteraction=function(t,e,i){var n=i&&(0,E.Vs)(i,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,i){this.setHint(m.Z.INTERACTING,-1),this.resolveConstraints(t,e,i)},e.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},e.prototype.getConstrainedResolution=function(t,e){var i=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)},e}(l.ZP)},6908:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ANIMATING:0,INTERACTING:1}},6340:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},9682:(t,e,i)=>{"use strict";function n(t,e,i){for(var n,r,a=i||o,s=0,l=t.length,c=!1;s<l;)(r=+a(t[n=s+(l-s>>1)],e))<0?s=n+1:(l=n,c=!r);return c?s:~s}function o(t,e){return t>e?1:t<e?-1:0}function r(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var o=void 0;if(i>0){for(o=1;o<n;++o)if(t[o]<e)return o-1}else if(i<0){for(o=1;o<n;++o)if(t[o]<=e)return o}else for(o=1;o<n;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return n-1}function a(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function s(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,o=0;o<n;o++)t[t.length]=i[o]}function l(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function c(t,e,i){var n=e||o;return t.every((function(e,o){if(0===o)return!0;var r=n(t[o-1],e);return!(r>0||i&&0===r)}))}i.d(e,{ry:()=>n,kK:()=>o,h7:()=>r,FZ:()=>a,l7:()=>s,fS:()=>l,pT:()=>c})},8906:(t,e,i)=>{"use strict";i.d(e,{h:()=>o});var n=i(5045);function o(t,e){if(!t)throw new n.Z(e)}},8913:(t,e,i)=>{"use strict";i.d(e,{XC:()=>s,_2:()=>d,BB:()=>f});var n=i(8906),o=i(1882),r=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:f(t)}function l(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}var c,u,h=(c={},u=0,function(t){var e;if(c.hasOwnProperty(t))e=c[t];else{if(u>=1024){var i=0;for(var o in c)0==(3&i++)&&(delete c[o],--u)}e=function(t){var e,i,o,s,c;if(a.exec(t)&&(t=l(t)),r.exec(t)){var u=t.length-1,h=void 0;h=u<=4?1:2;var d=4===u||8===u;e=parseInt(t.substr(1+0*h,h),16),i=parseInt(t.substr(1+1*h,h),16),o=parseInt(t.substr(1+2*h,h),16),s=d?parseInt(t.substr(1+3*h,h),16):255,1==h&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,d&&(s=(s<<4)+s)),c=[e,i,o,s/255]}else 0==t.indexOf("rgba(")?p(c=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,n.h)(!1,14);return c}(t),c[t]=e,++u}return e});function d(t){return Array.isArray(t)?t:h(t)}function p(t){return t[0]=(0,o.uZ)(t[0]+.5|0,0,255),t[1]=(0,o.uZ)(t[1]+.5|0,0,255),t[2]=(0,o.uZ)(t[2]+.5|0,0,255),t[3]=(0,o.uZ)(t[3],0,1),t}function f(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}},5120:(t,e,i)=>{"use strict";i.d(e,{y:()=>o});var n=i(8913);function o(t){return Array.isArray(t)?(0,n.BB)(t):t}},9530:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n,o=i(4011),r=i(188),a=i(8493),s=i(5386),l=i(3002),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const u=function(t){function e(e){var i=t.call(this)||this;return i.element=e.element?e.element:null,i.target_=null,i.map_=null,i.listenerKeys=[],i.render_=e.render?e.render:o.Zn,e.target&&i.setTarget(e.target),i}return c(e,t),e.prototype.disposeInternal=function(){(0,s.ZF)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&(0,s.ZF)(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)(0,l.bN)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==o.Zn&&this.listenerKeys.push((0,l.oL)(t,r.Z.POSTRENDER,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(a.ZP)},728:(t,e,i)=>{"use strict";i.d(e,{IH:()=>o,oL:()=>r,fS:()=>a,U1:()=>s,bA:()=>l,bI:()=>c,TE:()=>u,Bs:()=>h,Cf:()=>d});var n=i(1915);function o(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function r(t,e){var i,n,o=t[0],r=t[1],a=e[0],s=e[1],l=a[0],c=a[1],u=s[0],h=s[1],d=u-l,p=h-c,f=0===d&&0===p?0:(d*(o-l)+p*(r-c))/(d*d+p*p||0);return f<=0?(i=l,n=c):f>=1?(i=u,n=h):(i=l+f*d,n=c+f*p),[i,n]}function a(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function s(t,e){var i=Math.cos(e),n=Math.sin(e),o=t[0]*i-t[1]*n,r=t[1]*i+t[0]*n;return t[0]=o,t[1]=r,t}function l(t,e){return t[0]*=e,t[1]*=e,t}function c(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function u(t,e){return Math.sqrt(c(t,e))}function h(t,e){return c(t,r(t,e))}function d(t,e){var i=e.getExtent();if(e.canWrapX()&&(t[0]<i[0]||t[0]>=i[2])){var o=(0,n.dz)(i),r=Math.floor((t[0]-i[0])/o);t[0]-=r*o}return t}},7644:(t,e,i)=>{"use strict";i.d(e,{oj:()=>n,$A:()=>o,XV:()=>r,hg:()=>a,hN:()=>s,p:()=>u});var n="ol-hidden",o="ol-selectable",r="ol-unselectable",a="ol-control",s="ol-collapsed",l=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),c=["style","variant","weight","size","lineHeight","family"],u=function(t){var e=t.match(l);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=c.length;n<o;++n){var r=e[n+1];void 0!==r&&(i[c[n]]=r)}return i.families=i.family.split(/,\s?/),i}},5386:(t,e,i)=>{"use strict";i.d(e,{E4:()=>o,iO:()=>r,Pb:()=>a,$H:()=>s,ZF:()=>l,ep:()=>c,hF:()=>u});var n=i(1358);function o(t,e,i){var o=i&&i.length?i.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(o.width=t),e&&(o.height=e),o.getContext("2d")}function r(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function a(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function s(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function l(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function c(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function u(t,e){for(var i=t.childNodes,n=0;;++n){var o=i[n],r=e[n];if(!o&&!r)break;o!==r&&(o?r?t.insertBefore(r,o):(t.removeChild(o),--n):t.appendChild(r))}}},6320:(t,e,i)=>{"use strict";function n(t){return Math.pow(t,3)}function o(t){return 1-n(1-t)}function r(t){return 3*t*t-2*t*t*t}function a(t){return t}i.d(e,{YQ:()=>n,Vv:()=>o,rd:()=>r,GE:()=>a})},3002:(t,e,i)=>{"use strict";i.d(e,{oL:()=>o,Vx:()=>r,bN:()=>a});var n=i(3580);function o(t,e,i,n,o){if(n&&n!==t&&(i=i.bind(n)),o){var r=i;i=function(){t.removeEventListener(e,i),r.apply(this,arguments)}}var a={target:t,type:e,listener:i};return t.addEventListener(e,i),a}function r(t,e,i,n){return o(t,e,i,n,!0)}function a(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.ZH)(t))}},9520:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>n});const n=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}()},3381:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},6575:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n,o=i(967),r=i(4011),a=i(9520),s=i(3580),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const c=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_={},i.dispatching_={},i.listeners_={},i}return l(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_[t];i||(i=[],this.listeners_[t]=i),-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.ZP(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,l=o.length;s<l;++s)if(!1===(n="handleEvent"in o[s]?o[s].handleEvent(e):o[s].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var c=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];c--;)this.removeEventListener(i,r.Zn);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){(0,s.ZH)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(i[n]=r.Zn,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(o.Z)},6403:(t,e,i)=>{"use strict";i.d(e,{Ko:()=>s,aj:()=>l,T_:()=>c,Bx:()=>u,V4:()=>h,v8:()=>d,Kf:()=>p,rM:()=>f,vY:()=>g,TN:()=>m,QL:()=>v,Xp:()=>y});var n=i(6),o=i(8906),r=i(4011),a=i(1358),s=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},c=function(t){return t.target.getTargetElement()===document.activeElement},u=r.uX,h=function(t){return t.type==n.Z.CLICK},d=function(t){var e=t.originalEvent;return 0==e.button&&!(a.G$&&a.tK&&e.ctrlKey)},p=function(t){return t.type==n.Z.SINGLECLICK},f=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},g=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},m=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},v=function(t){var e=t.pointerEvent;return(0,o.h)(void 0!==e,56),"mouse"==e.pointerType},y=function(t){var e=t.pointerEvent;return(0,o.h)(void 0!==e,56),e.isPrimary&&0===e.button}},1915:(t,e,i)=>{"use strict";i.d(e,{hI:()=>a,f3:()=>s,d9:()=>l,qf:()=>c,b8:()=>u,r4:()=>h,jE:()=>d,pX:()=>p,lJ:()=>f,T9:()=>g,YN:()=>m,HK:()=>v,ZT:()=>y,GN:()=>b,fS:()=>w,l7:()=>_,Wj:()=>x,qP:()=>E,H6:()=>T,bg:()=>S,hC:()=>M,w$:()=>R,qg:()=>P,g0:()=>L,p8:()=>O,Cr:()=>D,Ed:()=>I,rL:()=>F,Xv:()=>A,dz:()=>N,kK:()=>j,xb:()=>z,EO:()=>Z,H9:()=>G,I7:()=>H,Ne:()=>B,Cf:()=>V});var n=i(8906),o=i(1748),r=i(4178);function a(t){for(var e=f(),i=0,n=t.length;i<n;++i)x(e,t[i]);return e}function s(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function c(t,e,i){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*o}function u(t,e){return d(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function p(t,e){var i=t[0],n=t[1],o=t[2],a=t[3],s=e[0],l=e[1],c=r.Z.UNKNOWN;return s<i?c|=r.Z.LEFT:s>o&&(c|=r.Z.RIGHT),l<n?c|=r.Z.BELOW:l>a&&(c|=r.Z.ABOVE),c===r.Z.UNKNOWN&&(c=r.Z.INTERSECTING),c}function f(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,i,n,o){return o?(o[0]=t,o[1]=e,o[2]=i,o[3]=n,o):[t,e,i,n]}function m(t){return g(1/0,1/0,-1/0,-1/0,t)}function v(t,e){var i=t[0],n=t[1];return g(i,n,i,n,e)}function y(t,e){return C(m(e),t)}function b(t,e,i,n,o){return E(m(o),t,e,i,n)}function w(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function _(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function x(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function C(t,e){for(var i=0,n=e.length;i<n;++i)x(t,e[i]);return t}function E(t,e,i,n,o){for(;i<n;i+=o)k(t,e[i],e[i+1]);return t}function k(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function T(t,e){var i;return(i=e(M(t)))||(i=e(R(t)))||(i=e(A(t)))?i:(i=e(F(t)))||!1}function S(t){var e=0;return z(t)||(e=N(t)*D(t)),e}function M(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function P(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function L(t,e){var i;return e===o.Z.BOTTOM_LEFT?i=M(t):e===o.Z.BOTTOM_RIGHT?i=R(t):e===o.Z.TOP_LEFT?i=F(t):e===o.Z.TOP_RIGHT?i=A(t):(0,n.h)(!1,13),i}function O(t,e,i,n,o){var r=e*n[0]/2,a=e*n[1]/2,s=Math.cos(i),l=Math.sin(i),c=r*s,u=r*l,h=a*s,d=a*l,p=t[0],f=t[1],m=p-c+d,v=p-c-d,y=p+c-d,b=p+c+d,w=f-u-h,_=f-u+h,x=f+u+h,C=f+u-h;return g(Math.min(m,v,y,b),Math.min(w,_,x,C),Math.max(m,v,y,b),Math.max(w,_,x,C),o)}function D(t){return t[3]-t[1]}function I(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return j(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):m(n),n}function F(t){return[t[0],t[3]]}function A(t){return[t[2],t[3]]}function N(t){return t[2]-t[0]}function j(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function z(t){return t[2]<t[0]||t[3]<t[1]}function Z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function G(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function H(t,e,i){var n=!1,o=p(t,e),a=p(t,i);if(o===r.Z.INTERSECTING||a===r.Z.INTERSECTING)n=!0;else{var s=t[0],l=t[1],c=t[2],u=t[3],h=e[0],d=e[1],f=i[0],g=i[1],m=(g-d)/(f-h),v=void 0,y=void 0;a&r.Z.ABOVE&&!(o&r.Z.ABOVE)&&(n=(v=f-(g-u)/m)>=s&&v<=c),n||!(a&r.Z.RIGHT)||o&r.Z.RIGHT||(n=(y=g-(f-c)*m)>=l&&y<=u),n||!(a&r.Z.BELOW)||o&r.Z.BELOW||(n=(v=f-(g-l)/m)>=s&&v<=c),n||!(a&r.Z.LEFT)||o&r.Z.LEFT||(n=(y=g-(f-s)*m)>=l&&y<=u)}return n}function B(t,e,i,n){var o=[];if(n>1)for(var r=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+r*s/n,t[1],t[2],t[1]+a*s/n,t[2]-r*s/n,t[3],t[0],t[3]-a*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var l=[],c=[],u=(s=0,o.length);s<u;s+=2)l.push(o[s]),c.push(o[s+1]);return function(t,e,i){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(l,c,i)}function V(t,e){var i=e.getExtent(),n=P(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var o=N(i),r=Math.floor((n[0]-i[0])/o)*o;t[0]-=r,t[2]-=r}return t}},1748:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},4178:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},800:(t,e,i)=>{"use strict";i.d(e,{ov:()=>a,Be:()=>s});var n=i(4011),o=i(4007),r=!1;function a(t,e,i,n){return function(a,s,l){var c=new XMLHttpRequest;c.open("GET","function"==typeof t?t(a,s,l):t,!0),e.getType()==o.Z.ARRAY_BUFFER&&(c.responseType="arraybuffer"),c.withCredentials=r,c.onload=function(t){if(!c.status||c.status>=200&&c.status<300){var r=e.getType(),s=void 0;r==o.Z.JSON||r==o.Z.TEXT?s=c.responseText:r==o.Z.XML?(s=c.responseXML)||(s=(new DOMParser).parseFromString(c.responseText,"application/xml")):r==o.Z.ARRAY_BUFFER&&(s=c.response),s?i.call(this,e.readFeatures(s,{extent:a,featureProjection:l}),e.readProjection(s)):n.call(this)}else n.call(this)}.bind(this),c.onerror=function(){n.call(this)}.bind(this),c.send()}}function s(t,e){return a(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),n.Zn)}},4007:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},4011:(t,e,i)=>{"use strict";i.d(e,{uX:()=>o,Dv:()=>r,Zn:()=>a,qe:()=>s});var n=i(9682);function o(){return!0}function r(){return!1}function a(){}function s(t){var e,i,o,r=!1;return function(){var a=Array.prototype.slice.call(arguments);return r&&this===o&&(0,n.fS)(a,i)||(r=!0,o=this,i=a,e=t.apply(this,arguments)),e}}},8204:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n,o=i(9179),r=i(8493),a=i(1915),s=i(7882),l=i(3272),c=i(868),u=i(2359),h=i(4011),d=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=(0,u.Ue)();const f=function(t){function e(){var e=t.call(this)||this;return e.extent_=(0,a.lJ)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=(0,h.qe)((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})),e}return d(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return(0,o.O3)()},e.prototype.closestPointXY=function(t,e,i,n){return(0,o.O3)()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return(0,o.O3)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,a.EO)(this.extent_,t)},e.prototype.rotate=function(t,e){(0,o.O3)()},e.prototype.scale=function(t,e,i){(0,o.O3)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return(0,o.O3)()},e.prototype.getType=function(){return(0,o.O3)()},e.prototype.applyTransform=function(t){(0,o.O3)()},e.prototype.intersectsExtent=function(t){return(0,o.O3)()},e.prototype.translate=function(t,e){(0,o.O3)()},e.prototype.transform=function(t,e){var i=(0,l.U2)(t),n=i.getUnits()==c.Z.TILE_PIXELS?function(t,n,o){var r=i.getExtent(),c=i.getWorldExtent(),h=(0,a.Cr)(c)/(0,a.Cr)(r);return(0,u.qC)(p,c[0],c[3],h,-h,0,0,0),(0,s.vT)(t,0,t.length,o,p,n),(0,l.Ck)(i,e)(t,n,o)}:(0,l.Ck)(i,e);return this.applyTransform(n),this},e}(r.ZP)},3696:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},8795:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},4538:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var n,o=i(9682),r=i(1915),a=i(3696),s=i(8795),l=i(2538),c=i(3729),u=i(8667),h=i(6204),d=i(1422),p=i(897),f=i(4027),g=i(5173),m=i(1193),v=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const y=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return v(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?(0,o.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,r.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,c.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,c.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return(0,g.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=a.Z.XYM&&this.layout!=a.Z.XYZM)return null;var i=void 0!==e&&e;return(0,d.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return(0,h.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return(0,d.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return(0,f.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=(0,m.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,a.Z.XY)},e.prototype.getType=function(){return s.Z.LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,p.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,u.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(l.ZP)},2948:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n,o=i(1915),r=i(3696),a=i(8795),s=i(2538),l=i(2562),c=i(3729),u=i(8667),h=i(6204),d=i(1193),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const f=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return p(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,o.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,c.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,c.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return(0,l.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return(0,h.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=(0,d.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,r.Z.XY)},e.prototype.getType=function(){return a.Z.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,u.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.ZP)},2043:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n,o=i(1915),r=i(8795),a=i(2538),s=i(8667),l=i(1882),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const u=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return c(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=(0,l.bI)(t,e,o[0],o[1]);if(r<n){for(var a=this.stride,s=0;s<a;++s)i[s]=o[s];return i.length=a,r}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return(0,o.HK)(this.flatCoordinates,t)},e.prototype.getType=function(){return r.Z.POINT},e.prototype.intersectsExtent=function(t){return(0,o.jE)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.IG)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.ZP)},8739:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>C,oJ:()=>E,Bb:()=>k,Ej:()=>T});var n,o=i(9682),r=i(1915),a=i(3696),s=i(8795),l=i(2948),c=i(2043),u=i(2538),h=i(2562),d=i(3729),p=i(197),f=i(8667),g=i(6204),m=i(8529),v=i(897),y=i(8385),b=i(1193),w=i(1882),_=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),x=function(t){function e(e,i,n){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==i&&n?(o.setFlatCoordinates(i,e),o.ends_=n):o.setCoordinates(e,i),o}return _(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?(0,o.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,r.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return(0,p.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return(0,h.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,y.zX)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,g.o1)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,r.qg)(this.getExtent());this.flatInteriorPoint_=(0,m.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new c.Z(this.getFlatInteriorPoint(),a.Z.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new l.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],o=0,r=0,a=i.length;r<a;++r){var s=i[r],c=new l.Z(e.slice(o,s),t);n.push(c),o=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,y.$v)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,y.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=(0,b.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,a.Z.XY,n)},e.prototype.getType=function(){return s.Z.POLYGON},e.prototype.intersectsExtent=function(t){return(0,v.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,f._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(u.ZP);const C=x;function E(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=[e,i,e,o,n,o,n,i,e,i];return new x(r,a.Z.XY,[r.length])}function k(t,e,i){for(var n=e||32,o=t.getStride(),r=t.getLayout(),a=t.getCenter(),s=o*(n+1),l=new Array(s),c=0;c<s;c+=o){l[c]=0,l[c+1]=0;for(var u=2;u<o;u++)l[c+u]=a[u]}var h=[l.length],d=new x(l,r,h);return T(d,a,t.getRadius(),i),d}function T(t,e,i,n){for(var o=t.getFlatCoordinates(),r=t.getStride(),a=o.length/r-1,s=n||0,l=0;l<=a;++l){var c=l*r,u=s+2*(0,w.$W)(l,a)*Math.PI/a;o[c]=e[0]+i*Math.cos(u),o[c+1]=e[1]+i*Math.sin(u)}t.changed()}},2538:(t,e,i)=>{"use strict";i.d(e,{Kr:()=>h,ZP:()=>d});var n,o=i(9179),r=i(1915),a=i(8204),s=i(3696),l=i(7882),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function u(t){var e;return t==s.Z.XY?e=2:t==s.Z.XYZ||t==s.Z.XYM?e=3:t==s.Z.XYZM&&(e=4),e}function h(t,e,i){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return(0,l.vT)(n,0,n.length,o,e,i)}return null}const d=function(t){function e(){var e=t.call(this)||this;return e.layout=s.Z.XY,e.stride=2,e.flatCoordinates=null,e}return c(e,t),e.prototype.computeExtent=function(t){return(0,r.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return(0,o.O3)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=u(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){(0,o.O3)()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=u(t);else{for(var o=0;o<i;++o){if(0===e.length)return this.layout=s.Z.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=s.Z.XY:3==t?e=s.Z.XYZ:4==t&&(e=s.Z.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();(0,l.U1)(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var o=i;o||(o=(0,r.qg)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var s=this.getStride();(0,l.bA)(a,0,a.length,s,t,n,o,a),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();(0,l.Iu)(i,0,i.length,n,t,e,i),this.changed()}},e}(a.Z)},2562:(t,e,i)=>{"use strict";function n(t,e,i,n){for(var o=0,r=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];o+=a*s-r*l,r=s,a=l}return o/2}function o(t,e,i,o){for(var r=0,a=0,s=i.length;a<s;++a){var l=i[a];r+=n(t,e,l,o),e=l}return r}function r(t,e,i,n){for(var r=0,a=0,s=i.length;a<s;++a){var l=i[a];r+=o(t,e,l,n),e=l[l.length-1]}return r}i.d(e,{QQ:()=>n,KP:()=>o,Eu:()=>r})},3729:(t,e,i)=>{"use strict";i.d(e,{Bv:()=>r,Af:()=>a,sD:()=>s,H$:()=>l,Xl:()=>c,gI:()=>u});var n=i(1882);function o(t,e,i,o,r,a,s){var l,c=t[e],u=t[e+1],h=t[i]-c,d=t[i+1]-u;if(0===h&&0===d)l=e;else{var p=((r-c)*h+(a-u)*d)/(h*h+d*d);if(p>1)l=i;else{if(p>0){for(var f=0;f<o;++f)s[f]=(0,n.t7)(t[e+f],t[i+f],p);return void(s.length=o)}l=e}}for(f=0;f<o;++f)s[f]=t[l+f];s.length=o}function r(t,e,i,o,r){var a=t[e],s=t[e+1];for(e+=o;e<i;e+=o){var l=t[e],c=t[e+1],u=(0,n.bI)(a,s,l,c);u>r&&(r=u),a=l,s=c}return r}function a(t,e,i,n,o){for(var a=0,s=i.length;a<s;++a){var l=i[a];o=r(t,e,l,n,o),e=l}return o}function s(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var l=i[r];o=a(t,e,l,n,o),e=l[l.length-1]}return o}function l(t,e,i,r,a,s,l,c,u,h,d){if(e==i)return h;var p,f;if(0===a){if((f=(0,n.bI)(l,c,t[e],t[e+1]))<h){for(p=0;p<r;++p)u[p]=t[e+p];return u.length=r,f}return h}for(var g=d||[NaN,NaN],m=e+r;m<i;)if(o(t,m-r,m,r,l,c,g),(f=(0,n.bI)(l,c,g[0],g[1]))<h){for(h=f,p=0;p<r;++p)u[p]=g[p];u.length=r,m+=r}else m+=r*Math.max((Math.sqrt(f)-Math.sqrt(h))/a|0,1);if(s&&(o(t,i-r,e,r,l,c,g),(f=(0,n.bI)(l,c,g[0],g[1]))<h)){for(h=f,p=0;p<r;++p)u[p]=g[p];u.length=r}return h}function c(t,e,i,n,o,r,a,s,c,u,h){for(var d=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var g=i[p];u=l(t,e,g,n,o,r,a,s,c,u,d),e=g}return u}function u(t,e,i,n,o,r,a,s,l,u,h){for(var d=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var g=i[p];u=c(t,e,g,n,o,r,a,s,l,u,d),e=g[g.length-1]}return u}},197:(t,e,i)=>{"use strict";i.d(e,{uG:()=>o,TG:()=>r,wY:()=>a,Zl:()=>s});var n=i(1915);function o(t,e,i,o,a){return!(0,n.H6)(a,(function(n){return!r(t,e,i,o,n[0],n[1])}))}function r(t,e,i,n,o,r){for(var a=0,s=t[i-n],l=t[i-n+1];e<i;e+=n){var c=t[e],u=t[e+1];l<=r?u>r&&(c-s)*(r-l)-(o-s)*(u-l)>0&&a++:u<=r&&(c-s)*(r-l)-(o-s)*(u-l)<0&&a--,s=c,l=u}return 0!==a}function a(t,e,i,n,o,a){if(0===i.length)return!1;if(!r(t,e,i[0],n,o,a))return!1;for(var s=1,l=i.length;s<l;++s)if(r(t,i[s-1],i[s],n,o,a))return!1;return!0}function s(t,e,i,n,o,r){if(0===i.length)return!1;for(var s=0,l=i.length;s<l;++s){var c=i[s];if(a(t,e,c,n,o,r))return!0;e=c[c.length-1]}return!1}},8667:(t,e,i)=>{"use strict";function n(t,e,i,n){for(var o=0,r=i.length;o<r;++o)t[e++]=i[o];return e}function o(t,e,i,n){for(var o=0,r=i.length;o<r;++o)for(var a=i[o],s=0;s<n;++s)t[e++]=a[s];return e}function r(t,e,i,n,r){for(var a=r||[],s=0,l=0,c=i.length;l<c;++l){var u=o(t,e,i[l],n);a[s++]=u,e=u}return a.length=s,a}function a(t,e,i,n,o){for(var a=o||[],s=0,l=0,c=i.length;l<c;++l){var u=r(t,e,i[l],n,a[s]);a[s++]=u,e=u[u.length-1]}return a.length=s,a}i.d(e,{IG:()=>n,Sg:()=>o,_5:()=>r,QT:()=>a})},6204:(t,e,i)=>{"use strict";function n(t,e,i,n,o){for(var r=void 0!==o?o:[],a=0,s=e;s<i;s+=n)r[a++]=t.slice(s,s+n);return r.length=a,r}function o(t,e,i,o,r){for(var a=void 0!==r?r:[],s=0,l=0,c=i.length;l<c;++l){var u=i[l];a[s++]=n(t,e,u,o,a[s]),e=u}return a.length=s,a}function r(t,e,i,n,r){for(var a=void 0!==r?r:[],s=0,l=0,c=i.length;l<c;++l){var u=i[l];a[s++]=o(t,e,u,n,a[s]),e=u[u.length-1]}return a.length=s,a}i.d(e,{Ml:()=>n,o1:()=>o,ug:()=>r})},8529:(t,e,i)=>{"use strict";i.d(e,{X:()=>r,U:()=>a});var n=i(9682),o=i(197);function r(t,e,i,r,a,s,l){for(var c,u,h,d,p,f,g,m=a[s+1],v=[],y=0,b=i.length;y<b;++y){var w=i[y];for(d=t[w-r],f=t[w-r+1],c=e;c<w;c+=r)p=t[c],g=t[c+1],(m<=f&&g<=m||f<=m&&m<=g)&&(h=(m-f)/(g-f)*(p-d)+d,v.push(h)),d=p,f=g}var _=NaN,x=-1/0;for(v.sort(n.kK),d=v[0],c=1,u=v.length;c<u;++c){p=v[c];var C=Math.abs(p-d);C>x&&(h=(d+p)/2,(0,o.wY)(t,e,i,r,h,m)&&(_=h,x=C)),d=p}return isNaN(_)&&(_=a[s]),l?(l.push(_,m,x),l):[_,m,x]}function a(t,e,i,n,o){for(var a=[],s=0,l=i.length;s<l;++s){var c=i[s];a=r(t,e,c,n,o,2*s,a),e=c[c.length-1]}return a}},1422:(t,e,i)=>{"use strict";i.d(e,{WW:()=>r,iJ:()=>a,dG:()=>s});var n=i(9682),o=i(1882);function r(t,e,i,r,a,s){var l=NaN,c=NaN,u=(i-e)/r;if(1===u)l=t[e],c=t[e+1];else if(2==u)l=(1-a)*t[e]+a*t[e+r],c=(1-a)*t[e+1]+a*t[e+r+1];else if(0!==u){for(var h=t[e],d=t[e+1],p=0,f=[0],g=e+r;g<i;g+=r){var m=t[g],v=t[g+1];p+=Math.sqrt((m-h)*(m-h)+(v-d)*(v-d)),f.push(p),h=m,d=v}var y=a*p,b=(0,n.ry)(f,y);if(b<0){var w=(y-f[-b-2])/(f[-b-1]-f[-b-2]),_=e+(-b-2)*r;l=(0,o.t7)(t[_],t[_+r],w),c=(0,o.t7)(t[_+1],t[_+r+1],w)}else l=t[e+b*r],c=t[e+b*r+1]}return s?(s[0]=l,s[1]=c,s):[l,c]}function a(t,e,i,n,r,a){if(i==e)return null;var s;if(r<t[e+n-1])return a?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return a?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var l=e/n,c=i/n;l<c;){var u=l+c>>1;r<t[(u+1)*n-1]?c=u:l=u+1}var h=t[l*n-1];if(r==h)return t.slice((l-1)*n,(l-1)*n+n);var d=(r-h)/(t[(l+1)*n-1]-h);s=[];for(var p=0;p<n-1;++p)s.push((0,o.t7)(t[(l-1)*n+p],t[l*n+p],d));return s.push(r),s}function s(t,e,i,n,o,r,s){if(s)return a(t,e,i[i.length-1],n,o,r);var l;if(o<t[n-1])return r?((l=t.slice(0,n))[n-1]=o,l):null;if(t[t.length-1]<o)return r?((l=t.slice(t.length-n))[n-1]=o,l):null;for(var c=0,u=i.length;c<u;++c){var h=i[c];if(e!=h){if(o<t[e+n-1])return null;if(o<=t[h-1])return a(t,e,h,n,o,!1);e=h}}return null}},897:(t,e,i)=>{"use strict";i.d(e,{Kz:()=>a,AW:()=>s,ac:()=>l,oW:()=>c});var n=i(1915),o=i(197),r=i(5173);function a(t,e,i,o,a){var s=(0,n.qP)((0,n.lJ)(),t,e,i,o);return!!(0,n.kK)(a,s)&&(!!(0,n.r4)(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||(0,r.E)(t,e,i,o,(function(t,e){return(0,n.I7)(a,t,e)})))))}function s(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){if(a(t,e,i[r],n,o))return!0;e=i[r]}return!1}function l(t,e,i,n,r){if(!function(t,e,i,n,r){return!!a(t,e,i,n,r)||(!!(0,o.TG)(t,e,i,n,r[0],r[1])||(!!(0,o.TG)(t,e,i,n,r[0],r[3])||(!!(0,o.TG)(t,e,i,n,r[2],r[1])||!!(0,o.TG)(t,e,i,n,r[2],r[3]))))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var s=1,l=i.length;s<l;++s)if((0,o.uG)(t,i[s-1],i[s],n,r)&&!a(t,i[s-1],i[s],n,r))return!1;return!0}function c(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r){var s=i[r];if(l(t,e,s,n,o))return!0;e=s[s.length-1]}return!1}},4027:(t,e,i)=>{"use strict";function n(t,e,i,n){for(var o=t[e],r=t[e+1],a=0,s=e+n;s<i;s+=n){var l=t[s],c=t[s+1];a+=Math.sqrt((l-o)*(l-o)+(c-r)*(c-r)),o=l,r=c}return a}i.d(e,{W:()=>n})},8385:(t,e,i)=>{"use strict";function n(t,e,i,n){for(;e<i-n;){for(var o=0;o<n;++o){var r=t[e+o];t[e+o]=t[i-n+o],t[i-n+o]=r}e+=n,i-=n}}function o(t,e,i,n){for(var o=0,r=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];o+=(s-r)*(l+a),r=s,a=l}return o>0}function r(t,e,i,n,r){for(var a=void 0!==r&&r,s=0,l=i.length;s<l;++s){var c=i[s],u=o(t,e,c,n);if(0===s){if(a&&u||!a&&!u)return!1}else if(a&&!u||!a&&u)return!1;e=c}return!0}function a(t,e,i,n,o){for(var a=0,s=i.length;a<s;++a){var l=i[a];if(!r(t,e,l,n,o))return!1;l.length&&(e=l[l.length-1])}return!0}function s(t,e,i,r,a){for(var s=void 0!==a&&a,l=0,c=i.length;l<c;++l){var u=i[l],h=o(t,e,u,r);(0===l?s&&h||!s&&!h:s&&!h||!s&&h)&&n(t,e,u,r),e=u}return e}function l(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r)e=s(t,e,i[r],n,o);return e}i.d(e,{bt:()=>o,$v:()=>r,Oj:()=>a,zX:()=>s,dL:()=>l})},5173:(t,e,i)=>{"use strict";function n(t,e,i,n,o){for(var r,a=[t[e],t[e+1]],s=[];e+n<i;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],r=o(a,s))return r;a[0]=s[0],a[1]=s[1]}return!1}i.d(e,{E:()=>n})},1193:(t,e,i)=>{"use strict";i.d(e,{dt:()=>o,UJ:()=>r,uZ:()=>a,Zh:()=>l,Pp:()=>c});var n=i(1882);function o(t,e,i,o,r,a,s){var l=(i-e)/o;if(l<3){for(;e<i;e+=o)a[s++]=t[e],a[s++]=t[e+1];return s}var c=new Array(l);c[0]=1,c[l-1]=1;for(var u=[e,i-o],h=0;u.length>0;){for(var d=u.pop(),p=u.pop(),f=0,g=t[p],m=t[p+1],v=t[d],y=t[d+1],b=p+o;b<d;b+=o){var w=t[b],_=t[b+1],x=(0,n.rU)(w,_,g,m,v,y);x>f&&(h=b,f=x)}f>r&&(c[(h-e)/o]=1,p+o<h&&u.push(p,h),h+o<d&&u.push(h,d))}for(b=0;b<l;++b)c[b]&&(a[s++]=t[e+b*o],a[s++]=t[e+b*o+1]);return s}function r(t,e,i,n,r,a,s,l){for(var c=0,u=i.length;c<u;++c){var h=i[c];s=o(t,e,h,n,r,a,s),l.push(s),e=h}return s}function a(t,e){return e*Math.round(t/e)}function s(t,e,i,n,o,r,s){if(e==i)return s;var l,c,u=a(t[e],o),h=a(t[e+1],o);e+=n,r[s++]=u,r[s++]=h;do{if(l=a(t[e],o),c=a(t[e+1],o),(e+=n)==i)return r[s++]=l,r[s++]=c,s}while(l==u&&c==h);for(;e<i;){var d=a(t[e],o),p=a(t[e+1],o);if(e+=n,d!=l||p!=c){var f=l-u,g=c-h,m=d-u,v=p-h;f*v==g*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(g<0&&v<g||g==v||g>0&&v>g)?(l=d,c=p):(r[s++]=l,r[s++]=c,u=l,h=c,l=d,c=p)}}return r[s++]=l,r[s++]=c,s}function l(t,e,i,n,o,r,a,l){for(var c=0,u=i.length;c<u;++c){var h=i[c];a=s(t,e,h,n,o,r,a),l.push(a),e=h}return a}function c(t,e,i,n,o,r,a,s){for(var c=0,u=i.length;c<u;++c){var h=i[c],d=[];a=l(t,e,h,n,o,r,a,d),s.push(d),e=h[h.length-1]}return a}},7882:(t,e,i)=>{"use strict";function n(t,e,i,n,o,r){for(var a=r||[],s=0,l=e;l<i;l+=n){var c=t[l],u=t[l+1];a[s++]=o[0]*c+o[2]*u+o[4],a[s++]=o[1]*c+o[3]*u+o[5]}return r&&a.length!=s&&(a.length=s),a}function o(t,e,i,n,o,r,a){for(var s=a||[],l=Math.cos(o),c=Math.sin(o),u=r[0],h=r[1],d=0,p=e;p<i;p+=n){var f=t[p]-u,g=t[p+1]-h;s[d++]=u+f*l-g*c,s[d++]=h+f*c+g*l;for(var m=p+2;m<p+n;++m)s[d++]=t[m]}return a&&s.length!=d&&(s.length=d),s}function r(t,e,i,n,o,r,a,s){for(var l=s||[],c=a[0],u=a[1],h=0,d=e;d<i;d+=n){var p=t[d]-c,f=t[d+1]-u;l[h++]=c+o*p,l[h++]=u+r*f;for(var g=d+2;g<d+n;++g)l[h++]=t[g]}return s&&l.length!=h&&(l.length=h),l}function a(t,e,i,n,o,r,a){for(var s=a||[],l=0,c=e;c<i;c+=n){s[l++]=t[c]+o,s[l++]=t[c+1]+r;for(var u=c+2;u<c+n;++u)s[l++]=t[u]}return a&&s.length!=l&&(s.length=l),s}i.d(e,{vT:()=>n,U1:()=>o,bA:()=>r,Iu:()=>a})},1358:(t,e,i)=>{"use strict";i.d(e,{V:()=>o,G$:()=>r,tK:()=>a,MP:()=>s,Id:()=>l,Tp:()=>c,bM:()=>u});var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==n.indexOf("firefox"),r=(-1!==n.indexOf("safari")&&n.indexOf("chrom"),-1!==n.indexOf("webkit")&&-1==n.indexOf("edge")),a=-1!==n.indexOf("macintosh"),s="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!=typeof Image&&Image.prototype.decode,u=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},7588:(t,e,i)=>{"use strict";i.d(e,{Cv:()=>l,FW:()=>c,ZP:()=>u});var n,o=i(8493),r=i(6320),a=i(3604),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function l(t,e,i){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:r.GE,center:t.getConstrainedCenter(o)})}}function c(t,e,i,n){var o=t.getZoom();if(void 0!==o){var a=t.getConstrainedZoom(o+e),s=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==n?n:250,easing:r.Vv})}}const u=function(t){function e(e){var i=t.call(this)||this;return e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return s(e,t),e.prototype.getActive=function(){return this.get(a.Z.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(a.Z.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(o.ZP)},8024:(t,e,i)=>{"use strict";i.d(e,{S:()=>l,Z:()=>c});var n,o=i(6),r=i(7588),a=i(3580),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function l(t){for(var e=t.length,i=0,n=0,o=0;o<e;o++)i+=t[o].clientX,n+=t[o].clientY;return[i/e,n/e]}const c=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return s(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==o.Z.POINTERDRAG)this.handleDragEvent(t);else if(t.type==o.Z.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==o.Z.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==o.Z.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===o.Z.POINTERDOWN||e===o.Z.POINTERDRAG||e===o.Z.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==o.Z.POINTERUP?delete this.trackedPointers_[i]:(t.type==o.Z.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=(0,a.KX)(this.trackedPointers_)}},e}(r.ZP)},3604:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ACTIVE:"active"}},410:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n,o=i(9179),r=i(8493),a=i(8192),s=i(1882),l=i(3580),c=i(8906),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const h=function(t){function e(e){var i=t.call(this)||this,n=(0,l.f0)({},e);return n[a.Z.OPACITY]=void 0!==e.opacity?e.opacity:1,(0,c.h)("number"==typeof n[a.Z.OPACITY],64),n[a.Z.VISIBLE]=void 0===e.visible||e.visible,n[a.Z.Z_INDEX]=e.zIndex,n[a.Z.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[a.Z.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,n[a.Z.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,n[a.Z.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return u(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,s.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return(0,o.O3)()},e.prototype.getLayerStatesArray=function(t){return(0,o.O3)()},e.prototype.getExtent=function(){return this.get(a.Z.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(a.Z.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(a.Z.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(a.Z.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(a.Z.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(a.Z.OPACITY)},e.prototype.getSourceState=function(){return(0,o.O3)()},e.prototype.getVisible=function(){return this.get(a.Z.VISIBLE)},e.prototype.getZIndex=function(){return this.get(a.Z.Z_INDEX)},e.prototype.setExtent=function(t){this.set(a.Z.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(a.Z.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(a.Z.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(a.Z.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(a.Z.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){(0,c.h)("number"==typeof t,64),this.set(a.Z.OPACITY,t)},e.prototype.setVisible=function(t){this.set(a.Z.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(a.Z.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(r.ZP)},9625:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n,o=i(7701),r=i(3580),a=i(1219),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l="renderOrder";const c=function(t){function e(e){var i=this,n=e||{},o=(0,r.f0)({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(i=t.call(this,o)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return s(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(l)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(l,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.yF,this.styleFunction_=null===t?void 0:(0,a.J$)(this.style_),this.changed()},e}(o.Z)},7701:(t,e,i)=>{"use strict";i.d(e,{j:()=>f,Z:()=>g});var n,o=i(3002),r=i(3381),a=i(8493),s=i(410),l=i(8192),c=i(3580),u=i(7208),h=i(2418),d=i(8906),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function f(t,e){if(!t.visible)return!1;var i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const g=function(t){function e(e){var i=this,n=(0,c.f0)({},e);delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener((0,a.v_)(l.Z.SOURCE),i.handleSourcePropertyChange_);var o=e.source?e.source:null;return i.setSource(o),i}return p(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(l.Z.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h.Z.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,o.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=(0,o.oL)(t,r.Z.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&((0,o.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,o.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,o.oL)(t,u.Z.PRECOMPOSE,(function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,d.h)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,o.oL)(this,r.Z.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(l.Z.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(s.Z)},8192:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"}},7976:(t,e,i)=>{"use strict";i.d(e,{Z:()=>b});var n,o=i(9625),r=i(9179),a=i(6908),s=i(1915),l=i(728),c=i(3272),u=i(2152),h=i(4247),d=i(5381),p=i(3631),f=i(2359),g=i(7746),m=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const v=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=(0,s.lJ)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i}return m(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(0,f.n3)(this.pixelTransform,1/i,1/i),(0,f.nb)(this.inversePixelTransform,this.pixelTransform);var o=(0,f.BB)(this.pixelTransform);this.useContainer(e,o,n.opacity);var r=this.context,l=r.canvas,u=this.replayGroup_;if(!u||u.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;var d=Math.round(t.size[0]*i),p=Math.round(t.size[1]*i);l.width!=d||l.height!=p?(l.width=d,l.height=p,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||r.clearRect(0,0,d,p),this.preRender(r,t);var g=t.extent,m=t.viewState,v=m.center,y=m.resolution,b=m.projection,w=m.rotation,_=b.getExtent(),x=this.getLayer().getSource(),C=!1;if(n.extent){var E=(0,c.dY)(n.extent,b);(C=!(0,s.r4)(E,t.extent)&&(0,s.kK)(E,t.extent))&&this.clip(r,t,E)}var k=t.viewHints,T=!(k[a.Z.ANIMATING]||k[a.Z.INTERACTING]),S=this.getRenderTransform(v,y,w,i,d,p,0),M=this.getLayer().getDeclutter()?{}:null;if(u.execute(r,S,w,T,void 0,M),x.getWrapX()&&b.canWrapX()&&!(0,s.r4)(_,g)){for(var R=g[0],P=(0,s.dz)(_),L=0,O=void 0;R<_[0];){O=P*--L;var D=this.getRenderTransform(v,y,w,i,d,p,O);u.execute(r,D,w,T,void 0,M),R+=P}for(L=0,R=g[2];R>_[2];){O=P*++L;var I=this.getRenderTransform(v,y,w,i,d,p,O);u.execute(r,I,w,T,void 0,M),R-=P}}if(M){var F=t.viewHints,A=!(F[a.Z.ANIMATING]||F[a.Z.INTERACTING]);(0,h.SK)(M,r,w,1,A,t.declutterItems)}C&&r.restore(),this.postRender(r,t);var N=n.opacity,j=this.container;return N!==parseFloat(j.style.opacity)&&(j.style.opacity=1===N?"":N),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];(0,f.nn)(this.pixelTransform,n);var o=this.renderedCenter_,r=this.renderedResolution_,a=this.renderedRotation_,l=this.renderedProjection_,c=this.renderedExtent_,u=this.getLayer(),h=[],d=n[0]/2,p=n[1]/2;h.push(this.getRenderTransform(o,r,a,.5,d,p,0).slice());var m=u.getSource(),v=l.getExtent();if(m.getWrapX()&&l.canWrapX()&&!(0,s.r4)(v,c)){for(var y=c[0],b=(0,s.dz)(v),w=0,_=void 0;y<v[0];)_=b*--w,h.push(this.getRenderTransform(o,r,a,.5,d,p,_).slice()),y+=b;for(w=0,y=c[2];y>v[2];)_=b*++w,h.push(this.getRenderTransform(o,r,a,.5,d,p,_).slice()),y-=b}this.hitDetectionImageData_=(0,g.T)(n,h,this.renderedFeatures_,u.getStyleFunction(),c,r,a)}e((0,g.i)(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),c={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,(function(t){var e=(0,r.sq)(t);if(!(e in c))return c[e]=!0,n(t,l)}),l.getDeclutter()?o:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[a.Z.ANIMATING],o=t.viewHints[a.Z.INTERACTING],r=e.getUpdateWhileAnimating(),d=e.getUpdateWhileInteracting();if(!this.dirty_&&!r&&n||!d&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var f=t.extent,g=t.viewState,m=g.projection,v=g.resolution,y=t.pixelRatio,b=e.getRevision(),w=e.getRenderBuffer(),_=e.getRenderOrder();void 0===_&&(_=p.eR);var x=g.center.slice(),C=(0,s.f3)(f,w*v),E=[C.slice()],k=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!(0,s.r4)(k,t.extent)){var T=(0,s.dz)(k),S=Math.max((0,s.dz)(C)/2,T);C[0]=k[0]-S,C[2]=k[2]+S,(0,l.Cf)(x,m);var M=(0,s.Cf)(E[0],m);M[0]<k[0]&&M[2]<k[2]?E.push([M[0]+T,M[1],M[2]+T,M[3]]):M[0]>k[0]&&M[2]>k[2]&&E.push([M[0]-T,M[1],M[2]-T,M[3]])}if(!this.dirty_&&this.renderedResolution_==v&&this.renderedRevision_==b&&this.renderedRenderOrder_==_&&(0,s.r4)(this.renderedExtent_,C))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var R,P=new u.Z((0,p.Qz)(v,y),C,v,y,e.getDeclutter()),L=(0,c.Cs)();if(L){for(var O=0,D=E.length;O<D;++O)i.loadFeatures((0,c.Fj)(E[O],m),v,L);R=(0,c.WO)(L,m)}else for(O=0,D=E.length;O<D;++O)i.loadFeatures(E[O],v,m);var I=(0,p.se)(v,y),F=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,v)),i){var o=this.renderFeature(t,I,i,P,R);this.dirty_=this.dirty_||o}}.bind(this),A=(0,c.Fj)(C,m),N=i.getFeaturesInExtent(A);_&&N.sort(_);for(O=0,D=N.length;O<D;++O)F(N[O]);this.renderedFeatures_=N;var j=P.finish(),z=new h.ZP(C,v,y,i.getOverlaps(),j,e.getRenderBuffer());return this.renderedResolution_=v,this.renderedRevision_=b,this.renderedRenderOrder_=_,this.renderedExtent_=C,this.renderedRotation_=g.rotation,this.renderedCenter_=x,this.renderedProjection_=m,this.replayGroup_=z,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var a=0,s=i.length;a<s;++a)r=(0,p.Pn)(n,t,i[a],e,this.boundHandleStyleImageChange_,o)||r;else r=(0,p.Pn)(n,t,i,e,this.boundHandleStyleImageChange_,o);return r},e}(d.Z);var y=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const b=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.createRenderer=function(){return new v(this)},e}(o.Z)},161:(t,e,i)=>{"use strict";function n(t,e){return[[-1/0,-1/0,1/0,1/0]]}function o(t,e){return[t]}i.d(e,{$6:()=>n,VW:()=>o})},1882:(t,e,i)=>{"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}i.d(e,{uZ:()=>n,f9:()=>o,rU:()=>r,bI:()=>a,SV:()=>s,Yr:()=>l,$W:()=>c,t7:()=>u});var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function r(t,e,i,n,o,r){var s=o-i,l=r-n;if(0!==s||0!==l){var c=((t-i)*s+(e-n)*l)/(s*s+l*l);c>1?(i=o,n=r):c>0&&(i+=s*c,n+=l*c)}return a(t,e,i,n)}function a(t,e,i,n){var o=i-t,r=n-e;return o*o+r*r}function s(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,o=Math.abs(t[i][i]),r=i+1;r<e;r++){var a=Math.abs(t[r][i]);a>o&&(o=a,n=r)}if(0===o)return null;var s=t[n];t[n]=t[i],t[i]=s;for(var l=i+1;l<e;l++)for(var c=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=c*t[i][u]}for(var h=new Array(e),d=e-1;d>=0;d--){h[d]=t[d][e]/t[d][d];for(var p=d-1;p>=0;p--)t[p][e]-=t[p][d]*h[d]}return h}function l(t){return t*Math.PI/180}function c(t,e){var i=t%e;return i*e<0?i+e:i}function u(t,e,i){return t+i*(e-t)}},3580:(t,e,i)=>{"use strict";i.d(e,{f0:()=>n,ZH:()=>o,KX:()=>r,xb:()=>a});var n="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,o=arguments.length;n<o;++n){var r=arguments[n];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])}return i};function o(t){for(var e in t)delete t[e]}var r="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e};function a(t){var e;for(e in t)return!1;return!e}},669:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},3272:(t,e,i)=>{"use strict";i.d(e,{Wm:()=>l.W,U2:()=>M,_Q:()=>R,UQ:()=>L,mi:()=>O,OP:()=>D,WO:()=>I,Ck:()=>F,vs:()=>A,$A:()=>N,Cs:()=>H,lO:()=>B,Vs:()=>V,Fj:()=>W,dY:()=>Y});var n=i(1882);function o(t,e,i){var o=i||6371008.8,r=(0,n.Yr)(t[1]),a=(0,n.Yr)(e[1]),s=(a-r)/2,l=(0,n.Yr)(e[0]-t[0])/2,c=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(a);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}var r,a=i(1915),s=i(4183),l=i(868),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=6378137*Math.PI,h=[-u,-u,u,u],d=[-180,-85,180,85],p=function(t){function e(e){return t.call(this,{code:e,units:l.Z.METERS,extent:h,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/(0,n.f9)(e[1]/6378137)}})||this}return c(e,t),e}(s.Z),f=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("urn:ogc:def:crs:EPSG:6.18:3:3857"),new p("urn:ogc:def:crs:EPSG::3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var a=u,s=0;s<n;s+=o){r[s]=a*t[s]/180;var l=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));l>a?l=a:l<-a&&(l=-a),r[s+1]=l}return r}function m(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var a=0;a<n;a+=o)r[a]=180*t[a]/u,r[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return r}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=[-180,-90,180,90],b=6378137*Math.PI/180,w=function(t){function e(e,i){return t.call(this,{code:e,units:l.Z.DEGREES,extent:y,axisOrientation:i,global:!0,metersPerUnit:b,worldExtent:y})||this}return v(e,t),e}(s.Z),_=[new w("CRS:84"),new w("EPSG:4326","neu"),new w("urn:ogc:def:crs:EPSG::4326","neu"),new w("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new w("urn:ogc:def:crs:OGC:1.3:CRS84"),new w("urn:ogc:def:crs:OGC:2:84"),new w("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new w("urn:x-ogc:def:crs:EPSG:4326","neu")],x={};function C(t,e,i){var n=t.getCode(),o=e.getCode();n in x||(x[n]={}),x[n][o]=i}var E={};function k(t,e,i){var n;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];n=e}else n=t.slice();return n}function T(t,e,i){if(void 0!==e&&t!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];t=e}return t}function S(t){!function(t,e){E[t]=e}(t.getCode(),t),C(t,t,k)}function M(t){return"string"==typeof t?E[t]||null:t||null}function R(t,e,i,n){var r,a=(t=M(t)).getPointResolutionFunc();if(a)r=a(e,i),n&&n!==t.getUnits()&&(s=t.getMetersPerUnit())&&(r=r*s/l.W[n]);else if(t.getUnits()==l.Z.DEGREES&&!n||n==l.Z.DEGREES)r=e;else{var s,c=I(t,M("EPSG:4326")),u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(o((u=c(u,u,2)).slice(0,2),u.slice(2,4))+o(u.slice(4,6),u.slice(6,8)))/2,void 0!==(s=n?l.W[n]:t.getMetersPerUnit())&&(r/=s)}return r}function P(t){!function(t){t.forEach(S)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&C(e,t,k)}))}))}function L(t,e){return t?"string"==typeof t?M(t):t:M(e)}function O(t,e){return A(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function D(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||I(t,e)===k)&&i}function I(t,e){var i=function(t,e){var i;return t in x&&e in x[t]&&(i=x[t][e]),i}(t.getCode(),e.getCode());return i||(i=T),i}function F(t,e){return I(M(t),M(e))}function A(t,e,i){return F(e,i)(t,void 0,t.length)}function N(t,e,i,n){var o=F(e,i);return(0,a.Ne)(t,o,void 0,n)}var j,z,Z,G=null;function H(){return G}function B(t,e){return G?A(t,e,G):t}function V(t,e){return G?A(t,G,e):t}function W(t,e){return G?N(t,e,G):t}function Y(t,e){return G?N(t,G,e):t}P(f),P(_),j=f,z=g,Z=m,_.forEach((function(t){j.forEach((function(e){C(t,e,z),C(e,t,Z)}))}))},4183:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(868);const o=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.W[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}()},868:(t,e,i)=>{"use strict";i.d(e,{W:()=>o,Z:()=>r});var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},o={};o[n.DEGREES]=2*Math.PI*6370997/360,o[n.FEET]=.3048,o[n.METERS]=1,o[n.USFEET]=1200/3937;const r=n},5415:(t,e,i)=>{"use strict";i.d(e,{DL:()=>n});i(3272);function n(t,e){e&&e.clear();for(var i=t.declutterItems,n=i.length-1;n>=0;--n)for(var o=i[n],r=o.items,a=0,s=r.length;a<s;a+=3)e=r[a].renderDeclutter(r[a+1],r[a+2],o.opacity,e);return i.length=0,e}},1173:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n,o=i(9520),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e,i,n,o){var r=t.call(this,e)||this;return r.inversePixelTransform=i,r.frameState=n,r.context=o,r}return r(e,t),e}(o.ZP)},7208:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},4889:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}()},8509:(t,e,i)=>{"use strict";i.d(e,{Df:()=>u,bL:()=>h,mb:()=>d,X9:()=>p,He:()=>f,rc:()=>g,V4:()=>m,Tx:()=>v,PH:()=>y,ru:()=>b,oB:()=>w,yC:()=>_,sG:()=>x,Qx:()=>M,fk:()=>R,Kd:()=>O,gs:()=>D,qs:()=>I,_f:()=>F,QP:()=>N});var n=i(7644),o=i(5386),r=i(3580),a=i(8493),s=i(6575),l=i(1358),c=i(2359),u="10px sans-serif",h="#000",d="round",p=[],f=0,g="round",m=10,v="#000",y="center",b="middle",w=[0,0,0,0],_=1,x=new a.ZP;(new s.Z).setSize=function(){console.warn("labelCache is deprecated.")};var C,E,k,T=null,S={},M=function(){var t,e,i=["monospace","serif"],o=i.length,a="wmytzilWMYTZIL@#/&?$%10";function s(t,n,r){for(var s=!0,l=0;l<o;++l){var c=i[l];if(e=L(t+" "+n+" 32px "+c,a),r!=c){var u=L(t+" "+n+" 32px "+r+","+c,a);s=s&&u!=e}}return!!s}function l(){for(var e=!0,i=x.getKeys(),n=0,o=i.length;n<o;++n){var a=i[n];x.get(a)<100&&(s.apply(this,a.split("\n"))?((0,r.ZH)(S),T=null,C=void 0,x.set(a,100)):(x.set(a,x.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var i=(0,n.p)(e);if(i)for(var o=i.families,r=0,a=o.length;r<a;++r){var c=o[r],u=i.style+"\n"+i.weight+"\n"+c;void 0===x.get(u)&&(x.set(u,100,!0),s(i.style,i.weight,c)||(x.set(u,0,!0),void 0===t&&(t=setInterval(l,32))))}}}(),R=(k=S,function(t){var e=k[t];if(null==e)if(l.Id){var i=(0,n.p)(t),o=P(t,"Žg"),r=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);S[t]=r*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else E||((E=document.createElement("div")).innerHTML="M",E.style.margin="0 !important",E.style.padding="0 !important",E.style.position="absolute !important",E.style.left="-99999px !important"),E.style.font=t,document.body.appendChild(E),e=E.offsetHeight,k[t]=e,document.body.removeChild(E);return e});function P(t,e){return T||(T=(0,o.E4)(1,1)),t!=C&&(T.font=t,C=T.font),T.measureText(e)}function L(t,e){return P(t,e).width}function O(t,e,i){if(e in i)return i[e];var n=L(t,e);return i[e]=n,n}function D(t,e,i){for(var n=e.length,o=0,r=0;r<n;++r){var a=L(t,e[r]);o=Math.max(o,a),i.push(a)}return o}function I(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function F(t,e,i,n,o,r,a,s,l,c,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,c),t.scale(u,u),function(t,e){for(var i=t.contextInstructions,n=0,o=i.length;n<o;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):t.drawImage(n,o,r,a,s,l,c,a*u,s*u),t.restore()}var A=null;function N(t){return l.Id?(0,c.BB)(t):(A||(A=(0,o.E4)(1,1).canvas),A.style.transform=(0,c.BB)(t),A.style.transform)}},567:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n,o=i(9682),r=i(5120),a=i(1915),s=i(4178),l=i(8795),c=i(6204),u=i(4889),h=i(8509),d=i(8186),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const f=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.tolerance=e,r.maxExtent=i,r.pixelRatio=o,r.maxLineWidth=0,r.resolution=n,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return p(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,n,o,r){var l=this.coordinates.length,c=this.getBufferedMaxExtent();r&&(e+=n);var u,h,d,p=t[e],f=t[e+1],g=this.tmpCoordinate_,m=!0;for(u=e+n;u<i;u+=n)g[0]=t[u],g[1]=t[u+1],(d=(0,a.pX)(c,g))!==h?(m&&(this.coordinates[l++]=p,this.coordinates[l++]=f),this.coordinates[l++]=g[0],this.coordinates[l++]=g[1],m=!1):d===s.Z.INTERSECTING?(this.coordinates[l++]=g[0],this.coordinates[l++]=g[1],m=!1):m=!0,p=g[0],f=g[1],h=d;return(o&&m||u===e+n)&&(this.coordinates[l++]=p,this.coordinates[l++]=f),l},e.prototype.drawCustomCoordinates_=function(t,e,i,n,o){for(var r=0,a=i.length;r<a;++r){var s=i[r],l=this.appendFlatCoordinates(t,e,s,n,!1,!1);o.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,o,r,a,s,u=t.getType(),h=t.getStride(),p=this.coordinates.length;if(u==l.Z.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var f=t.getEndss();s=0;for(var g=0,m=f.length;g<m;++g){var v=[];s=this.drawCustomCoordinates_(n,s,f[g],h,v),a.push(v)}this.instructions.push([d.ZP.CUSTOM,p,a,t,i,c.ug])}else u==l.Z.POLYGON||u==l.Z.MULTI_LINE_STRING?(r=[],n=u==l.Z.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),h,r),this.instructions.push([d.ZP.CUSTOM,p,r,t,i,c.o1])):u==l.Z.LINE_STRING||u==l.Z.MULTI_POINT?(n=t.getFlatCoordinates(),o=this.appendFlatCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([d.ZP.CUSTOM,p,o,t,i,c.Ml])):u==l.Z.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([d.ZP.CUSTOM,p,o,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[d.ZP.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[d.ZP.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,a=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==d.ZP.END_GEOMETRY?a=t:n==d.ZP.BEGIN_GEOMETRY&&(i[2]=t,(0,o.FZ)(this.hitDetectionInstructions,a,t),a=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=(0,r.y)(n||h.bL)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=(0,r.y)(o||h.Tx);var a=e.getLineCap();i.lineCap=void 0!==a?a:h.mb;var s=e.getLineDash();i.lineDash=s?s.slice():h.X9;var l=e.getLineDashOffset();i.lineDashOffset=l||h.He;var c=e.getLineJoin();i.lineJoin=void 0!==c?c:h.rc;var u=e.getWidth();i.lineWidth=void 0!==u?u:h.yC;var d=e.getMiterLimit();i.miterLimit=void 0!==d?d:h.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[d.ZP.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[d.ZP.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,o.fS)(t.currentLineDash,r)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=c)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[d.ZP.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,a.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,a.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(u.Z)},2152:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n,o=i(1915),r=i(567),a=i(8186),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const l=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.declutterGroups_=null,r.hitDetectionImage_=null,r.image_=null,r.anchorX_=void 0,r.anchorY_=void 0,r.height_=void 0,r.opacity_=void 0,r.originX_=void 0,r.originY_=void 0,r.rotateWithView_=void 0,r.rotation_=void 0,r.scale_=void 0,r.width_=void 0,r}return s(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([a.ZP.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([a.ZP.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([a.ZP.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([a.ZP.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(r.Z);var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const u=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return c(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[a.ZP.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([a.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],a.$O);var r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(a.Yc),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([a.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],a.$O);for(var r=t.getEnds(),s=t.getFlatCoordinates(),l=t.getStride(),c=0,u=0,h=r.length;u<h;++u)c=this.drawFlatCoordinates_(s,c,r[u],l);this.hitDetectionInstructions.push(a.Yc),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(a.Yc),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(a.Yc),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(a.$O)},e}(r.Z);var h=i(1193),d=i(8509),p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const f=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return p(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var o=this.state,r=void 0!==o.fillStyle,s=void 0!==o.strokeStyle,l=i.length;this.instructions.push(a.$O),this.hitDetectionInstructions.push(a.$O);for(var c=0;c<l;++c){var u=i[c],h=this.coordinates.length,d=this.appendFlatCoordinates(t,e,u,n,!0,!s),p=[a.ZP.MOVE_TO_LINE_TO,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(a.s3),this.hitDetectionInstructions.push(a.s3)),e=u}return r&&(this.instructions.push(a.gO),this.hitDetectionInstructions.push(a.gO)),s&&(this.instructions.push(a.Yc),this.hitDetectionInstructions.push(a.Yc)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([a.ZP.SET_FILL_STYLE,d.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([a.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getFlatCoordinates(),s=t.getStride(),l=this.coordinates.length;this.appendFlatCoordinates(r,0,r.length,s,!1,!1);var c=[a.ZP.CIRCLE,l];this.instructions.push(a.$O,c),this.hitDetectionInstructions.push(a.$O,c),void 0!==i.fillStyle&&(this.instructions.push(a.gO),this.hitDetectionInstructions.push(a.gO)),void 0!==i.strokeStyle&&(this.instructions.push(a.Yc),this.hitDetectionInstructions.push(a.Yc)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([a.ZP.SET_FILL_STYLE,d.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([a.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getEnds(),s=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(s,0,r,l),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([a.ZP.SET_FILL_STYLE,d.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([a.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var r=t.getEndss(),s=t.getOrientedFlatCoordinates(),l=t.getStride(),c=0,u=0,h=r.length;u<h;++u)c=this.drawFlatCoordinatess_(s,c,r[u],l);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=(0,h.uZ)(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(r.Z);var g=i(2048),m={Circle:f,Default:r.Z,Image:l,LineString:u,Polygon:f,Text:g.Z};const v=function(){function t(t,e,i,n,o){this.declutter_=o,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[(0,o.lJ)()],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var o=i[n].finish();t[e][n]=o}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var o=n[e];void 0===o&&(o=new(0,m[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o);return o},t}()},1456:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},4247:(t,e,i)=>{"use strict";i.d(e,{SK:()=>P,ZP:()=>L});var n=i(9682),o=i(5386),r=i(1915),a=i(7882),s=i(3580),l=i(1456),c=i(2359),u=i(4027),h=i(1882);function d(t,e,i,n,o,r,a,s,l,c,u){for(var d,p,f=[],g=t[e]>t[i-n],m=o.length,v=t[e],y=t[e+1],b=t[e+=n],w=t[e+1],_=0,x=Math.sqrt(Math.pow(b-v,2)+Math.pow(w-y,2)),C=!1,E=0;E<m;++E){for(var k=o[d=g?m-E-1:E],T=s*l(c,k,u),S=r+T/2;e<i-n&&_+x<S;)v=b,y=w,b=t[e+=n],w=t[e+1],_+=x,x=Math.sqrt(Math.pow(b-v,2)+Math.pow(w-y,2));var M=S-_,R=Math.atan2(w-y,b-v);if(g&&(R+=R>0?-Math.PI:Math.PI),void 0!==p){var P=R-p;if(C=C||0!==P,P+=P>Math.PI?-2*Math.PI:P<-Math.PI?2*Math.PI:0,Math.abs(P)>a)return null}p=R;var L=M/x,O=(0,h.t7)(v,b,L),D=(0,h.t7)(y,w,L);f[d]=[O,D,T/2,R,k],r+=T}return C?f:[[f[0][0],f[0][1],f[0][2],f[0][3],o]]}var p=i(8509),f=i(8186),g=i(2048),m=i(6079),v=i.n(m),y=i(1358),b=(0,r.lJ)(),w=(0,c.Ue)(),_=[],x=[],C=[],E=[];const k=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,c.Ue)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var o=t+e+i+n;if(this.labels_[o])return this.labels_[o];var r=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,s=this.textStates[e],l=this.pixelRatio,c=s.scale*l,u=g.I[s.textAlign||p.PH],h=n&&r.lineWidth?r.lineWidth:0,d=t.split("\n"),f=d.length,m=[],v=(0,p.gs)(s.font,d,m),b=(0,p.fk)(s.font),w=b*f,_=v+h,x=[],C={width:Math.ceil((_+2)*c),height:Math.ceil((w+h)*c),contextInstructions:x};(1!=c&&x.push("scale",[c,c]),x.push("font",s.font),n)&&(x.push("strokeStyle",r.strokeStyle),x.push("lineWidth",h),x.push("lineCap",r.lineCap),x.push("lineJoin",r.lineJoin),x.push("miterLimit",r.miterLimit),(y.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[r.lineDash]),x.push("lineDashOffset",r.lineDashOffset)));i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");var E,k=.5-u,T=u*_+k*h;if(n)for(E=0;E<f;++E)x.push("strokeText",[d[E],T+k*m[E],.5*(h+b)+E*b]);if(i)for(E=0;E<f;++E)x.push("fillText",[d[E],T+k*m[E],.5*(h+b)+E*b]);return this.labels_[o]=C,C},t.prototype.replayTextBackground_=function(t,e,i,n,o,r,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,o,a,s,l,u,h,d,f,g,m,v,y,k,T){var S=k||T;e-=o*=g,i-=a*=g;var M=v+h>n.width?n.width-h:v,R=l+d>n.height?n.height-d:l,P=y[3]+M*g+y[1],L=y[0]+R*g+y[2],O=e-y[3],D=i-y[0];(S||0!==f)&&(_[0]=O,E[0]=O,_[1]=D,x[1]=D,x[0]=O+P,C[0]=x[0],C[1]=D+L,E[1]=C[1]);var I=null;if(0!==f){var F=e+o,A=i+a;I=(0,c.qC)(w,F,A,1,1,f,-F,-A),(0,c.nn)(w,_),(0,c.nn)(w,x),(0,c.nn)(w,C),(0,c.nn)(w,E),(0,r.T9)(Math.min(_[0],x[0],C[0],E[0]),Math.min(_[1],x[1],C[1],E[1]),Math.max(_[0],x[0],C[0],E[0]),Math.max(_[1],x[1],C[1],E[1]),b)}else(0,r.T9)(O,D,O+P,D+L,b);var N=t.canvas,j=T?T[2]*g/2:0,z=b[0]-j<=N.width&&b[2]+j>=0&&b[1]-j<=N.height&&b[3]+j>=0;if(m&&(e=Math.round(e),i=Math.round(i)),s){if(!z&&1==s[4])return;(0,r.l7)(s,b);var Z=z?[t,I?I.slice(0):null,u,n,h,d,M,R,e,i,g]:null;Z&&(S&&Z.push(k,T,_.slice(0),x.slice(0),C.slice(0),E.slice(0)),s.push(Z))}else z&&(S&&this.replayTextBackground_(t,_,x,C,E,k,T),(0,p._f)(t,I,u,n,h,d,M,R,e,i,g))},t.prototype.fill_=function(t){if(this.alignFill_){var e=(0,c.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){if(t&&t.length>5){var o=t[4];if(1==o||o==t.length-5){var a={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new(v())(9)),!n.collides(a)){n.insert(a);for(var s=5,l=t.length;s<l;++s){var c=t[s],u=c[0],h=u.globalAlpha;h!==i&&(u.globalAlpha=i),c.length>11&&this.replayTextBackground_(c[0],c[13],c[14],c[15],c[16],c[11],c[12]),p._f.apply(void 0,c),h!==i&&(u.globalAlpha=h)}}t.length=5,(0,r.YN)(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var o=this.textStates[e],r=this.createLabel(t,e,n,i),a=this.strokeStates[i],s=this.pixelRatio,l=g.I[o.textAlign||p.PH],c=g.I[o.textBaseline||p.ru],u=a&&a.lineWidth?a.lineWidth:0;return{label:r,anchorX:l*(r.width/s-2*o.scale)+2*(.5-l)*u,anchorY:c*r.height/s+2*(.5-c)*u}},t.prototype.execute_=function(t,e,i,o,s,l){var h;this.declutterItems.length=0,this.pixelCoordinates_&&(0,n.fS)(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,a.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,c.lk)(this.renderedTransform_,e));for(var m,v,y,b,w,_,x,C,E,k,T,S,M,R,P,L,O,D=0,I=i.length,F=0,A=0,N=0,j=null,z=null,Z=this.coordinateCache_,G=this.viewRotation_,H=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,B={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},V=this.instructions!=i||this.overlaps?0:200;D<I;){var W=i[D];switch(W[0]){case f.ZP.BEGIN_GEOMETRY:(P=W[1]).getGeometry()?void 0===l||(0,r.kK)(l,W[3])?++D:D=W[2]+1:D=W[2];break;case f.ZP.BEGIN_PATH:A>V&&(this.fill_(t),A=0),N>V&&(t.stroke(),N=0),A||N||(t.beginPath(),b=NaN,w=NaN),++D;break;case f.ZP.CIRCLE:var Y=h[F=W[1]],q=h[F+1],U=h[F+2]-Y,X=h[F+3]-q,$=Math.sqrt(U*U+X*X);t.moveTo(Y+$,q),t.arc(Y,q,$,0,2*Math.PI,!0),++D;break;case f.ZP.CLOSE_PATH:t.closePath(),++D;break;case f.ZP.CUSTOM:F=W[1],m=W[2];var K=W[3],J=W[4],Q=6==W.length?W[5]:void 0;B.geometry=K,B.feature=P,D in Z||(Z[D]=[]);var tt=Z[D];Q?Q(h,F,m,2,tt):(tt[0]=h[F],tt[1]=h[F+1],tt.length=2),J(tt,B),++D;break;case f.ZP.DRAW_IMAGE:F=W[1],m=W[2],k=W[3],v=W[4],y=W[5],E=s?null:W[6];var et=W[7],it=W[8],nt=W[9],ot=W[10],rt=W[11],at=W[12],st=W[13],lt=W[14];if(!k&&W.length>=19){T=W[18],S=W[19],M=W[20],R=W[21];var ct=this.drawLabelWithPointPlacement_(T,S,M,R);k=ct.label,W[3]=k;var ut=W[22];v=(ct.anchorX-ut)*this.pixelRatio,W[4]=v;var ht=W[23];y=(ct.anchorY-ht)*this.pixelRatio,W[5]=y,et=k.height,W[7]=et,lt=k.width,W[14]=lt}var dt=void 0;W.length>24&&(dt=W[24]);var pt=void 0,ft=void 0,gt=void 0;W.length>16?(pt=W[15],ft=W[16],gt=W[17]):(pt=p.oB,ft=!1,gt=!1),rt&&H?at+=G:rt||H||(at-=G);for(var mt=0,vt=0;F<m;F+=2)if(!(dt&&dt[mt++]<lt/this.pixelRatio)){if(E){var yt=Math.floor(vt);E.length<yt+1&&((C=(0,r.lJ)()).push(E[0][4]),E.push(C)),C=E[yt]}this.replayImageOrLabel_(t,h[F],h[F+1],k,v,y,C,et,it,nt,ot,at,st,o,lt,pt,ft?j:null,gt?z:null),C&&(vt===Math.floor(vt)&&this.declutterItems.push(this,C,P),vt+=1/C[4])}++D;break;case f.ZP.DRAW_CHARS:var bt=W[1],wt=W[2],_t=W[3];C=s?null:W[4];var xt=W[5];R=W[6];var Ct=W[7],Et=W[8],kt=W[9];M=W[10];var Tt=W[11];T=W[12],S=W[13];var St=W[14],Mt=this.textStates[S],Rt=Mt.font,Pt=Mt.scale*Et,Lt=void 0;Rt in this.widths_?Lt=this.widths_[Rt]:(Lt={},this.widths_[Rt]=Lt);var Ot=(0,u.W)(h,bt,wt,2),Dt=Pt*(0,p.Kd)(Rt,T,Lt);if(xt||Dt<=Ot){var It=this.textStates[S].textAlign,Ft=d(h,bt,wt,2,T,(Ot-Dt)*g.I[It],Ct,Pt,p.Kd,Rt,Lt);if(Ft){var At=void 0,Nt=void 0,jt=void 0,zt=void 0,Zt=void 0;if(M)for(At=0,Nt=Ft.length;At<Nt;++At)jt=(Zt=Ft[At])[4],zt=this.createLabel(jt,S,"",M),v=Zt[2]+Tt,y=_t*zt.height+2*(.5-_t)*Tt-kt,this.replayImageOrLabel_(t,Zt[0],Zt[1],zt,v,y,C,zt.height,1,0,0,Zt[3],St,!1,zt.width,p.oB,null,null);if(R)for(At=0,Nt=Ft.length;At<Nt;++At)jt=(Zt=Ft[At])[4],zt=this.createLabel(jt,S,R,""),v=Zt[2],y=_t*zt.height-kt,this.replayImageOrLabel_(t,Zt[0],Zt[1],zt,v,y,C,zt.height,1,0,0,Zt[3],St,!1,zt.width,p.oB,null,null)}}this.declutterItems.push(this,C,P),++D;break;case f.ZP.END_GEOMETRY:if(void 0!==s){var Gt=s(P=W[1]);if(Gt)return Gt}++D;break;case f.ZP.FILL:V?A++:this.fill_(t),++D;break;case f.ZP.MOVE_TO_LINE_TO:for(F=W[1],m=W[2],L=h[F],x=(O=h[F+1])+.5|0,(_=L+.5|0)===b&&x===w||(t.moveTo(L,O),b=_,w=x),F+=2;F<m;F+=2)_=(L=h[F])+.5|0,x=(O=h[F+1])+.5|0,F!=m-2&&_===b&&x===w||(t.lineTo(L,O),b=_,w=x);++D;break;case f.ZP.SET_FILL_STYLE:j=W,this.alignFill_=W[2],A&&(this.fill_(t),A=0,N&&(t.stroke(),N=0)),t.fillStyle=W[1],++D;break;case f.ZP.SET_STROKE_STYLE:z=W,N&&(t.stroke(),N=0),this.setStrokeStyle_(t,W),++D;break;case f.ZP.STROKE:V?N++:t.stroke(),++D;break;default:++D}}A&&this.fill_(t),N&&t.stroke()},t.prototype.execute=function(t,e,i,n){this.viewRotation_=i,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,o){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,n,o)},t}();var T=[l.Z.POLYGON,l.Z.CIRCLE,l.Z.LINE_STRING,l.Z.IMAGE,l.Z.TEXT,l.Z.DEFAULT],S=function(){function t(t,e,i,n,o,r){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,c.Ue)(),this.createExecutors_(o)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var o in n){var r=n[o];i[o]=new k(this.resolution_,this.pixelRatio_,this.overlaps_,r)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,a,s,u){var h=2*(a=Math.round(a))+1,d=(0,c.qC)(this.hitDetectionTransform_,a+.5,a+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,o.E4)(h,h));var p,f=this.hitDetectionContext_;f.canvas.width!==h||f.canvas.height!==h?(f.canvas.width=h,f.canvas.height=h):f.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(p=(0,r.lJ)(),(0,r.Wj)(p,t),(0,r.f3)(p,e*(this.renderBuffer_+a),p));var g,m=function(t){if(void 0!==M[t])return M[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var o=t,r=0,a=0;for(;o>=r;)R(i,t+o,t+r),R(i,t+r,t+o),R(i,t-r,t+o),R(i,t-o,t+r),R(i,t-o,t-r),R(i,t-r,t-o),R(i,t+r,t-o),R(i,t+o,t-r),r++,2*((a+=1+2*r)-o)+1>0&&(a+=1-2*(o-=1));return M[t]=i,i}(a);function v(t){for(var e=f.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var n=0;n<h;n++)if(m[i][n]&&e[4*(n*h+i)+3]>0){var o=void 0;return(!u||g!=l.Z.IMAGE&&g!=l.Z.TEXT||-1!==u.indexOf(t))&&(o=s(t)),o||void f.clearRect(0,0,h,h)}}var y,b,w,_,x,C=Object.keys(this.executorsByZIndex_).map(Number);for(C.sort(n.kK),y=C.length-1;y>=0;--y){var E=C[y].toString();for(w=this.executorsByZIndex_[E],b=T.length-1;b>=0;--b)if(void 0!==(_=w[g=T[b]])&&(x=_.executeHitDetection(f,d,i,v,p)))return x}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],o=e[2],r=e[3],s=[i,n,i,r,o,r,o,n];return(0,a.vT)(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return(0,s.xb)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,o,r,a){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(n.kK),this.maxExtent_&&(t.save(),this.clip(t,e));var c,u,h,d,p,f,g=r||T;for(c=0,u=s.length;c<u;++c){var m=s[c].toString();for(p=this.executorsByZIndex_[m],h=0,d=g.length;h<d;++h){var v=g[h];if(void 0!==(f=p[v]))if(!a||v!=l.Z.IMAGE&&v!=l.Z.TEXT)f.execute(t,e,i,o);else{var y=a[m];y?y.push(f,e.slice(0)):a[m]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),M={0:[[!0]]};function R(t,e,i){var n,o=Math.floor(t.length/2);if(e>=o)for(n=o;n<e;n++)t[n][i]=!0;else if(e<o)for(n=e+1;n<o;n++)t[n][i]=!0}function P(t,e,i,o,r,a){for(var s=Object.keys(t).map(Number).sort(n.kK),l=0,c=s.length;l<c;++l)for(var u=t[s[l].toString()],h=void 0,d=0,p=u.length;d<p;){var f=u[d++];f!==h&&(h=f,a.push({items:f.declutterItems,opacity:o}));var g=u[d++];f.execute(e,g,i,r)}}const L=S},8186:(t,e,i)=>{"use strict";i.d(e,{gO:()=>o,Yc:()=>r,$O:()=>a,s3:()=>s,ZP:()=>l});var n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},o=[n.FILL],r=[n.STROKE],a=[n.BEGIN_PATH],s=[n.CLOSE_PATH];const l=n},2048:(t,e,i)=>{"use strict";i.d(e,{I:()=>f,Z:()=>g});var n=i(9179),o=i(5120),r=i(1915);function a(t,e,i,n,o){var r,a,s,l,c,u,h,d,p,f=i,g=i,m=0,v=0,y=i;for(r=i;r<n;r+=o){var b=e[r],w=e[r+1];void 0!==l&&(d=b-l,p=w-c,s=Math.sqrt(d*d+p*p),void 0!==u&&(v+=a,Math.acos((u*d+h*p)/(a*s))>t&&(v>m&&(m=v,f=y,g=r),v=0,y=r-o)),a=s,u=d,h=p),l=b,c=w}return(v+=s)>m?[y,r]:[f,g]}var s,l=i(8795),c=i(8509),u=i(8186),h=i(567),d=i(8288),p=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const g=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.declutterGroups_,r.labels_=null,r.text_="",r.textOffsetX_=0,r.textOffsetY_=0,r.textRotateWithView_=void 0,r.textRotation_=0,r.textFillState_=null,r.fillStates={},r.textStrokeState_=null,r.strokeStates={},r.textState_={},r.textStates={},r.textKey_="",r.fillKey_="",r.strokeKey_="",r}return p(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(i||n)){var s,h,p=this.coordinates.length,f=t.getType(),g=null,m=2,v=2;if(o.placement===d.Z.LINE){if(!(0,r.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var y=void 0;if(g=t.getFlatCoordinates(),v=t.getStride(),f==l.Z.LINE_STRING)y=[g.length];else if(f==l.Z.MULTI_LINE_STRING)y=t.getEnds();else if(f==l.Z.POLYGON)y=t.getEnds().slice(0,1);else if(f==l.Z.MULTI_POLYGON){var b=t.getEndss();for(y=[],s=0,h=b.length;s<h;++s)y.push(b[s][0])}this.beginGeometry(t,e);for(var w=o.textAlign,_=0,x=void 0,C=0,E=y.length;C<E;++C){if(null==w){var k=a(o.maxAngle,g,_,y[C],v);_=k[0],x=k[1]}else x=y[C];for(s=_;s<x;s+=v)this.coordinates.push(g[s],g[s+1]);m=this.coordinates.length,_=y[C];var T=this.declutterGroups_?0===C?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(p,m,T),p=m}this.endGeometry(e)}else{var S=null;switch(o.overflow||(S=[]),f){case l.Z.POINT:case l.Z.MULTI_POINT:m=(g=t.getFlatCoordinates()).length;break;case l.Z.LINE_STRING:g=t.getFlatMidpoint();break;case l.Z.CIRCLE:g=t.getCenter();break;case l.Z.MULTI_LINE_STRING:m=(g=t.getFlatMidpoints()).length;break;case l.Z.POLYGON:g=t.getFlatInteriorPoint(),o.overflow||S.push(g[2]/this.resolution),v=3;break;case l.Z.MULTI_POLYGON:var M=t.getFlatInteriorPoints();for(g=[],s=0,h=M.length;s<h;s+=3)o.overflow||S.push(M[s+2]/this.resolution),g.push(M[s],M[s+1]);if(0==(m=g.length))return}m=this.appendFlatCoordinates(g,0,m,v,!1,!1),this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var R=this.pixelRatio;this.instructions.push([u.ZP.DRAW_IMAGE,p,m,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,o.padding==c.oB?c.oB:o.padding.map((function(t){return t*R})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.hitDetectionInstructions.push([u.ZP.DRAW_IMAGE,p,m,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,o.padding,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||c.PH,textBaseline:e.textBaseline||c.ru,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,o=this.textState_,r=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var l=this.pixelRatio,c=f[o.textBaseline],h=this.textOffsetY_*l,d=this.text_,p=o.scale,g=n?n.lineWidth*p/2:0;this.instructions.push([u.ZP.DRAW_CHARS,t,e,c,i,o.overflow,s,o.maxAngle,l,h,r,g*l,d,a,1]),this.hitDetectionInstructions.push([u.ZP.DRAW_CHARS,t,e,c,i,o.overflow,s,o.maxAngle,1,h,r,g,d,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,r,a;if(t){this.declutterGroups_=e;var s=t.getFill();s?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=(0,o.y)(s.getColor()||c.bL)):(r=null,this.textFillState_=r);var l=t.getStroke();if(l){(a=this.textStrokeState_)||(a={},this.textStrokeState_=a);var u=l.getLineDash(),h=l.getLineDashOffset(),d=l.getWidth(),p=l.getMiterLimit();a.lineCap=l.getLineCap()||c.mb,a.lineDash=u?u.slice():c.X9,a.lineDashOffset=void 0===h?c.He:h,a.lineJoin=l.getLineJoin()||c.rc,a.lineWidth=void 0===d?c.yC:d,a.miterLimit=void 0===p?c.V4:p,a.strokeStyle=(0,o.y)(l.getColor()||c.Tx)}else a=null,this.textStrokeState_=a;i=this.textState_;var f=t.getFont()||c.Df;(0,c.Qx)(f);var g=t.getScale();i.overflow=t.getOverflow(),i.font=f,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||c.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||c.oB,i.scale=void 0===g?1:g;var m=t.getOffsetX(),v=t.getOffsetY(),y=t.getRotateWithView(),b=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===m?0:m,this.textOffsetY_=void 0===v?0:v,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===b?0:b,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,n.sq)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,n.sq)(r.fillStyle):""}else this.text_=""},e}(h.Z)},7746:(t,e,i)=>{"use strict";i.d(e,{T:()=>y,i:()=>b});var n,o=i(9682),r=i(5120),a=i(1915),s=i(8795),l=i(2538),c=i(7882),u=i(4889),h=i(8509),d=i(2359),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const f=function(t){function e(e,i,n,o,r,a,s){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=n,l.transform_=o,l.viewRotation_=r,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=0,l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=0,l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=(0,d.Ue)(),l}return p(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var o=(0,c.vT)(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.tmpLocalTransform_,s=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,h=o.length;u<h;u+=2){var p=o[u]-this.imageAnchorX_,f=o[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var g=p+this.imageAnchorX_,m=f+this.imageAnchorY_;(0,d.qC)(a,g,m,this.imageScale_,this.imageScale_,l,-g,-m),r.setTransform.apply(r,a)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=o[e]+this.textOffsetX_,l=o[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var u=(0,d.qC)(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,a,-s,-l);r.setTransform.apply(r,u)}this.textStrokeState_&&r.strokeText(this.text_,s,l),this.textFillState_&&r.fillText(this.text_,s,l)}0===a&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,o){var r=this.context_,a=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(a[0],a[1]);var s=a.length;o&&(s-=2);for(var l=2;l<s;l+=2)r.lineTo(a[l],a[l+1]);return o&&r.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var o=0,r=i.length;o<r;++o)e=this.moveToLineTo_(t,e,i[o],n,!0);return e},e.prototype.drawCircle=function(t){if((0,a.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,l.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case s.Z.POINT:this.drawPoint(t);break;case s.Z.LINE_STRING:this.drawLineString(t);break;case s.Z.POLYGON:this.drawPolygon(t);break;case s.Z.MULTI_POINT:this.drawMultiPoint(t);break;case s.Z.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.Z.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.Z.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.Z.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,a.kK)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,a.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),o=0,r=t.getEnds(),s=t.getStride();i.beginPath();for(var l=0,c=r.length;l<c;++l)o=this.moveToLineTo_(n,o,r[l],s,!1);i.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,a.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),r=t.getStride();e.beginPath();for(var s=0,l=o.length;s<l;++s){var c=o[s];n=this.drawRings_(i,n,c,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,o.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:h.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:(0,r.y)(i||h.bL)}}else this.fillState_=null;if(e){var n=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),c=e.getWidth(),u=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:h.mb,lineDash:a||h.X9,lineDashOffset:s||h.He,lineJoin:void 0!==l?l:h.rc,lineWidth:this.pixelRatio_*(void 0!==c?c:h.yC),miterLimit:void 0!==u?u:h.V4,strokeStyle:(0,r.y)(n||h.Tx)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=o[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:(0,r.y)(i||h.bL)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),a=n.getLineCap(),s=n.getLineDash(),l=n.getLineDashOffset(),c=n.getLineJoin(),u=n.getWidth(),d=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:h.mb,lineDash:s||h.X9,lineDashOffset:l||h.He,lineJoin:void 0!==c?c:h.rc,lineWidth:void 0!==u?u:h.yC,miterLimit:void 0!==d?d:h.V4,strokeStyle:(0,r.y)(o||h.Tx)}}else this.textStrokeState_=null;var p=t.getFont(),f=t.getOffsetX(),g=t.getOffsetY(),m=t.getRotateWithView(),v=t.getRotation(),y=t.getScale(),b=t.getText(),w=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==p?p:h.Df,textAlign:void 0!==w?w:h.PH,textBaseline:void 0!==_?_:h.ru},this.text_=void 0!==b?b:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(u.Z);var g=i(5386),m=i(3298),v=i(4814);function y(t,e,i,n,r,l,c){var u=t[0]/2,h=t[1]/2,d=(0,g.E4)(u,h);d.imageSmoothingEnabled=!1;for(var p=d.canvas,y=new f(d,.5,r,null,c),b=i.length,w=Math.floor(16777215/b),_={},x=1;x<=b;++x){var C=i[x-1],E=C.getStyleFunction()||n;if(n){var k=E(C,l);if(k){Array.isArray(k)||(k=[k]);for(var T="#"+("000000"+(x*w).toString(16)).slice(-6),S=0,M=k.length;S<M;++S){var R=k[S],P=R.clone(),L=P.getFill();L&&L.setColor(T);var O=P.getStroke();O&&O.setColor(T),P.setText(void 0);var D=R.getImage();if(D){var I=D.getImageSize();if(!I)continue;var F=document.createElement("canvas");F.width=I[0],F.height=I[1];var A=F.getContext("2d",{alpha:!1});A.fillStyle=T;var N=A.canvas;A.fillRect(0,0,N.width,N.height);var j=I?I[0]:N.width,z=I?I[1]:N.height;(0,g.E4)(j,z).drawImage(N,0,0),P.setImage(new m.Z({img:N,imgSize:I,anchor:D.getAnchor(),anchorXUnits:v.Z.PIXELS,anchorYUnits:v.Z.PIXELS,offset:D.getOrigin(),size:D.getSize(),opacity:D.getOpacity(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}var Z=Number(P.getZIndex());(V=_[Z])||(V={},_[Z]=V,V[s.Z.POLYGON]=[],V[s.Z.CIRCLE]=[],V[s.Z.LINE_STRING]=[],V[s.Z.POINT]=[]);var G=P.getGeometryFunction()(C);G&&(0,a.kK)(r,G.getExtent())&&V[G.getType().replace("Multi","")].push(G,P)}}}}for(var H=Object.keys(_).map(Number).sort(o.kK),B=(x=0,H.length);x<B;++x){var V=_[H[x]];for(var W in V){var Y=V[W];for(S=0,M=Y.length;S<M;S+=2){y.setStyle(Y[S+1]);for(var q=0,U=e.length;q<U;++q)y.setTransform(e[q]),y.drawGeometry(Y[S])}}}return document.body.appendChild(d.canvas),d.getImageData(0,0,p.width,p.height)}function b(t,e,i){var n=[];if(i){var o=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),r=i.data[o],a=i.data[o+1],s=i.data[o+2]+256*(a+256*r),l=Math.floor(16777215/e.length);s&&s%l==0&&n.push(e[s/l-1])}return n}},5317:(t,e,i)=>{"use strict";i.d(e,{Z:()=>k});var n,o=i(7644),r=i(7701),a=i(1173),s=i(7208),l=i(9179),c=i(967),u=i(1915),h=i(4011),d=i(6250),p=i(2359),f=i(5415),g=i(728),m=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function v(t,e){d.c.expire()}const y=function(t){function e(e){var i=t.call(this)||this;return i.map_=e,i.declutterTree_=null,i}return m(e,t),e.prototype.dispatchRenderEvent=function(t,e){(0,l.O3)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;(0,p.qC)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,p.nb)(n,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,a,s,l){var c,h=e.viewState;function d(t,e,i){return o.call(a,e,t?i:null)}var p=h.projection,f=(0,g.Cf)(t.slice(),p),m=[[0,0]];if(p.canWrapX()&&n){var v=p.getExtent(),y=(0,u.dz)(v);m.push([-y,0],[y,0])}var b,w=e.layerStatesArray,_=w.length;this.declutterTree_&&(b=this.declutterTree_.all().map((function(t){return t.value})));for(var x=[],C=0;C<m.length;C++)for(var E=_-1;E>=0;--E){var k=w[E],T=k.layer;if(T.hasRenderer()&&(0,r.j)(k,h)&&s.call(l,T)){var S=T.getRenderer(),M=T.getSource();if(S&&M){var R=M.getWrapX()?f:t,P=d.bind(null,k.managed);x[0]=R[0]+m[C][0],x[1]=R[1]+m[C][1],c=S.forEachFeatureAtCoordinate(x,e,i,P,b)}if(c)return c}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o){return(0,l.O3)()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,h.uX,this,o,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=(0,f.DL)(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){d.c.canExpireCache()&&t.postRenderFunctions.push(v)},e}(c.Z);var b=i(2418),w=i(5386),_=i(3002),x=i(8509),C=i(3910),E=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const k=function(t){function e(e){var i=t.call(this,e)||this;i.fontChangeListenerKey_=(0,_.oL)(x.sG,C.Z.PROPERTYCHANGE,e.redrawText.bind(e)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className=o.XV+" ol-layers";var r=e.getViewport();return r.insertBefore(i.element_,r.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return E(e,t),e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=new a.Z(t,void 0,e);i.dispatchEvent(n)}},e.prototype.disposeInternal=function(){(0,_.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(s.Z.PRECOMPOSE,e);var i=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.viewState;this.children_.length=0;for(var o=null,a=0,l=i.length;a<l;++a){var c=i[a];if(e.layerIndex=a,(0,r.j)(c,n)&&(c.sourceState==b.Z.READY||c.sourceState==b.Z.UNDEFINED)){var u=c.layer.render(e,o);u&&u!==o&&(this.children_.push(u),o=u)}}t.prototype.renderFrame.call(this,e),(0,w.hF)(this.element_,this.children_),this.dispatchRenderEvent(s.Z.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o){for(var a=e.viewState,s=e.layerStatesArray,l=s.length-1;l>=0;--l){var c=s[l],u=c.layer;if(u.hasRenderer()&&(0,r.j)(c,a)&&o(u)){var h=u.getRenderer().getDataAtPixel(t,e,i);if(h){var d=n(u,h);if(d)return d}}}},e}(y)},5381:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var n,o=i(1915),r=i(5386),a=i(1173),s=i(7208),l=i(8509),c=i(9179),u=i(1256),h=i(6834),d=i(3381),p=i(2418),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const g=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i}return f(e,t),e.prototype.getFeatures=function(t){return(0,c.O3)()},e.prototype.prepareFrame=function(t){return(0,c.O3)()},e.prototype.renderFrame=function(t,e){return(0,c.O3)()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,o){var r=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,o,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){},e.prototype.getDataAtPixel=function(t,e,i){return(0,c.O3)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===u.Z.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=u.Z.LOADED&&e!=u.Z.ERROR&&t.addEventListener(d.Z.CHANGE,this.boundHandleImageChange_),e==u.Z.IDLE&&(t.load(),e=t.getState()),e==u.Z.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==p.Z.READY&&t.changed()},e}(h.Z);var m=i(2359),v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const y=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.renderedResolution,i.tempTransform_=(0,m.Ue)(),i.pixelTransform=(0,m.Ue)(),i.inversePixelTransform=(0,m.Ue)(),i.context=null,i.containerReused=!1,i}return v(e,t),e.prototype.useContainer=function(t,e,i){var n,o,a=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===a&&((l=t.firstElementChild)instanceof HTMLCanvasElement&&(o=l.getContext("2d")));if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=a;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var l=(o=(0,r.E4)()).canvas;n.appendChild(l),(s=l.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=o}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n/2,a=e.size[1]*n/2,s=e.viewState.rotation,c=(0,o.rL)(i),u=(0,o.Xv)(i),h=(0,o.w$)(i),d=(0,o.hC)(i);(0,m.nn)(e.coordinateToPixelTransform,c),(0,m.nn)(e.coordinateToPixelTransform,u),(0,m.nn)(e.coordinateToPixelTransform,h),(0,m.nn)(e.coordinateToPixelTransform,d),t.save(),(0,l.qs)(t,-s,r,a),t.beginPath(),t.moveTo(c[0]*n,c[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(d[0]*n,d[1]*n),t.clip(),(0,l.qs)(t,s,r,a)},e.prototype.clipUnrotated=function(t,e,i){var n=(0,o.rL)(i),r=(0,o.Xv)(i),a=(0,o.w$)(i),s=(0,o.hC)(i);(0,m.nn)(e.coordinateToPixelTransform,n),(0,m.nn)(e.coordinateToPixelTransform,r),(0,m.nn)(e.coordinateToPixelTransform,a),(0,m.nn)(e.coordinateToPixelTransform,s);var l=this.inversePixelTransform;(0,m.nn)(l,n),(0,m.nn)(l,r),(0,m.nn)(l,a),(0,m.nn)(l,s),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var o=new a.Z(t,this.inversePixelTransform,i,e);n.dispatchEvent(o)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(s.Z.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(s.Z.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,i,n,o,r,a){var s=o/2,l=r/2,c=n/e,u=-c,h=-t[0]+a,d=-t[1];return(0,m.qC)(this.tempTransform_,s,l,c,u,-i,h,d)},e.prototype.getDataAtPixel=function(t,e,i){var n,o=(0,m.nn)(this.inversePixelTransform,t.slice()),r=this.context;try{n=r.getImageData(Math.round(o[0]),Math.round(o[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(g)},3631:(t,e,i)=>{"use strict";i.d(e,{eR:()=>l,se:()=>c,Qz:()=>u,Pn:()=>h});var n=i(9179),o=i(1256),r=i(8795),a=i(1456),s={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.Z.LOADED)return;var s=t.getBuilder(i.getZIndex(),a.Z.IMAGE);s.setImageStyle(r,t.addDeclutter(!1)),s.drawPoint(e,n)}var l=i.getText();if(l){var c=t.getBuilder(i.getZIndex(),a.Z.TEXT);c.setTextStyle(l,t.addDeclutter(!!r)),c.drawText(e,n)}},LineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getBuilder(i.getZIndex(),a.Z.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),a.Z.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},Polygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getBuilder(i.getZIndex(),a.Z.POLYGON);s.setFillStrokeStyle(o,r),s.drawPolygon(e,n)}var l=i.getText();if(l){var c=t.getBuilder(i.getZIndex(),a.Z.TEXT);c.setTextStyle(l,t.addDeclutter(!1)),c.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=o.Z.LOADED)return;var s=t.getBuilder(i.getZIndex(),a.Z.IMAGE);s.setImageStyle(r,t.addDeclutter(!1)),s.drawMultiPoint(e,n)}var l=i.getText();if(l){var c=t.getBuilder(i.getZIndex(),a.Z.TEXT);c.setTextStyle(l,t.addDeclutter(!!r)),c.drawText(e,n)}},MultiLineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getBuilder(i.getZIndex(),a.Z.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),a.Z.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(r||o){var s=t.getBuilder(i.getZIndex(),a.Z.POLYGON);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,n)}var l=i.getText();if(l){var c=t.getBuilder(i.getZIndex(),a.Z.TEXT);c.setTextStyle(l,t.addDeclutter(!1)),c.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var o,r,a=e.getGeometriesArray();for(o=0,r=a.length;o<r;++o){(0,s[a[o].getType()])(t,a[o],i,n)}},Circle:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getBuilder(i.getZIndex(),a.Z.CIRCLE);s.setFillStrokeStyle(o,r),s.drawCircle(e,n)}var l=i.getText();if(l){var c=t.getBuilder(i.getZIndex(),a.Z.TEXT);c.setTextStyle(l,t.addDeclutter(!1)),c.drawText(e,n)}}};function l(t,e){return parseInt((0,n.sq)(t),10)-parseInt((0,n.sq)(e),10)}function c(t,e){var i=u(t,e);return i*i}function u(t,e){return.5*t/e}function h(t,e,i,n,l,c){var u=!1,h=i.getImage();if(h){var d=h.getImageState();d==o.Z.LOADED||d==o.Z.ERROR?h.unlistenImageChange(l):(d==o.Z.IDLE&&h.load(),d=h.getImageState(),h.listenImageChange(l),u=!0)}return function(t,e,i,n,o){var l=i.getGeometryFunction()(e);if(!l)return;var c=l.simplifyTransformed(n,o);if(i.getRenderer())!function t(e,i,n,o){if(i.getType()==r.Z.GEOMETRY_COLLECTION){for(var s=i.getGeometries(),l=0,c=s.length;l<c;++l)t(e,s[l],n,o);return}e.getBuilder(n.getZIndex(),a.Z.DEFAULT).drawCustom(i,o,n.getRenderer())}(t,c,i,e);else{(0,s[c.getType()])(t,c,i,e)}}(t,e,i,n,c),u}},8642:(t,e,i)=>{"use strict";i.d(e,{h$:()=>o,YP:()=>r,gE:()=>a,Gw:()=>s});var n=i(1882);function o(t){return void 0!==t?0:void 0}function r(t){return void 0!==t?t:void 0}function a(t){var e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function s(t){var e=t||(0,n.Yr)(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},596:(t,e,i)=>{"use strict";function n(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function r(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{py:()=>n,bA:()=>o,Pq:()=>r})},1405:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n,o=i(9179),r=i(8493),a=i(3272),s=i(2418),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function c(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const u=function(t){function e(e){var i=t.call(this)||this;return i.projection_=(0,a.U2)(e.projection),i.attributions_=c(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:s.Z.READY,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return l(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return(0,o.O3)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=c(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(r.ZP)},2418:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},3410:(t,e,i)=>{"use strict";i.d(e,{Z:()=>E});var n,o=i(9179),r=i(8426),a=i(9629),s=i(3910),l=i(9682),c=i(8906),u=i(3002),h=i(9520),d=i(3381),p=i(1915),f=i(800),g=i(4011),m=i(161),v=i(3580),y=i(1405),b=i(2418),w=i(5753),_=i(3101),x=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),C=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return x(e,t),e}(h.ZP);const E=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:b.Z.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=g.Zn,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&((0,c.h)(i.format_,7),i.loader_=(0,f.Be)(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:m.$6;var o,a,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=s?new _.Z:null,i.loadedExtentsRtree_=new _.Z,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?a=n.features:n.features&&(a=(o=n.features).getArray()),s||void 0!==o||(o=new r.Z(a)),void 0!==a&&i.addFeaturesInternal(a),void 0!==o&&i.bindFeaturesCollection_(o),i}return x(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=(0,o.sq)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new C(w.Z.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[(0,u.oL)(e,d.Z.CHANGE,this.handleFeatureChange_,this),(0,u.oL)(e,s.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&((0,c.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],r=0,a=t.length;r<a;r++){var s=t[r],l=(0,o.sq)(s);this.addToIndex_(l,s)&&i.push(s)}r=0;for(var c=i.length;r<c;r++){s=i[r],l=(0,o.sq)(s);this.setupChangeEvents_(l,s);var u=s.getGeometry();if(u){var h=u.getExtent();e.push(h),n.push(s)}else this.nullGeometryFeatures_[l]=s}this.featuresRtree_&&this.featuresRtree_.load(e,n);r=0;for(var d=i.length;r<d;r++)this.dispatchEvent(new C(w.Z.ADDFEATURE,i[r]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(w.Z.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(w.Z.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(a.Z.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(a.Z.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(u.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new C(w.Z.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,v.xb)(this.nullGeometryFeatures_)||(0,l.l7)(t,(0,v.KX)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],o=null,r=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||g.uX;return this.featuresRtree_.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),c=a;if((a=e.closestPointXY(i,n,r,a))<c){o=t;var u=Math.sqrt(a);s[0]=i-u,s[1]=n-u,s[2]=i+u,s[3]=n+u}}})),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=(0,o.sq)(e),n=e.getGeometry();if(n){var r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new C(w.Z.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:(0,o.sq)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,v.xb)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var r=function(t,r){var s=o[t];n.forEachInExtent(s,(function(t){return(0,p.r4)(t.extent,s)}))||(a.loader_.call(a,s,e,i),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==g.Zn)},a=this,s=0,l=o.length;s<l;++s)r(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if((0,p.fS)(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=(0,o.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=(0,o.sq)(t);this.featureChangeKeys_[e].forEach(u.bN),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new C(w.Z.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){(0,c.h)(this.format_,7),this.setLoader((0,f.Be)(t,this.format_))},e}(y.Z)},5753:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},3101:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(9179),o=i(6079),r=i.n(o),a=i(1915),s=i(3580);const l=function(){function t(t){this.rbush_=new(r())(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,n.sq)(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),o=0,r=e.length;o<r;o++){var a=t[o],s=e[o],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[o]=l,this.items_[(0,n.sq)(s)]=l}this.rbush_.load(i)},t.prototype.remove=function(t){var e=(0,n.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[(0,n.sq)(e)],o=[i.minX,i.minY,i.maxX,i.maxY];(0,a.fS)(o,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,o=t.length;n<o;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return(0,s.xb)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,a.T9)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}()},3156:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var n,o=i(8913),r=i(5120),a=i(5386),s=i(1256),l=i(8509),c=i(8039),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const h=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return u(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return s.Z.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e=l.mb,i=l.rc,n=0,o=null,s=0,c=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=l.Tx),t=(0,r.y)(t),void 0===(c=this.stroke_.getWidth())&&(c=l.yC),o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=l.rc),void 0===(e=this.stroke_.getLineCap())&&(e=l.mb),void 0===(n=this.stroke_.getMiterLimit())&&(n=l.V4));var u=2*(this.radius_+c)+1,h={strokeStyle:t,strokeWidth:c,size:u,lineCap:e,lineDash:o,lineDashOffset:s,lineJoin:i,miterLimit:n},d=(0,a.E4)(u,u);this.canvas_=d.canvas;var p=u=this.canvas_.width,f=this.getDisplacement();this.draw_(h,d,0,0),this.createHitDetectionCanvas_(h),this.anchor_=[u/2-f[0],u/2+f[1]],this.size_=[u,u],this.imageSize_=[p,p]},e.prototype.draw_=function(t,e,i,n){var o,a,s;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var c=this.points_;if(c===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(c*=2),o=0;o<=c;o++)a=2*o*Math.PI/c-Math.PI/2+this.angle_,s=o%2==0?this.radius_:u,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h=l.bL),e.fillStyle=(0,r.y)(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=(0,o._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r=void 0!==this.radius2_?this.radius2_:this.radius_;r!==this.radius_&&(o*=2);var a=void 0,s=void 0,c=void 0;for(a=0;a<=o;a++)c=2*a*Math.PI/o-Math.PI/2+this.angle_,s=a%2==0?this.radius_:r,e.lineTo(t.size/2+s*Math.cos(c),t.size/2+s*Math.sin(c))}e.fillStyle=l.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(c.Z);var d=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const p=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return d(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(h)},8185:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}()},3298:(t,e,i)=>{"use strict";i.d(e,{Z:()=>x});var n,o=i(9179),r=i(1256),a=i(8906),s=i(8913),l=i(3381),c=i(4814),u=i(5386),h=i(6575),d=i(6250),p=i(2022),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),g=function(t){function e(e,i,n,o,r,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==o&&(s.image_.crossOrigin=o),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=r,s.size_=n,s.src_=i,s.tainted_,s}return f(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===r.Z.LOADED){t||(t=(0,u.E4)(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l.Z.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=r.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=r.Z.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=(0,u.E4)(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==r.Z.IDLE){this.imageState_=r.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,p.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),n=i.data,o=this.color_[0]/255,r=this.color_[1]/255,a=this.color_[2]/255,s=0,l=n.length;s<l;s+=4)n[s]*=o,n[s+1]*=r,n[s+2]*=a;t.putImageData(i,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(h.Z);const m="bottom-left",v="bottom-right",y="top-left",b="top-right";var w=i(8039),_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const x=function(t){function e(e){var i=this,n=e||{},l=void 0!==n.opacity?n.opacity:1,u=void 0!==n.rotation?n.rotation:0,h=void 0!==n.scale?n.scale:1,p=void 0!==n.rotateWithView&&n.rotateWithView;(i=t.call(this,{opacity:l,rotation:u,scale:h,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:p})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:y,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:c.Z.FRACTION,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:c.Z.FRACTION,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var f=void 0!==n.img?n.img:null,m=void 0!==n.imgSize?n.imgSize:null,v=n.src;(0,a.h)(!(void 0!==v&&f),4),(0,a.h)(!f||f&&m,5),void 0!==v&&0!==v.length||!f||(v=f.src||(0,o.sq)(f)),(0,a.h)(void 0!==v&&v.length>0,6);var b=void 0!==n.src?r.Z.IDLE:r.Z.LOADED;return i.color_=void 0!==n.color?(0,s._2)(n.color):null,i.iconImage_=function(t,e,i,n,o,r){var a=d.c.get(e,n,r);return a||(a=new g(t,e,i,n,o,r),d.c.set(e,n,r,a)),a}(f,v,m,i.crossOrigin_,b,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:y,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return _(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==c.Z.FRACTION||this.anchorYUnits_==c.Z.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.Z.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==c.Z.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=y){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=b&&this.anchorOrigin_!=v||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=m&&this.anchorOrigin_!=v||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=y){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=b&&this.offsetOrigin_!=v||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=m&&this.offsetOrigin_!=v||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(l.Z.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(l.Z.CHANGE,t)},e}(w.Z)},4814:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={FRACTION:"fraction",PIXELS:"pixels"}},6250:(t,e,i)=>{"use strict";i.d(e,{c:()=>a});var n=i(8913),o=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,i){var n=r(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var o=r(t,e,i);this.cache_[o]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function r(t,e,i){return e+":"+t+":"+(i?(0,n.XC)(i):"null")}var a=new o},8039:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(9179);const o=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return(0,n.O3)()},t.prototype.getImage=function(t){return(0,n.O3)()},t.prototype.getHitDetectionImage=function(t){return(0,n.O3)()},t.prototype.getImageState=function(){return(0,n.O3)()},t.prototype.getImageSize=function(){return(0,n.O3)()},t.prototype.getHitDetectionImageSize=function(){return(0,n.O3)()},t.prototype.getOrigin=function(){return(0,n.O3)()},t.prototype.getSize=function(){return(0,n.O3)()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){(0,n.O3)()},t.prototype.load=function(){(0,n.O3)()},t.prototype.unlistenImageChange=function(t){(0,n.O3)()},t}()},767:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}()},1219:(t,e,i)=>{"use strict";i.d(e,{J$:()=>c,yF:()=>h,Ly:()=>d,ZP:()=>f});var n=i(8906),o=i(8795),r=i(3156),a=i(8185),s=i(767),l=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=p,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=p,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function c(t){var e;if("function"==typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else(0,n.h)("function"==typeof t.getZIndex,41),i=[t];e=function(){return i}}return e}var u=null;function h(t,e){if(!u){var i=new a.Z({color:"rgba(255,255,255,0.4)"}),n=new s.Z({color:"#3399CC",width:1.25});u=[new l({image:new r.Z({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return u}function d(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[o.Z.POLYGON]=[new l({fill:new a.Z({color:[255,255,255,.5]})})],t[o.Z.MULTI_POLYGON]=t[o.Z.POLYGON],t[o.Z.LINE_STRING]=[new l({stroke:new s.Z({color:e,width:5})}),new l({stroke:new s.Z({color:i,width:3})})],t[o.Z.MULTI_LINE_STRING]=t[o.Z.LINE_STRING],t[o.Z.CIRCLE]=t[o.Z.POLYGON].concat(t[o.Z.LINE_STRING]),t[o.Z.POINT]=[new l({image:new r.Z({radius:6,fill:new a.Z({color:i}),stroke:new s.Z({color:e,width:1.5})}),zIndex:1/0})],t[o.Z.MULTI_POINT]=t[o.Z.POINT],t[o.Z.GEOMETRY_COLLECTION]=t[o.Z.POLYGON].concat(t[o.Z.LINE_STRING],t[o.Z.POINT]),t}function p(t){return t.getGeometry()}const f=l},5565:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(8185),o=i(8288);const r=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.Z({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:o.Z.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}()},8288:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINT:"point",LINE:"line"}},508:(t,e,i)=>{"use strict";i.d(e,{e:()=>n,S:()=>o});var n=42,o=256},2359:(t,e,i)=>{"use strict";i.d(e,{Ue:()=>r,mc:()=>a,Jp:()=>s,lk:()=>c,nn:()=>u,bA:()=>h,n3:()=>d,Iu:()=>p,qC:()=>f,nb:()=>g,BB:()=>m});var n=i(8906),o=new Array(6);function r(){return[1,0,0,1,0,0]}function a(t){return l(t,1,0,0,1,0,0)}function s(t,e){var i=t[0],n=t[1],o=t[2],r=t[3],a=t[4],s=t[5],l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],p=e[5];return t[0]=i*l+o*c,t[1]=n*l+r*c,t[2]=i*u+o*h,t[3]=n*u+r*h,t[4]=i*d+o*p+a,t[5]=n*d+r*p+s,t}function l(t,e,i,n,o,r,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=o,t[4]=r,t[5]=a,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function h(t,e,i){return s(t,l(o,e,0,0,i,0,0))}function d(t,e,i){return l(t,e,0,0,i,0,0)}function p(t,e,i){return s(t,l(o,1,0,0,1,e,i))}function f(t,e,i,n,o,r,a,s){var l=Math.sin(r),c=Math.cos(r);return t[0]=n*c,t[1]=o*l,t[2]=-n*l,t[3]=o*c,t[4]=a*n*c-s*n*l+e,t[5]=a*o*l+s*o*c+i,t}function g(t,e){var i,o=(i=e)[0]*i[3]-i[1]*i[2];(0,n.h)(0!==o,32);var r=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5];return t[0]=l/o,t[1]=-a/o,t[2]=-s/o,t[3]=r/o,t[4]=(s*u-l*c)/o,t[5]=-(r*u-a*c)/o,t}function m(t){return"matrix("+t.join(", ")+")"}},9179:(t,e,i)=>{"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(e,{O3:()=>n,sq:()=>r,q4:()=>a});var o=0;function r(t){return t.ol_uid||(t.ol_uid=String(++o))}var a="6.3.1"},3614:(t,e,i)=>{"use strict";t.exports=o;var n=i(645);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var r="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function l(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var o=i.pos-1;o>=t;o--)i.buf[o+n]=i.buf[o]}function c(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),o=n>>3,r=this.pos;this.type=7&n,t(o,e,this),this.pos===r&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,o,r=i.buf;if(o=r[i.pos++],n=(112&o)>>4,o<128)return s(t,n,e);if(o=r[i.pos++],n|=(127&o)<<3,o<128)return s(t,n,e);if(o=r[i.pos++],n|=(127&o)<<10,o<128)return s(t,n,e);if(o=r[i.pos++],n|=(127&o)<<17,o<128)return s(t,n,e);if(o=r[i.pos++],n|=(127&o)<<24,o<128)return s(t,n,e);if(o=r[i.pos++],n|=(1&o)<<31,o<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&r?function(t,e,i){return r.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){var n="",o=e;for(;o<i;){var r,a,s,l=t[o],c=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(r=t[o+1]))&&(c=(31&l)<<6|63&r)<=127&&(c=null):3===u?(r=t[o+1],a=t[o+2],128==(192&r)&&128==(192&a)&&((c=(15&l)<<12|(63&r)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(r=t[o+1],a=t[o+2],s=t[o+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),o+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==o.Bytes)return t.push(this.readVarint(e));var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==o.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==o.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==o.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==o.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,o,r=0;r<e.length;r++){if((n=e.charCodeAt(r))>55295&&n<57344){if(!o){n>56319||r+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):o=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(t[i++]=239,t[i++]=191,t[i++]=189,o=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&l(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&l(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,o.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},6079:function(t){t.exports=function(){"use strict";function t(t,n,o,r,a){!function t(i,n,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,l=n-o+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),d=Math.max(o,Math.floor(n-l*u/s+h)),p=Math.min(r,Math.floor(n+(s-l)*u/s+h));t(i,n,d,p,a)}var f=i[n],g=o,m=r;for(e(i,o,n),a(i[r],f)>0&&e(i,o,r);g<m;){for(e(i,g,m),g++,m--;a(i[g],f)<0;)g++;for(;a(i[m],f)>0;)m--}0===a(i[o],f)?e(i,o,m):(m++,e(i,m,r)),m<=n&&(o=m+1),n<=m&&(r=m-1)}}(t,n,o||0,r||t.length-1,a||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function r(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r=e;r<i;r++){var a=t.children[r];s(o,t.leaf?n(a):a)}return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,i,n,o,r){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=o)){var s=i+Math.ceil((n-i)/o/2)*o;t(e,s,i,n,r),a.push(i,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!p(t,e))return i;for(var n=this.toBBox,o=[];e;){for(var r=0;r<e.children.length;r++){var a=e.children[r],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?i.push(a):d(t,s)?this._all(a,i):o.push(a))}e=o.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],r=e.leaf?this.toBBox(o):o;if(p(t,r)){if(e.leaf||d(t,r))return!0;i.push(o)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=f([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,r,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),r=!0),a.leaf){var u=o(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}r||a.leaf||!d(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var o,a=i-e+1,s=this._maxEntries;if(a<=s)return r(o=f(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=f([])).leaf=!1,o.height=n;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));g(t,e,i,c,this.compareMinX);for(var u=e;u<=i;u+=c){var h=Math.min(u+c-1,i);g(t,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);o.children.push(this._build(t,d,p,n-1))}}return r(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var o=1/0,r=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=u(l),h=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<r?(r=h,o=c<o?c:o,a=l):h===r&&c<o&&(o=c,a=l)}e=a||e.children[0]}var d,p;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),o=[],r=this._chooseSubtree(n,this.data,e,o);for(r.children.push(t),s(r,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var a=this._chooseSplitIndex(i,o,n),s=f(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},n.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,o,r,s,l,c,h,d=1/0,p=1/0,f=e;f<=i-e;f++){var g=a(t,0,f,this.toBBox),m=a(t,f,i,this.toBBox),v=(o=g,r=m,s=void 0,l=void 0,c=void 0,h=void 0,s=Math.max(o.minX,r.minX),l=Math.max(o.minY,r.minY),c=Math.min(o.maxX,r.maxX),h=Math.min(o.maxY,r.maxY),Math.max(0,c-s)*Math.max(0,h-l)),y=u(g)+u(m);v<d?(d=v,n=f,p=y<p?y:p):v===d&&y<p&&(p=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var o=this.toBBox,r=a(t,0,e,o),l=a(t,i-e,i,o),c=h(r)+h(l),u=e;u<i-e;u++){var d=t.children[u];s(r,t.leaf?o(d):d),c+=h(r)}for(var p=i-e-1;p>=e;p--){var f=t.children[p];s(l,t.leaf?o(f):f),c+=h(l)}return c},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},n}()},8508:function(t,i,n){var o,r,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=function(){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=e[o];if(t.call(n,r,o,e))return o;o++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=e[o];if(t.call(n,r,o,e))return r;o++}}});var t=function(t){this.table=t,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};t.prototype.createHeadersElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t},t.prototype.createHeaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-header"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t},t.prototype.initialize=function(){},t.prototype.setRowManager=function(t){this.rowManager=t},t.prototype.getElement=function(){return this.element},t.prototype.getHeadersElement=function(){return this.headersElement},t.prototype.scrollHorizontal=function(t){var e=0,i=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,t>i?(e=t-i,this.element.style.marginLeft=-e+"px"):this.element.style.marginLeft=0,this.scrollLeft=t,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},t.prototype.generateColumnsFromRowData=function(t){var e,i,n=[];if(t&&t.length){for(var o in e=t[0]){var r={field:o,title:o},a=e[o];switch(void 0===a?"undefined":s(a)){case"undefined":i="string";break;case"boolean":i="boolean";break;case"object":i=Array.isArray(a)?"array":"string";break;default:i=isNaN(a)||""===a?a.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}r.sorter=i,n.push(r)}this.table.options.columns=n,this.setColumns(this.table.options.columns)}},t.prototype.setColumns=function(t,e){for(var i=this;i.headersElement.firstChild;)i.headersElement.removeChild(i.headersElement.firstChild);i.columns=[],i.columnsByIndex=[],i.columnsByField={},i.table.modExists("frozenColumns")&&i.table.modules.frozenColumns.reset(),t.forEach((function(t,e){i._addColumn(t)})),i._reIndexColumns(),i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout",!0)&&i.table.modules.responsiveLayout.initialize(),i.redraw(!0)},t.prototype._addColumn=function(t,e,i){var o=new n(t,this),r=o.getElement(),a=i?this.findColumnIndex(i):i;if(i&&a>-1){var s=this.columns.indexOf(i.getTopColumn()),l=i.getElement();e?(this.columns.splice(s,0,o),l.parentNode.insertBefore(r,l)):(this.columns.splice(s+1,0,o),l.parentNode.insertBefore(r,l.nextSibling))}else e?(this.columns.unshift(o),this.headersElement.insertBefore(o.getElement(),this.headersElement.firstChild)):(this.columns.push(o),this.headersElement.appendChild(o.getElement())),o.columnRendered();return o},t.prototype.registerColumnField=function(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)},t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach((function(t){t.reRegisterPosition()}))},t.prototype._verticalAlignHeaders=function(){var t=this,e=0;t.columns.forEach((function(t){var i;t.clearVerticalAlign(),(i=t.getHeight())>e&&(e=i)})),t.columns.forEach((function(i){i.verticalAlign(t.table.options.columnHeaderVertAlign,e)})),t.rowManager.adjustTableSize()},t.prototype.findColumn=function(t){return"object"!=(void 0===t?"undefined":s(t))?this.columnsByField[t]||!1:t instanceof n?t:t instanceof i?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find((function(e){return e.element===t}))||!1},t.prototype.getColumnByField=function(t){return this.columnsByField[t]},t.prototype.getColumnsByFieldRoot=function(t){var e=this,i=[];return Object.keys(this.columnsByField).forEach((function(n){n.split(".")[0]===t&&i.push(e.columnsByField[n])})),i},t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]},t.prototype.getFirstVisibileColumn=function(t){return(t=this.columnsByIndex.findIndex((function(t){return t.visible})))>-1&&this.columnsByIndex[t]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(t){return this.columnsByIndex.findIndex((function(e){return t===e}))},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(t){this.columnsByIndex.forEach((function(e,i){t(e,i)}))},t.prototype.getDefinitions=function(t){var e=[];return this.columnsByIndex.forEach((function(i){(!t||t&&i.visible)&&e.push(i.getDefinition())})),e},t.prototype.getDefinitionTree=function(){var t=[];return this.columns.forEach((function(e){t.push(e.getDefinition(!0))})),t},t.prototype.getComponents=function(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach((function(t){e.push(t.getComponent())})),e},t.prototype.getWidth=function(){var t=0;return this.columnsByIndex.forEach((function(e){e.visible&&(t+=e.getWidth())})),t},t.prototype.moveColumn=function(t,e,i){this.moveColumnActual(t,e,i),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),e.element.parentNode.insertBefore(t.element,e.element),i&&e.element.parentNode.insertBefore(e.element,t.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.moveColumnActual=function(t,e,i){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,e,i):this._moveColumnInArray(this.columns,t,e,i),this._moveColumnInArray(this.columnsByIndex,t,e,i,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,t.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},t.prototype._moveColumnInArray=function(t,e,i,n,o){var r,a=t.indexOf(e);a>-1&&(t.splice(a,1),(r=t.indexOf(i))>-1?n&&(r+=1):r=a,t.splice(r,0,e),o&&this.table.rowManager.rows.forEach((function(t){if(t.cells.length){var e=t.cells.splice(a,1)[0];t.cells.splice(r,0,e)}})))},t.prototype.scrollToColumn=function(t,e,i){var n=this,o=0,r=0,a=0,s=t.getElement();return new Promise((function(l,c){if(void 0===e&&(e=n.table.options.scrollToColumnPosition),void 0===i&&(i=n.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":a=-n.element.clientWidth/2;break;case"right":a=s.clientWidth-n.headersElement.clientWidth}if(!i&&(r=s.offsetLeft)>0&&r+s.offsetWidth<n.element.clientWidth)return!1;o=s.offsetLeft+n.element.scrollLeft+a,o=Math.max(Math.min(o,n.table.rowManager.element.scrollWidth-n.table.rowManager.element.clientWidth),0),n.table.rowManager.scrollHorizontal(o),n.scrollHorizontal(o),l()}else console.warn("Scroll Error - Column not visible"),c("Scroll Error - Column not visible")}))},t.prototype.generateCells=function(t){var e=[];return this.columnsByIndex.forEach((function(i){e.push(i.generateCell(t))})),e},t.prototype.getFlexBaseWidth=function(){var t=this,e=t.table.element.clientWidth,i=0;return t.rowManager.element.scrollHeight>t.rowManager.element.clientHeight&&(e-=t.rowManager.element.offsetWidth-t.rowManager.element.clientWidth),this.columnsByIndex.forEach((function(n){var o,r,a;n.visible&&(o=n.definition.width||0,r=void 0===n.minWidth?t.table.options.columnMinWidth:parseInt(n.minWidth),a="string"==typeof o?o.indexOf("%")>-1?e/100*parseInt(o):parseInt(o):o,i+=a>r?a:r)})),i},t.prototype.addColumn=function(t,e,i){var n=this;return new Promise((function(o,r){var a=n._addColumn(t,e,i);n._reIndexColumns(),n.table.options.responsiveLayout&&n.table.modExists("responsiveLayout",!0)&&n.table.modules.responsiveLayout.initialize(),n.table.modExists("columnCalcs")&&n.table.modules.columnCalcs.recalc(n.table.rowManager.activeRows),n.redraw(),"fitColumns"!=n.table.modules.layout.getMode()&&a.reinitializeWidth(),n._verticalAlignHeaders(),n.table.rowManager.reinitialize(),o(a)}))},t.prototype.deregisterColumn=function(t){var e,i=t.getField();i&&delete this.columnsByField[i],(e=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(e,1),(e=this.columns.indexOf(t))>-1&&this.columns.splice(e,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(t){t&&(h.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1||t?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var i=function(t){this._column=t,this.type="ColumnComponent"};i.prototype.getElement=function(){return this._column.getElement()},i.prototype.getDefinition=function(){return this._column.getDefinition()},i.prototype.getField=function(){return this._column.getField()},i.prototype.getCells=function(){var t=[];return this._column.cells.forEach((function(e){t.push(e.getComponent())})),t},i.prototype.getVisibility=function(){return this._column.visible},i.prototype.show=function(){this._column.isGroup?this._column.columns.forEach((function(t){t.show()})):this._column.show()},i.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach((function(t){t.hide()})):this._column.hide()},i.prototype.toggle=function(){this._column.visible?this.hide():this.show()},i.prototype.delete=function(){return this._column.delete()},i.prototype.getSubColumns=function(){var t=[];return this._column.columns.length&&this._column.columns.forEach((function(e){t.push(e.getComponent())})),t},i.prototype.getParentColumn=function(){return this._column.parent instanceof n&&this._column.parent.getComponent()},i.prototype._getSelf=function(){return this._column},i.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},i.prototype.getTable=function(){return this._column.table},i.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},i.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},i.prototype.getHeaderFilterValue=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.getHeaderFilterValue(this._column)},i.prototype.setHeaderFilterValue=function(t){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,t)},i.prototype.move=function(t,e){var i=this._column.table.columnManager.findColumn(t);i?this._column.table.columnManager.moveColumn(this._column,i,e):console.warn("Move Error - No matching column found:",i)},i.prototype.getNextColumn=function(){var t=this._column.nextColumn();return!!t&&t.getComponent()},i.prototype.getPrevColumn=function(){var t=this._column.prevColumn();return!!t&&t.getComponent()},i.prototype.updateDefinition=function(t){return this._column.updateDefinition(t)};var n=function t(e,i){var n=this;this.table=i.table,this.definition=e,this.parent=i,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this._mapDepricatedFunctionality(),e.columns?(this.isGroup=!0,e.columns.forEach((function(e,i){var o=new t(e,n);n.attachColumn(o)})),n.checkColumnVisibility()):i.registerColumnField(this),e.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()};n.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),t},n.prototype.createGroupElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t},n.prototype.checkDefinition=function(){var t=this;Object.keys(this.definition).forEach((function(e){-1===t.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(t.field||t.definition.title)+"' column:",e)}))},n.prototype.setField=function(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData},n.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)},n.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)},n.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach((function(t){t.reRegisterPosition()})):this.registerColumnPosition(this)},n.prototype._mapDepricatedFunctionality=function(){void 0!==this.definition.hideInHtml&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")),void 0!==this.definition.align&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign"))},n.prototype.setTooltip=function(){var t=this,e=t.definition,i=e.headerTooltip||!1===e.tooltip?e.headerTooltip:t.table.options.tooltipsHeader;i?!0===i?e.field?t.table.modules.localize.bind("columns|"+e.field,(function(i){t.element.setAttribute("title",i||e.title)})):t.element.setAttribute("title",e.title):("function"==typeof i&&!1===(i=i(t.getComponent()))&&(i=""),t.element.setAttribute("title",i)):t.element.setAttribute("title","")},n.prototype._buildHeader=function(){for(var t=this,e=t.definition;t.element.firstChild;)t.element.removeChild(t.element.firstChild);e.headerVertical&&(t.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&t.element.classList.add("tabulator-col-vertical-flip")),t.contentElement=t._bindEvents(),t.contentElement=t._buildColumnHeaderContent(),t.element.appendChild(t.contentElement),t.isGroup?t._buildGroupHeader():t._buildColumnHeader(),t.setTooltip(),t.table.options.resizableColumns&&t.table.modExists("resizeColumns")&&t.table.modules.resizeColumns.initializeColumn("header",t,t.element),e.headerFilter&&t.table.modExists("filter")&&t.table.modExists("edit")&&(void 0!==e.headerFilterPlaceholder&&e.field&&t.table.modules.localize.setHeaderFilterColumnPlaceholder(e.field,e.headerFilterPlaceholder),t.table.modules.filter.initializeColumn(t)),t.table.modExists("frozenColumns")&&t.table.modules.frozenColumns.initializeColumn(t),t.table.options.movableColumns&&!t.isGroup&&t.table.modExists("moveColumn")&&t.table.modules.moveColumn.initializeColumn(t),(e.topCalc||e.bottomCalc)&&t.table.modExists("columnCalcs")&&t.table.modules.columnCalcs.initializeColumn(t),t.table.modExists("persistence")&&t.table.modules.persistence.config.columns&&t.table.modules.persistence.initializeColumn(t),t.element.addEventListener("mouseenter",(function(e){t.setTooltip()}))},n.prototype._bindEvents=function(){var t,e,i,n=this,o=n.definition;"function"==typeof o.headerClick&&n.element.addEventListener("click",(function(t){o.headerClick(t,n.getComponent())})),"function"==typeof o.headerDblClick&&n.element.addEventListener("dblclick",(function(t){o.headerDblClick(t,n.getComponent())})),"function"==typeof o.headerContext&&n.element.addEventListener("contextmenu",(function(t){o.headerContext(t,n.getComponent())})),"function"==typeof o.headerTap&&(i=!1,n.element.addEventListener("touchstart",(function(t){i=!0}),{passive:!0}),n.element.addEventListener("touchend",(function(t){i&&o.headerTap(t,n.getComponent()),i=!1}))),"function"==typeof o.headerDblTap&&(t=null,n.element.addEventListener("touchend",(function(e){t?(clearTimeout(t),t=null,o.headerDblTap(e,n.getComponent())):t=setTimeout((function(){clearTimeout(t),t=null}),300)}))),"function"==typeof o.headerTapHold&&(e=null,n.element.addEventListener("touchstart",(function(t){clearTimeout(e),e=setTimeout((function(){clearTimeout(e),e=null,i=!1,o.headerTapHold(t,n.getComponent())}),1e3)}),{passive:!0}),n.element.addEventListener("touchend",(function(t){clearTimeout(e),e=null}))),"function"==typeof o.cellClick&&(n.cellEvents.cellClick=o.cellClick),"function"==typeof o.cellDblClick&&(n.cellEvents.cellDblClick=o.cellDblClick),"function"==typeof o.cellContext&&(n.cellEvents.cellContext=o.cellContext),"function"==typeof o.cellMouseEnter&&(n.cellEvents.cellMouseEnter=o.cellMouseEnter),"function"==typeof o.cellMouseLeave&&(n.cellEvents.cellMouseLeave=o.cellMouseLeave),"function"==typeof o.cellMouseOver&&(n.cellEvents.cellMouseOver=o.cellMouseOver),"function"==typeof o.cellMouseOut&&(n.cellEvents.cellMouseOut=o.cellMouseOut),"function"==typeof o.cellMouseMove&&(n.cellEvents.cellMouseMove=o.cellMouseMove),"function"==typeof o.cellTap&&(n.cellEvents.cellTap=o.cellTap),"function"==typeof o.cellDblTap&&(n.cellEvents.cellDblTap=o.cellDblTap),"function"==typeof o.cellTapHold&&(n.cellEvents.cellTapHold=o.cellTapHold),"function"==typeof o.cellEdited&&(n.cellEvents.cellEdited=o.cellEdited),"function"==typeof o.cellEditing&&(n.cellEvents.cellEditing=o.cellEditing),"function"==typeof o.cellEditCancelled&&(n.cellEvents.cellEditCancelled=o.cellEditCancelled)},n.prototype._buildColumnHeader=function(){var t=this,e=t.definition,i=t.table;i.modExists("sort")&&i.modules.sort.initializeColumn(t,t.contentElement),(e.headerContextMenu||e.headerMenu)&&i.modExists("menu")&&i.modules.menu.initializeColumnHeader(t),i.modExists("format")&&i.modules.format.initializeColumn(t),void 0!==e.editor&&i.modExists("edit")&&i.modules.edit.initializeColumn(t),void 0!==e.validator&&i.modExists("validate")&&i.modules.validate.initializeColumn(t),i.modExists("mutator")&&i.modules.mutator.initializeColumn(t),i.modExists("accessor")&&i.modules.accessor.initializeColumn(t),s(i.options.responsiveLayout)&&i.modExists("responsiveLayout")&&i.modules.responsiveLayout.initializeColumn(t),void 0!==e.visible&&(e.visible?t.show(!0):t.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach((function(e){t.element.classList.add(e)})),e.field&&this.element.setAttribute("tabulator-field",e.field),t.setMinWidth(void 0===e.minWidth?t.table.options.columnMinWidth:parseInt(e.minWidth)),t.reinitializeWidth(),t.tooltip=t.definition.tooltip||!1===t.definition.tooltip?t.definition.tooltip:t.table.options.tooltips,t.hozAlign=void 0===t.definition.hozAlign?t.table.options.cellHozAlign:t.definition.hozAlign,t.vertAlign=void 0===t.definition.vertAlign?t.table.options.cellVertAlign:t.definition.vertAlign},n.prototype._buildColumnHeaderContent=function(){self.definition,self.table;var t=document.createElement("div");return t.classList.add("tabulator-col-content"),this.titleElement=this._buildColumnHeaderTitle(),t.appendChild(this.titleElement),t},n.prototype._buildColumnHeaderTitle=function(){var t=this,e=t.definition,i=t.table,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.editableTitle){var o=document.createElement("input");o.classList.add("tabulator-title-editor"),o.addEventListener("click",(function(t){t.stopPropagation(),o.focus()})),o.addEventListener("change",(function(){e.title=o.value,i.options.columnTitleChanged.call(t.table,t.getComponent())})),n.appendChild(o),e.field?i.modules.localize.bind("columns|"+e.field,(function(t){o.value=t||e.title||"&nbsp;"})):o.value=e.title||"&nbsp;"}else e.field?i.modules.localize.bind("columns|"+e.field,(function(i){t._formatColumnHeaderTitle(n,i||e.title||"&nbsp;")})):t._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n},n.prototype._formatColumnHeaderTitle=function(t,e){var i,n,o,r,a,l=this;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(i=this.table.modules.format.getFormatter(this.definition.titleFormatter),a=function(t){l.titleFormatterRendered=t},r={getValue:function(){return e},getElement:function(){return t}},o="function"==typeof(o=this.definition.titleFormatterParams||{})?o():o,void 0===(n=i.call(this.table.modules.format,r,o,a))?"undefined":s(n)){case"object":n instanceof Node?t.appendChild(n):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n));break;case"undefined":case"null":t.innerHTML="";break;default:t.innerHTML=n}else t.innerHTML=e},n.prototype._buildGroupHeader=function(){var t=this;this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach((function(e){t.element.classList.add(e)})),this.element.appendChild(this.groupElement)},n.prototype._getFlatData=function(t){return t[this.field]},n.prototype._getNestedData=function(t){for(var e,i=t,n=this.fieldStructure,o=n.length,r=0;r<o&&(e=i=i[n[r]],i);r++);return e},n.prototype._setFlatData=function(t,e){this.field&&(t[this.field]=e)},n.prototype._setNestedData=function(t,e){for(var i=t,n=this.fieldStructure,o=n.length,r=0;r<o;r++)if(r==o-1)i[n[r]]=e;else{if(!i[n[r]]){if(void 0===e)break;i[n[r]]={}}i=i[n[r]]}},n.prototype.attachColumn=function(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},n.prototype.verticalAlign=function(t,e){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:e||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===t||(this.element.style.paddingTop="bottom"===t?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach((function(e){e.verticalAlign(t)}))},n.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach((function(t){t.clearVerticalAlign()}))},n.prototype.bindModuleColumns=function(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)},n.prototype.getElement=function(){return this.element},n.prototype.getGroupElement=function(){return this.groupElement},n.prototype.getField=function(){return this.field},n.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},n.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},n.prototype.getColumns=function(){return this.columns},n.prototype.getCells=function(){return this.cells},n.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},n.prototype.getDefinition=function(t){var e=[];return this.isGroup&&t&&(this.columns.forEach((function(t){e.push(t.getDefinition(!0))})),this.definition.columns=e),this.definition},n.prototype.checkColumnVisibility=function(){var t=!1;this.columns.forEach((function(e){e.visible&&(t=!0)})),t?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},n.prototype.show=function(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(t){t.show()})),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths())},n.prototype.hide=function(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(t){t.hide()})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths())},n.prototype.matchChildWidths=function(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach((function(e){e.visible&&(t+=e.getWidth())})),this.contentElement.style.maxWidth=t-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())},n.prototype.setWidth=function(t){this.widthFixed=!0,this.setWidthActual(t)},n.prototype.setWidthActual=function(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach((function(t){t.setWidth()})),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},n.prototype.checkCellHeights=function(){var t=[];this.cells.forEach((function(e){e.row.heightInitialized&&(null!==e.row.getElement().offsetParent?(t.push(e.row),e.row.clearCellHeight()):e.row.heightInitialized=!1)})),t.forEach((function(t){t.calcHeight()})),t.forEach((function(t){t.setCellHeight()}))},n.prototype.getWidth=function(){var t=0;return this.isGroup?this.columns.forEach((function(e){e.visible&&(t+=e.getWidth())})):t=this.width,t},n.prototype.getHeight=function(){return this.element.offsetHeight},n.prototype.setMinWidth=function(t){this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach((function(t){t.setMinWidth()}))},n.prototype.delete=function(){var t=this;return new Promise((function(e,i){t.isGroup&&t.columns.forEach((function(t){t.delete()}));for(var n=t.cells.length,o=0;o<n;o++)t.cells[0].delete();t.element.parentNode.removeChild(t.element),t.table.columnManager.deregisterColumn(t),e()}))},n.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},n.prototype.generateCell=function(t){var e=new c(this,t);return this.cells.push(e),e},n.prototype.nextColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return t>-1&&this._nextVisibleColumn(t+1)},n.prototype._nextVisibleColumn=function(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._nextVisibleColumn(t+1)},n.prototype.prevColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return t>-1&&this._prevVisibleColumn(t-1)},n.prototype._prevVisibleColumn=function(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._prevVisibleColumn(t-1)},n.prototype.reinitializeWidth=function(t){this.widthFixed=!1,void 0===this.definition.width||t||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},n.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach((function(t){t.clearWidth()})));var t=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach((function(e){var i=e.getWidth();i>t&&(t=i)})),t&&this.setWidthActual(t+1))},n.prototype.updateDefinition=function(t){var e=this;return new Promise((function(i,n){var o;e.isGroup?(console.warn("Column Update Error - The updateDefintion function is only available on columns, not column groups"),n("Column Update Error - The updateDefintion function is only available on columns, not column groups")):(o=Object.assign({},e.getDefinition()),o=Object.assign(o,t),e.table.columnManager.addColumn(o,!1,e).then((function(t){o.field==e.field&&(e.field=!1),e.delete().then((function(){i(t.getComponent())})).catch((function(t){n(t)}))})).catch((function(t){n(t)})))}))},n.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},n.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams"],n.prototype.getComponent=function(){return new i(this)};var o=function(t){this.table=t,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1};o.prototype.createHolderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-tableHolder"),t.setAttribute("tabindex",0),t},o.prototype.createTableElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t},o.prototype.getElement=function(){return this.element},o.prototype.getTableElement=function(){return this.tableElement},o.prototype.getRowPosition=function(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)},o.prototype.setColumnManager=function(t){this.columnManager=t},o.prototype.initialize=function(){var t=this;t.setRenderMode(),t.element.appendChild(t.tableElement),t.firstRender=!0,t.element.addEventListener("scroll",(function(){var e=t.element.scrollLeft;t.scrollLeft!=e&&(t.columnManager.scrollHorizontal(e),t.table.options.groupBy&&t.table.modules.groupRows.scrollHeaders(e),t.table.modExists("columnCalcs")&&t.table.modules.columnCalcs.scrollHorizontal(e),t.table.options.scrollHorizontal(e)),t.scrollLeft=e})),"virtual"===this.renderMode&&t.element.addEventListener("scroll",(function(){var e=t.element.scrollTop,i=t.scrollTop>e;t.scrollTop!=e?(t.scrollTop=e,t.scrollVertical(i),"scroll"==t.table.options.ajaxProgressiveLoad&&t.table.modules.ajax.nextPage(t.element.scrollHeight-t.element.clientHeight-e),t.table.options.scrollVertical(e)):t.scrollTop=e}))},o.prototype.findRow=function(t){var e=this;return"object"!=(void 0===t?"undefined":s(t))?null!=t&&(e.rows.find((function(i){return i.data[e.table.options.index]==t}))||!1):t instanceof a?t:t instanceof r?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&e.rows.find((function(e){return e.element===t}))||!1},o.prototype.getRowFromDataObject=function(t){return this.rows.find((function(e){return e.data===t}))||!1},o.prototype.getRowFromPosition=function(t,e){return e?this.activeRows[t]:this.rows[t]},o.prototype.scrollToRow=function(t,e,i){var n,o=this,r=this.getDisplayRows().indexOf(t),a=t.getElement(),s=0;return new Promise((function(t,l){if(r>-1){if(void 0===e&&(e=o.table.options.scrollToRowPosition),void 0===i&&(i=o.table.options.scrollToRowIfVisible),"nearest"===e)switch(o.renderMode){case"classic":n=h.prototype.helpers.elOffset(a).top,e=Math.abs(o.element.scrollTop-n)>Math.abs(o.element.scrollTop+o.element.clientHeight-n)?"bottom":"top";break;case"virtual":e=Math.abs(o.vDomTop-r)>Math.abs(o.vDomBottom-r)?"bottom":"top"}if(!i&&h.prototype.helpers.elVisible(a)&&(s=h.prototype.helpers.elOffset(a).top-h.prototype.helpers.elOffset(o.element).top)>0&&s<o.element.clientHeight-a.offsetHeight)return!1;switch(o.renderMode){case"classic":o.element.scrollTop=h.prototype.helpers.elOffset(a).top-h.prototype.helpers.elOffset(o.element).top+o.element.scrollTop;break;case"virtual":o._virtualRenderFill(r,!0)}switch(e){case"middle":case"center":o.element.scrollHeight-o.element.scrollTop==o.element.clientHeight?o.element.scrollTop=o.element.scrollTop+(a.offsetTop-o.element.scrollTop)-(o.element.scrollHeight-a.offsetTop)/2:o.element.scrollTop=o.element.scrollTop-o.element.clientHeight/2;break;case"bottom":o.element.scrollHeight-o.element.scrollTop==o.element.clientHeight?o.element.scrollTop=o.element.scrollTop-(o.element.scrollHeight-a.offsetTop)+a.offsetHeight:o.element.scrollTop=o.element.scrollTop-o.element.clientHeight+a.offsetHeight}t()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")}))},o.prototype.setData=function(t,e,i){var n=this,o=this;return new Promise((function(r,a){e&&n.getDisplayRows().length?o.table.options.pagination?o._setDataActual(t,!0):n.reRenderInPosition((function(){o._setDataActual(t)})):(n.table.options.autoColumns&&i&&n.table.columnManager.generateColumnsFromRowData(t),n.resetScroll(),n._setDataActual(t)),r()}))},o.prototype._setDataActual=function(t,e){var i=this;i.table.options.dataLoading.call(this.table,t),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(t)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(t),t.forEach((function(t,e){if(t&&"object"===(void 0===t?"undefined":s(t))){var n=new a(t,i);i.rows.push(n)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)})),i.table.options.dataLoaded.call(this.table,t),i.refreshActiveData(!1,!1,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===t?"undefined":s(t),"\nData:     ",t)},o.prototype._wipeElements=function(){this.rows.forEach((function(t){t.wipe()})),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[]},o.prototype.deleteRow=function(t,e){var i=this.rows.indexOf(t),n=this.activeRows.indexOf(t);n>-1&&this.activeRows.splice(n,1),i>-1&&this.rows.splice(i,1),this.setActiveRows(this.activeRows),this.displayRowIterator((function(e){var i=e.indexOf(t);i>-1&&e.splice(i,1)})),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.table.options.rowDeleted.call(this.table,t.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},o.prototype.addRow=function(t,e,i,n){var o=this.addRowActual(t,e,i,n);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",o,{data:t,pos:e,index:i}),o},o.prototype.addRows=function(t,e,i){var n=this,o=this,r=[];return new Promise((function(a,s){e=n.findAddRowPos(e),Array.isArray(t)||(t=[t]),t.length,(void 0===i&&e||void 0!==i&&!e)&&t.reverse(),t.forEach((function(t,n){var a=o.addRow(t,e,i,!0);r.push(a)})),n.table.options.groupBy&&n.table.modExists("groupRows")?n.table.modules.groupRows.updateGroupRows(!0):n.table.options.pagination&&n.table.modExists("page")?n.refreshActiveData(!1,!1,!0):n.reRenderInPosition(),n.table.modExists("columnCalcs")&&n.table.modules.columnCalcs.recalc(n.table.rowManager.activeRows),n.regenerateRowNumbers(),a(r)}))},o.prototype.findAddRowPos=function(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t},o.prototype.addRowActual=function(t,e,i,n){var o,r,s=t instanceof a?t:new a(t||{},this),l=this.findAddRowPos(e),c=-1;if(!i&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(r=this.getDisplayRows(),l?r.length?i=r[0]:this.activeRows.length&&(i=this.activeRows[this.activeRows.length-1],l=!1):r.length&&(i=r[r.length-1],l=!(r.length<this.table.modules.page.getPageSize()))),void 0!==i&&(i=this.findRow(i)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(s);var u=s.getGroup().rows;u.length>1&&(!i||i&&-1==u.indexOf(i)?l?u[0]!==s&&(i=u[0],this._moveRowInArray(s.getGroup().rows,s,i,!l)):u[u.length-1]!==s&&(i=u[u.length-1],this._moveRowInArray(s.getGroup().rows,s,i,!l)):this._moveRowInArray(s.getGroup().rows,s,i,!l))}return i&&(c=this.rows.indexOf(i)),i&&c>-1?(o=this.activeRows.indexOf(i),this.displayRowIterator((function(t){var e=t.indexOf(i);e>-1&&t.splice(l?e:e+1,0,s)})),o>-1&&this.activeRows.splice(l?o:o+1,0,s),this.rows.splice(l?c:c+1,0,s)):l?(this.displayRowIterator((function(t){t.unshift(s)})),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator((function(t){t.push(s)})),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,s.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),n||this.reRenderInPosition(),s},o.prototype.moveRow=function(t,e,i){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",t,{posFrom:this.getRowPosition(t),posTo:this.getRowPosition(e),to:e,after:i}),this.moveRowActual(t,e,i),this.regenerateRowNumbers(),this.table.options.rowMoved.call(this.table,t.getComponent())},o.prototype.moveRowActual=function(t,e,i){var n=this;if(this._moveRowInArray(this.rows,t,e,i),this._moveRowInArray(this.activeRows,t,e,i),this.displayRowIterator((function(o){n._moveRowInArray(o,t,e,i)})),this.table.options.groupBy&&this.table.modExists("groupRows")){var o=e.getGroup(),r=t.getGroup();o===r?this._moveRowInArray(o.rows,t,e,i):(r&&r.removeRow(t),o.insertRow(t,e,i))}},o.prototype._moveRowInArray=function(t,e,i,n){var o,r,a;if(e!==i&&((o=t.indexOf(e))>-1&&(t.splice(o,1),(r=t.indexOf(i))>-1?n?t.splice(r+1,0,e):t.splice(r,0,e):t.splice(o,0,e)),t===this.getDisplayRows())){a=r>o?r:o+1;for(var s=o<r?o:r;s<=a;s++)t[s]&&this.styleRow(t[s],s)}},o.prototype.clearData=function(){this.setData([])},o.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)},o.prototype.getDisplayRowIndex=function(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e},o.prototype.nextDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),n=!1;return!1!==i&&i<this.displayRowsCount-1&&(n=this.getDisplayRows()[i+1]),!n||n instanceof a&&"row"==n.type?n:this.nextDisplayRow(n,e)},o.prototype.prevDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),n=!1;return i&&(n=this.getDisplayRows()[i-1]),!n||n instanceof a&&"row"==n.type?n:this.prevDisplayRow(n,e)},o.prototype.findRowIndex=function(t,e){var i;return!!((t=this.findRow(t))&&(i=e.indexOf(t))>-1)&&i},o.prototype.getData=function(t,e){var i=[];return this.getRows(t).forEach((function(t){"row"==t.type&&i.push(t.getData(e||"data"))})),i},o.prototype.getComponents=function(t){var e=[];return this.getRows(t).forEach((function(t){e.push(t.getComponent())})),e},o.prototype.getDataCount=function(t){return this.getRows(t).length},o.prototype._genRemoteRequest=function(){var t=this,e=this.table,i=e.options,n={};if(e.modExists("page")){if(i.ajaxSorting){var o=this.table.modules.sort.getSort();o.forEach((function(t){delete t.column})),n[this.table.modules.page.paginationDataSentNames.sorters]=o}if(i.ajaxFiltering){var r=this.table.modules.filter.getFilters(!0,!0);n[this.table.modules.page.paginationDataSentNames.filters]=r}this.table.modules.ajax.setParams(n,!0)}e.modules.ajax.sendRequest().then((function(e){t._setDataActual(e,!0)})).catch((function(t){}))},o.prototype.filterRefresh=function(){var t=this.table,e=t.options,i=this.scrollLeft;e.ajaxFiltering?"remote"==e.pagination&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then((function(){})).catch((function(){}))):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(i)},o.prototype.sorterRefresh=function(t){var e=this.table,i=this.table.options,n=this.scrollLeft;i.ajaxSorting?("remote"==i.pagination||i.progressiveLoad)&&e.modExists("page")?(e.modules.page.reset(!0),e.modules.page.setPage(1).then((function(){})).catch((function(){}))):i.ajaxProgressiveLoad?e.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData(t?"filter":"sort"),this.scrollHorizontal(n)},o.prototype.scrollHorizontal=function(t){this.scrollLeft=t,this.element.scrollLeft=t,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(t),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(t)},o.prototype.refreshActiveData=function(t,e,i){var n,o=this.table,r=["all","filter","sort","display","freeze","group","tree","page"];if(this.redrawBlock)(!this.redrawBlockRestoreConfig||r.indexOf(t)<r.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:t,skipStage:e,renderInPosition:i});else{switch(this.table.modExists("edit")&&this.table.modules.edit.cancelEdit(),t||(t="all"),o.options.selectable&&!o.options.selectablePersistence&&o.modExists("selectRow")&&o.modules.selectRow.deselectRows(),t){case"all":case"filter":e?e=!1:o.modExists("filter")?this.setActiveRows(o.modules.filter.filter(this.rows)):this.setActiveRows(this.rows.slice(0));case"sort":e?e=!1:o.modExists("sort")&&o.modules.sort.sort(this.activeRows),this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":e?e=!1:this.table.modExists("frozenRows")&&o.modules.frozenRows.isFrozen()&&(o.modules.frozenRows.getDisplayIndex()||o.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),n=o.modules.frozenRows.getDisplayIndex(),!0!==(n=this.setDisplayRows(o.modules.frozenRows.getRows(this.getDisplayRows(n-1)),n))&&o.modules.frozenRows.setDisplayIndex(n));case"group":e?e=!1:o.options.groupBy&&o.modExists("groupRows")&&(o.modules.groupRows.getDisplayIndex()||o.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),n=o.modules.groupRows.getDisplayIndex(),!0!==(n=this.setDisplayRows(o.modules.groupRows.getRows(this.getDisplayRows(n-1)),n))&&o.modules.groupRows.setDisplayIndex(n));case"tree":e?e=!1:o.options.dataTree&&o.modExists("dataTree")&&(o.modules.dataTree.getDisplayIndex()||o.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),n=o.modules.dataTree.getDisplayIndex(),!0!==(n=this.setDisplayRows(o.modules.dataTree.getRows(this.getDisplayRows(n-1)),n))&&o.modules.dataTree.setDisplayIndex(n)),o.options.pagination&&o.modExists("page")&&!i&&"local"==o.modules.page.getMode()&&o.modules.page.reset();case"page":e?e=!1:o.options.pagination&&o.modExists("page")&&(o.modules.page.getDisplayIndex()||o.modules.page.setDisplayIndex(this.getNextDisplayIndex()),n=o.modules.page.getDisplayIndex(),"local"==o.modules.page.getMode()&&o.modules.page.setMaxRows(this.getDisplayRows(n-1).length),!0!==(n=this.setDisplayRows(o.modules.page.getRows(this.getDisplayRows(n-1)),n))&&o.modules.page.setDisplayIndex(n))}h.prototype.helpers.elVisible(this.element)&&(i?this.reRenderInPosition():(this.renderTable(),o.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(this.activeRows)}},o.prototype.regenerateRowNumbers=function(){var t=this;this.rowNumColumn&&this.activeRows.forEach((function(e){var i=e.getCell(t.rowNumColumn);i&&i._generateContents()}))},o.prototype.setActiveRows=function(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length},o.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},o.prototype.getNextDisplayIndex=function(){return this.displayRows.length},o.prototype.setDisplayRows=function(t,e){var i=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,i=!0):(this.displayRows.push(t),i=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),i},o.prototype.getDisplayRows=function(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]},o.prototype.getVisibleRows=function(t){var e=this.element.scrollTop,i=this.element.clientHeight+e,n=!1,o=0,r=0,a=this.getDisplayRows();if(t){this.getDisplayRows();for(var s=this.vDomTop;s<=this.vDomBottom;s++)if(a[s])if(n){if(!(i-a[s].getElement().offsetTop>=0))break;r=s}else if(e-a[s].getElement().offsetTop>=0)o=s;else{if(n=!0,!(i-a[s].getElement().offsetTop>=0))break;r=s}}else o=this.vDomTop,r=this.vDomBottom;return a.slice(o,r+1)},o.prototype.displayRowIterator=function(t){this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},o.prototype.getRows=function(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.rows}return e},o.prototype.reRenderInPosition=function(t){if("virtual"==this.getRenderMode())if(this.redrawBlock)t?t():this.redrawBlockRederInPosition=!0;else{for(var e=this.element.scrollTop,i=!1,n=!1,o=this.scrollLeft,r=this.getDisplayRows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(r[a]){var s=e-r[a].getElement().offsetTop;if(!(!1===n||Math.abs(s)<n))break;n=s,i=a}t&&t(),this._virtualRenderFill(!1===i?this.displayRowsCount-1:i,!0,n||0),this.scrollHorizontal(o)}else this.renderTable(),t&&t()},o.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):this.renderMode="classic"},o.prototype.getRenderMode=function(){return this.renderMode},o.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill()}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"),this.table.options.renderComplete.call(this.table)},o.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},o.prototype.checkClassicModeGroupHeaderWidth=function(){var t=this,e=this.tableElement,i=!0;t.getDisplayRows().forEach((function(n,o){t.styleRow(n,o),e.appendChild(n.getElement()),n.initialize(!0),"group"!==n.type&&(i=!1)})),e.style.minWidth=i?t.table.columnManager.getWidth()+"px":""},o.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":(this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px",this.tableElement.style.minHeight="1px",this.tableElement.style.visibility="hidden")},o.prototype._clearVirtualDom=function(){var t=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},o.prototype.styleRow=function(t,e){var i=t.getElement();e%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))},o.prototype._virtualRenderFill=function(t,e,i){var n=this.tableElement,o=this.element,r=0,a=0,s=0,l=0,c=!0,u=this.getDisplayRows();if(i=i||0,t=t||0){for(;n.firstChild;)n.removeChild(n.firstChild);var d=(this.displayRowsCount-t+1)*this.vDomRowHeight;d<this.height&&(t-=Math.ceil((this.height-d)/this.vDomRowHeight))<0&&(t=0),t-=r=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this._clearVirtualDom();if(this.displayRowsCount&&h.prototype.helpers.elVisible(this.element)){for(this.vDomTop=t,this.vDomBottom=t-1;(a<=this.height+this.vDomWindowBuffer||l<this.vDomWindowMinTotalRows)&&this.vDomBottom<this.displayRowsCount-1;){var p,f=this.vDomBottom+1,g=u[f];this.styleRow(g,f),n.appendChild(g.getElement()),g.initialized?g.heightInitialized||g.normalizeHeight(!0):g.initialize(!0),p=g.getHeight(),l<r?s+=p:a+=p,p>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*p),"group"!==g.type&&(c=!1),this.vDomBottom++,l++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+i:this.scrollTop-s,this.vDomBottomPad=this.vDomBottom==this.displayRowsCount-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-s,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+s)/l),this.vDomBottomPad=this.vDomRowHeight*(this.displayRowsCount-this.vDomBottom-1),this.vDomScrollHeight=s+a+this.vDomBottomPad-this.height),n.style.paddingTop=this.vDomTopPad+"px",n.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+s+i-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&e&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,o.scrollTop=this.scrollTop,n.style.minWidth=c?this.table.columnManager.getWidth()+"px":"",this.table.options.groupBy&&"fitDataFill"!=this.table.modules.layout.getMode()&&this.displayRowsCount==this.table.modules.groupRows.countGroups()&&(this.tableElement.style.minWidth=this.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()},o.prototype.scrollVertical=function(t){var e=this.scrollTop-this.vDomScrollPosTop,i=this.scrollTop-this.vDomScrollPosBottom,n=2*this.vDomWindowBuffer;if(-e>n||i>n){var o=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(o)}else t?(e<0&&this._addTopRow(-e),i<0&&this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer&&this._removeBottomRow(-i)):(e>=0&&this.scrollTop>this.vDomWindowBuffer&&this._removeTopRow(e),i>=0&&this._addBottomRow(i))},o.prototype._addTopRow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,n=this.getDisplayRows();if(this.vDomTop){var o=this.vDomTop-1,r=n[o],a=r.getHeight()||this.vDomRowHeight;t>=a&&(this.styleRow(r,o),i.insertBefore(r.getElement(),i.firstChild),r.initialized&&r.heightInitialized||(this.vDomTopNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomTopPad-=a,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o||(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=a,this.vDomTop--),t=-(this.scrollTop-this.vDomScrollPosTop),r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),e<this.vDomMaxRenderChain&&this.vDomTop&&t>=(n[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(t,e+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},o.prototype._removeTopRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomTop],n=i.getHeight()||this.vDomRowHeight;if(t>=n){var o=i.getElement();o.parentNode.removeChild(o),this.vDomTopPad+=n,e.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?n:n+this.vDomWindowBuffer,this.vDomTop++,t=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(t)}},o.prototype._addBottomRow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,n=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var o=this.vDomBottom+1,r=n[o],a=r.getHeight()||this.vDomRowHeight;t>=a&&(this.styleRow(r,o),i.appendChild(r.getElement()),r.initialized&&r.heightInitialized||(this.vDomBottomNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomBottomPad-=a,(this.vDomBottomPad<0||o==this.displayRowsCount-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=a,this.vDomBottom++),t=this.scrollTop-this.vDomScrollPosBottom,r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),e<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&t>=(n[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(t,e+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},o.prototype._removeBottomRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomBottom],n=i.getHeight()||this.vDomRowHeight;if(t>=n){var o=i.getElement();o.parentNode&&o.parentNode.removeChild(o),this.vDomBottomPad+=n,this.vDomBottomPad<0&&(this.vDomBottomPad=0),e.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=n,this.vDomBottom--,t=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(t)}},o.prototype._quickNormalizeRowHeight=function(t){t.forEach((function(t){t.calcHeight()})),t.forEach((function(t){t.setCellHeight()})),t.length=0},o.prototype.normalizeHeight=function(){this.activeRows.forEach((function(t){t.normalizeHeight()}))},o.prototype.adjustTableSize=function(){var t,e=this.element.clientHeight;if("virtual"===this.renderMode){var i=this.columnManager.getElement().offsetHeight+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().offsetHeight:0);this.fixedHeight?(this.element.style.minHeight="calc(100% - "+i+"px)",this.element.style.height="calc(100% - "+i+"px)",this.element.style.maxHeight="calc(100% - "+i+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-i+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,this.fixedHeight||e==this.element.clientHeight||((t=this.table.modExists("resizeTable"))&&!this.table.modules.resizeTable.autoResize||!t)&&this.redraw()}},o.prototype.reinitialize=function(){this.rows.forEach((function(t){t.reinitialize()}))},o.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},o.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},o.prototype.redraw=function(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():("classic"==this.renderMode?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(e)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},o.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))};var r=function(t){this._row=t};r.prototype.getData=function(t){return this._row.getData(t)},r.prototype.getElement=function(){return this._row.getElement()},r.prototype.getCells=function(){var t=[];return this._row.getCells().forEach((function(e){t.push(e.getComponent())})),t},r.prototype.getCell=function(t){var e=this._row.getCell(t);return!!e&&e.getComponent()},r.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},r.prototype.getPosition=function(t){return this._row.table.rowManager.getRowPosition(this._row,t)},r.prototype.delete=function(){return this._row.delete()},r.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},r.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},r.prototype.move=function(t,e){this._row.moveToRow(t,e)},r.prototype.update=function(t){return this._row.updateData(t)},r.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},r.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},r.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},r.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},r.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},r.prototype._getSelf=function(){return this._row},r.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},r.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},r.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},r.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},r.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},r.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},r.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row)},r.prototype.reformat=function(){return this._row.reinitialize()},r.prototype.getGroup=function(){return this._row.getGroup().getComponent()},r.prototype.getTable=function(){return this._row.table},r.prototype.getNextRow=function(){var t=this._row.nextRow();return t?t.getComponent():t},r.prototype.getPrevRow=function(){var t=this._row.prevRow();return t?t.getComponent():t};var a=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row";this.table=e.table,this.parent=e,this.data={},this.type=i,this.element=this.createElement(),this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.setData(t),this.generateElement()};a.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.setAttribute("role","row"),t},a.prototype.getElement=function(){return this.element},a.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},a.prototype.generateElement=function(){var t,e,i,n=this;!1!==n.table.options.selectable&&n.table.modExists("selectRow")&&n.table.modules.selectRow.initializeRow(this),!1!==n.table.options.movableRows&&n.table.modExists("moveRow")&&n.table.modules.moveRow.initializeRow(this),!1!==n.table.options.dataTree&&n.table.modExists("dataTree")&&n.table.modules.dataTree.initializeRow(this),"collapse"===n.table.options.responsiveLayout&&n.table.modExists("responsiveLayout")&&n.table.modules.responsiveLayout.initializeRow(this),n.table.options.rowContextMenu&&this.table.modExists("menu")&&n.table.modules.menu.initializeRow(this),n.table.options.rowClick&&n.element.addEventListener("click",(function(t){n.table.options.rowClick(t,n.getComponent())})),n.table.options.rowDblClick&&n.element.addEventListener("dblclick",(function(t){n.table.options.rowDblClick(t,n.getComponent())})),n.table.options.rowContext&&n.element.addEventListener("contextmenu",(function(t){n.table.options.rowContext(t,n.getComponent())})),n.table.options.rowMouseEnter&&n.element.addEventListener("mouseenter",(function(t){n.table.options.rowMouseEnter(t,n.getComponent())})),n.table.options.rowMouseLeave&&n.element.addEventListener("mouseleave",(function(t){n.table.options.rowMouseLeave(t,n.getComponent())})),n.table.options.rowMouseOver&&n.element.addEventListener("mouseover",(function(t){n.table.options.rowMouseOver(t,n.getComponent())})),n.table.options.rowMouseOut&&n.element.addEventListener("mouseout",(function(t){n.table.options.rowMouseOut(t,n.getComponent())})),n.table.options.rowMouseMove&&n.element.addEventListener("mousemove",(function(t){n.table.options.rowMouseMove(t,n.getComponent())})),n.table.options.rowTap&&(i=!1,n.element.addEventListener("touchstart",(function(t){i=!0}),{passive:!0}),n.element.addEventListener("touchend",(function(t){i&&n.table.options.rowTap(t,n.getComponent()),i=!1}))),n.table.options.rowDblTap&&(t=null,n.element.addEventListener("touchend",(function(e){t?(clearTimeout(t),t=null,n.table.options.rowDblTap(e,n.getComponent())):t=setTimeout((function(){clearTimeout(t),t=null}),300)}))),n.table.options.rowTapHold&&(e=null,n.element.addEventListener("touchstart",(function(t){clearTimeout(e),e=setTimeout((function(){clearTimeout(e),e=null,i=!1,n.table.options.rowTapHold(t,n.getComponent())}),1e3)}),{passive:!0}),n.element.addEventListener("touchend",(function(t){clearTimeout(e),e=null})))},a.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},a.prototype.initialize=function(t){var e=this;if(!e.initialized||t){for(e.deleteCells();e.element.firstChild;)e.element.removeChild(e.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),e.cells.forEach((function(t){e.element.appendChild(t.getElement()),t.cellRendered()})),t&&e.normalizeHeight(),e.table.options.dataTree&&e.table.modExists("dataTree")&&e.table.modules.dataTree.layoutRow(this),"collapse"===e.table.options.responsiveLayout&&e.table.modExists("responsiveLayout")&&e.table.modules.responsiveLayout.layoutRow(this),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.table.options.resizableRows&&e.table.modExists("resizeRows")&&e.table.modules.resizeRows.initializeRow(e),e.initialized=!0}},a.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element.offsetParent&&this.normalizeHeight(!0)},a.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),null!==this.element.offsetParent&&this.initialize(!0)},a.prototype.calcHeight=function(t){var e=0,i=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach((function(t){var i=t.getHeight();i>e&&(e=i)})),this.height=t?Math.max(e,i):this.manualHeight?this.height:Math.max(e,i),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},a.prototype.setCellHeight=function(){this.cells.forEach((function(t){t.setHeight()})),this.heightInitialized=!0},a.prototype.clearCellHeight=function(){this.cells.forEach((function(t){t.clearHeight()}))},a.prototype.normalizeHeight=function(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()},a.prototype.setHeight=function(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},a.prototype.getHeight=function(){return this.outerHeight},a.prototype.getWidth=function(){return this.element.offsetWidth},a.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},a.prototype.setData=function(t){this.table.modExists("mutator")&&(t=this.table.modules.mutator.transformRow(t,"data")),this.data=t,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},a.prototype.updateData=function(t){var e,i=this,n=h.prototype.helpers.elVisible(this.element),o={};return new Promise((function(r,a){for(var s in"string"==typeof t&&(t=JSON.parse(t)),i.table.options.reactiveData&&i.table.modExists("reactiveData",!0)&&i.table.modules.reactiveData.block(),i.table.modExists("mutator")?(o=Object.assign(o,i.data),o=Object.assign(o,t),e=i.table.modules.mutator.transformRow(o,"data",t)):e=t,e)i.data[s]=e[s];for(var s in i.table.options.reactiveData&&i.table.modExists("reactiveData",!0)&&i.table.modules.reactiveData.unblock(),t)i.table.columnManager.getColumnsByFieldRoot(s).forEach((function(t){var o=i.getCell(t.getField());if(o){var r=t.getFieldValue(e);o.getValue()!=r&&(o.setValueProcessData(r),n&&o.cellRendered())}}));n?(i.normalizeHeight(),i.table.options.rowFormatter&&i.table.options.rowFormatter(i.getComponent())):(i.initialized=!1,i.height=0,i.heightStyled=""),!1!==i.table.options.dataTree&&i.table.modExists("dataTree")&&i.table.modules.dataTree.redrawNeeded(t)&&(i.table.modules.dataTree.initializeRow(i),i.table.modules.dataTree.layoutRow(i),i.table.rowManager.refreshActiveData("tree",!1,!0)),i.table.options.rowUpdated.call(i.table,i.getComponent()),r()}))},a.prototype.getData=function(t){return t?this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this.data,t):void 0:this.data},a.prototype.getCell=function(t){return t=this.table.columnManager.findColumn(t),this.cells.find((function(e){return e.column===t}))},a.prototype.getCellIndex=function(t){return this.cells.findIndex((function(e){return e===t}))},a.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var i=t+1;i<this.cells.length;i++){var n=this.cells[i];if(n.column.modules.edit&&h.prototype.helpers.elVisible(n.getElement())){var o=!0;if("function"==typeof n.column.modules.edit.check&&(o=n.column.modules.edit.check(n.getComponent())),o){e=n;break}}}return e},a.prototype.findPrevEditableCell=function(t){var e=!1;if(t>0)for(var i=t-1;i>=0;i--){var n=this.cells[i],o=!0;if(n.column.modules.edit&&h.prototype.helpers.elVisible(n.getElement())&&("function"==typeof n.column.modules.edit.check&&(o=n.column.modules.edit.check(n.getComponent())),o)){e=n;break}}return e},a.prototype.getCells=function(){return this.cells},a.prototype.nextRow=function(){return this.table.rowManager.nextDisplayRow(this,!0)||!1},a.prototype.prevRow=function(){return this.table.rowManager.prevDisplayRow(this,!0)||!1},a.prototype.moveToRow=function(t,e){var i=this.table.rowManager.findRow(t);i?(this.table.rowManager.moveRowActual(this,i,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)},a.prototype.delete=function(){var t=this;return new Promise((function(e,i){var n,o;t.table.options.history&&t.table.modExists("history")&&(t.table.options.groupBy&&t.table.modExists("groupRows")?(n=(o=t.getGroup().rows).indexOf(t))&&(n=o[n-1]):(n=t.table.rowManager.getRowIndex(t))&&(n=t.table.rowManager.rows[n-1]),t.table.modules.history.action("rowDelete",t,{data:t.getData(),pos:!n,index:n})),t.deleteActual(),e()}))},a.prototype.deleteActual=function(t){this.table.rowManager.getRowIndex(this),this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},a.prototype.deleteCells=function(){for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},a.prototype.wipe=function(){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element=!1,this.modules={},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},a.prototype.getGroup=function(){return this.modules.group||!1},a.prototype.getComponent=function(){return new r(this)};var l=function(t){this._cell=t};l.prototype.getValue=function(){return this._cell.getValue()},l.prototype.getOldValue=function(){return this._cell.getOldValue()},l.prototype.getElement=function(){return this._cell.getElement()},l.prototype.getRow=function(){return this._cell.row.getComponent()},l.prototype.getData=function(){return this._cell.row.getData()},l.prototype.getField=function(){return this._cell.column.getField()},l.prototype.getColumn=function(){return this._cell.column.getComponent()},l.prototype.setValue=function(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)},l.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},l.prototype.edit=function(t){return this._cell.edit(t)},l.prototype.cancelEdit=function(){this._cell.cancelEdit()},l.prototype.nav=function(){return this._cell.nav()},l.prototype.checkHeight=function(){this._cell.checkHeight()},l.prototype.getTable=function(){return this._cell.table},l.prototype._getSelf=function(){return this._cell};var c=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.build()};c.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},c.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},c.prototype._configureCell=function(){var t=this,e=t.column.cellEvents,i=t.element,n=this.column.getField();i.style.textAlign=t.column.hozAlign,t.column.vertAlign&&(i.style.display="inline-flex",i.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[t.column.vertAlign]||"",t.column.hozAlign&&(i.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[t.column.hozAlign]||"")),n&&i.setAttribute("tabulator-field",n),t.column.definition.cssClass&&t.column.definition.cssClass.split(" ").forEach((function(t){i.classList.add(t)})),"hover"===this.table.options.tooltipGenerationMode&&i.addEventListener("mouseenter",(function(e){t._generateTooltip()})),t._bindClickEvents(e),t._bindTouchEvents(e),t._bindMouseEvents(e),t.column.modules.edit&&t.table.modules.edit.bindEditor(t),t.column.definition.rowHandle&&!1!==t.table.options.movableRows&&t.table.modExists("moveRow")&&t.table.modules.moveRow.initializeCell(t),t.column.visible||t.hide()},c.prototype._bindClickEvents=function(t){var e=this,i=e.element;(t.cellClick||e.table.options.cellClick)&&i.addEventListener("click",(function(i){var n=e.getComponent();t.cellClick&&t.cellClick.call(e.table,i,n),e.table.options.cellClick&&e.table.options.cellClick.call(e.table,i,n)})),(t.cellDblClick||this.table.options.cellDblClick)&&i.addEventListener("dblclick",(function(i){var n=e.getComponent();t.cellDblClick&&t.cellDblClick.call(e.table,i,n),e.table.options.cellDblClick&&e.table.options.cellDblClick.call(e.table,i,n)})),(t.cellContext||this.table.options.cellContext)&&i.addEventListener("contextmenu",(function(i){var n=e.getComponent();t.cellContext&&t.cellContext.call(e.table,i,n),e.table.options.cellContext&&e.table.options.cellContext.call(e.table,i,n)}))},c.prototype._bindMouseEvents=function(t){var e=this,i=e.element;(t.cellMouseEnter||e.table.options.cellMouseEnter)&&i.addEventListener("mouseenter",(function(i){var n=e.getComponent();t.cellMouseEnter&&t.cellMouseEnter.call(e.table,i,n),e.table.options.cellMouseEnter&&e.table.options.cellMouseEnter.call(e.table,i,n)})),(t.cellMouseLeave||e.table.options.cellMouseLeave)&&i.addEventListener("mouseleave",(function(i){var n=e.getComponent();t.cellMouseLeave&&t.cellMouseLeave.call(e.table,i,n),e.table.options.cellMouseLeave&&e.table.options.cellMouseLeave.call(e.table,i,n)})),(t.cellMouseOver||e.table.options.cellMouseOver)&&i.addEventListener("mouseover",(function(i){var n=e.getComponent();t.cellMouseOver&&t.cellMouseOver.call(e.table,i,n),e.table.options.cellMouseOver&&e.table.options.cellMouseOver.call(e.table,i,n)})),(t.cellMouseOut||e.table.options.cellMouseOut)&&i.addEventListener("mouseout",(function(i){var n=e.getComponent();t.cellMouseOut&&t.cellMouseOut.call(e.table,i,n),e.table.options.cellMouseOut&&e.table.options.cellMouseOut.call(e.table,i,n)})),(t.cellMouseMove||e.table.options.cellMouseMove)&&i.addEventListener("mousemove",(function(i){var n=e.getComponent();t.cellMouseMove&&t.cellMouseMove.call(e.table,i,n),e.table.options.cellMouseMove&&e.table.options.cellMouseMove.call(e.table,i,n)}))},c.prototype._bindTouchEvents=function(t){var e,i,n,o=this,r=o.element;(t.cellTap||this.table.options.cellTap)&&(n=!1,r.addEventListener("touchstart",(function(t){n=!0}),{passive:!0}),r.addEventListener("touchend",(function(e){if(n){var i=o.getComponent();t.cellTap&&t.cellTap.call(o.table,e,i),o.table.options.cellTap&&o.table.options.cellTap.call(o.table,e,i)}n=!1}))),(t.cellDblTap||this.table.options.cellDblTap)&&(e=null,r.addEventListener("touchend",(function(i){if(e){clearTimeout(e),e=null;var n=o.getComponent();t.cellDblTap&&t.cellDblTap.call(o.table,i,n),o.table.options.cellDblTap&&o.table.options.cellDblTap.call(o.table,i,n)}else e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),(t.cellTapHold||this.table.options.cellTapHold)&&(i=null,r.addEventListener("touchstart",(function(e){clearTimeout(i),i=setTimeout((function(){clearTimeout(i),i=null,n=!1;var r=o.getComponent();t.cellTapHold&&t.cellTapHold.call(o.table,e,r),o.table.options.cellTapHold&&o.table.options.cellTapHold.call(o.table,e,r)}),1e3)}),{passive:!0}),r.addEventListener("touchend",(function(t){clearTimeout(i),i=null})))},c.prototype._generateContents=function(){var t;switch(void 0===(t=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":s(t)){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}},c.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},c.prototype._generateTooltip=function(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")},c.prototype.getElement=function(){return this.element},c.prototype.getValue=function(){return this.value},c.prototype.getOldValue=function(){return this.oldValue},c.prototype.setValue=function(t,e){var i;this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),i=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,i),this.table.options.cellEdited.call(this.table,i),this.table.options.dataEdited.call(this.table,this.table.rowManager.getData()))},c.prototype.setValueProcessData=function(t,e){var i=!1;return this.value!=t&&(i=!0,e&&this.column.modules.mutate&&(t=this.table.modules.mutator.transformCell(this,t))),this.setValueActual(t),i&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),"table"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),i},c.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,t),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),this.column.definition.contextMenu&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},c.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},c.prototype.clearWidth=function(){this.width="",this.element.style.width=""},c.prototype.getWidth=function(){return this.width||this.element.offsetWidth},c.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},c.prototype.checkHeight=function(){this.row.reinitializeHeight()},c.prototype.clearHeight=function(){this.element.style.height="",this.height=null},c.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},c.prototype.getHeight=function(){return this.height||this.element.offsetHeight},c.prototype.show=function(){this.element.style.display=""},c.prototype.hide=function(){this.element.style.display="none"},c.prototype.edit=function(t){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,t)},c.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var t=this.table.modules.edit.getCurrentCell();t&&t._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},c.prototype.delete=function(){this.table.rowManager.redrawBlock||this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},c.prototype.nav=function(){var t=this,e=!1,i=this.row.getCellIndex(this);return{next:function(){var e,i=this.right();return!!i||!(!(e=t.table.rowManager.nextDisplayRow(t.row,!0))||!(i=e.findNextEditableCell(-1)))&&(i.edit(),!0)},prev:function(){var e,i=this.left();return!!i||!(!(e=t.table.rowManager.prevDisplayRow(t.row,!0))||!(i=e.findPrevEditableCell(e.cells.length)))&&(i.edit(),!0)},left:function(){return!!(e=t.row.findPrevEditableCell(i))&&(e.edit(),!0)},right:function(){return!!(e=t.row.findNextEditableCell(i))&&(e.edit(),!0)},up:function(){var e=t.table.rowManager.prevDisplayRow(t.row,!0);e&&e.cells[i].edit()},down:function(){var e=t.table.rowManager.nextDisplayRow(t.row,!0);e&&e.cells[i].edit()}}},c.prototype.getIndex=function(){this.row.getCellIndex(this)},c.prototype.getComponent=function(){return new l(this)};var u=function(t){this.table=t,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};u.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t},u.prototype._initialize=function(t){if(this.table.options.footerElement)switch(s(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}},u.prototype.getElement=function(){return this.element},u.prototype.append=function(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()},u.prototype.prepend=function(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()},u.prototype.remove=function(t){t.parentNode.removeChild(t),this.deactivate()},u.prototype.deactivate=function(t){this.element.firstChild&&!t||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},u.prototype.activate=function(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)},u.prototype.redraw=function(){this.links.forEach((function(t){t.footerRedraw()}))};var h=function t(e,i){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.modules={},this.initializeElement(e),this.initializeOptions(i||{}),this._create(),t.prototype.comms.register(this)};h.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",data:[],autoColumns:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,footerElement:!1,index:"id",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(t,e){return e},downloadComplete:!1,downloadConfig:!1,dataTree:!1,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(t,e){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupHeader:!1,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},h.prototype.initializeOptions=function(t){if(!1!==t.invalidOptionWarnings)for(var e in t)void 0===this.defaultOptions[e]&&console.warn("Invalid table constructor option:",e);for(var e in this.defaultOptions)e in t?this.options[e]=t[e]:Array.isArray(this.defaultOptions[e])?this.options[e]=[]:"object"===s(this.defaultOptions[e])&&null!==this.defaultOptions[e]?this.options[e]={}:this.options[e]=this.defaultOptions[e]},h.prototype.initializeElement=function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement?(this.element=t,!0):"string"==typeof t?(this.element=document.querySelector(t),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)},h.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),void 0!==this.options.clipboardCopyHeader&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),!0!==this.options.printVisibleRows&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active"),!0!==this.options.printCopyStyle&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.columns&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.sort&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.filter&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},h.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},h.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new t(this),this.rowManager=new o(this),this.footerManager=new u(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this._buildElement(),this._loadInitialData()},h.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},h.prototype._buildElement=function(){var t=this,e=this.element,i=this.modules,n=this.options;for(n.tableBuilding.call(this),e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);for(var o in n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),!1!==n.minHeight&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),!1!==n.maxHeight&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&i.layout.initialize(n.layout),!1!==n.headerFilterPlaceholder&&i.localize.setHeaderFilterPlaceholder(n.headerFilterPlaceholder),n.langs)i.localize.installLang(o,n.langs[o]);if(i.localize.setLocale(n.locale),"string"==typeof n.placeholder){var r=document.createElement("div");r.classList.add("tabulator-placeholder");var a=document.createElement("span");a.innerHTML=n.placeholder,r.appendChild(a),n.placeholder=r}if(e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.persistence&&this.modExists("persistence",!0)&&i.persistence.initialize(),n.persistence&&this.modExists("persistence",!0)&&i.persistence.config.columns&&(n.columns=i.persistence.load("columns",n.columns)),n.movableRows&&this.modExists("moveRow")&&i.moveRow.initialize(),n.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&i.columnCalcs.initialize(),this.columnManager.setColumns(n.columns),n.dataTree&&this.modExists("dataTree",!0)&&i.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(n.persistence&&this.modExists("persistence",!0)&&i.persistence.config.sort||n.initialSort)&&this.modExists("sort",!0)){var s=[];n.persistence&&this.modExists("persistence",!0)&&i.persistence.config.sort?!1===(s=i.persistence.load("sort"))&&n.initialSort&&(s=n.initialSort):n.initialSort&&(s=n.initialSort),i.sort.setSort(s)}if((n.persistence&&this.modExists("persistence",!0)&&i.persistence.config.filter||n.initialFilter)&&this.modExists("filter",!0)){var l=[];n.persistence&&this.modExists("persistence",!0)&&i.persistence.config.filter?!1===(l=i.persistence.load("filter"))&&n.initialFilter&&(l=n.initialFilter):n.initialFilter&&(l=n.initialFilter),i.filter.setFilter(l)}n.initialHeaderFilter&&this.modExists("filter",!0)&&n.initialHeaderFilter.forEach((function(e){var n=t.columnManager.findColumn(e.field);if(!n)return console.warn("Column Filter Error - No matching column found:",e.field),!1;i.filter.setHeaderFilterValue(n,e.value)})),this.modExists("ajax")&&i.ajax.initialize(),n.pagination&&this.modExists("page",!0)&&i.page.initialize(),n.groupBy&&this.modExists("groupRows",!0)&&i.groupRows.initialize(),this.modExists("keybindings")&&i.keybindings.initialize(),this.modExists("selectRow")&&i.selectRow.clearSelectionData(!0),n.autoResize&&this.modExists("resizeTable")&&i.resizeTable.initialize(),this.modExists("clipboard")&&i.clipboard.initialize(),n.printAsHtml&&this.modExists("print")&&i.print.initialize(),n.tableBuilt.call(this)},h.prototype._loadInitialData=function(){var t=this;if(t.options.pagination&&t.modExists("page"))if(t.modules.page.reset(!0,!0),"local"==t.options.pagination){if(t.options.data.length)t.rowManager.setData(t.options.data,!1,!0);else{if((t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax"))return void t.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){t.options.paginationInitialPage&&t.modules.page.setPage(t.options.paginationInitialPage)}));t.rowManager.setData(t.options.data,!1,!0)}t.options.paginationInitialPage&&t.modules.page.setPage(t.options.paginationInitialPage)}else t.options.ajaxURL?t.modules.page.setPage(t.options.paginationInitialPage).then((function(){})).catch((function(){})):t.rowManager.setData([],!1,!0);else t.options.data.length?t.rowManager.setData(t.options.data):(t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")?t.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){})):t.rowManager.setData(t.options.data,!1,!0)},h.prototype.destroy=function(){var t=this.element;for(h.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach((function(t){t.wipe()})),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")},h.prototype._detectBrowser=function(){var t=navigator.userAgent||navigator.vendor||window.opera;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},h.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},h.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},h.prototype.setDataFromLocalFile=function(t){var e=this;return new Promise((function(i,n){var o=document.createElement("input");o.type="file",o.accept=t||".json,application/json",o.addEventListener("change",(function(t){var r,a=o.files[0],s=new FileReader;s.readAsText(a),s.onload=function(t){try{r=JSON.parse(s.result)}catch(t){return console.warn("File Load Error - File contents is invalid JSON",t),void n(t)}e._setData(r).then((function(t){i(t)})).catch((function(t){i(t)}))},s.onerror=function(t){console.warn("File Load Error - Unable to read file"),n()}})),o.click()}))},h.prototype.setData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i,!1,!0)},h.prototype._setData=function(t,e,i,n,o){return"string"!=typeof t?t?this.rowManager.setData(t,n,o):this.modExists("ajax")&&(this.modules.ajax.getUrl||this.options.ajaxURLGenerator)?"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(n,o):this.rowManager.setData([],n,o):0==t.indexOf("{")||0==t.indexOf("[")?this.rowManager.setData(JSON.parse(t),n,o):this.modExists("ajax",!0)?(e&&this.modules.ajax.setParams(e),i&&this.modules.ajax.setConfig(i),this.modules.ajax.setUrl(t),"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0,!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(n,o)):void 0},h.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},h.prototype.getData=function(t){return!0===t&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getData(t)},h.prototype.getDataCount=function(t){return!0===t&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getDataCount(t)},h.prototype.searchRows=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("rows",t,e,i)},h.prototype.searchData=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("data",t,e,i)},h.prototype.getHtml=function(t,e,i){if(this.modExists("export",!0))return this.modules.export.getHtml(t,e,i)},h.prototype.print=function(t,e,i){if(this.modExists("print",!0))return this.modules.print.printFullscreen(t,e,i)},h.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},h.prototype.replaceData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i,!0)},h.prototype.updateData=function(t){var e=this,i=this,n=0;return new Promise((function(o,r){e.modExists("ajax")&&e.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach((function(t){var e=i.rowManager.findRow(t[i.options.index]);e&&(n++,e.updateData(t).then((function(){--n||o()})))})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}))},h.prototype.addData=function(t,e,i){var n=this;return new Promise((function(o,r){n.modExists("ajax")&&n.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?n.rowManager.addRows(t,e,i).then((function(t){var e=[];t.forEach((function(t){e.push(t.getComponent())})),o(e)})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}))},h.prototype.updateOrAddData=function(t){var e=this,i=this,n=[],o=0;return new Promise((function(r,a){e.modExists("ajax")&&e.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach((function(t){var e=i.rowManager.findRow(t[i.options.index]);o++,e?e.updateData(t).then((function(){o--,n.push(e.getComponent()),o||r(n)})):i.rowManager.addRows(t).then((function(t){o--,n.push(t[0].getComponent()),o||r(n)}))})):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))}))},h.prototype.getRow=function(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},h.prototype.getRowFromPosition=function(t,e){var i=this.rowManager.getRowFromPosition(t,e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},h.prototype.deleteRow=function(t){var e=this;return new Promise((function(i,n){var o=e,r=0,a=0,s=[];function l(){++r==t.length&&a&&(o.rowManager.reRenderInPosition(),i())}Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=e.rowManager.findRow(t,!0);i?s.push(i):(console.warn("Delete Error - No matching row found:",t),n("Delete Error - No matching row found"),l())})),s.sort((function(t,i){return e.rowManager.rows.indexOf(t)>e.rowManager.rows.indexOf(i)?1:-1})),s.forEach((function(t){t.delete().then((function(){a++,l()})).catch((function(t){l(),n(t)}))}))}))},h.prototype.addRow=function(t,e,i){var n=this;return new Promise((function(o,r){"string"==typeof t&&(t=JSON.parse(t)),n.rowManager.addRows(t,e,i).then((function(t){n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(n.rowManager.activeRows),o(t[0].getComponent())}))}))},h.prototype.updateOrAddRow=function(t,e){var i=this;return new Promise((function(n,o){var r=i.rowManager.findRow(t);"string"==typeof e&&(e=JSON.parse(e)),r?r.updateData(e).then((function(){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows),n(r.getComponent())})).catch((function(t){o(t)})):r=i.rowManager.addRows(e).then((function(t){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows),n(t[0].getComponent())})).catch((function(t){o(t)}))}))},h.prototype.updateRow=function(t,e){var i=this;return new Promise((function(n,o){var r=i.rowManager.findRow(t);"string"==typeof e&&(e=JSON.parse(e)),r?r.updateData(e).then((function(){n(r.getComponent())})).catch((function(t){o(t)})):(console.warn("Update Error - No matching row found:",t),o("Update Error - No matching row found"))}))},h.prototype.scrollToRow=function(t,e,i){var n=this;return new Promise((function(o,r){var a=n.rowManager.findRow(t);a?n.rowManager.scrollToRow(a,e,i).then((function(){o()})).catch((function(t){r(t)})):(console.warn("Scroll Error - No matching row found:",t),r("Scroll Error - No matching row found"))}))},h.prototype.moveRow=function(t,e,i){var n=this.rowManager.findRow(t);n?n.moveToRow(e,i):console.warn("Move Error - No matching row found:",t)},h.prototype.getRows=function(t){return!0===t&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getComponents(t)},h.prototype.getRowPosition=function(t,e){var i=this.rowManager.findRow(t);return i?this.rowManager.getRowPosition(i,e):(console.warn("Position Error - No matching row found:",t),!1)},h.prototype.copyToClipboard=function(t){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(t)},h.prototype.setColumns=function(t){this.columnManager.setColumns(t)},h.prototype.getColumns=function(t){return this.columnManager.getComponents(t)},h.prototype.getColumn=function(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)},h.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},h.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},h.prototype.setColumnLayout=function(t){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,t)),!0)},h.prototype.showColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},h.prototype.hideColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},h.prototype.toggleColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()},h.prototype.addColumn=function(t,e,i){var n=this;return new Promise((function(o,r){var a=n.columnManager.findColumn(i);n.columnManager.addColumn(t,e,a).then((function(t){o(t.getComponent())})).catch((function(t){r(t)}))}))},h.prototype.deleteColumn=function(t){var e=this;return new Promise((function(i,n){var o=e.columnManager.findColumn(t);o?o.delete().then((function(){i()})).catch((function(t){n(t)})):(console.warn("Column Delete Error - No matching column found:",t),n())}))},h.prototype.updateColumnDefinition=function(t,e){var i=this;return new Promise((function(n,o){var r=i.columnManager.findColumn(t);r?r.updateDefinition(e).then((function(t){n(t)})).catch((function(t){o(t)})):(console.warn("Column Update Error - No matching column found:",t),o())}))},h.prototype.moveColumn=function(t,e,i){var n=this.columnManager.findColumn(t),o=this.columnManager.findColumn(e);n?o?this.columnManager.moveColumn(n,o,i):console.warn("Move Error - No matching column found:",o):console.warn("Move Error - No matching column found:",t)},h.prototype.scrollToColumn=function(t,e,i){var n=this;return new Promise((function(o,r){var a=n.columnManager.findColumn(t);a?n.columnManager.scrollToColumn(a,e,i).then((function(){o()})).catch((function(t){r(t)})):(console.warn("Scroll Error - No matching column found:",t),r("Scroll Error - No matching column found"))}))},h.prototype.setLocale=function(t){this.modules.localize.setLocale(t)},h.prototype.getLocale=function(){return this.modules.localize.getLocale()},h.prototype.getLang=function(t){return this.modules.localize.getLang(t)},h.prototype.redraw=function(t){this.columnManager.redraw(t),this.rowManager.redraw(t)},h.prototype.setHeight=function(t){"classic"!==this.rowManager.renderMode?(this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},h.prototype.setSort=function(t,e){this.modExists("sort",!0)&&(this.modules.sort.setSort(t,e),this.rowManager.sorterRefresh())},h.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},h.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},h.prototype.setFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.setFilter(t,e,i),this.rowManager.filterRefresh())},h.prototype.addFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.addFilter(t,e,i),this.rowManager.filterRefresh())},h.prototype.getFilters=function(t){if(this.modExists("filter",!0))return this.modules.filter.getFilters(t)},h.prototype.setHeaderFilterFocus=function(t){if(this.modExists("filter",!0)){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Filter Focus Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterFocus(e)}},h.prototype.getHeaderFilterValue=function(t){if(this.modExists("filter",!0)){var e=this.columnManager.findColumn(t);if(e)return this.modules.filter.getHeaderFilterValue(e);console.warn("Column Filter Error - No matching column found:",t)}},h.prototype.setHeaderFilterValue=function(t,e){if(this.modExists("filter",!0)){var i=this.columnManager.findColumn(t);if(!i)return console.warn("Column Filter Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterValue(i,e)}},h.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},h.prototype.removeFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(t,e,i),this.rowManager.filterRefresh())},h.prototype.clearFilter=function(t){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(t),this.rowManager.filterRefresh())},h.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},h.prototype.selectRow=function(t){this.modExists("selectRow",!0)&&(!0===t&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),t="active"),this.modules.selectRow.selectRows(t))},h.prototype.deselectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(t)},h.prototype.toggleSelectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(t)},h.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},h.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},h.prototype.setMaxPage=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(t)},h.prototype.setPage=function(t){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(t):new Promise((function(t,e){e()}))},h.prototype.setPageToRow=function(t){var e=this;return new Promise((function(i,n){e.options.pagination&&e.modExists("page")&&(t=e.rowManager.findRow(t))?e.modules.page.setPageToRow(t).then((function(){i()})).catch((function(){n()})):n()}))},h.prototype.setPageSize=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(t),this.modules.page.setPage(1).then((function(){})).catch((function(){}))},h.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},h.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},h.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},h.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},h.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},h.prototype.setGroupBy=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=t,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},h.prototype.setGroupStartOpen=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=t,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},h.prototype.setGroupHeader=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=t,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},h.prototype.getGroups=function(t){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},h.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},h.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},h.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)},h.prototype.navigatePrev=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&t.nav().prev()},h.prototype.navigateNext=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&t.nav().next()},h.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},h.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},h.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},h.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().down())},h.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},h.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},h.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},h.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},h.prototype.download=function(t,e,i,n){this.modExists("download",!0)&&this.modules.download.download(t,e,i,n)},h.prototype.downloadToTab=function(t,e,i,n){this.modExists("download",!0)&&this.modules.download.download(t,e,i,n,!0)},h.prototype.tableComms=function(t,e,i,n){this.modules.comms.receive(t,e,i,n)},h.prototype.moduleBindings={},h.prototype.extendModule=function(t,e,i){if(h.prototype.moduleBindings[t]){var n=h.prototype.moduleBindings[t].prototype[e];if(n)if("object"==(void 0===i?"undefined":s(i)))for(var o in i)n[o]=i[o];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)},h.prototype.registerModule=function(t,e){h.prototype.moduleBindings[t]=e},h.prototype.bindModules=function(){for(var t in this.modules={},h.prototype.moduleBindings)this.modules[t]=new h.prototype.moduleBindings[t](this)},h.prototype.modExists=function(t,e){return!!this.modules[t]||(e&&console.error("Tabulator Module Not Installed: "+t),!1)},h.prototype.helpers={elVisible:function(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)},elOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(t){var e=Array.isArray(t)?[]:{};for(var i in t)null!=t[i]&&"object"===s(t[i])?t[i]instanceof Date?e[i]=new Date(t[i]):e[i]=this.deepClone(t[i]):e[i]=t[i];return e}},h.prototype.comms={tables:[],register:function(t){h.prototype.comms.tables.push(t)},deregister:function(t){var e=h.prototype.comms.tables.indexOf(t);e>-1&&h.prototype.comms.tables.splice(e,1)},lookupTable:function(t,e){var i,n,o=[];if("string"==typeof t){if((i=document.querySelectorAll(t)).length)for(var r=0;r<i.length;r++)(n=h.prototype.comms.matchElement(i[r]))&&o.push(n)}else"undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t instanceof h?(n=h.prototype.comms.matchElement(t))&&o.push(n):Array.isArray(t)?t.forEach((function(t){o=o.concat(h.prototype.comms.lookupTable(t))})):e||console.warn("Table Connection Error - Invalid Selector",t);return o},matchElement:function(t){return h.prototype.comms.tables.find((function(e){return t instanceof h?e===t:e.element===t}))}},h.prototype.findTable=function(t){var e=h.prototype.comms.lookupTable(t,!0);return!(Array.isArray(e)&&!e.length)&&e};var d=function(t){this.table=t,this.mode=null};d.prototype.initialize=function(t){this.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},d.prototype.getMode=function(){return this.mode},d.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex)},d.prototype.modes={fitData:function(t){t.forEach((function(t){t.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(t){t.forEach((function(t){t.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(t){var e=this,i=0,n=this.table.rowManager.element.clientWidth,o=0,r=!1;t.forEach((function(t,n){t.widthFixed||t.reinitializeWidth(),(e.table.options.responsiveLayout?t.modules.responsive.visible:t.visible)&&(r=t),t.visible&&(i+=t.getWidth())})),r?(o=n-i+r.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(r.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?r.setWidth(o):r.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(t){var e,i,n=this.table.element.clientWidth,o=0,r=0,a=0,s=[],l=[],c=0,u=0;function h(t){return"string"==typeof t?t.indexOf("%")>-1?n/100*parseInt(t):parseInt(t):t}function d(t,e,i,n){var o=[],r=0,a=0,s=0,l=0,c=0,u=[];function p(t){return i*(t.column.definition.widthGrow||1)}function f(t){return h(t.width)-i*(t.column.definition.widthShrink||0)}return t.forEach((function(t,e){var i=n?f(t):p(t);t.column.minWidth>=i?o.push(t):(u.push(t),c+=n?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)})),o.length?(o.forEach((function(t){r+=n?t.width-t.column.minWidth:t.column.minWidth,t.width=t.column.minWidth})),l=(a=e-r)-(s=c?Math.floor(a/c):a)*c,l+=d(u,a,s,n)):(l=c?e-Math.floor(e/c)*c:e,u.forEach((function(t){t.width=n?f(t):p(t)}))),l}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach((function(t){var e,i,n;t.visible&&(e=t.definition.width,i=parseInt(t.minWidth),e?(n=h(e),o+=n>i?n:i,t.definition.widthShrink&&(l.push({column:t,width:n>i?n:i}),c+=t.definition.widthShrink)):(s.push({column:t,width:0}),a+=t.definition.widthGrow||1))})),r=n-o,e=Math.floor(r/a),u=d(s,r,e,!1),s.length&&u>0&&(s[s.length-1].width+=+u),s.forEach((function(t){r-=t.width})),(i=Math.abs(u)+r)>0&&c&&(u=d(l,i,Math.floor(i/c),!0)),l.length&&(l[l.length-1].width-=u),s.forEach((function(t){t.column.setWidth(t.width)})),l.forEach((function(t){t.column.setWidth(t.width)}))}},h.prototype.registerModule("layout",d);var p=function(t){this.table=t,this.locale="default",this.lang=!1,this.bindings={}};p.prototype.setHeaderFilterPlaceholder=function(t){this.langs.default.headerFilters.default=t},p.prototype.setHeaderFilterColumnPlaceholder=function(t,e){this.langs.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)},p.prototype.installLang=function(t,e){this.langs[t]?this._setLangProp(this.langs[t],e):this.langs[t]=e},p.prototype._setLangProp=function(t,e){for(var i in e)t[i]&&"object"==s(t[i])?this._setLangProp(t[i],e[i]):t[i]=e[i]},p.prototype.setLocale=function(t){if(!0===(t=t||"default")&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langs[t]){var e=t.split("-")[0];this.langs[e]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,e),t=e):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=h.prototype.helpers.deepClone(this.langs.default||{}),"default"!=t&&function t(e,i){for(var n in e)"object"==s(e[n])?(i[n]||(i[n]={}),t(e[n],i[n])):i[n]=e[n]}(this.langs[t],this.lang),this.table.options.localized.call(this.table,this.locale,this.lang),this._executeBindings()},p.prototype.getLocale=function(t){return self.locale},p.prototype.getLang=function(t){return t?this.langs[t]:this.lang},p.prototype.getText=function(t,e){var i=(t=e?t+"|"+e:t).split("|");return this._getLangElement(i,this.locale)||""},p.prototype._getLangElement=function(t,e){var i=this.lang;return t.forEach((function(t){var e;i&&(e=i[t],i=void 0!==e&&e)})),i},p.prototype.bind=function(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)},p.prototype._executeBindings=function(){var t=this,e=function(e){t.bindings[e].forEach((function(i){i(t.getText(e),t.lang)}))};for(var i in t.bindings)e(i)},p.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"},headerFilters:{default:"filter column...",columns:{}}}},h.prototype.registerModule("localize",p);var f=function(t){this.table=t};f.prototype.getConnections=function(t){var e=this,i=[];return h.prototype.comms.lookupTable(t).forEach((function(t){e.table!==t&&i.push(t)})),i},f.prototype.send=function(t,e,i,n){var o=this,r=this.getConnections(t);r.forEach((function(t){t.tableComms(o.table.element,e,i,n)})),!r.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)},f.prototype.receive=function(t,e,i,n){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,i,n);console.warn("Inter-table Comms Error - no such module:",e)},h.prototype.registerModule("comms",f);var g=function(t){this.table=t,this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};g.prototype.initializeColumn=function(t){var e=this,i=!1,n={};this.allowedTypes.forEach((function(o){var r,a="accessor"+(o.charAt(0).toUpperCase()+o.slice(1));t.definition[a]&&(r=e.lookupAccessor(t.definition[a]))&&(i=!0,n[a]={accessor:r,params:t.definition[a+"Params"]||{}})})),i&&(t.modules.accessor=n)},g.prototype.lookupAccessor=function(t){var e=!1;switch(void 0===t?"undefined":s(t)){case"string":this.accessors[t]?e=this.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t}return e},g.prototype.transformRow=function(t,e){var i="accessor"+(e.charAt(0).toUpperCase()+e.slice(1)),n=h.prototype.helpers.deepClone(t||{});return this.table.columnManager.traverse((function(t){var o,r,a,s;t.modules.accessor&&(r=t.modules.accessor[i]||t.modules.accessor.accessor||!1)&&"undefined"!=(o=t.getFieldValue(n))&&(s=t.getComponent(),a="function"==typeof r.params?r.params(o,n,e,s):r.params,t.setFieldValue(n,r.accessor(o,n,e,a,s)))})),n},g.prototype.accessors={},h.prototype.registerModule("accessor",g);var m=function(t){this.table=t,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};m.prototype.initialize=function(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=t.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&("string"==typeof this.table.options.ajaxLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=t.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},m.prototype.createLoaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t},m.prototype.createMsgElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t},m.prototype.setParams=function(t,e){if(e)for(var i in this.params=this.params||{},t)this.params[i]=t[i];else this.params=t},m.prototype.getParams=function(){return this.params||{}},m.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.method=t;else for(var e in t)this.config[e]=t[e]},m.prototype._loadDefaultConfig=function(t){if(!this.config||t)for(var e in this.config={},this.defaultConfig)this.config[e]=this.defaultConfig[e]},m.prototype.setUrl=function(t){this.url=t},m.prototype.getUrl=function(){return this.url},m.prototype.loadData=function(t,e){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(t,e)},m.prototype.nextPage=function(t){this.loading||t<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then((function(){})).catch((function(){}))},m.prototype.blockActiveRequest=function(){this.requestOrder++},m.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},m.prototype._loadDataStandard=function(t,e){var i=this;return new Promise((function(n,o){i.sendRequest(t).then((function(r){i.table.rowManager.setData(r,t,e).then((function(){n()})).catch((function(t){o(t)}))})).catch((function(t){o(t)}))}))},m.prototype.generateParamsList=function(t,e){var i=this,n=[];if(e=e||"",Array.isArray(t))t.forEach((function(t,o){n=n.concat(i.generateParamsList(t,e?e+"["+o+"]":o))}));else if("object"===(void 0===t?"undefined":s(t)))for(var o in t)n=n.concat(i.generateParamsList(t[o],e?e+"["+o+"]":o));else n.push({key:e,value:t});return n},m.prototype.serializeParams=function(t){var e=this.generateParamsList(t),i=[];return e.forEach((function(t){i.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))})),i.join("&")},m.prototype.sendRequest=function(t){var e,i=this,n=this,o=n.url;return n.requestOrder++,e=n.requestOrder,n._loadDefaultConfig(),new Promise((function(r,a){!1!==n.table.options.ajaxRequesting.call(i.table,n.url,n.params)?(n.loading=!0,t||n.showLoader(),i.loaderPromise(o,n.config,n.params).then((function(t){e===n.requestOrder?(n.table.options.ajaxResponse&&(t=n.table.options.ajaxResponse.call(n.table,n.url,n.params,t)),r(t),n.hideLoader(),n.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")})).catch((function(t){console.error("Ajax Load Error: ",t),n.table.options.ajaxError.call(n.table,t),n.showError(),setTimeout((function(){n.hideLoader()}),3e3),n.loading=!1,a()}))):a()}))},m.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},m.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},m.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},m.prototype.defaultConfig={method:"GET"},m.prototype.defaultURLGenerator=function(t,e,i){return t&&i&&Object.keys(i).length&&(e.method&&"get"!=e.method.toLowerCase()||(e.method="get",t+=(t.includes("?")?"&":"?")+this.serializeParams(i))),t},m.prototype.defaultLoaderPromise=function(t,e,i){var n,o=this;return new Promise((function(r,a){if(t=o.urlGenerator(t,e,i),"GET"!=e.method.toUpperCase())if(n="object"===s(o.table.options.ajaxContentType)?o.table.options.ajaxContentType:o.contentTypeFormatters[o.table.options.ajaxContentType]){for(var l in n.headers)e.headers||(e.headers={}),void 0===e.headers[l]&&(e.headers[l]=n.headers[l]);e.body=n.body.call(o,t,e,i)}else console.warn("Ajax Error - Invalid ajaxContentType value:",o.table.options.ajaxContentType);t?(void 0===e.headers&&(e.headers={}),void 0===e.headers.Accept&&(e.headers.Accept="application/json"),void 0===e.headers["X-Requested-With"]&&(e.headers["X-Requested-With"]="XMLHttpRequest"),void 0===e.mode&&(e.mode="cors"),"cors"==e.mode?(void 0===e.headers["Access-Control-Allow-Origin"]&&(e.headers["Access-Control-Allow-Origin"]=window.location.origin),void 0===e.credentials&&(e.credentials="same-origin")):void 0===e.credentials&&(e.credentials="include"),fetch(t,e).then((function(t){t.ok?t.json().then((function(t){r(t)})).catch((function(t){a(t),console.warn("Ajax Load Error - Invalid JSON returned",t)})):(console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText),a(t))})).catch((function(t){console.error("Ajax Load Error - Connection Error: ",t),a(t)}))):(console.warn("Ajax Load Error - No URL Set"),r([]))}))},m.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(t,e,i){return JSON.stringify(i)}},form:{headers:{},body:function(t,e,i){var n=this.generateParamsList(i),o=new FormData;return n.forEach((function(t){o.append(t.key,t.value)})),o}}},h.prototype.registerModule("ajax",m);var v=function(t){this.table=t,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};v.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t},v.prototype.initialize=function(){this.genColumn=new n({field:"value"},this)},v.prototype.registerColumnField=function(){},v.prototype.initializeColumn=function(t){var e=t.definition,i={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(s(e.topCalc)){case"string":this.calculations[e.topCalc]?i.topCalc=this.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":i.topCalc=e.topCalc}i.topCalc&&(t.modules.columnCalcs=i,this.topCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(e.bottomCalc){switch(s(e.bottomCalc)){case"string":this.calculations[e.bottomCalc]?i.botCalc=this.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":i.botCalc=e.bottomCalc}i.botCalc&&(t.modules.columnCalcs=i,this.botCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},v.prototype.removeCalcs=function(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()},v.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},v.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},v.prototype.scrollHorizontal=function(t){this.table.columnManager.getElement().scrollWidth,this.table.element.clientWidth,this.botInitialized&&(this.botRow.getElement().style.marginLeft=-t+"px")},v.prototype.recalc=function(t){var e;if(this.topInitialized||this.botInitialized){if(this.rowsToData(t),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),e=this.generateRow("top",this.rowsToData(t)),this.topRow=e;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(e.getElement()),e.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),e=this.generateRow("bottom",this.rowsToData(t)),this.botRow=e;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(e.getElement()),e.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},v.prototype.recalcRowGroup=function(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))},v.prototype.recalcAll=function(){var t=this;(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&table.modules.groupRows.getChildGroups().forEach((function(e){t.recalcGroup(e)})))},v.prototype.recalcGroup=function(t){var e,i;t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),i=this.generateRowData("bottom",e),t.calcs.bottom.updateData(i),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),i=this.generateRowData("top",e),t.calcs.top.updateData(i),t.calcs.top.reinitialize()))},v.prototype.generateTopRow=function(t){return this.generateRow("top",this.rowsToData(t))},v.prototype.generateBottomRow=function(t){return this.generateRow("bottom",this.rowsToData(t))},v.prototype.rowsToData=function(t){var e=this,i=[];return t.forEach((function(t){if(i.push(t.getData()),e.table.options.dataTree&&e.table.options.dataTreeChildColumnCalcs&&t.modules.dataTree.open){var n=e.rowsToData(e.table.modules.dataTree.getFilteredTreeChildren(t));i=i.concat(n)}})),i},v.prototype.generateRow=function(t,e){var i,n=this,o=this.generateRowData(t,e);return n.table.modExists("mutator")&&n.table.modules.mutator.disable(),i=new a(o,this,"calc"),n.table.modExists("mutator")&&n.table.modules.mutator.enable(),i.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t),i.generateCells=function(){var e=[];n.table.columnManager.columnsByIndex.forEach((function(o){n.genColumn.setField(o.getField()),n.genColumn.hozAlign=o.hozAlign,o.definition[t+"CalcFormatter"]&&n.table.modExists("format")?n.genColumn.modules.format={formatter:n.table.modules.format.getFormatter(o.definition[t+"CalcFormatter"]),params:o.definition[t+"CalcFormatterParams"]}:n.genColumn.modules.format={formatter:n.table.modules.format.getFormatter("plaintext"),params:{}},n.genColumn.definition.cssClass=o.definition.cssClass;var r=new c(n.genColumn,i);r.column=o,r.setWidth(),o.cells.push(r),e.push(r),o.visible||r.hide()})),this.cells=e},i},v.prototype.generateRowData=function(t,e){var i,n,o={},r="top"==t?this.topCalcs:this.botCalcs,a="top"==t?"topCalc":"botCalc";return r.forEach((function(t){var r=[];t.modules.columnCalcs&&t.modules.columnCalcs[a]&&(e.forEach((function(e){r.push(t.getFieldValue(e))})),n=a+"Params",i="function"==typeof t.modules.columnCalcs[n]?t.modules.columnCalcs[n](r,e):t.modules.columnCalcs[n],t.setFieldValue(o,t.modules.columnCalcs[a](r,e,i)))})),o},v.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},v.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},v.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},v.prototype.getResults=function(){var t=this,e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach((function(i){e[i.getKey()]=t.getGroupResults(i)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e},v.prototype.getGroupResults=function(t){var e=this,i=t._getSelf(),n=t.getSubGroups(),o={};return n.forEach((function(t){o[t.getKey()]=e.getGroupResults(t)})),{top:i.calcs.top?i.calcs.top.getData():{},bottom:i.calcs.bottom?i.calcs.bottom.getData():{},groups:o}},v.prototype.calculations={avg:function(t,e,i){var n=0,o=void 0!==i.precision?i.precision:2;return t.length&&(n=t.reduce((function(t,e){return t+(e=Number(e))})),n/=t.length,n=!1!==o?n.toFixed(o):n),parseFloat(n).toString()},max:function(t,e,i){var n=null,o=void 0!==i.precision&&i.precision;return t.forEach((function(t){((t=Number(t))>n||null===n)&&(n=t)})),null!==n?!1!==o?n.toFixed(o):n:""},min:function(t,e,i){var n=null,o=void 0!==i.precision&&i.precision;return t.forEach((function(t){((t=Number(t))<n||null===n)&&(n=t)})),null!==n?!1!==o?n.toFixed(o):n:""},sum:function(t,e,i){var n=0,o=void 0!==i.precision&&i.precision;return t.length&&t.forEach((function(t){t=Number(t),n+=isNaN(t)?0:Number(t)})),!1!==o?n.toFixed(o):n},concat:function(t,e,i){var n=0;return t.length&&(n=t.reduce((function(t,e){return String(t)+String(e)}))),n},count:function(t,e,i){var n=0;return t.length&&t.forEach((function(t){t&&n++})),n}},h.prototype.registerModule("columnCalcs",v);var y=function(t){this.table=t,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0};y.prototype.initialize=function(){var t=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",(function(e){var i,n;t.blocked||(e.preventDefault(),t.customSelection?(i=t.customSelection,t.table.options.clipboardCopyFormatter&&(i=t.table.options.clipboardCopyFormatter("plain",i))):(i=(n=t.table.modules.export.getHtml(t.rowRange,t.table.options.clipboardCopyStyled,t.table.options.clipboardCopyConfig,"clipboard"))?t.generatePlainContent(n):"",t.table.options.clipboardCopyFormatter&&(i=t.table.options.clipboardCopyFormatter("plain",i),n=t.table.options.clipboardCopyFormatter("html",n))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",i):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",i),n&&e.clipboardData.setData("text/html",n)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",i),n&&e.originalEvent.clipboardData.setData("text/html",n)),t.table.options.clipboardCopied.call(t.table,i,n),t.reset())})),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",(function(e){t.paste(e)})),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},y.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},y.prototype.generatePlainContent=function(t){var e=[],i=document.createElement("div");i.innerHTML=t;var n=i.getElementsByTagName("table")[0];return Array.prototype.slice.call(n.getElementsByTagName("tr")).forEach((function(t){var i=[],n=Array.prototype.slice.call(t.getElementsByTagName("th")),o=Array.prototype.slice.call(t.getElementsByTagName("td"));(o=o.concat(n)).forEach((function(t){var e=t.innerHTML;e="&nbsp;"==e?"":e,i.push(e)})),e.push(i.join("\t"))})),e.join("\n")},y.prototype.copy=function(t,e){var i,n;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=t||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((t=document.createRange()).selectNodeContents(this.table.element),(i=window.getSelection()).toString()&&e&&(this.customSelection=i.toString()),i.removeAllRanges(),i.addRange(t)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((n=document.body.createTextRange()).moveToElementText(this.table.element),n.select()),document.execCommand("copy"),i&&i.removeAllRanges())},y.prototype.setPasteAction=function(t){switch(void 0===t?"undefined":s(t)){case"string":this.pasteAction=this.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t}},y.prototype.setPasteParser=function(t){switch(void 0===t?"undefined":s(t)){case"string":this.pasteParser=this.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t}},y.prototype.paste=function(t){var e,i,n;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),(i=this.pasteParser.call(this,e))?(t.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),n=this.pasteAction.call(this,i),this.table.options.clipboardPasted.call(this.table,e,i,n)):this.table.options.clipboardPasteError.call(this.table,e))},y.prototype.mutateData=function(t){var e=this,i=[];return Array.isArray(t)?t.forEach((function(t){i.push(e.table.modules.mutator.transformRow(t,"clipboard"))})):i=t,i},y.prototype.checkPaseOrigin=function(t){var e=!0;return("DIV"!=t.target.tagName||this.table.modules.edit.currentCell)&&(e=!1),e},y.prototype.getPasteData=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e},y.prototype.pasteParsers={table:function(t){var e=[],i=!0,n=this.table.columnManager.columns,o=[],r=[];return(t=t.split("\n")).forEach((function(t){e.push(t.split("\t"))})),!(!e.length||1===e.length&&e[0].length<2)&&(e[0].forEach((function(t){var e=n.find((function(e){return t&&e.definition.title&&t.trim()&&e.definition.title.trim()===t.trim()}));e?o.push(e):i=!1})),i||(i=!0,o=[],e[0].forEach((function(t){var e=n.find((function(e){return t&&e.field&&t.trim()&&e.field.trim()===t.trim()}));e?o.push(e):i=!1})),i||(o=this.table.columnManager.columnsByIndex)),i&&e.shift(),e.forEach((function(t){var e={};t.forEach((function(t,i){o[i]&&(e[o[i].field]=t)})),r.push(e)})),r)}},y.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},h.prototype.registerModule("clipboard",y);var b=function(t){this.table=t,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0};b.prototype.initialize=function(){var t=null,e=this.table.columnManager.getFirstVisibileColumn(),i=this.table.options;switch(this.field=i.dataTreeChildField,this.indent=i.dataTreeChildIndent,this.elementField=i.dataTreeElementColumn||!!e&&e.field,i.dataTreeBranchElement&&(!0===i.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof i.dataTreeBranchElement?((t=document.createElement("div")).innerHTML=i.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=i.dataTreeBranchElement),i.dataTreeCollapseElement?"string"==typeof i.dataTreeCollapseElement?((t=document.createElement("div")).innerHTML=i.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=i.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),i.dataTreeExpandElement?"string"==typeof i.dataTreeExpandElement?((t=document.createElement("div")).innerHTML=i.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=i.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),s(i.dataTreeStartExpanded)){case"boolean":this.startOpen=function(t,e){return i.dataTreeStartExpanded};break;case"function":this.startOpen=i.dataTreeStartExpanded;break;default:this.startOpen=function(t,e){return i.dataTreeStartExpanded[e]}}},b.prototype.initializeRow=function(t){var e=t.getData()[this.field],i=Array.isArray(e),n=i||!i&&"object"===(void 0===e?"undefined":s(e))&&null!==e;!n&&t.modules.dataTree&&t.modules.dataTree.branchEl&&t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl),!n&&t.modules.dataTree&&t.modules.dataTree.controlEl&&t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl),t.modules.dataTree={index:0,open:!!n&&(t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0)),controlEl:!(!t.modules.dataTree||!n)&&t.modules.dataTree.controlEl,branchEl:!(!t.modules.dataTree||!n)&&t.modules.dataTree.branchEl,parent:!1,children:n}},b.prototype.layoutRow=function(t){var e=(this.elementField?t.getCell(this.elementField):t.getCells()[0]).getElement(),i=t.modules.dataTree;i.branchEl&&(i.branchEl.parentNode.removeChild(i.branchEl),i.branchEl=!1),i.controlEl&&(i.controlEl.parentNode.removeChild(i.controlEl),i.controlEl=!1),this.generateControlElement(t,e),t.element.classList.add("tabulator-tree-level-"+i.index),i.index&&(this.branchEl?(i.branchEl=this.branchEl.cloneNode(!0),e.insertBefore(i.branchEl,e.firstChild),i.branchEl.style.marginLeft=(i.branchEl.offsetWidth+i.branchEl.style.marginRight)*(i.index-1)+i.index*this.indent+"px"):e.style.paddingLeft=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+i.index*this.indent+"px")},b.prototype.generateControlElement=function(t,e){var i=this,n=t.modules.dataTree,o=(e=e||t.getCells()[0].getElement(),n.controlEl);!1!==n.children&&(n.open?(n.controlEl=this.collapseEl.cloneNode(!0),n.controlEl.addEventListener("click",(function(e){e.stopPropagation(),i.collapseRow(t)}))):(n.controlEl=this.expandEl.cloneNode(!0),n.controlEl.addEventListener("click",(function(e){e.stopPropagation(),i.expandRow(t)}))),n.controlEl.addEventListener("mousedown",(function(t){t.stopPropagation()})),o&&o.parentNode===e?o.parentNode.replaceChild(n.controlEl,o):e.insertBefore(n.controlEl,e.firstChild))},b.prototype.setDisplayIndex=function(t){this.displayIndex=t},b.prototype.getDisplayIndex=function(){return this.displayIndex},b.prototype.getRows=function(t){var e=this,i=[];return t.forEach((function(t,n){var o;i.push(t),t instanceof a&&((o=t.modules.dataTree.children).index||!1===o.children||e.getChildren(t).forEach((function(t){i.push(t)})))})),i},b.prototype.getChildren=function(t){var e=this,i=t.modules.dataTree,n=[],o=[];return!1!==i.children&&i.open&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),n=this.table.modExists("filter")?this.table.modules.filter.filter(i.children):i.children,this.table.modExists("sort")&&this.table.modules.sort.sort(n),n.forEach((function(t){o.push(t),e.getChildren(t).forEach((function(t){o.push(t)}))}))),o},b.prototype.generateChildren=function(t){var e=this,i=[],n=t.getData()[this.field];return Array.isArray(n)||(n=[n]),n.forEach((function(n){var o=new a(n||{},e.table.rowManager);o.modules.dataTree.index=t.modules.dataTree.index+1,o.modules.dataTree.parent=t,o.modules.dataTree.children&&(o.modules.dataTree.open=e.startOpen(o.getComponent(),o.modules.dataTree.index)),i.push(o)})),i},b.prototype.expandRow=function(t,e){var i=t.modules.dataTree;!1!==i.children&&(i.open=!0,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(t.getComponent(),t.modules.dataTree.index))},b.prototype.collapseRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open=!1,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(t.getComponent(),t.modules.dataTree.index))},b.prototype.toggleRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open?this.collapseRow(t):this.expandRow(t))},b.prototype.getTreeParent=function(t){return!!t.modules.dataTree.parent&&t.modules.dataTree.parent.getComponent()},b.prototype.getFilteredTreeChildren=function(t){var e=t.modules.dataTree,i=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),(this.table.modExists("filter")?this.table.modules.filter.filter(e.children):e.children).forEach((function(t){t instanceof a&&i.push(t)}))),i},b.prototype.getTreeChildren=function(t){var e=t.modules.dataTree,i=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),e.children.forEach((function(t){t instanceof a&&i.push(t.getComponent())}))),i},b.prototype.checkForRestyle=function(t){t.row.cells.indexOf(t)||!1!==t.row.modules.dataTree.children&&t.row.reinitialize()},b.prototype.getChildField=function(){return this.field},b.prototype.redrawNeeded=function(t){return!!this.field&&void 0!==t[this.field]||!!this.elementField&&void 0!==t[this.elementField]},h.prototype.registerModule("dataTree",b);var w=function(t){this.table=t,this.fields={},this.columnsByIndex=[],this.columnsByField={},this.config={},this.active=!1};w.prototype.download=function(t,e,i,n,o){var r=this,a=!1;this.processConfig(),this.active=n,"function"==typeof t?a=t:r.downloaders[t]?a=r.downloaders[t]:console.warn("Download Error - No such download type found: ",t),this.processColumns(),a&&a.call(this,r.processDefinitions(),r.processData(n||"active"),i||{},(function(i,n){o?!0===o?r.triggerDownload(i,n,t,e,!0):o(i):r.triggerDownload(i,n,t,e)}),this.config)},w.prototype.processConfig=function(){var t={columnGroups:!0,rowGroups:!0,columnCalcs:!0,dataTree:!0};if(this.table.options.downloadConfig)for(var e in this.table.options.downloadConfig)t[e]=this.table.options.downloadConfig[e];this.config.rowGroups=t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows"),t.columnGroups&&this.table.columnManager.columns.length!=this.table.columnManager.columnsByIndex.length&&(this.config.columnGroups=!0),t.columnCalcs&&this.table.modExists("columnCalcs")&&(this.config.columnCalcs=!0),t.dataTree&&this.table.options.dataTree&&this.table.modExists("dataTree")&&(this.config.dataTree=!0)},w.prototype.processColumns=function(){var t=this;t.columnsByIndex=[],t.columnsByField={},t.table.columnManager.columnsByIndex.forEach((function(e){e.field&&!1!==e.definition.download&&(e.visible||!e.visible&&e.definition.download)&&(t.columnsByIndex.push(e),t.columnsByField[e.field]=e)}))},w.prototype.processDefinitions=function(){var t=this,e=[];return this.config.columnGroups?t.table.columnManager.columns.forEach((function(i){var n=t.processColumnGroup(i);n&&e.push(n)})):t.columnsByIndex.forEach((function(i){!1!==i.download&&e.push(t.processDefinition(i))})),e},w.prototype.processColumnGroup=function(t){var e=this,i=t.columns,n=0,o=this.processDefinition(t),r={type:"group",title:o.title,depth:1};if(i.length){if(r.subGroups=[],r.width=0,i.forEach((function(t){var i=e.processColumnGroup(t);i.depth>n&&(n=i.depth),i&&(r.width+=i.width,r.subGroups.push(i))})),r.depth+=n,!r.width)return!1}else{if(!t.field||!1===t.definition.download||!(t.visible||!t.visible&&t.definition.download))return!1;r.width=1,r.definition=o}return r},w.prototype.processDefinition=function(t){var e={};for(var i in t.definition)e[i]=t.definition[i];return void 0!==t.definition.downloadTitle&&(e.title=t.definition.downloadTitle),e},w.prototype.processData=function(t){var e=this,i=[],n=[],o=!1,r={};return this.config.rowGroups?("visible"==t?(o=this.table.rowManager.getRows(t)).forEach((function(t){if("row"==t.type){var e=t.getGroup();-1===n.indexOf(e)&&n.push(e)}})):n=this.table.modules.groupRows.getGroups(),n.forEach((function(t){i.push(e.processGroupData(t,o))}))):(this.config.dataTree&&(t=t="display"),i=this.table.rowManager.getData(t,"download")),this.config.columnCalcs&&(r=this.table.getCalcResults(),i={calcs:r,data:i}),"function"==typeof this.table.options.downloadDataFormatter&&(i=this.table.options.downloadDataFormatter(i)),i},w.prototype.processGroupData=function(t,e){var i=this,n=t.getSubGroups(),o={type:"group",key:t.key};return n.length?(o.subGroups=[],n.forEach((function(t){o.subGroups.push(i.processGroupData(t,e))}))):e?(o.rows=[],t.rows.forEach((function(t){e.indexOf(t)>-1&&o.rows.push(t.getData("download"))}))):o.rows=t.getData(!0,"download"),o},w.prototype.triggerDownload=function(t,e,i,n,o){var r=document.createElement("a"),a=new Blob([t],{type:e});n=n||"Tabulator."+("function"==typeof i?"txt":i),(a=this.table.options.downloadReady.call(this.table,t,a))&&(o?window.open(window.URL.createObjectURL(a)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,n):(r.setAttribute("href",window.URL.createObjectURL(a)),r.setAttribute("download",n),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},w.prototype.getFieldValue=function(t,e){var i=this.columnsByField[t];return!!i&&i.getFieldValue(e)},w.prototype.commsReceived=function(t,e,i){switch(e){case"intercept":this.download(i.type,"",i.options,i.active,i.intercept)}},w.prototype.downloaders={csv:function(t,e,i,n,o){var r,a,l=this,c=[],u=[],h=i&&i.delimiter?i.delimiter:",";function d(t){t.forEach((function(t){var e=[];u.forEach((function(i){var n=l.getFieldValue(i,t);switch(void 0===n?"undefined":s(n)){case"object":n=JSON.stringify(n);break;case"undefined":case"null":n="";break;default:n=n}e.push('"'+String(n).split('"').join('""')+'"')})),r.push(e.join(h))}))}o.columnGroups?(console.warn("Download Warning - CSV downloader cannot process column groups"),t.forEach((function(t){!function t(e,i){e.subGroups?e.subGroups.forEach((function(e){t(e,i+1)})):(c.push('"'+String(e.title).split('"').join('""')+'"'),u.push(e.definition.field))}(t,0)}))):t.forEach((function(t){c.push('"'+String(t.title).split('"').join('""')+'"'),u.push(t.field)})),r=[c.join(h)],o.columnCalcs&&(console.warn("Download Warning - CSV downloader cannot process column calculations"),e=e.data),o.rowGroups?(console.warn("Download Warning - CSV downloader cannot process row groups"),e.forEach((function(t){!function t(e){e.subGroups?e.subGroups.forEach((function(e){t(e)})):d(e.rows)}(t)}))):d(e),a=r.join("\n"),i.bom&&(a="\ufeff"+a),n(a,"text/csv")},json:function(t,e,i,n,o){o.columnCalcs&&(console.warn("Download Warning - CSV downloader cannot process column calculations"),e=e.data),n(JSON.stringify(e,null,"\t"),"application/json")},pdf:function(t,e,i,n,o){var r=this,a=[],l=[],c=[],u={},h=1,d={},p=i.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},f=i.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},g=i.jsPDF||{},m=i&&i.title?i.title:"";if(o.columnCalcs&&(u=e.calcs,e=e.data),g.orientation||(g.orientation=i.orientation||"landscape"),g.unit||(g.unit="pt"),o.columnGroups){t.forEach((function(t){t.depth>h&&(h=t.depth)}));for(var v=0;v<h;v++)l.push([]);t.forEach((function(t){!function t(e,i){var n=e.width,o=1,r={content:e.title||""};if(e.subGroups?(e.subGroups.forEach((function(e){t(e,i+1)})),o=1):(a.push(e.definition.field),o=h-i),r.rowSpan=o,l[i].push(r),n--,o>1)for(var s=i+1;s<h;s++)l[s].push("");for(s=0;s<n;s++)l[i].push("")}(t,0)}))}else t.forEach((function(t){t.field&&(l.push(t.title||""),a.push(t.field))})),l=[l];function y(t){switch(void 0===t?"undefined":s(t)){case"object":t=JSON.stringify(t);break;case"undefined":case"null":t="";break;default:t=t}return t}function b(t){t.forEach((function(t){c.push(w(t))}))}function w(t,e){var i=[];return a.forEach((function(n){var o=r.getFieldValue(n,t);o=y(o),e?i.push({content:o,styles:e}):i.push(o)})),i}function _(t,e,i){var n=t[e];n&&(i&&(n=n[i]),Object.keys(n).length&&c.push(w(n,f)))}o.rowGroups?e.forEach((function(t){!function t(e,i){var n=[];n.push({content:y(e.key),colSpan:a.length,styles:p}),c.push(n),e.subGroups?e.subGroups.forEach((function(n){t(n,i[e.key]&&i[e.key].groups||{})})):(o.columnCalcs&&_(i,e.key,"top"),b(e.rows),o.columnCalcs&&_(i,e.key,"bottom"))}(t,u)})):(o.columnCalcs&&_(u,"top"),b(e),o.columnCalcs&&_(u,"bottom"));var x=new jsPDF(g);i&&i.autoTable&&(d="function"==typeof i.autoTable?i.autoTable(x)||{}:i.autoTable),m&&(d.addPageContent=function(t){x.text(m,40,30)}),d.head=l,d.body=c,x.autoTable(d),i&&i.documentProcessing&&i.documentProcessing(x),n(x.output("arraybuffer"),"application/pdf")},xlsx:function(t,e,i,n,o){var r=this,a=i.sheetName||"Sheet1",l=XLSX.utils.book_new(),c={},u=[],h=[],d=[];function p(){var i=[],n=[],a=[];function l(t,e){var o;void 0===i[e]&&(i[e]=[]),void 0===h[e]&&(h[e]=[]),t.width>1&&h[e].push({type:"hoz",start:i[e].length,end:i[e].length+t.width-1}),i[e].push(t.title),t.subGroups?t.subGroups.forEach((function(t){l(t,e+1)})):(n.push(t.definition.field),n.length,o=0,i.forEach((function(t){var e=t.length;e>o&&(o=e)})),i.forEach((function(t){var e=t.length;if(e<o)for(var i=e;i<o;i++)t.push("")})),h[e].push({type:"vert",start:n.length-1}))}function p(t){t.forEach((function(t){a.push(f(t))}))}function f(t){var e=[];return n.forEach((function(i){var n=r.getFieldValue(i,t);e.push(n instanceof Date||"object"!==(void 0===n?"undefined":s(n))?n:JSON.stringify(n))})),e}function g(t,e,i){var n=t[e];n&&(i&&(n=n[i]),Object.keys(n).length&&(d.push(a.length),a.push(f(n))))}return o.columnGroups?(t.forEach((function(t){l(t,0)})),i.forEach((function(t){a.push(t)}))):(t.forEach((function(t){i.push(t.title),n.push(t.field)})),a.push(i)),o.rowGroups?e.forEach((function(t){!function t(e,i){var n=[];n.push(e.key),u.push(a.length),a.push(n),e.subGroups?e.subGroups.forEach((function(n){t(n,i[e.key]&&i[e.key].groups||{})})):(o.columnCalcs&&g(i,e.key,"top"),p(e.rows),o.columnCalcs&&g(i,e.key,"bottom"))}(t,c)})):(o.columnCalcs&&g(c,"top"),p(e),o.columnCalcs&&g(c,"bottom")),function(){var t={},e={s:{c:0,r:0},e:{c:n.length,r:a.length}};XLSX.utils.sheet_add_aoa(t,a),t["!ref"]=XLSX.utils.encode_range(e);var o=function(){var t=[];return u.forEach((function(e){t.push({s:{r:e,c:0},e:{r:e,c:n.length-1}})})),h.forEach((function(e,n){e.forEach((function(e){"hoz"===e.type?t.push({s:{r:n,c:e.start},e:{r:n,c:e.end}}):n!=i.length-1&&t.push({s:{r:n,c:e.start},e:{r:i.length-1,c:e.start}})}))})),t}();return o.length&&(t["!merges"]=o),t}()}if(l.SheetNames=[],l.Sheets={},o.columnCalcs&&(c=e.calcs,e=e.data),i.sheetOnly)n(p());else{if(i.sheets)for(var f in i.sheets)!0===i.sheets[f]?(l.SheetNames.push(f),l.Sheets[f]=p()):(l.SheetNames.push(f),this.table.modules.comms.send(i.sheets[f],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:r.active,intercept:function(t){l.Sheets[f]=t}}));else l.SheetNames.push(a),l.Sheets[a]=p();i.documentProcessing&&(l=i.documentProcessing(l)),n(function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n!=t.length;++n)i[n]=255&t.charCodeAt(n);return e}(XLSX.write(l,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(t,e,i,n,o){this.table.modExists("export",!0)&&n(this.table.modules.export.getHtml(!0,i.style,o),"text/html")}},h.prototype.registerModule("download",w);var _=function(t){this.table=t,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1};_.prototype.initializeColumn=function(t){var e={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(s(t.definition.editor)){case"string":"tick"===t.definition.editor&&(t.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[t.definition.editor]?e.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":e.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("function"!=typeof t.definition.formatter?("tick"===t.definition.formatter&&(t.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[t.definition.formatter]?e.editor=this.editors[t.definition.formatter]:e.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter))}e.editor&&(t.modules.edit=e)},_.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},_.prototype.clearEditor=function(){var t,e=this.currentCell;if(this.invalidEdit=!1,e){for(this.currentCell=!1,(t=e.getElement()).classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);e.row.getElement().classList.remove("tabulator-row-editing")}},_.prototype.cancelEdit=function(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(),t.setValueActual(t.getValue()),t.column.cellEvents.cellEditCancelled&&t.column.cellEvents.cellEditCancelled.call(this.table,e),this.table.options.cellEditCancelled.call(this.table,e)}},_.prototype.bindEditor=function(t){var e=this,i=t.getElement();i.setAttribute("tabindex",0),i.addEventListener("click",(function(t){i.classList.contains("tabulator-editing")||i.focus()})),i.addEventListener("mousedown",(function(t){e.mouseClick=!0})),i.addEventListener("focus",(function(i){e.recursionBlock||e.edit(t,i,!1)}))},_.prototype.focusCellNoEvent=function(t,e){this.recursionBlock=!0,e&&"ie"===this.table.browser||t.getElement().focus(),this.recursionBlock=!1},_.prototype.editCell=function(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)},_.prototype.edit=function(t,e,i){var n,o,r,a=this,l=!0,c=function(){},u=t.getElement();if(!this.currentCell){if(t.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(e&&e.stopPropagation(),s(t.column.modules.edit.check)){case"function":l=t.column.modules.edit.check(t.getComponent());break;case"boolean":l=t.column.modules.edit.check}if(l||i){if(a.cancelEdit(),a.currentCell=t,o=t.getComponent(),this.mouseClick&&(this.mouseClick=!1,t.column.cellEvents.cellClick&&t.column.cellEvents.cellClick.call(this.table,e,o)),t.column.cellEvents.cellEditing&&t.column.cellEvents.cellEditing.call(this.table,o),a.table.options.cellEditing.call(this.table,o),r="function"==typeof t.column.modules.edit.params?t.column.modules.edit.params(o):t.column.modules.edit.params,!1===(n=t.column.modules.edit.editor.call(a,o,(function(t){c=t}),(function(e){if(a.currentCell===t){var i=!0;return t.column.modules.validate&&a.table.modExists("validate")&&(i=a.table.modules.validate.validate(t.column.modules.validate,t.getComponent(),e)),!0===i?(a.clearEditor(),t.setValue(e,!0),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(t),!0):(a.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(t,!0),c(),a.table.options.validationFailed.call(a.table,t.getComponent(),e,i),!1)}}),(function(){a.currentCell===t&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(t))}),r)))return u.blur(),!1;if(!(n instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",n),u.blur(),!1;for(u.classList.add("tabulator-editing"),t.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(n),c();for(var h=u.children,d=0;d<h.length;d++)h[d].addEventListener("click",(function(t){t.stopPropagation()}));return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()},_.prototype.maskInput=function(t,e){var i=e.mask,n=void 0!==e.maskLetterChar?e.maskLetterChar:"A",o=void 0!==e.maskNumberChar?e.maskNumberChar:"9",r=void 0!==e.maskWildcardChar?e.maskWildcardChar:"*";function a(e){var s=i[e];void 0!==s&&s!==r&&s!==n&&s!==o&&(t.value=t.value+""+s,a(e+1))}t.addEventListener("keydown",(function(e){var a=t.value.length,s=e.key;if(e.keyCode>46){if(a>=i.length)return e.preventDefault(),e.stopPropagation(),!1;switch(i[a]){case n:if(s.toUpperCase()==s.toLowerCase())return e.preventDefault(),e.stopPropagation(),!1;break;case o:if(isNaN(s))return e.preventDefault(),e.stopPropagation(),!1;break;case r:break;default:if(s!==i[a])return e.preventDefault(),e.stopPropagation(),!1}}})),t.addEventListener("keyup",(function(i){i.keyCode>46&&e.maskAutoFill&&a(t.value.length)})),t.placeholder||(t.placeholder=i),e.maskAutoFill&&a(t.value.length)},_.prototype.editors={input:function(t,e,i,n,o){var r=t.getValue(),a=document.createElement("input");if(a.setAttribute("type",o.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",o.elementAttributes&&"object"==s(o.elementAttributes))for(var l in o.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+o.elementAttributes["+"+l])):a.setAttribute(l,o.elementAttributes[l]);function c(t){null==r&&""!==a.value||a.value!==r?i(a.value)&&(r=a.value):n()}return a.value=void 0!==r?r:"",e((function(){a.focus(),a.style.height="100%"})),a.addEventListener("change",c),a.addEventListener("blur",c),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:c();break;case 27:n()}})),o.mask&&this.table.modules.edit.maskInput(a,o),a},textarea:function(t,e,i,n,o){var r=t.getValue(),a=o.verticalNavigation||"hybrid",l=String(null!=r?r:""),c=((l.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),u=0;if(c.style.display="block",c.style.padding="2px",c.style.height="100%",c.style.width="100%",c.style.boxSizing="border-box",c.style.whiteSpace="pre-wrap",c.style.resize="none",o.elementAttributes&&"object"==s(o.elementAttributes))for(var h in o.elementAttributes)"+"==h.charAt(0)?(h=h.slice(1),c.setAttribute(h,c.getAttribute(h)+o.elementAttributes["+"+h])):c.setAttribute(h,o.elementAttributes[h]);function d(e){null==r&&""!==c.value||c.value!==r?(i(c.value)&&(r=c.value),setTimeout((function(){t.getRow().normalizeHeight()}),300)):n()}return c.value=l,e((function(){c.focus(),c.style.height="100%"})),c.addEventListener("change",d),c.addEventListener("blur",d),c.addEventListener("keyup",(function(){c.style.height="";var e=c.scrollHeight;c.style.height=e+"px",e!=u&&(u=e,t.getRow().normalizeHeight())})),c.addEventListener("keydown",(function(t){switch(t.keyCode){case 27:n();break;case 38:("editor"==a||"hybrid"==a&&c.selectionStart)&&(t.stopImmediatePropagation(),t.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&c.selectionStart!==c.value.length)&&(t.stopImmediatePropagation(),t.stopPropagation())}})),o.mask&&this.table.modules.edit.maskInput(c,o),c},number:function(t,e,i,n,o){var r=t.getValue(),a=o.verticalNavigation||"editor",l=document.createElement("input");if(l.setAttribute("type","number"),void 0!==o.max&&l.setAttribute("max",o.max),void 0!==o.min&&l.setAttribute("min",o.min),void 0!==o.step&&l.setAttribute("step",o.step),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",o.elementAttributes&&"object"==s(o.elementAttributes))for(var c in o.elementAttributes)"+"==c.charAt(0)?(c=c.slice(1),l.setAttribute(c,l.getAttribute(c)+o.elementAttributes["+"+c])):l.setAttribute(c,o.elementAttributes[c]);l.value=r;var u=function(t){h()};function h(){var t=l.value;isNaN(t)||""===t||(t=Number(t)),t!==r?i(t)&&(r=t):n()}return e((function(){l.removeEventListener("blur",u),l.focus(),l.style.height="100%",l.addEventListener("blur",u)})),l.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:h();break;case 27:n();break;case 38:case 40:"editor"==a&&(t.stopImmediatePropagation(),t.stopPropagation())}})),o.mask&&this.table.modules.edit.maskInput(l,o),l},range:function(t,e,i,n,o){var r=t.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==o.max&&a.setAttribute("max",o.max),void 0!==o.min&&a.setAttribute("min",o.min),void 0!==o.step&&a.setAttribute("step",o.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",o.elementAttributes&&"object"==s(o.elementAttributes))for(var l in o.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+o.elementAttributes["+"+l])):a.setAttribute(l,o.elementAttributes[l]);function c(){var t=a.value;isNaN(t)||""===t||(t=Number(t)),t!=r?i(t)&&(r=t):n()}return a.value=r,e((function(){a.focus(),a.style.height="100%"})),a.addEventListener("blur",(function(t){c()})),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:case 9:c();break;case 27:n()}})),a},select:function(t,e,i,n,o){var r=this,a=t.getElement(),l=t.getValue(),c=o.verticalNavigation||"editor",u=void 0!==l||null===l?l:void 0!==o.defaultValue?o.defaultValue:"",d=document.createElement("input"),p=document.createElement("div"),f=[],g=[],m={},v=!0;function y(e){var i,n={},a=r.table.getData();return(i=e?r.table.columnManager.getColumnByField(e):t.getColumn()._getSelf())?(a.forEach((function(t){var e=i.getFieldValue(t);null!=e&&""!==e&&(n[e]=!0)})),n=o.sortValuesList?"asc"==o.sortValuesList?Object.keys(n).sort():Object.keys(n).sort().reverse():Object.keys(n)):console.warn("unable to find matching column to create select lookup list:",e),n}function b(e,i){var n=[],r=[];function a(t){return(t={label:o.listItemFormatter?o.listItemFormatter(t.value,t.label):t.label,value:t.value,element:!1}).value!==i&&(isNaN(parseFloat(t.value))||isNaN(parseFloat(t.value))||parseFloat(t.value)!==parseFloat(i))||w(t),n.push(t),r.push(t),t}if("function"==typeof e&&(e=e(t)),Array.isArray(e))e.forEach((function(t){var e;"object"===(void 0===t?"undefined":s(t))?t.options?(e={label:t.label,group:!0,element:!1},r.push(e),t.options.forEach((function(t){a(t)}))):a(t):((e={label:o.listItemFormatter?o.listItemFormatter(t,t):t,value:t,element:!1}).value!==i&&(isNaN(parseFloat(e.value))||isNaN(parseFloat(e.value))||parseFloat(e.value)!==parseFloat(i))||w(e),n.push(e),r.push(e))}));else for(var l in e){var c={label:o.listItemFormatter?o.listItemFormatter(l,e[l]):e[l],value:l,element:!1};c.value!==i&&(isNaN(parseFloat(c.value))||isNaN(parseFloat(c.value))||parseFloat(c.value)!==parseFloat(i))||w(c),n.push(c),r.push(c)}f=n,g=r,function(){for(;p.firstChild;)p.removeChild(p.firstChild);g.forEach((function(t){var e=t.element;e||(t.group?((e=document.createElement("div")).classList.add("tabulator-edit-select-list-group"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label):((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label,e.addEventListener("click",(function(){w(t),_()})),t===m&&e.classList.add("active")),e.addEventListener("mousedown",(function(){v=!1,setTimeout((function(){v=!0}),10)})),t.element=e),p.appendChild(e)}))}()}function w(t){m&&m.element&&m.element.classList.remove("active"),m=t,d.value="&nbsp;"===t.label?"":t.label,t.element&&t.element.classList.add("active")}function _(){C(),l!==m.value?(l=m.value,i(m.value)):n()}function x(){C(),n()}function C(){p.parentNode&&p.parentNode.removeChild(p),r.table.rowManager.element.removeEventListener("scroll",x)}if(this.table.rowManager.element.addEventListener("scroll",x),(Array.isArray(o)||!Array.isArray(o)&&"object"===(void 0===o?"undefined":s(o))&&!o.values)&&(console.warn("DEPRECATION WANRING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),o={values:o}),d.setAttribute("type","text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",d.style.cursor="default",d.readOnly=0!=this.currentCell,o.elementAttributes&&"object"==s(o.elementAttributes))for(var E in o.elementAttributes)"+"==E.charAt(0)?(E=E.slice(1),d.setAttribute(E,d.getAttribute(E)+o.elementAttributes["+"+E])):d.setAttribute(E,o.elementAttributes[E]);return d.value=void 0!==l||null===l?l:"",d.addEventListener("keydown",(function(t){var e;switch(t.keyCode){case 38:e=f.indexOf(m),("editor"==c||"hybrid"==c&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e>0&&w(f[e-1]));break;case 40:e=f.indexOf(m),("editor"==c||"hybrid"==c&&e<f.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<f.length-1&&w(-1==e?f[0]:f[e+1]));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case 13:_();break;case 27:x()}})),d.addEventListener("blur",(function(t){v&&x()})),d.addEventListener("focus",(function(t){!function(){if(!p.parentNode){!0===o.values?b(y(),u):"string"==typeof o.values?b(y(o.values),u):b(o.values||[],u);var t=h.prototype.helpers.elOffset(a);p.style.minWidth=a.offsetWidth+"px",p.style.top=t.top+a.offsetHeight+"px",p.style.left=t.left+"px",document.body.appendChild(p)}}()})),(p=document.createElement("div")).classList.add("tabulator-edit-select-list"),e((function(){d.style.height="100%",d.focus()})),d},autocomplete:function(t,e,i,n,o){var r=this,a=t.getElement(),l=t.getValue(),c=o.verticalNavigation||"editor",u=void 0!==l||null===l?l:void 0!==o.defaultValue?o.defaultValue:"",d=document.createElement("input"),p=document.createElement("div"),f=[],g=!1,m=!0;if(this.table.rowManager.element.addEventListener("scroll",S),d.setAttribute("type","search"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",o.elementAttributes&&"object"==s(o.elementAttributes))for(var v in o.elementAttributes)"+"==v.charAt(0)?(v=v.slice(1),d.setAttribute(v,d.getAttribute(v)+o.elementAttributes["+"+v])):d.setAttribute(v,o.elementAttributes[v]);function y(e){var i,n={},a=r.table.getData();return(i=e?r.table.columnManager.getColumnByField(e):t.getColumn()._getSelf())?(a.forEach((function(t){var e=i.getFieldValue(t);null!=e&&""!==e&&(n[e]=!0)})),n=o.sortValuesList?"asc"==o.sortValuesList?Object.keys(n).sort():Object.keys(n).sort().reverse():Object.keys(n)):console.warn("unable to find matching column to create autocomplete lookup list:",e),n}function b(t,e){var i,n,r=[];i=!0===o.values?y():"string"==typeof o.values?y(o.values):o.values||[],o.searchFunc?(r=o.searchFunc(t,i))instanceof Promise?(w(void 0!==o.searchingPlaceholder?o.searchingPlaceholder:"Searching..."),r.then((function(t){C(_(t),e)})).catch((function(t){console.err("error in autocomplete search promise:",t)}))):C(_(r),e):(n=_(i),""===t?o.showListOnEmpty&&(r=n):n.forEach((function(e){null===e.value&&void 0===e.value||(String(e.value).toLowerCase().indexOf(String(t).toLowerCase())>-1||String(e.title).toLowerCase().indexOf(String(t).toLowerCase())>-1)&&r.push(e)})),C(r,e))}function w(t){var e=document.createElement("div");x(),!1!==t&&(e.classList.add("tabulator-edit-select-list-notice"),e.tabIndex=0,t instanceof Node?e.appendChild(t):e.innerHTML=t,p.appendChild(e))}function _(t){var e=[];if(Array.isArray(t))t.forEach((function(t){var i={title:o.listItemFormatter?o.listItemFormatter(t,t):t,value:t};e.push(i)}));else for(var i in t){var n={title:o.listItemFormatter?o.listItemFormatter(i,t[i]):t[i],value:i};e.push(n)}return e}function x(){for(;p.firstChild;)p.removeChild(p.firstChild)}function C(t,e){t.length?function(t,e){var i=!1;x(),(f=t).forEach((function(t){var n=t.element;n||((n=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),n.tabIndex=0,n.innerHTML=t.title,n.addEventListener("click",(function(){k(t),E()})),n.addEventListener("mousedown",(function(){m=!1,setTimeout((function(){m=!0}),10)})),t.element=n,e&&t.value==l&&(d.value=t.title,t.element.classList.add("active"),i=!0),t===g&&(t.element.classList.add("active"),i=!0)),p.appendChild(n)})),i||k(!1)}(t,e):o.emptyPlaceholder&&w(o.emptyPlaceholder)}function E(){T(),g?l!==g.value?(l=g.value,d.value=g.title,i(g.value)):n():o.freetext||o.allowEmpty&&""===d.value?(l=d.value,i(d.value)):n()}function k(t,e){g&&g.element&&g.element.classList.remove("active"),g=t,t&&t.element&&t.element.classList.add("active")}function T(){p.parentNode&&p.parentNode.removeChild(p),r.table.rowManager.element.removeEventListener("scroll",S)}function S(){T(),n()}return p.classList.add("tabulator-edit-select-list"),d.addEventListener("keydown",(function(t){var e;switch(t.keyCode){case 38:e=f.indexOf(g),("editor"==c||"hybrid"==c&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),k(e>0&&f[e-1]));break;case 40:e=f.indexOf(g),("editor"==c||"hybrid"==c&&e<f.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<f.length-1&&k(-1==e?f[0]:f[e+1]));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case 13:E();break;case 27:S();break;case 36:case 35:t.stopImmediatePropagation()}})),d.addEventListener("keyup",(function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:b(d.value)}})),d.addEventListener("search",(function(t){b(d.value)})),d.addEventListener("blur",(function(t){m&&E()})),d.addEventListener("focus",(function(t){var e=u;!function(){if(!p.parentNode){for(;p.firstChild;)p.removeChild(p.firstChild);var t=h.prototype.helpers.elOffset(a);p.style.minWidth=a.offsetWidth+"px",p.style.top=t.top+a.offsetHeight+"px",p.style.left=t.left+"px",document.body.appendChild(p)}}(),d.value=e,b(e,!0)})),e((function(){d.style.height="100%",d.focus()})),o.mask&&this.table.modules.edit.maskInput(d,o),d},star:function(t,e,i,n,o){var r=this,a=t.getElement(),l=t.getValue(),c=a.getElementsByTagName("svg").length||5,u=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],d=document.createElement("div"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(t){h.forEach((function(e,i){i<t?("ie"==r.table.browser?e.setAttribute("class","tabulator-star-active"):e.classList.replace("tabulator-star-inactive","tabulator-star-active"),e.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==r.table.browser?e.setAttribute("class","tabulator-star-inactive"):e.classList.replace("tabulator-star-active","tabulator-star-inactive"),e.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')}))}function g(t){var e=document.createElement("span"),n=p.cloneNode(!0);h.push(n),e.addEventListener("mouseenter",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),f(t)})),e.addEventListener("mousemove",(function(t){t.stopPropagation(),t.stopImmediatePropagation()})),e.addEventListener("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),i(t)})),e.appendChild(n),d.appendChild(e)}function m(t){l=t,f(t)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",p.setAttribute("width",u),p.setAttribute("height",u),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",o.elementAttributes&&"object"==s(o.elementAttributes))for(var v in o.elementAttributes)"+"==v.charAt(0)?(v=v.slice(1),d.setAttribute(v,d.getAttribute(v)+o.elementAttributes["+"+v])):d.setAttribute(v,o.elementAttributes[v]);for(var y=1;y<=c;y++)g(y);return f(l=Math.min(parseInt(l),c)),d.addEventListener("mousemove",(function(t){f(0)})),d.addEventListener("click",(function(t){i(0)})),a.addEventListener("blur",(function(t){n()})),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 39:m(l+1);break;case 37:m(l-1);break;case 13:i(l);break;case 27:n()}})),d},progress:function(t,e,i,n,o){var r,a,l=t.getElement(),c=void 0===o.max?l.getElementsByTagName("div")[0].getAttribute("max")||100:o.max,u=void 0===o.min?l.getElementsByTagName("div")[0].getAttribute("min")||0:o.min,h=(c-u)/100,d=t.getValue()||0,p=document.createElement("div"),f=document.createElement("div");function g(){var t=h*Math.round(f.offsetWidth/(l.clientWidth/100))+u;i(t),l.setAttribute("aria-valuenow",t),l.setAttribute("aria-label",d)}if(p.style.position="absolute",p.style.right="0",p.style.top="0",p.style.bottom="0",p.style.width="5px",p.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",o.elementAttributes&&"object"==s(o.elementAttributes))for(var m in o.elementAttributes)"+"==m.charAt(0)?(m=m.slice(1),f.setAttribute(m,f.getAttribute(m)+o.elementAttributes["+"+m])):f.setAttribute(m,o.elementAttributes[m]);return l.style.padding="4px 4px",d=Math.min(parseFloat(d),c),d=Math.max(parseFloat(d),u),d=Math.round((d-u)/h),f.style.width=d+"%",l.setAttribute("aria-valuemin",u),l.setAttribute("aria-valuemax",c),f.appendChild(p),p.addEventListener("mousedown",(function(t){r=t.screenX,a=f.offsetWidth})),p.addEventListener("mouseover",(function(){p.style.cursor="ew-resize"})),l.addEventListener("mousemove",(function(t){r&&(f.style.width=a+t.screenX-r+"px")})),l.addEventListener("mouseup",(function(t){r&&(t.stopPropagation(),t.stopImmediatePropagation(),r=!1,a=!1,g())})),l.addEventListener("keydown",(function(t){switch(t.keyCode){case 39:f.style.width=f.clientWidth+l.clientWidth/100+"px";break;case 37:f.style.width=f.clientWidth-l.clientWidth/100+"px";break;case 13:g();break;case 27:n()}})),l.addEventListener("blur",(function(){n()})),f},tickCross:function(t,e,i,n,o){var r=t.getValue(),a=document.createElement("input"),l=o.tristate,c=void 0===o.indeterminateValue?null:o.indeterminateValue,u=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",o.elementAttributes&&"object"==s(o.elementAttributes))for(var h in o.elementAttributes)"+"==h.charAt(0)?(h=h.slice(1),a.setAttribute(h,a.getAttribute(h)+o.elementAttributes["+"+h])):a.setAttribute(h,o.elementAttributes[h]);function d(t){return l?t?u?c:a.checked:a.checked&&!u?(a.checked=!1,a.indeterminate=!0,u=!0,c):(u=!1,a.checked):a.checked}return a.value=r,!l||void 0!==r&&r!==c&&""!==r||(u=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&e((function(){a.focus()})),a.checked=!0===r||"true"===r||"True"===r||1===r,a.addEventListener("change",(function(t){i(d())})),a.addEventListener("blur",(function(t){i(d(!0))})),a.addEventListener("keydown",(function(t){13==t.keyCode&&i(d()),27==t.keyCode&&n()})),a}},h.prototype.registerModule("edit",_);var x=function(t){this.table=t,this.config={},this.cloneTableStyle=!0,this.colVisProp=""};x.prototype.genereateTable=function(t,e,i,n){this.cloneTableStyle=e,this.config=t||{},this.colVisProp=n;var o=document.createElement("table");return o.classList.add("tabulator-print-table"),!1!==this.config.columnHeaders&&o.appendChild(this.generateHeaderElements()),o.appendChild(this.generateBodyElements(this.rowLookup(i))),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o},x.prototype.rowLookup=function(t){var e=this,i=[];if("function"==typeof t)t.call(this.table).forEach((function(t){(t=e.table.rowManager.findRow(t))&&i.push(t)}));else switch(t){case!0:case"visible":i=this.table.rowManager.getVisibleRows(!0);break;case"all":i=this.table.rowManager.rows;break;case"selected":i=this.modules.selectRow.selectedRows;break;case"active":default:i=this.table.rowManager.getDisplayRows()}return Object.assign([],i)},x.prototype.generateColumnGroupHeaders=function(){var t=this,e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach((function(i){var n=t.processColumnGroup(i);n&&e.push(n)})),e},x.prototype.processColumnGroup=function(t){var e=this,i=t.columns,n=0,o={title:t.definition.title,column:t,depth:1};if(i.length){if(o.subGroups=[],o.width=0,i.forEach((function(t){var i=e.processColumnGroup(t);i&&(o.width+=i.width,o.subGroups.push(i),i.depth>n&&(n=i.depth))})),o.depth+=n,!o.width)return!1}else{if(!this.columnVisCheck(t))return!1;o.width=1}return o},x.prototype.groupHeadersToRows=function(t){var e=[],i=0;return t.forEach((function(t){t.depth>i&&(i=t.depth)})),t.forEach((function(t){!function t(n,o){var r=i-o;void 0===e[o]&&(e[o]=[]),n.height=n.subGroups?1:r-n.depth+1,e[o].push(n),n.subGroups&&n.subGroups.forEach((function(e){t(e,o+1)}))}(t,0)})),e},x.prototype.generateHeaderElements=function(){var t=this,e=document.createElement("thead");return this.groupHeadersToRows(this.generateColumnGroupHeaders()).forEach((function(i){var n=document.createElement("tr");t.mapElementStyles(t.table.columnManager.getHeadersElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),i.forEach((function(e){var i=document.createElement("th"),o=e.column.definition.cssClass?e.column.definition.cssClass.split(" "):[];i.colSpan=e.width,i.rowSpan=e.height,i.innerHTML=e.column.definition.title,t.cloneTableStyle&&(i.style.boxSizing="border-box"),o.forEach((function(t){i.classList.add(t)})),t.mapElementStyles(e.column.getElement(),i,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),t.mapElementStyles(e.column.contentElement,i,["padding-top","padding-left","padding-right","padding-bottom"]),e.column.visible?t.mapElementStyles(e.column.getElement(),i,["width"]):e.column.definition.width&&(i.style.width=e.column.definition.width+"px"),e.column.parent&&t.mapElementStyles(e.column.parent.groupElement,i,["border-top"]),n.appendChild(i)})),e.appendChild(n)})),e},x.prototype.generateBodyElements=function(t){},x.prototype.generateBodyElements=function(t){var e,i,n,o,r,a,l,c,u,h,d=this;h=null!==(h=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))])?h:this.table.options.rowFormatter,this.cloneTableStyle&&window.getComputedStyle&&(e=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),i=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),n=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),o=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),a=this.table.element.getElementsByClassName("tabulator-group")[0],o&&(l=o.getElementsByClassName("tabulator-cell"),r=l[0],l[l.length-1]));var p=document.createElement("tbody"),f=[];return!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&t.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&t.push(this.table.modules.columnCalcs.botRow)),this.table.columnManager.columnsByIndex.forEach((function(t){d.columnVisCheck(t)&&f.push(t)})),this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(u=this.table.modules.dataTree.elementField),(t=t.filter((function(t){switch(t.type){case"group":return!1!==d.config.rowGroups;case"calc":return!1!==d.config.columnCalcs}return!0}))).length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),t.forEach((function(t,o){var l=t.getData(d.colVisProp),g=document.createElement("tr");switch(g.classList.add("tabulator-print-table-row"),t.type){case"group":var m=document.createElement("td");m.colSpan=f.length,m.innerHTML=t.key,g.classList.add("tabulator-print-table-group"),d.mapElementStyles(a,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),d.mapElementStyles(a,m,["padding-top","padding-left","padding-right","padding-bottom"]),g.appendChild(m);break;case"calc":g.classList.add("tabulator-print-table-calcs");case"row":if(d.table.options.dataTree&&!1===d.config.dataTree&&t.modules.dataTree.parent)return;if(f.forEach((function(e,i){var n=document.createElement("td"),o=e.getFieldValue(l),a={modules:{},getValue:function(){return o},getField:function(){return e.definition.field},getElement:function(){return n},getColumn:function(){return e.getComponent()},getData:function(){return l},getRow:function(){return t.getComponent()},getComponent:function(){return a},column:e};if((e.definition.cssClass?e.definition.cssClass.split(" "):[]).forEach((function(t){n.classList.add(t)})),d.table.modExists("format")&&!1!==d.config.formatCells)o=d.table.modules.format.formatExportValue(a,d.colVisProp);else switch(void 0===o?"undefined":s(o)){case"object":o=JSON.stringify(o);break;case"undefined":case"null":o="";break;default:o=o}o instanceof Node?n.appendChild(o):n.innerHTML=o,r&&(d.mapElementStyles(r,n,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),e.definition.align&&(n.style.textAlign=e.definition.align)),d.table.options.dataTree&&!1!==d.config.dataTree&&(u&&u==e.field||!u&&0==i)&&(t.modules.dataTree.controlEl&&n.insertBefore(t.modules.dataTree.controlEl.cloneNode(!0),n.firstChild),t.modules.dataTree.branchEl&&n.insertBefore(t.modules.dataTree.branchEl.cloneNode(!0),n.firstChild)),g.appendChild(n),a.modules.format&&a.modules.format.renderedCallback&&a.modules.format.renderedCallback()})),c="calc"==t.type?n:o%2&&i?i:e,d.mapElementStyles(c,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),h&&!1!==d.config.formatCells){var v=t.getComponent();v.getElement=function(){return g},h(v)}}p.appendChild(g)})),p},x.prototype.columnVisCheck=function(t){return!1!==t.definition[this.colVisProp]&&(t.visible||!t.visible&&t.definition[this.colVisProp])},x.prototype.getHtml=function(t,e,i,n){var o=document.createElement("div");return o.appendChild(this.genereateTable(i||this.table.options.htmlOutputConfig,e,t,n||"htmlOutput")),o.innerHTML},x.prototype.mapElementStyles=function(t,e,i){if(this.cloneTableStyle&&t&&e){var n={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var o=window.getComputedStyle(t);i.forEach((function(t){e.style[n[t]]=o.getPropertyValue(t)}))}}},h.prototype.registerModule("export",x);var C=function(t){this.table=t,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1};C.prototype.initializeColumn=function(t,e){var i=this,n=t.getField();t.modules.filter={success:function(e){var o,r="input"==t.modules.filter.tagType&&"text"==t.modules.filter.attrType||"textarea"==t.modules.filter.tagType?"partial":"match",a="",l="";if(void 0===t.modules.filter.prevSuccess||t.modules.filter.prevSuccess!==e){if(t.modules.filter.prevSuccess=e,t.modules.filter.emptyFunc(e))delete i.headerFilters[n];else{switch(t.modules.filter.value=e,s(t.definition.headerFilterFunc)){case"string":i.filters[t.definition.headerFilterFunc]?(a=t.definition.headerFilterFunc,o=function(n){var o=t.definition.headerFilterFuncParams||{},r=t.getFieldValue(n);return o="function"==typeof o?o(e,r,n):o,i.filters[t.definition.headerFilterFunc](e,r,n,o)}):console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc);break;case"function":a=o=function(i){var n=t.definition.headerFilterFuncParams||{},o=t.getFieldValue(i);return n="function"==typeof n?n(e,o,i):n,t.definition.headerFilterFunc(e,o,i,n)}}if(!o)switch(r){case"partial":o=function(i){var n=t.getFieldValue(i);return null!=n&&String(n).toLowerCase().indexOf(String(e).toLowerCase())>-1},a="like";break;default:o=function(i){return t.getFieldValue(i)==e},a="="}i.headerFilters[n]={value:e,func:o,type:a}}l=JSON.stringify(i.headerFilters),i.prevHeaderFilterChangeCheck!==l&&(i.prevHeaderFilterChangeCheck=l,i.changed=!0,i.table.rowManager.filterRefresh())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(t)},C.prototype.generateHeaderFilterElement=function(t,e,i){var n,o,r,a,l,c,u,h=this,d=this,p=t.modules.filter.success,f=t.getField();if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode&&t.contentElement.removeChild(t.modules.filter.headerElement.parentNode),f){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t},(n=document.createElement("div")).classList.add("tabulator-header-filter"),s(t.definition.headerFilter)){case"string":d.table.modules.edit.editors[t.definition.headerFilter]?(o=d.table.modules.edit.editors[t.definition.headerFilter],"tick"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":o=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?o=t.modules.edit.editor:t.definition.formatter&&d.table.modules.edit.editors[t.definition.formatter]?(o=d.table.modules.edit.editors[t.definition.formatter],"tick"!==t.definition.formatter&&"tickCross"!==t.definition.formatter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):o=d.table.modules.edit.editors.input}if(o){if(a={getValue:function(){return void 0!==e?e:""},getField:function(){return t.definition.field},getElement:function(){return n},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},u="function"==typeof(u=t.definition.headerFilterParams||{})?u.call(d.table):u,!(r=o.call(this.table.modules.edit,a,(function(){}),p,(function(){}),u)))return void console.warn("Filter Error - Cannot add filter to "+f+" column, editor returned a value of false");if(!(r instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+f+" column, editor should return an instance of Node, the editor returned:",r);f?d.table.modules.localize.bind("headerFilters|columns|"+t.definition.field,(function(t){r.setAttribute("placeholder",void 0!==t&&t?t:d.table.modules.localize.getText("headerFilters|default"))})):d.table.modules.localize.bind("headerFilters|default",(function(t){r.setAttribute("placeholder",void 0!==d.column.definition.headerFilterPlaceholder&&d.column.definition.headerFilterPlaceholder?d.column.definition.headerFilterPlaceholder:t)})),r.addEventListener("click",(function(t){t.stopPropagation(),r.focus()})),r.addEventListener("focus",(function(t){var e=h.table.columnManager.element.scrollLeft;e!==h.table.rowManager.element.scrollLeft&&(h.table.rowManager.scrollHorizontal(e),h.table.columnManager.scrollHorizontal(e))})),l=!1,c=function(t){l&&clearTimeout(l),l=setTimeout((function(){p(r.value)}),d.table.options.headerFilterLiveFilterDelay)},t.modules.filter.headerElement=r,t.modules.filter.attrType=r.hasAttribute("type")?r.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=r.tagName.toLowerCase(),!1!==t.definition.headerFilterLiveFilter&&("autocomplete"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter&&("autocomplete"!==t.definition.editor&&"tickCross"!==t.definition.editor||!0!==t.definition.headerFilter)&&(r.addEventListener("keyup",c),r.addEventListener("search",c),"number"==t.modules.filter.attrType&&r.addEventListener("change",(function(t){p(r.value)})),"text"==t.modules.filter.attrType&&"ie"!==this.table.browser&&r.setAttribute("type","search")),"input"!=t.modules.filter.tagType&&"select"!=t.modules.filter.tagType&&"textarea"!=t.modules.filter.tagType||r.addEventListener("mousedown",(function(t){t.stopPropagation()}))),n.appendChild(r),t.contentElement.appendChild(n),i||d.headerFilterColumns.push(t)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)},C.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="none")}))},C.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="")}))},C.prototype.setHeaderFilterFocus=function(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())},C.prototype.getHeaderFilterValue=function(t){if(t.modules.filter&&t.modules.filter.headerElement)return t.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",t.getField())},C.prototype.setHeaderFilterValue=function(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e,!0),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},C.prototype.reloadHeaderFilter=function(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},C.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},C.prototype.setFilter=function(t,e,i){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:i}]),this.addFilter(t)},C.prototype.addFilter=function(t,e,i){var n=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach((function(t){(t=n.findFilter(t))&&(n.filterList.push(t),n.changed=!0)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},C.prototype.findFilter=function(t){var e,i=this;if(Array.isArray(t))return this.findSubFilters(t);var n=!1;return"function"==typeof t.field?n=function(e){return t.field(e,t.type||{})}:i.filters[t.type]?n=(e=i.table.columnManager.getColumnByField(t.field))?function(n){return i.filters[t.type](t.value,e.getFieldValue(n))}:function(e){return i.filters[t.type](t.value,e[t.field])}:console.warn("Filter Error - No such filter type found, ignoring: ",t.type),t.func=n,!!t.func&&t},C.prototype.findSubFilters=function(t){var e=this,i=[];return t.forEach((function(t){(t=e.findFilter(t))&&i.push(t)})),!!i.length&&i},C.prototype.getFilters=function(t,e){var i=[];return t&&(i=this.getHeaderFilters()),e&&i.forEach((function(t){"function"==typeof t.type&&(t.type="function")})),i=i.concat(this.filtersToArray(this.filterList,e))},C.prototype.filtersToArray=function(t,e){var i=this,n=[];return t.forEach((function(t){var o;Array.isArray(t)?n.push(i.filtersToArray(t,e)):(o={field:t.field,type:t.type,value:t.value},e&&"function"==typeof o.type&&(o.type="function"),n.push(o))})),n},C.prototype.getHeaderFilters=function(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t},C.prototype.removeFilter=function(t,e,i){var n=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach((function(t){var e=-1;(e="object"==s(t.field)?n.filterList.findIndex((function(e){return t===e})):n.filterList.findIndex((function(e){return t.field===e.field&&t.type===e.type&&t.value===e.value})))>-1?(n.filterList.splice(e,1),n.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},C.prototype.clearFilter=function(t){this.filterList=[],t&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},C.prototype.clearHeaderFilter=function(){var t=this;this.headerFilters={},t.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach((function(e){e.modules.filter.value=null,e.modules.filter.prevSuccess=void 0,t.reloadHeaderFilter(e)})),this.changed=!0},C.prototype.search=function(t,e,i,n){var o=this,r=[],a=[];return Array.isArray(e)||(e=[{field:e,type:i,value:n}]),e.forEach((function(t){(t=o.findFilter(t))&&a.push(t)})),this.table.rowManager.rows.forEach((function(e){var i=!0;a.forEach((function(t){o.filterRecurse(t,e.getData())||(i=!1)})),i&&r.push("data"===t?e.getData("data"):e.getComponent())})),r},C.prototype.filter=function(t,e){var i=this,n=[],o=[];return i.table.options.dataFiltering&&i.table.options.dataFiltering.call(i.table,i.getFilters()),i.table.options.ajaxFiltering||!i.filterList.length&&!Object.keys(i.headerFilters).length?n=t.slice(0):t.forEach((function(t){i.filterRow(t)&&n.push(t)})),i.table.options.dataFiltered&&(n.forEach((function(t){o.push(t.getComponent())})),i.table.options.dataFiltered.call(i.table,i.getFilters(),o)),n},C.prototype.filterRow=function(t,e){var i=this,n=!0,o=t.getData();for(var r in i.filterList.forEach((function(t){i.filterRecurse(t,o)||(n=!1)})),i.headerFilters)i.headerFilters[r].func(o)||(n=!1);return n},C.prototype.filterRecurse=function(t,e){var i=this,n=!1;return Array.isArray(t)?t.forEach((function(t){i.filterRecurse(t,e)&&(n=!0)})):n=t.func(e),n},C.prototype.filters={"=":function(t,e,i,n){return e==t},"<":function(t,e,i,n){return e<t},"<=":function(t,e,i,n){return e<=t},">":function(t,e,i,n){return e>t},">=":function(t,e,i,n){return e>=t},"!=":function(t,e,i,n){return e!=t},regex:function(t,e,i,n){return"string"==typeof t&&(t=new RegExp(t)),t.test(e)},like:function(t,e,i,n){return null==t?e===t:null!=e&&String(e).toLowerCase().indexOf(t.toLowerCase())>-1},in:function(t,e,i,n){return Array.isArray(t)?t.indexOf(e)>-1:(console.warn("Filter Error - filter value is not an array:",t),!1)}},h.prototype.registerModule("filter",C);var E=function(t){this.table=t};E.prototype.initializeColumn=function(t){t.modules.format=this.lookupFormatter(t,""),void 0!==t.definition.formatterPrint&&(t.modules.format.print=this.lookupFormatter(t,"Print")),void 0!==t.definition.formatterClipboard&&(t.modules.format.clipboard=this.lookupFormatter(t,"Clipboard")),void 0!==t.definition.formatterHtmlOutput&&(t.modules.format.htmlOutput=this.lookupFormatter(t,"HtmlOutput"))},E.prototype.lookupFormatter=function(t,e){var i={params:t.definition["formatter"+e+"Params"]||{}},n=t.definition["formatter"+e];switch(void 0===n?"undefined":s(n)){case"string":"tick"===n&&(n="tickCross",void 0===i.params.crossElement&&(i.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[n]?i.formatter=this.formatters[n]:(console.warn("Formatter Error - No such formatter found: ",n),i.formatter=this.formatters.plaintext);break;case"function":i.formatter=n;break;default:i.formatter=this.formatters.plaintext}return i},E.prototype.cellRendered=function(t){t.modules.format&&t.modules.format.renderedCallback&&t.modules.format.renderedCallback()},E.prototype.formatValue=function(t){var e=t.getComponent(),i="function"==typeof t.column.modules.format.params?t.column.modules.format.params(e):t.column.modules.format.params;return t.column.modules.format.formatter.call(this,e,i,(function(e){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=e}))},E.prototype.formatExportValue=function(t,e){var i,n=t.column.modules.format[e];return n?(i="function"==typeof n.params?n.params(component):n.params,n.formatter.call(this,t.getComponent(),i,(function(e){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=e}))):this.formatValue(t)},E.prototype.sanitizeHTML=function(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,(function(t){return e[t]}))}return t},E.prototype.emptyToSpace=function(t){return null==t?"&nbsp;":t},E.prototype.getFormatter=function(t){switch(void 0===t?"undefined":s(t)){case"string":this.formatters[t]?t=this.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),t=this.formatters.plaintext);break;case"function":t=t;break;default:t=this.formatters.plaintext}return t},E.prototype.formatters={plaintext:function(t,e,i){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e,i){return t.getValue()},textarea:function(t,e,i){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e,i){var n,o,r,a,s=parseFloat(t.getValue()),l=e.decimal||".",c=e.thousand||",",u=e.symbol||"",h=!!e.symbolAfter,d=void 0!==e.precision?e.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(n=!1!==d?s.toFixed(d):s,o=(n=String(n).split("."))[0],r=n.length>1?l+n[1]:"",a=/(\d+)(\d{3})/;a.test(o);)o=o.replace(a,"$1"+c+"$2");return h?o+r+u:u+o+r},link:function(t,e,i){var n=t.getValue(),o=e.urlPrefix||"",r=e.download,a=n,l=document.createElement("a");if(e.labelField&&(a=t.getData()[e.labelField]),e.label)switch(s(e.label)){case"string":a=e.label;break;case"function":a=e.label(t)}if(a){if(e.urlField&&(n=t.getData()[e.urlField]),e.url)switch(s(e.url)){case"string":n=e.url;break;case"function":n=e.url(t)}return l.setAttribute("href",o+n),e.target&&l.setAttribute("target",e.target),e.download&&(r="function"==typeof r?r(t):!0===r?"":r,l.setAttribute("download",r)),l.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),l}return"&nbsp;"},image:function(t,e,i){var n=document.createElement("img");switch(n.setAttribute("src",t.getValue()),s(e.height)){case"number":n.style.height=e.height+"px";break;case"string":n.style.height=e.height}switch(s(e.width)){case"number":n.style.width=e.width+"px";break;case"string":n.style.width=e.width}return n.addEventListener("load",(function(){t.getRow().normalizeHeight()})),n},tickCross:function(t,e,i){var n=t.getValue(),o=t.getElement(),r=e.allowEmpty,a=e.allowTruthy,s=void 0!==e.tickElement?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==e.crossElement?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&n||!0===n||"true"===n||"True"===n||1===n||"1"===n?(o.setAttribute("aria-checked",!0),s||""):!r||"null"!==n&&""!==n&&null!=n?(o.setAttribute("aria-checked",!1),l||""):(o.setAttribute("aria-checked","mixed"),"")},datetime:function(t,e,i){var n=e.inputFormat||"YYYY-MM-DD hh:mm:ss",o=e.outputFormat||"DD/MM/YYYY hh:mm:ss",r=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",a=t.getValue(),s=moment(a,n);return s.isValid()?s.format(o):!0===r?a:"function"==typeof r?r(a):r},datetimediff:function(t,e,i){var n=e.inputFormat||"YYYY-MM-DD hh:mm:ss",o=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",r=void 0!==e.suffix&&e.suffix,a=void 0!==e.unit?e.unit:void 0,s=void 0!==e.humanize&&e.humanize,l=void 0!==e.date?e.date:moment(),c=t.getValue(),u=moment(c,n);return u.isValid()?s?moment.duration(u.diff(l)).humanize(r):u.diff(l,a)+(r?" "+r:""):!0===o?c:"function"==typeof o?o(c):o},lookup:function(t,e,i){var n=t.getValue();return void 0===e[n]?(console.warn("Missing display value for "+n),n):e[n]},star:function(t,e,i){var n=t.getValue(),o=t.getElement(),r=e&&e.stars?e.stars:5,a=document.createElement("span"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.verticalAlign="middle",s.setAttribute("width","14"),s.setAttribute("height","14"),s.setAttribute("viewBox","0 0 512 512"),s.setAttribute("xml:space","preserve"),s.style.padding="0 1px",n=n&&!isNaN(n)?parseInt(n):0,n=Math.max(0,Math.min(n,r));for(var l=1;l<=r;l++){var c=s.cloneNode(!0);c.innerHTML=l<=n?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',a.appendChild(c)}return o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.setAttribute("aria-label",n),a},traffic:function(t,e,i){var n,o,r=this.sanitizeHTML(t.getValue())||0,a=document.createElement("span"),l=e&&e.max?e.max:100,c=e&&e.min?e.min:0,u=e&&void 0!==e.color?e.color:["red","orange","green"],h="#666666";if(!isNaN(r)&&void 0!==t.getValue()){switch(a.classList.add("tabulator-traffic-light"),o=parseFloat(r)<=l?parseFloat(r):l,o=parseFloat(o)>=c?parseFloat(o):c,n=(l-c)/100,o=Math.round((o-c)/n),void 0===u?"undefined":s(u)){case"string":h=u;break;case"function":h=u(r);break;case"object":if(Array.isArray(u)){var d=100/u.length,p=Math.floor(o/d);p=Math.min(p,u.length-1),h=u[p=Math.max(p,0)];break}}return a.style.backgroundColor=h,a}},progress:function(t,e,i){var n,o,r,a,c,u=this.sanitizeHTML(t.getValue())||0,h=t.getElement(),d=e&&e.max?e.max:100,p=e&&e.min?e.min:0,f=e&&e.legendAlign?e.legendAlign:"center";switch(o=parseFloat(u)<=d?parseFloat(u):d,o=parseFloat(o)>=p?parseFloat(o):p,n=(d-p)/100,o=Math.round((o-p)/n),s(e.color)){case"string":r=e.color;break;case"function":r=e.color(u);break;case"object":if(Array.isArray(e.color)){var g=100/e.color.length,m=Math.floor(o/g);m=Math.min(m,e.color.length-1),m=Math.max(m,0),r=e.color[m];break}default:r="#2DC214"}switch(s(e.legend)){case"string":a=e.legend;break;case"function":a=e.legend(u);break;case"boolean":a=u;break;default:a=!1}switch(s(e.legendColor)){case"string":c=e.legendColor;break;case"function":c=e.legendColor(u);break;case"object":Array.isArray(e.legendColor)&&(g=100/e.legendColor.length,m=Math.floor(o/g),m=Math.min(m,e.legendColor.length-1),m=Math.max(m,0),c=e.legendColor[m]);break;default:c="#000"}h.style.minWidth="30px",h.style.position="relative",h.setAttribute("aria-label",o);var v=document.createElement("div");if(v.style.display="inline-block",v.style.position="relative",v.style.width=o+"%",v.style.backgroundColor=r,v.style.height="100%",v.setAttribute("data-max",d),v.setAttribute("data-min",p),a){var y=document.createElement("div");y.style.position="absolute",y.style.top="4px",y.style.left=0,y.style.textAlign=f,y.style.width="100%",y.style.color=c,y.innerHTML=a}return i((function(){if(!(t instanceof l)){var e=document.createElement("div");e.style.position="absolute",e.style.top="4px",e.style.bottom="4px",e.style.left="4px",e.style.right="4px",h.appendChild(e),h=e}h.appendChild(v),a&&h.appendChild(y)})),""},color:function(t,e,i){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""},buttonTick:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(t,e,i){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e,i){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(t,e,i){var n=document.createElement("div"),o=t.getRow()._row.modules.responsiveLayout;function r(t){var e=o.element;o.open=t,e&&(o.open?(n.classList.add("open"),e.style.display=""):(n.classList.remove("open"),e.style.display="none"))}return n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",t.getElement().classList.add("tabulator-row-handle"),n.addEventListener("click",(function(t){t.stopImmediatePropagation(),r(!o.open)})),r(o.open),n},rowSelection:function(t){var e=this,i=document.createElement("input");if(i.type="checkbox",this.table.modExists("selectRow",!0))if(i.addEventListener("click",(function(t){t.stopPropagation()})),"function"==typeof t.getRow){var n=t.getRow();i.addEventListener("change",(function(t){n.toggleSelect()})),i.checked=n.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(n,i)}else i.addEventListener("change",(function(t){e.table.modules.selectRow.selectedRows.length?e.table.deselectRow():e.table.selectRow()})),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}},h.prototype.registerModule("format",E);var k=function(t){this.table=t,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1};k.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},k.prototype.initializeColumn=function(t){var e={margin:0,edge:!1};t.isGroup||(this.frozenCheck(t)?(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right")},k.prototype.frozenCheck=function(t){return t.parent.isGroup&&t.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),t.parent.isGroup?this.frozenCheck(t.parent):t.definition.frozen},k.prototype.scrollHorizontal=function(){var t,e=this;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout((function(){e.layout()}),100),t=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),t.forEach((function(t){"row"===t.type&&e.layoutRow(t)})),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},k.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},k.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},k.prototype.layoutColumnPosition=function(t){var e=this,i=[];this.leftColumns.forEach((function(n,o){if(n.modules.frozen.margin=e._calcSpace(e.leftColumns,o)+e.table.columnManager.scrollLeft+"px",o==e.leftColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup){var r=e.getColGroupParentElement(n);i.includes(r)||(e.layoutElement(r,n),i.push(r)),n.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+n.modules.frozen.position)}else e.layoutElement(n.getElement(),n);t&&n.cells.forEach((function(t){e.layoutElement(t.getElement(),n)}))})),this.rightColumns.forEach((function(i,n){i.modules.frozen.margin=e.rightPadding-e._calcSpace(e.rightColumns,n+1)+"px",n==e.rightColumns.length-1?i.modules.frozen.edge=!0:i.modules.frozen.edge=!1,i.parent.isGroup?e.layoutElement(e.getColGroupParentElement(i),i):e.layoutElement(i.getElement(),i),t&&i.cells.forEach((function(t){e.layoutElement(t.getElement(),i)}))}))},k.prototype.getColGroupParentElement=function(t){return t.parent.isGroup?this.getColGroupParentElement(t.parent):t.getElement()},k.prototype.layout=function(){var t=this;t.active&&(this.calcMargins(),t.table.rowManager.getDisplayRows().forEach((function(e){"row"===e.type&&t.layoutRow(e)})),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},k.prototype.layoutRow=function(t){var e=this;t.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach((function(i){var n=t.getCell(i);n&&e.layoutElement(n.getElement(),i)})),this.rightColumns.forEach((function(i){var n=t.getCell(i);n&&e.layoutElement(n.getElement(),i)}))},k.prototype.layoutElement=function(t,e){e.modules.frozen&&(t.style.position="absolute",t.style.left=e.modules.frozen.margin,t.classList.add("tabulator-frozen"),e.modules.frozen.edge&&t.classList.add("tabulator-frozen-"+e.modules.frozen.position))},k.prototype._calcSpace=function(t,e){for(var i=0,n=0;n<e;n++)t[n].visible&&(i+=t[n].getWidth());return i},h.prototype.registerModule("frozenColumns",k);var T=function(t){this.table=t,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};T.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},T.prototype.setDisplayIndex=function(t){this.displayIndex=t},T.prototype.getDisplayIndex=function(){return this.displayIndex},T.prototype.isFrozen=function(){return!!this.rows.length},T.prototype.getRows=function(t){var e=t.slice(0);return this.rows.forEach((function(t){var i=e.indexOf(t);i>-1&&e.splice(i,1)})),e},T.prototype.freezeRow=function(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(t),this.table.rowManager.refreshActiveData("display"),this.styleRows())},T.prototype.unfreezeRow=function(t){var e=this.rows.indexOf(t);if(t.modules.frozen){t.modules.frozen=!1;var i=t.getElement();i.parentNode.removeChild(i),this.table.rowManager.adjustTableSize(),this.rows.splice(e,1),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()}else console.warn("Freeze Error - Row is already unfrozen")},T.prototype.styleRows=function(t){var e=this;this.rows.forEach((function(t,i){e.table.rowManager.styleRow(t,i)}))},h.prototype.registerModule("frozenRows",T);var S=function(t){this._group=t,this.type="GroupComponent"};S.prototype.getKey=function(){return this._group.key},S.prototype.getField=function(){return this._group.field},S.prototype.getElement=function(){return this._group.element},S.prototype.getRows=function(){return this._group.getRows(!0)},S.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},S.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},S.prototype.getVisibility=function(){return this._group.visible},S.prototype.show=function(){this._group.show()},S.prototype.hide=function(){this._group.hide()},S.prototype.toggle=function(){this._group.toggleVisibility()},S.prototype._getSelf=function(){return this._group},S.prototype.getTable=function(){return this._group.groupManager.table};var M=function(t,e,i,n,o,r,a){this.groupManager=t,this.parent=e,this.key=n,this.level=i,this.field=o,this.hasSubGroups=i<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=r,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:void 0!==t.startOpen[i]?t.startOpen[i]:t.startOpen[0],this.createElements(),this.addBindings(),this.createValueGroups()};M.prototype.wipe=function(){this.groupList.length?this.groupList.forEach((function(t){t.wipe()})):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},M.prototype.createElements=function(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},M.prototype.createValueGroups=function(){var t=this,e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach((function(i){t._createGroup(i,e)}))},M.prototype.addBindings=function(){var t,e,i,n=this;n.groupManager.table.options.groupClick&&n.element.addEventListener("click",(function(t){n.groupManager.table.options.groupClick.call(n.groupManager.table,t,n.getComponent())})),n.groupManager.table.options.groupDblClick&&n.element.addEventListener("dblclick",(function(t){n.groupManager.table.options.groupDblClick.call(n.groupManager.table,t,n.getComponent())})),n.groupManager.table.options.groupContext&&n.element.addEventListener("contextmenu",(function(t){n.groupManager.table.options.groupContext.call(n.groupManager.table,t,n.getComponent())})),n.groupManager.table.options.groupTap&&(i=!1,n.element.addEventListener("touchstart",(function(t){i=!0}),{passive:!0}),n.element.addEventListener("touchend",(function(t){i&&n.groupManager.table.options.groupTap(t,n.getComponent()),i=!1}))),n.groupManager.table.options.groupDblTap&&(t=null,n.element.addEventListener("touchend",(function(e){t?(clearTimeout(t),t=null,n.groupManager.table.options.groupDblTap(e,n.getComponent())):t=setTimeout((function(){clearTimeout(t),t=null}),300)}))),n.groupManager.table.options.groupTapHold&&(e=null,n.element.addEventListener("touchstart",(function(t){clearTimeout(e),e=setTimeout((function(){clearTimeout(e),e=null,i=!1,n.groupManager.table.options.groupTapHold(t,n.getComponent())}),1e3)}),{passive:!0}),n.element.addEventListener("touchend",(function(t){clearTimeout(e),e=null}))),n.groupManager.table.options.groupToggleElement&&("arrow"==n.groupManager.table.options.groupToggleElement?n.arrowElement:n.element).addEventListener("click",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),n.toggleVisibility()}))},M.prototype._createGroup=function(t,e){var i=e+"_"+t,n=new M(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[i]);this.groups[i]=n,this.groupList.push(n)},M.prototype._addRowToGroup=function(t){var e=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[e].func(t.getData()),n=e+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[n]&&this.groups[n].addRow(t):(this.groups[n]||this._createGroup(i,e),this.groups[n].addRow(t))}},M.prototype._addRow=function(t){this.rows.push(t),t.modules.group=this},M.prototype.insertRow=function(t,e,i){var n=this.conformRowData({});t.updateData(n);var o=this.rows.indexOf(e);o>-1?i?this.rows.splice(o+1,0,t):this.rows.splice(o,0,t):i?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},M.prototype.scrollHeader=function(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach((function(e){e.scrollHeader(t)}))},M.prototype.getRowIndex=function(t){},M.prototype.conformRowData=function(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t},M.prototype.removeRow=function(t){var e=this.rows.indexOf(t),i=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(i.parentNode&&i.parentNode.removeChild(i),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},M.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},M.prototype.getHeadersAndRows=function(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach((function(i){e=e.concat(i.getHeadersAndRows(t))})):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e},M.prototype.getData=function(t,e){var i=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach((function(t){i.push(t.getData(e||"data"))})),i},M.prototype.getRowCount=function(){var t=0;return this.groupList.length?this.groupList.forEach((function(e){t+=e.getRowCount()})):t=this.rows.length,t},M.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},M.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach((function(t){t.getHeadersAndRows().forEach((function(t){t.detachElement()}))})):this.rows.forEach((function(t){var e=t.getElement();e.parentNode.removeChild(e)})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},M.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach((function(e){e.getHeadersAndRows().forEach((function(e){var i=e.getElement();t.parentNode.insertBefore(i,t.nextSibling),e.initialize(),t=i}))})):this.rows.forEach((function(e){var i=e.getElement();t.parentNode.insertBefore(i,t.nextSibling),e.initialize(),t=i})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},M.prototype._visSet=function(){var t=[];"function"==typeof this.visible&&(this.rows.forEach((function(e){t.push(e.getData())})),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))},M.prototype.getRowGroup=function(t){var e=!1;return this.groupList.length?this.groupList.forEach((function(i){var n=i.getRowGroup(t);n&&(e=n)})):this.rows.find((function(e){return e===t}))&&(e=this),e},M.prototype.getSubGroups=function(t){var e=[];return this.groupList.forEach((function(i){e.push(t?i.getComponent():i)})),e},M.prototype.getRows=function(t){var e=[];return this.rows.forEach((function(i){e.push(t?i.getComponent():i)})),e},M.prototype.generateGroupHeaderContents=function(){var t=[];for(this.rows.forEach((function(e){t.push(e.getData())})),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},M.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element},M.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},M.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},M.prototype.initialize=function(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)},M.prototype.reinitialize=function(){this.initialized=!1,this.height=0,h.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},M.prototype.setHeight=function(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)},M.prototype.getHeight=function(){return this.outerHeight},M.prototype.getGroup=function(){return this},M.prototype.reinitializeHeight=function(){},M.prototype.calcHeight=function(){},M.prototype.setCellHeight=function(){},M.prototype.clearCellHeight=function(){},M.prototype.getComponent=function(){return new S(this)};var R=function(t){this.table=t,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};R.prototype.initialize=function(){var t=this,e=t.table.options.groupBy,i=t.table.options.groupStartOpen,n=t.table.options.groupHeader;this.allowedValues=t.table.options.groupValues,Array.isArray(e)&&Array.isArray(n)&&e.length>n.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),t.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],t.table.modules.localize.bind("groups|item",(function(e,i){t.headerGenerator[0]=function(t,n,o){return(void 0===t?"":t)+"<span>("+n+" "+(1===n?e:i.groups.items)+")</span>"}})),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach((function(e){e.definition.topCalc&&t.table.modules.columnCalcs.initializeTopRow(),e.definition.bottomCalc&&t.table.modules.columnCalcs.initializeBottomRow()})),Array.isArray(e)||(e=[e]),e.forEach((function(e,i){var n,o;n="function"==typeof e?e:(o=t.table.columnManager.getColumnByField(e))?function(t){return o.getFieldValue(t)}:function(t){return t[e]},t.groupIDLookups.push({field:"function"!=typeof e&&e,func:n,values:!!t.allowedValues&&t.allowedValues[i]})})),i&&(Array.isArray(i)||(i=[i]),i.forEach((function(t){t="function"==typeof t?t:function(){return!0}})),t.startOpen=i),n&&(t.headerGenerator=Array.isArray(n)?n:[n]),this.initialized=!0},R.prototype.setDisplayIndex=function(t){this.displayIndex=t},R.prototype.getDisplayIndex=function(){return this.displayIndex},R.prototype.getRows=function(t){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(t),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):t.slice(0)},R.prototype.getGroups=function(t){var e=[];return this.groupList.forEach((function(i){e.push(t?i.getComponent():i)})),e},R.prototype.getChildGroups=function(t){var e=this,i=[];return t||(t=this),t.groupList.forEach((function(t){t.groupList.length?i=i.concat(e.getChildGroups(t)):i.push(t)})),i},R.prototype.wipe=function(){this.groupList.forEach((function(t){t.wipe()}))},R.prototype.pullGroupListData=function(t){var e=this,i=[];return t.forEach((function(t){var n={level:0,rowCount:0,headerContent:""},o=[];t.hasSubGroups?(o=e.pullGroupListData(t.groupList),n.level=t.level,n.rowCount=o.length-t.groupList.length,n.headerContent=t.generator(t.key,n.rowCount,t.rows,t),i.push(n),i=i.concat(o)):(n.level=t.level,n.headerContent=t.generator(t.key,t.rows.length,t.rows,t),n.rowCount=t.getRows().length,i.push(n),t.getRows().forEach((function(t){i.push(t.getData("data"))})))})),i},R.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},R.prototype.getRowGroup=function(t){var e=!1;return this.groupList.forEach((function(i){var n=i.getRowGroup(t);n&&(e=n)})),e},R.prototype.countGroups=function(){return this.groupList.length},R.prototype.generateGroups=function(t){var e=this,i=e.groups;e.groups={},e.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach((function(t){e.createGroup(t,0,i)})),t.forEach((function(t){e.assignRowToExistingGroup(t,i)}))):t.forEach((function(t){e.assignRowToGroup(t,i)}))},R.prototype.createGroup=function(t,e,i){var n,o=e+"_"+t;i=i||[],n=new M(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],i[o]),this.groups[o]=n,this.groupList.push(n)},R.prototype.assignRowToExistingGroup=function(t,e){var i="0_"+this.groupIDLookups[0].func(t.getData());this.groups[i]&&this.groups[i].addRow(t)},R.prototype.assignRowToGroup=function(t,e){var i=this.groupIDLookups[0].func(t.getData()),n=!this.groups["0_"+i];return n&&this.createGroup(i,0,e),this.groups["0_"+i].addRow(t),!n},R.prototype.updateGroupRows=function(t){var e=[];if(this.groupList.forEach((function(t){e=e.concat(t.getHeadersAndRows())})),t){var i=this.table.rowManager.setDisplayRows(e,this.getDisplayIndex());!0!==i&&this.setDisplayIndex(i),this.table.rowManager.refreshActiveData("group",!0,!0)}return e},R.prototype.scrollHeaders=function(t){t+="px",this.groupList.forEach((function(e){e.scrollHeader(t)}))},R.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1))},h.prototype.registerModule("groupRows",R);var P=function(t){this.table=t,this.history=[],this.index=-1};P.prototype.clear=function(){this.history=[],this.index=-1},P.prototype.action=function(t,e,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:i}),this.index++},P.prototype.getHistoryUndoSize=function(){return this.index+1},P.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},P.prototype.undo=function(){if(this.index>-1){var t=this.history[this.index];return this.undoers[t.type].call(this,t),this.index--,this.table.options.historyUndo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},P.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];return this.redoers[t.type].call(this,t),this.table.options.historyRedo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},P.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posFrom],!t.data.after),this.table.rowManager.redraw()}},P.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posTo],t.data.after),this.table.rowManager.redraw()}},P.prototype._rebindRow=function(t,e){this.history.forEach((function(i){if(i.component instanceof a)i.component===t&&(i.component=e);else if(i.component instanceof c&&i.component.row===t){var n=i.component.column.getField();n&&(i.component=e.getCell(n))}}))},h.prototype.registerModule("history",P);var L=function(t){this.table=t,this.fieldIndex=[],this.hasIndex=!1};L.prototype.parseTable=function(){var t=this.table.element,e=this.table.options,i=(e.columns,t.getElementsByTagName("th")),n=t.getElementsByTagName("tbody")[0],o=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),n=n?n.getElementsByTagName("tr"):[],this._extractOptions(t,e),i.length?this._extractHeaders(i,n):this._generateBlankHeaders(i,n);for(var r=0;r<n.length;r++){var a=n[r].getElementsByTagName("td"),l={};this.hasIndex||(l[e.index]=r);for(var c=0;c<a.length;c++){var u=a[c];void 0!==this.fieldIndex[c]&&(l[this.fieldIndex[c]]=u.innerHTML)}o.push(l)}var h=document.createElement("div"),d=t.attributes;for(var c in d)"object"==s(d[c])&&h.setAttribute(d[c].name,d[c].value);t.parentNode.replaceChild(h,t),e.data=o,this.table.options.htmlImported.call(this.table),this.table.element=h},L.prototype._extractOptions=function(t,e,i){var n=t.attributes,o=i?Object.assign([],i):Object.keys(e),r={};for(var a in o.forEach((function(t){r[t.toLowerCase()]=t})),n){var l,c=n[a];c&&"object"==(void 0===c?"undefined":s(c))&&c.name&&0===c.name.indexOf("tabulator-")&&(l=c.name.replace("tabulator-",""),void 0!==r[l]&&(e[r[l]]=this._attribValue(c.value)))}},L.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},L.prototype._findCol=function(t){return this.table.options.columns.find((function(e){return e.title===t}))||!1},L.prototype._extractHeaders=function(t,e){for(var i=0;i<t.length;i++){var o,r=t[i],a=!1,s=this._findCol(r.textContent);s?a=!0:s={title:r.textContent.trim()},s.field||(s.field=r.textContent.trim().toLowerCase().replace(" ","_")),(o=r.getAttribute("width"))&&!s.width&&(s.width=o),r.attributes,this._extractOptions(r,s,n.prototype.defaultOptionList),this.fieldIndex[i]=s.field,s.field==this.table.options.index&&(this.hasIndex=!0),a||this.table.options.columns.push(s)}},L.prototype._generateBlankHeaders=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],o={title:"",field:"col"+i};this.fieldIndex[i]=o.field;var r=n.getAttribute("width");r&&(o.width=r),this.table.options.columns.push(o)}},h.prototype.registerModule("htmlTableImport",L);var O=function(t){this.table=t,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};O.prototype.initialize=function(){var t=this.table.options.keybindings,e={};if(this.watchKeys={},this.pressedKeys=[],!1!==t){for(var i in this.bindings)e[i]=this.bindings[i];if(Object.keys(t).length)for(var n in t)e[n]=t[n];this.mapBindings(e),this.bindEvents()}},O.prototype.mapBindings=function(t){var e=this,i=this,n=function(n){e.actions[n]?t[n]&&("object"!==s(t[n])&&(t[n]=[t[n]]),t[n].forEach((function(t){i.mapBinding(n,t)}))):console.warn("Key Binding Error - no such action:",n)};for(var o in t)n(o)},O.prototype.mapBinding=function(t,e){var i=this,n={action:this.actions[t],keys:[],ctrl:!1,shift:!1,meta:!1};e.toString().toLowerCase().split(" ").join("").split("+").forEach((function(t){switch(t){case"ctrl":n.ctrl=!0;break;case"shift":n.shift=!0;break;case"meta":n.meta=!0;break;default:t=parseInt(t),n.keys.push(t),i.watchKeys[t]||(i.watchKeys[t]=[]),i.watchKeys[t].push(n)}}))},O.prototype.bindEvents=function(){var t=this;this.keyupBinding=function(e){var i=e.keyCode,n=t.watchKeys[i];n&&(t.pressedKeys.push(i),n.forEach((function(i){t.checkBinding(e,i)})))},this.keydownBinding=function(e){var i=e.keyCode;if(t.watchKeys[i]){var n=t.pressedKeys.indexOf(i);n>-1&&t.pressedKeys.splice(n,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},O.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},O.prototype.checkBinding=function(t,e){var i=this,n=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&t.metaKey==e.meta&&(e.keys.forEach((function(t){-1==i.pressedKeys.indexOf(t)&&(n=!1)})),n&&e.action.call(i,t),!0)},O.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},O.prototype.actions={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,i=e.scrollTop-e.height;e.element.scrollHeight,t.preventDefault(),e.displayRowsCount&&(i>=0?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,i=e.scrollTop+e.height,n=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(i<=n?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().prev())},navNext:function(t){var e,i=!1,n=this.table.options.tabEndNewRow;this.table.modExists("edit")&&(i=this.table.modules.edit.currentCell)&&(t.preventDefault(),(e=i.nav()).next()||n&&(i.getElement().firstChild.blur(),(n=!0===n?this.table.addRow({}):"function"==typeof n?this.table.addRow(n(i.row.getComponent())):this.table.addRow(n)).then((function(){setTimeout((function(){e.next()}))}))))},navLeft:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().left())},navRight:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().right())},navUp:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().up())},navDown:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().down())},undo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},h.prototype.registerModule("keybindings",O);var D=function(t){this.table=t,this.menuEl=!1,this.blurEvent=this.hideMenu.bind(this)};D.prototype.initializeColumnHeader=function(t){var e,i=this;t.definition.headerContextMenu&&t.getElement().addEventListener("contextmenu",(function(e){var n="function"==typeof t.definition.headerContextMenu?t.definition.headerContextMenu():t.definition.headerContextMenu;e.preventDefault(),i.loadMenu(e,t,n)})),t.definition.headerMenu&&((e=document.createElement("span")).classList.add("tabulator-header-menu-button"),e.innerHTML="&vellip;",e.addEventListener("click",(function(e){var n="function"==typeof t.definition.headerMenu?t.definition.headerMenu():t.definition.headerMenu;e.stopPropagation(),e.preventDefault(),i.loadMenu(e,t,n)})),t.titleElement.insertBefore(e,t.titleElement.firstChild))},D.prototype.initializeCell=function(t){var e=this;t.getElement().addEventListener("contextmenu",(function(i){var n="function"==typeof t.column.definition.contextMenu?t.column.definition.contextMenu():t.column.definition.contextMenu;i.preventDefault(),e.loadMenu(i,t,n)}))},D.prototype.initializeRow=function(t){var e=this;t.getElement().addEventListener("contextmenu",(function(i){var n="function"==typeof e.table.options.rowContextMenu?e.table.options.rowContextMenu():e.table.options.rowContextMenu;i.preventDefault(),e.loadMenu(i,t,n)}))},D.prototype.loadMenu=function(t,e,i){var n=this,o=document.body.offsetHeight;i&&i.length&&(this.hideMenu(),this.menuEl=document.createElement("div"),this.menuEl.classList.add("tabulator-menu"),i.forEach((function(t){var i=document.createElement("div"),o=t.label,r=t.disabled;t.separator?i.classList.add("tabulator-menu-separator"):(i.classList.add("tabulator-menu-item"),"function"==typeof o&&(o=o(e.getComponent())),o instanceof Node?i.appendChild(o):i.innerHTML=o,"function"==typeof r&&(r=r(e.getComponent())),r?(i.classList.add("tabulator-menu-item-disabled"),i.addEventListener("click",(function(t){t.stopPropagation()}))):i.addEventListener("click",(function(i){n.hideMenu(),t.action(i,e.getComponent())}))),n.menuEl.appendChild(i)})),this.menuEl.style.top=t.pageY+"px",this.menuEl.style.left=t.pageX+"px",document.body.addEventListener("click",this.blurEvent),this.table.rowManager.element.addEventListener("scroll",this.blurEvent),setTimeout((function(){document.body.addEventListener("contextmenu",n.blurEvent)}),100),document.body.appendChild(this.menuEl),t.pageX+this.menuEl.offsetWidth>=document.body.offsetWidth&&(this.menuEl.style.left="",this.menuEl.style.right=document.body.offsetWidth-t.pageX+"px"),t.pageY+this.menuEl.offsetHeight>=o&&(this.menuEl.style.top="",this.menuEl.style.bottom=o-t.pageY+"px"))},D.prototype.hideMenu=function(){this.menuEl.parentNode&&this.menuEl.parentNode.removeChild(this.menuEl),this.blurEvent&&(document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent))},D.prototype.menus={},h.prototype.registerModule("menu",D);var I=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};I.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t},I.prototype.initializeColumn=function(t){var e,i=this,n={};t.modules.frozen||(e=t.getElement(),n.mousemove=function(n){t.parent===i.moving.parent&&((i.touchMove?n.touches[0].pageX:n.pageX)-h.prototype.helpers.elOffset(e).left+i.table.columnManager.element.scrollLeft>t.getWidth()/2?i.toCol===t&&i.toColAfter||(e.parentNode.insertBefore(i.placeholderElement,e.nextSibling),i.moveColumn(t,!0)):(i.toCol!==t||i.toColAfter)&&(e.parentNode.insertBefore(i.placeholderElement,e),i.moveColumn(t,!1)))}.bind(i),e.addEventListener("mousedown",(function(e){i.touchMove=!1,1===e.which&&(i.checkTimeout=setTimeout((function(){i.startMove(e,t)}),i.checkPeriod))})),e.addEventListener("mouseup",(function(t){1===t.which&&i.checkTimeout&&clearTimeout(i.checkTimeout)})),i.bindTouchEvents(t)),t.modules.moveColumn=n},I.prototype.bindTouchEvents=function(t){var e,i,n,o,r,a,s=this,l=t.getElement(),c=!1;l.addEventListener("touchstart",(function(l){s.checkTimeout=setTimeout((function(){s.touchMove=!0,e=t.nextColumn(),n=e?e.getWidth()/2:0,i=t.prevColumn(),o=i?i.getWidth()/2:0,r=0,a=0,c=!1,s.startMove(l,t)}),s.checkPeriod)}),{passive:!0}),l.addEventListener("touchmove",(function(l){var u,h;s.moving&&(s.moveHover(l),c||(c=l.touches[0].pageX),(u=l.touches[0].pageX-c)>0?e&&u-r>n&&(h=e)!==t&&(c=l.touches[0].pageX,h.getElement().parentNode.insertBefore(s.placeholderElement,h.getElement().nextSibling),s.moveColumn(h,!0)):i&&-u-a>o&&(h=i)!==t&&(c=l.touches[0].pageX,h.getElement().parentNode.insertBefore(s.placeholderElement,h.getElement()),s.moveColumn(h,!1)),h&&(e=h.nextColumn(),r=n,n=e?e.getWidth()/2:0,i=h.prevColumn(),a=o,o=i?i.getWidth()/2:0))}),{passive:!0}),l.addEventListener("touchend",(function(t){s.checkTimeout&&clearTimeout(s.checkTimeout),s.moving&&s.endMove(t)}))},I.prototype.startMove=function(t,e){var i=e.getElement();this.moving=e,this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-h.prototype.helpers.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(t)},I.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)}))},I.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)}))},I.prototype.moveColumn=function(t,e){var i=this.moving.getCells();this.toCol=t,this.toColAfter=e,e?t.getCells().forEach((function(t,e){var n=t.getElement();n.parentNode.insertBefore(i[e].getElement(),n.nextSibling)})):t.getCells().forEach((function(t,e){var n=t.getElement();n.parentNode.insertBefore(i[e].getElement(),n)}))},I.prototype.endMove=function(t){(1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},I.prototype.moveHover=function(t){var e,i=this,n=i.table.columnManager.getElement(),o=n.scrollLeft,r=(i.touchMove?t.touches[0].pageX:t.pageX)-h.prototype.helpers.elOffset(n).left+o;i.hoverElement.style.left=r-i.startX+"px",r-o<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout((function(){e=Math.max(0,o-5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1}),1))),o+n.clientWidth-r<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout((function(){e=Math.min(n.clientWidth,o+5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1}),1)))},h.prototype.registerModule("moveColumn",I);var F=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connections=[],this.connectedTable=!1,this.connectedRow=!1};F.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t},F.prototype.initialize=function(t){this.connection=this.table.options.movableRowsConnectedTables},F.prototype.setHandle=function(t){this.hasHandle=t},F.prototype.initializeGroupHeader=function(t){var e=this,i={};i.mouseup=function(t){e.tableRowDrop(t,row)}.bind(e),i.mousemove=function(i){var n;i.pageY-h.prototype.helpers.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?e.toRow===t&&e.toRowAfter||((n=t.getElement()).parentNode.insertBefore(e.placeholderElement,n.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(n=t.getElement()).previousSibling&&(n.parentNode.insertBefore(e.placeholderElement,n),e.moveRow(t,!1))}.bind(e),t.modules.moveRow=i},F.prototype.initializeRow=function(t){var e,i=this,n={};n.mouseup=function(e){i.tableRowDrop(e,t)}.bind(i),n.mousemove=function(e){var n;e.pageY-h.prototype.helpers.elOffset(t.element).top+i.table.rowManager.element.scrollTop>t.getHeight()/2?i.toRow===t&&i.toRowAfter||((n=t.getElement()).parentNode.insertBefore(i.placeholderElement,n.nextSibling),i.moveRow(t,!0)):(i.toRow!==t||i.toRowAfter)&&((n=t.getElement()).parentNode.insertBefore(i.placeholderElement,n),i.moveRow(t,!1))}.bind(i),this.hasHandle||((e=t.getElement()).addEventListener("mousedown",(function(e){1===e.which&&(i.checkTimeout=setTimeout((function(){i.startMove(e,t)}),i.checkPeriod))})),e.addEventListener("mouseup",(function(t){1===t.which&&i.checkTimeout&&clearTimeout(i.checkTimeout)})),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=n},F.prototype.initializeCell=function(t){var e=this,i=t.getElement();i.addEventListener("mousedown",(function(i){1===i.which&&(e.checkTimeout=setTimeout((function(){e.startMove(i,t.row)}),e.checkPeriod))})),i.addEventListener("mouseup",(function(t){1===t.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)})),this.bindTouchEvents(t.row,t.getElement())},F.prototype.bindTouchEvents=function(t,e){var i,n,o,r,a,s,l=this,c=!1;e.addEventListener("touchstart",(function(e){l.checkTimeout=setTimeout((function(){l.touchMove=!0,i=t.nextRow(),o=i?i.getHeight()/2:0,n=t.prevRow(),r=n?n.getHeight()/2:0,a=0,s=0,c=!1,l.startMove(e,t)}),l.checkPeriod)}),{passive:!0}),this.moving,this.toRow,this.toRowAfter,e.addEventListener("touchmove",(function(e){var u,h;l.moving&&(e.preventDefault(),l.moveHover(e),c||(c=e.touches[0].pageY),(u=e.touches[0].pageY-c)>0?i&&u-a>o&&(h=i)!==t&&(c=e.touches[0].pageY,h.getElement().parentNode.insertBefore(l.placeholderElement,h.getElement().nextSibling),l.moveRow(h,!0)):n&&-u-s>r&&(h=n)!==t&&(c=e.touches[0].pageY,h.getElement().parentNode.insertBefore(l.placeholderElement,h.getElement()),l.moveRow(h,!1)),h&&(i=h.nextRow(),a=o,o=i?i.getHeight()/2:0,n=h.prevRow(),s=r,r=n?n.getHeight()/2:0))})),e.addEventListener("touchend",(function(t){l.checkTimeout&&clearTimeout(l.checkTimeout),l.moving&&(l.endMove(t),l.touchMove=!1)}))},F.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(t){"row"!==t.type&&"group"!==t.type||!t.modules.moveRow.mousemove||t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)}))},F.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(t){"row"!==t.type&&"group"!==t.type||!t.modules.moveRow.mousemove||t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)}))},F.prototype.startMove=function(t,e){var i=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},F.prototype.setStartPosition=function(t,e){var i,n,o=this.touchMove?t.touches[0].pageX:t.pageX,r=this.touchMove?t.touches[0].pageY:t.pageY;i=e.getElement(),this.connection?(n=i.getBoundingClientRect(),this.startX=n.left-o+window.pageXOffset,this.startY=n.top-r+window.pageYOffset):this.startY=r-i.getBoundingClientRect().top},F.prototype.endMove=function(t){t&&1!==t.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},F.prototype.moveRow=function(t,e){this.toRow=t,this.toRowAfter=e},F.prototype.moveHover=function(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)},F.prototype.moveHoverTable=function(t){var e=this.table.rowManager.getElement(),i=e.scrollTop,n=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+i;this.hoverElement.style.top=n-this.startY+"px"},F.prototype.moveHoverConnections=function(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"},F.prototype.connectToTables=function(t){var e=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStart.call(this.table,e),this.table.modules.comms.send(this.connection,"moveRow","connect",{row:t})},F.prototype.disconnectFromTables=function(){var t=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStop.call(this.table,t),this.table.modules.comms.send(this.connection,"moveRow","disconnect")},F.prototype.connect=function(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)})),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,e,t),!0)},F.prototype.disconnect=function(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)})),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,t)):console.warn("Move Row Error - trying to disconnect from non connected table")},F.prototype.dropComplete=function(t,e,i){var n=!1;if(i){switch(s(this.table.options.movableRowsSender)){case"string":n=this.senders[this.table.options.movableRowsSender];break;case"function":n=this.table.options.movableRowsSender}n?n.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()},F.prototype.tableRowDrop=function(t,e){var i=!1,n=!1;switch(t.stopImmediatePropagation(),s(this.table.options.movableRowsReceiver)){case"string":i=this.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver}i?n=i.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),n?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:e,success:n})},F.prototype.receivers={insert:function(t,e,i){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,i){return this.table.addRow(t.getData()),!0},update:function(t,e,i){return!!e&&(e.update(t.getData()),!0)},replace:function(t,e,i){return!!e&&(this.table.addRow(t.getData(),void 0,e),e.delete(),!0)}},F.prototype.senders={delete:function(t,e,i){t.delete()}},F.prototype.commsReceived=function(t,e,i){switch(e){case"connect":return this.connect(t,i.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,i.row,i.success)}},h.prototype.registerModule("moveRow",F);var A=function(t){this.table=t,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};A.prototype.initializeColumn=function(t){var e=this,i=!1,n={};this.allowedTypes.forEach((function(o){var r,a="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));t.definition[a]&&(r=e.lookupMutator(t.definition[a]))&&(i=!0,n[a]={mutator:r,params:t.definition[a+"Params"]||{}})})),i&&(t.modules.mutate=n)},A.prototype.lookupMutator=function(t){var e=!1;switch(void 0===t?"undefined":s(t)){case"string":this.mutators[t]?e=this.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t}return e},A.prototype.transformRow=function(t,e,i){var n,o="mutator"+(e.charAt(0).toUpperCase()+e.slice(1));return this.enabled&&this.table.columnManager.traverse((function(r){var a,s,l;r.modules.mutate&&(a=r.modules.mutate[o]||r.modules.mutate.mutator||!1)&&(n=r.getFieldValue(void 0!==i?i:t),"data"!=e&&void 0===n||(l=r.getComponent(),s="function"==typeof a.params?a.params(n,t,e,l):a.params,r.setFieldValue(t,a.mutator(n,t,e,s,l))))})),t},A.prototype.transformCell=function(t,e){var i=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,n={};return i?(n=Object.assign(n,t.row.getData()),t.column.setFieldValue(n,e),i.mutator(e,n,"edit",i.params,t.getComponent())):e},A.prototype.enable=function(){this.enabled=!0},A.prototype.disable=function(){this.enabled=!1},A.prototype.mutators={},h.prototype.registerModule("mutator",A);var N=function(t){this.table=t,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.createElements()};N.prototype.createElements=function(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(t=document.createElement("button")).classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},N.prototype.generatePageSizeSelectList=function(){var t=this,e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(var i=1;i<5;i++)e.push(this.size*i);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach((function(e){var i=document.createElement("option");i.value=e,i.innerHTML=e,t.pageSizeSelect.appendChild(i)})),this.pageSizeSelect.value=this.size}},N.prototype.initialize=function(t){var e,i=this;for(var n in i.table.options.paginationDataSent)i.paginationDataSentNames[n]=i.table.options.paginationDataSent[n];for(var o in i.table.options.paginationDataReceived)i.paginationDataReceivedNames[o]=i.table.options.paginationDataReceived[o];i.table.modules.localize.bind("pagination|first",(function(t){i.firstBut.innerHTML=t})),i.table.modules.localize.bind("pagination|first_title",(function(t){i.firstBut.setAttribute("aria-label",t),i.firstBut.setAttribute("title",t)})),i.table.modules.localize.bind("pagination|prev",(function(t){i.prevBut.innerHTML=t})),i.table.modules.localize.bind("pagination|prev_title",(function(t){i.prevBut.setAttribute("aria-label",t),i.prevBut.setAttribute("title",t)})),i.table.modules.localize.bind("pagination|next",(function(t){i.nextBut.innerHTML=t})),i.table.modules.localize.bind("pagination|next_title",(function(t){i.nextBut.setAttribute("aria-label",t),i.nextBut.setAttribute("title",t)})),i.table.modules.localize.bind("pagination|last",(function(t){i.lastBut.innerHTML=t})),i.table.modules.localize.bind("pagination|last_title",(function(t){i.lastBut.setAttribute("aria-label",t),i.lastBut.setAttribute("title",t)})),i.firstBut.addEventListener("click",(function(){i.setPage(1)})),i.prevBut.addEventListener("click",(function(){i.previousPage()})),i.nextBut.addEventListener("click",(function(){i.nextPage().then((function(){})).catch((function(){}))})),i.lastBut.addEventListener("click",(function(){i.setPage(i.max)})),i.table.options.paginationElement&&(i.element=i.table.options.paginationElement),this.pageSizeSelect&&(e=document.createElement("label"),i.table.modules.localize.bind("pagination|page_size",(function(t){i.pageSizeSelect.setAttribute("aria-label",t),i.pageSizeSelect.setAttribute("title",t),e.innerHTML=t})),i.element.appendChild(e),i.element.appendChild(i.pageSizeSelect),i.pageSizeSelect.addEventListener("change",(function(t){i.setPageSize(i.pageSizeSelect.value),i.setPage(1).then((function(){})).catch((function(){}))}))),i.element.appendChild(i.firstBut),i.element.appendChild(i.prevBut),i.element.appendChild(i.pagesElement),i.element.appendChild(i.nextBut),i.element.appendChild(i.lastBut),i.table.options.paginationElement||t||i.table.footerManager.append(i.element,i),i.mode=i.table.options.pagination,i.size=i.table.options.paginationSize||Math.floor(i.table.rowManager.getElement().clientHeight/24),i.count=i.table.options.paginationButtonCount,i.generatePageSizeSelectList()},N.prototype.initializeProgressive=function(t){this.initialize(!0),this.mode="progressive_"+t,this.progressiveLoad=!0},N.prototype.setDisplayIndex=function(t){this.displayIndex=t},N.prototype.getDisplayIndex=function(){return this.displayIndex},N.prototype.setMaxRows=function(t){this.max=t?Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)},N.prototype.reset=function(t,e){return("local"==this.mode||t)&&(this.page=1),e&&(this.initialLoad=!0),!0},N.prototype.setMaxPage=function(t){t=parseInt(t),this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())},N.prototype.setPage=function(t){var e=this,i=this;return new Promise((function(n,o){(t=parseInt(t))>0&&t<=e.max?(e.page=t,e.trigger().then((function(){n()})).catch((function(){o()})),i.table.options.persistence&&i.table.modExists("persistence",!0)&&i.table.modules.persistence.config.page&&i.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+e.max+":",t),o())}))},N.prototype.setPageToRow=function(t){var e=this;return new Promise((function(i,n){var o=e.table.rowManager.getDisplayRows(e.displayIndex-1).indexOf(t);if(o>-1){var r=Math.ceil((o+1)/e.size);e.setPage(r).then((function(){i()})).catch((function(){n()}))}else console.warn("Pagination Error - Requested row is not visible"),n()}))},N.prototype.setPageSize=function(t){(t=parseInt(t))>0&&(this.size=t),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},N.prototype._setPageButtons=function(){for(var t=Math.floor((this.count-1)/2),e=Math.ceil((this.count-1)/2),i=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),n=this.page<=e?Math.min(this.count,this.max):Math.min(this.page+e,this.max);this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(var o=i;o<=n;o++)o>0&&o<=this.max&&this.pagesElement.appendChild(this._generatePageButton(o));this.footerRedraw()},N.prototype._generatePageButton=function(t){var e=this,i=document.createElement("button");return i.classList.add("tabulator-page"),t==e.page&&i.classList.add("active"),i.setAttribute("type","button"),i.setAttribute("role","button"),i.setAttribute("aria-label","Show Page "+t),i.setAttribute("title","Show Page "+t),i.setAttribute("data-page",t),i.textContent=t,i.addEventListener("click",(function(i){e.setPage(t)})),i},N.prototype.previousPage=function(){var t=this;return new Promise((function(e,i){t.page>1?(t.page--,t.trigger().then((function(){e()})).catch((function(){i()})),t.table.options.persistence&&t.table.modExists("persistence",!0)&&t.table.modules.persistence.config.page&&t.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),i())}))},N.prototype.nextPage=function(){var t=this;return new Promise((function(e,i){t.page<t.max?(t.page++,t.trigger().then((function(){e()})).catch((function(){i()})),t.table.options.persistence&&t.table.modExists("persistence",!0)&&t.table.modules.persistence.config.page&&t.table.modules.persistence.save("page")):(t.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+t.max+":",t.max+1),i())}))},N.prototype.getPage=function(){return this.page},N.prototype.getPageMax=function(){return this.max},N.prototype.getPageSize=function(t){return this.size},N.prototype.getMode=function(){return this.mode},N.prototype.getRows=function(t){var e,i,n;if("local"==this.mode){e=[],n=(i=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var o=i;o<n;o++)t[o]&&e.push(t[o]);return e}return this._setPageButtons(),t.slice(0)},N.prototype.trigger=function(){var t,e=this;return new Promise((function(i,n){switch(e.mode){case"local":t=e.table.rowManager.scrollLeft,e.table.rowManager.refreshActiveData("page"),e.table.rowManager.scrollHorizontal(t),e.table.options.pageLoaded.call(e.table,e.getPage()),i();break;case"remote":case"progressive_load":case"progressive_scroll":e.table.modules.ajax.blockActiveRequest(),e._getRemotePage().then((function(){i()})).catch((function(){n()}));break;default:console.warn("Pagination Error - no such pagination mode:",e.mode),n()}}))},N.prototype._getRemotePage=function(){var t,e,i=this,n=this;return new Promise((function(o,r){if(n.table.modExists("ajax",!0)||r(),t=h.prototype.helpers.deepClone(n.table.modules.ajax.getParams()||{}),(e=n.table.modules.ajax.getParams())[i.paginationDataSentNames.page]=n.page,i.size&&(e[i.paginationDataSentNames.size]=i.size),i.table.options.ajaxSorting&&i.table.modExists("sort")){var a=n.table.modules.sort.getSort();a.forEach((function(t){delete t.column})),e[i.paginationDataSentNames.sorters]=a}if(i.table.options.ajaxFiltering&&i.table.modExists("filter")){var s=n.table.modules.filter.getFilters(!0,!0);e[i.paginationDataSentNames.filters]=s}n.table.modules.ajax.setParams(e),n.table.modules.ajax.sendRequest(i.progressiveLoad).then((function(t){n._parseRemoteData(t),o()})).catch((function(t){r()})),n.table.modules.ajax.setParams(t)}))},N.prototype._parseRemoteData=function(t){var e,i,n=this;if(void 0===t[this.paginationDataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.last_page+"' property"),t[this.paginationDataReceivedNames.data]){if(this.max=parseInt(t[this.paginationDataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(t[this.paginationDataReceivedNames.data],!1,this.initialLoad&&1==this.page):this.table.rowManager.addRows(t[this.paginationDataReceivedNames.data]),this.page<this.max&&setTimeout((function(){n.nextPage().then((function(){})).catch((function(){}))}),n.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t[this.paginationDataReceivedNames.data]),this.table.rowManager.setData(t,!0,this.initialLoad&&1==this.page),i=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,n.table.rowManager.element.scrollHeight<=n.table.rowManager.element.clientHeight+i&&n.nextPage().then((function(){})).catch((function(){}))}else e=this.table.rowManager.scrollLeft,this.table.rowManager.setData(t[this.paginationDataReceivedNames.data],!1,this.initialLoad&&1==this.page),this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.data+"' property")},N.prototype.footerRedraw=function(){var t=this.table.footerManager.element;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))},N.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},N.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},h.prototype.registerModule("page",N);var j=function(t){this.table=t,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1};j.prototype.localStorageTest=function(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}},j.prototype.initialize=function(){var t,e=this.table.options.persistenceMode,i=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(i||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(t=this.retreiveData("page"))&&(void 0===t.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=t.paginationSize),void 0===t.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=t.paginationInitialPage)),this.config.group&&(t=this.retreiveData("group"))&&(void 0===t.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=t.groupBy),void 0===t.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=t.groupStartOpen),void 0===t.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=t.groupHeader))},j.prototype.initializeColumn=function(t){var e,i=this;this.config.columns&&(this.defWatcherBlock=!0,e=t.getDefinition(),(!0===this.config.columns?Object.keys(e):this.config.columns).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t),o=e[t];n&&Object.defineProperty(e,t,{set:function(t){o=t,i.defWatcherBlock||i.save("columns"),n.set&&n.set(t)},get:function(){return n.get&&n.get(),o}})})),this.defWatcherBlock=!1)},j.prototype.load=function(t,e){var i=this.retreiveData(t);return e&&(i=i?this.mergeDefinition(e,i):e),i},j.prototype.retreiveData=function(t){return!!this.readFunc&&this.readFunc(this.id,t)},j.prototype.mergeDefinition=function(t,e){var i=this,n=[];return(e=e||[]).forEach((function(e,o){var r,a=i._findColumn(t,e);a&&(!0===i.config.columns||null==i.config.columns?(r=Object.keys(a)).push("width"):r=i.config.columns,r.forEach((function(t){void 0!==e[t]&&(a[t]=e[t])})),a.columns&&(a.columns=i.mergeDefinition(a.columns,e.columns)),n.push(a))})),t.forEach((function(t,o){i._findColumn(e,t)||(n.length>o?n.splice(o,0,t):n.push(t))})),n},j.prototype._findColumn=function(t,e){var i=e.columns?"group":e.field?"field":"object";return t.find((function(t){switch(i){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e}}))},j.prototype.save=function(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());break;case"group":e=this.getGroupConfig();break;case"page":e=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,t,e)},j.prototype.validateSorters=function(t){return t.forEach((function(t){t.column=t.field,delete t.field})),t},j.prototype.getGroupConfig=function(){return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(data.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(data.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(data.groupHeader=this.table.options.groupHeader)),data},j.prototype.getPageConfig=function(){var t={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(t.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(t.paginationInitialPage=this.table.modules.page.getPage())),t},j.prototype.parseColumns=function(t){var e=this,i=[];return t.forEach((function(t){var n,o={},r=t.getDefinition();t.isGroup?(o.title=r.title,o.columns=e.parseColumns(t.getColumns())):(o.field=t.getField(),!0===e.config.columns||null==e.config.columns?(n=Object.keys(r)).push("width"):n=e.config.columns,n.forEach((function(e){switch(e){case"width":o.width=t.getWidth();break;case"visible":o.visible=t.visible;break;default:o[e]=r[e]}}))),i.push(o)})),i},j.prototype.readers={local:function(t,e){var i=localStorage.getItem(t+"-"+e);return!!i&&JSON.parse(i)},cookie:function(t,e){var i,n,o=document.cookie,r=t+"-"+e,a=o.indexOf(r+"=");return a>-1&&(o=o.substr(a),(i=o.indexOf(";"))>-1&&(o=o.substr(0,i)),n=o.replace(r+"=","")),!!n&&JSON.parse(n)}},j.prototype.writers={local:function(t,e,i){localStorage.setItem(t+"-"+e,JSON.stringify(i))},cookie:function(t,e,i){var n=new Date;n.setDate(n.getDate()+1e4),document.cookie=t+"-"+e+"="+JSON.stringify(i)+"; expires="+n.toUTCString()}},h.prototype.registerModule("persistence",j);var z=function(t){this.table=t,this.element=!1,this.manualBlock=!1};z.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},z.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},z.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},z.prototype.printFullscreen=function(t,e,i){var n,o,r=window.scrollX,a=window.scrollY,s=document.createElement("div"),l=document.createElement("div"),c=this.table.modules.export.genereateTable(void 0!==i?i:this.table.options.printConfig,void 0!==e?e:this.table.options.printStyled,t,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),"string"==typeof(n="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?s.innerHTML=n:s.appendChild(n),this.element.appendChild(s)),this.element.appendChild(c),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(o="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=o:l.appendChild(o),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,c),window.print(),this.cleanup(),window.scrollTo(r,a),this.manualBlock=!1},h.prototype.registerModule("print",z);var Z=function(t){this.table=t,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0};Z.prototype.watchData=function(t){var e,i=this;this.currentVersion++,e=this.currentVersion,i.unwatchData(),i.data=t,i.origFuncs.push=t.push,Object.defineProperty(i.data,"push",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments);return i.blocked||e!==i.currentVersion||n.forEach((function(t){i.table.rowManager.addRowActual(t,!1)})),i.origFuncs.push.apply(t,arguments)}}),i.origFuncs.unshift=t.unshift,Object.defineProperty(i.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments);return i.blocked||e!==i.currentVersion||n.forEach((function(t){i.table.rowManager.addRowActual(t,!0)})),i.origFuncs.unshift.apply(t,arguments)}}),i.origFuncs.shift=t.shift,Object.defineProperty(i.data,"shift",{enumerable:!1,configurable:!0,value:function(){var n;return i.blocked||e!==i.currentVersion||i.data.length&&(n=i.table.rowManager.getRowFromDataObject(i.data[0]))&&n.deleteActual(),i.origFuncs.shift.call(t)}}),i.origFuncs.pop=t.pop,Object.defineProperty(i.data,"pop",{enumerable:!1,configurable:!0,value:function(){var n;return i.blocked||e!==i.currentVersion||i.data.length&&(n=i.table.rowManager.getRowFromDataObject(i.data[i.data.length-1]))&&n.deleteActual(),i.origFuncs.pop.call(t)}}),i.origFuncs.splice=t.splice,Object.defineProperty(i.data,"splice",{enumerable:!1,configurable:!0,value:function(){var n,o=Array.from(arguments),r=o[0]<0?t.length+o[0]:o[0],a=o[1],s=!!o[2]&&o.slice(2);if(!i.blocked&&e===i.currentVersion){if(s&&((n=!!t[r]&&i.table.rowManager.getRowFromDataObject(t[r]))?s.forEach((function(t){i.table.rowManager.addRowActual(t,!0,n,!0)})):(s=s.slice().reverse()).forEach((function(t){i.table.rowManager.addRowActual(t,!0,!1,!0)}))),0!==a){var l=t.slice(r,void 0===o[1]?o[1]:r+a);l.forEach((function(t,e){var n=i.table.rowManager.getRowFromDataObject(t);n&&n.deleteActual(e!==l.length-1)}))}(s||0!==a)&&i.table.rowManager.reRenderInPosition()}return i.origFuncs.splice.apply(t,arguments)}})},Z.prototype.unwatchData=function(){if(!1!==this.data)for(var t in this.origFuncs)Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},Z.prototype.watchRow=function(t){var e=t.getData();for(var i in this.blocked=!0,e)this.watchKey(t,e,i);this.blocked=!1},Z.prototype.watchKey=function(t,e,i){var n=this,o=Object.getOwnPropertyDescriptor(e,i),r=e[i],a=this.currentVersion;Object.defineProperty(e,i,{set:function(e){if(r=e,!n.blocked&&a===n.currentVersion){var s={};s[i]=e,t.updateData(s)}o.set&&o.set(e)},get:function(){return o.get&&o.get(),r}})},Z.prototype.unwatchRow=function(t){var e=t.getData();for(var i in e)Object.defineProperty(e,i,{value:e[i]})},Z.prototype.block=function(){this.blocked=!0},Z.prototype.unblock=function(){this.blocked=!1},h.prototype.registerModule("reactiveData",Z);var G=function(t){this.table=t,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};G.prototype.initializeColumn=function(t,e,i){var n=this,o=!1,r=this.table.options.resizableColumns;if("header"===t&&(o="textarea"==e.definition.formatter||e.definition.variableHeight,e.modules.resize={variableHeight:o}),!0===r||r==t){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev",a.addEventListener("click",(function(t){t.stopPropagation()}));var l=function(t){var i=e.getLastColumn();i&&n._checkResizability(i)&&(n.startColumn=e,n._mouseDown(t,i,a))};a.addEventListener("mousedown",l),a.addEventListener("touchstart",l,{passive:!0}),a.addEventListener("dblclick",(function(t){var i=e.getLastColumn();i&&n._checkResizability(i)&&(t.stopPropagation(),i.reinitializeWidth(!0))})),s.addEventListener("click",(function(t){t.stopPropagation()}));var c=function(t){var i,o,r;(i=e.getFirstColumn())&&(r=(o=n.table.columnManager.findColumnIndex(i))>0&&n.table.columnManager.getColumnByIndex(o-1))&&n._checkResizability(r)&&(n.startColumn=e,n._mouseDown(t,r,s))};s.addEventListener("mousedown",c),s.addEventListener("touchstart",c,{passive:!0}),s.addEventListener("dblclick",(function(t){var i,o,r;(i=e.getFirstColumn())&&(r=(o=n.table.columnManager.findColumnIndex(i))>0&&n.table.columnManager.getColumnByIndex(o-1))&&n._checkResizability(r)&&(t.stopPropagation(),r.reinitializeWidth(!0))})),i.appendChild(a),i.appendChild(s)}},G.prototype._checkResizability=function(t){return void 0!==t.definition.resizable?t.definition.resizable:this.table.options.resizableColumns},G.prototype._mouseDown=function(t,e,i){var n=this;function o(t){e.setWidth(n.startWidth+((void 0===t.screenX?t.touches[0].screenX:t.screenX)-n.startX)),!n.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}function r(t){n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!1),n.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousemove",o),i.removeEventListener("touchmove",o),i.removeEventListener("touchend",r),n.table.element.classList.remove("tabulator-block-select"),n.table.options.persistence&&n.table.modExists("persistence",!0)&&n.table.modules.persistence.config.columns&&n.table.modules.persistence.save("columns"),n.table.options.columnResized.call(n.table,e.getComponent())}n.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!0),n.startX=void 0===t.screenX?t.touches[0].screenX:t.screenX,n.startWidth=e.getWidth(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",r),i.addEventListener("touchmove",o,{passive:!0}),i.addEventListener("touchend",r)},h.prototype.registerModule("resizeColumns",G);var H=function(t){this.table=t,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};H.prototype.initializeRow=function(t){var e=this,i=t.getElement(),n=document.createElement("div");n.className="tabulator-row-resize-handle";var o=document.createElement("div");o.className="tabulator-row-resize-handle prev",n.addEventListener("click",(function(t){t.stopPropagation()}));var r=function(i){e.startRow=t,e._mouseDown(i,t,n)};n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!0}),o.addEventListener("click",(function(t){t.stopPropagation()}));var a=function(i){var n=e.table.rowManager.prevDisplayRow(t);n&&(e.startRow=n,e._mouseDown(i,n,o))};o.addEventListener("mousedown",a),o.addEventListener("touchstart",a,{passive:!0}),i.appendChild(n),i.appendChild(o)},H.prototype._mouseDown=function(t,e,i){var n=this;function o(t){e.setHeight(n.startHeight+((void 0===t.screenY?t.touches[0].screenY:t.screenY)-n.startY))}function r(t){document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",o),i.removeEventListener("touchmove",o),i.removeEventListener("touchend",r),n.table.element.classList.remove("tabulator-block-select"),n.table.options.rowResized.call(this.table,e.getComponent())}n.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),n.startY=void 0===t.screenY?t.touches[0].screenY:t.screenY,n.startHeight=e.getHeight(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",r),i.addEventListener("touchmove",o,{passive:!0}),i.addEventListener("touchend",r)},h.prototype.registerModule("resizeRows",H);var B=function(t){this.table=t,this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1};B.prototype.initialize=function(t){var e,i=this,n=this.table;this.tableHeight=n.element.clientHeight,this.tableWidth=n.element.clientWidth,n.element.parentNode&&(this.containerHeight=n.element.parentNode.clientHeight,this.containerWidth=n.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===n.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver((function(t){if(!n.browserMobile||n.browserMobile&&!n.modules.edit.currentCell){var e=Math.floor(t[0].contentRect.height),o=Math.floor(t[0].contentRect.width);i.tableHeight==e&&i.tableWidth==o||(i.tableHeight=e,i.tableWidth=o,n.element.parentNode&&(i.containerHeight=n.element.parentNode.clientHeight,i.containerWidth=n.element.parentNode.clientWidth),n.redraw())}})),this.observer.observe(n.element),e=window.getComputedStyle(n.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(e.getPropertyValue("max-height")||e.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver((function(t){if(!n.browserMobile||n.browserMobile&&!n.modules.edit.currentCell){var e=Math.floor(t[0].contentRect.height),o=Math.floor(t[0].contentRect.width);i.containerHeight==e&&i.containerWidth==o||(i.containerHeight=e,i.containerWidth=o,i.tableHeight=n.element.clientHeight,i.tableWidth=n.element.clientWidth,n.redraw()),n.redraw()}})),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){(!n.browserMobile||n.browserMobile&&!n.modules.edit.currentCell)&&n.redraw()},window.addEventListener("resize",this.binding))},B.prototype.clearBindings=function(t){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},h.prototype.registerModule("resizeTable",B);var V=function(t){this.table=t,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1};V.prototype.initialize=function(){var t=this,e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach((function(i,n){i.modules.responsive&&i.modules.responsive.order&&i.modules.responsive.visible&&(i.modules.responsive.index=n,e.push(i),i.visible||"collapse"!==t.mode||t.hiddenColumns.push(i))})),e=(e=e.reverse()).sort((function(t,e){return e.modules.responsive.order-t.modules.responsive.order||e.modules.responsive.index-t.modules.responsive.index})),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();var i=this.table.columnManager.columnsByIndex,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var r;if(n){if(o>=i.length)break;r=i[o++]}else{if((o=i.next()).done)break;r=o.value}var a=r;if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},V.prototype.initializeColumn=function(t){var e=t.getDefinition();t.modules.responsive={order:void 0===e.responsive?1:e.responsive,visible:!1!==e.visible}},V.prototype.initializeRow=function(t){var e;"calc"!==t.type&&((e=document.createElement("div")).classList.add("tabulator-responsive-collapse"),t.modules.responsiveLayout={element:e,open:this.collapseStartOpen},this.collapseStartOpen||(e.style.display="none"))},V.prototype.layoutRow=function(t){var e=t.getElement();t.modules.responsiveLayout&&(e.appendChild(t.modules.responsiveLayout.element),this.generateCollapsedRowContent(t))},V.prototype.updateColumnVisibility=function(t,e){t.modules.responsive&&(t.modules.responsive.visible=e,this.initialize())},V.prototype.hideColumn=function(t){var e=this.hiddenColumns.length;t.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent(),this.collapseHandleColumn&&!e&&this.collapseHandleColumn.show())},V.prototype.showColumn=function(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),"collapse"===this.mode&&((e=this.hiddenColumns.indexOf(t))>-1&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},V.prototype.update=function(){for(var t=!0;t;){var e="fitColumns"==this.table.modules.layout.getMode()?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),i=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-e;if(i<0){var n=this.columns[this.index];n?(this.hideColumn(n),this.index++):t=!1}else{var o=this.columns[this.index-1];o&&i>0&&i>=o.getWidth()?(this.showColumn(o),this.index--):t=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}},V.prototype.generateCollapsedContent=function(){var t=this;this.table.rowManager.getDisplayRows().forEach((function(e){t.generateCollapsedRowContent(e)}))},V.prototype.generateCollapsedRowContent=function(t){var e,i;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);(i=this.collapseFormatter(this.generateCollapsedRowData(t)))&&e.appendChild(i)}},V.prototype.generateCollapsedRowData=function(t){var e,i=this,n=t.getData(),o=[];return this.hiddenColumns.forEach((function(r){var a=r.getFieldValue(n);r.definition.title&&r.field&&(r.modules.format&&i.table.options.responsiveLayoutCollapseUseFormatters?(e={value:!1,data:{},getValue:function(){return a},getData:function(){return n},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return r.getComponent()}},o.push({title:r.definition.title,value:r.modules.format.formatter.call(i.table.modules.format,e,r.modules.format.params)})):o.push({title:r.definition.title,value:a}))})),o},V.prototype.formatCollapsedData=function(t){var e=document.createElement("table"),i="";return t.forEach((function(t){var e=document.createElement("div");t.value instanceof Node&&(e.appendChild(t.value),t.value=e.innerHTML),i+="<tr><td><strong>"+t.title+"</strong></td><td>"+t.value+"</td></tr>"})),e.innerHTML=i,Object.keys(t).length?e:""},h.prototype.registerModule("responsiveLayout",V);var W=function(t){this.table=t,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null};W.prototype.clearSelectionData=function(t){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],t||this._rowSelectionChanged()},W.prototype.initializeRow=function(t){var e=this,i=t.getElement(),n=function t(){setTimeout((function(){e.selecting=!1}),50),document.body.removeEventListener("mouseup",t)};t.modules.select={selected:!1},e.table.options.selectableCheck.call(this.table,t.getComponent())?(i.classList.add("tabulator-selectable"),i.classList.remove("tabulator-unselectable"),e.table.options.selectable&&"highlight"!=e.table.options.selectable&&("click"===e.table.options.selectableRangeMode?i.addEventListener("click",(function(i){if(i.shiftKey){e.table._clearSelection(),e.lastClickedRow=e.lastClickedRow||t;var n=e.table.rowManager.getDisplayRowIndex(e.lastClickedRow),o=e.table.rowManager.getDisplayRowIndex(t),r=n<=o?n:o,a=n>=o?n:o,s=e.table.rowManager.getDisplayRows().slice(0).splice(r,a-r+1);i.ctrlKey||i.metaKey?(s.forEach((function(i){i!==e.lastClickedRow&&(!0===e.table.options.selectable||e.isRowSelected(t)||e.selectedRows.length<e.table.options.selectable)&&e.toggleRow(i)})),e.lastClickedRow=t):(e.deselectRows(void 0,!0),!0!==e.table.options.selectable&&s.length>e.table.options.selectable&&(s=s.slice(0,e.table.options.selectable)),e.selectRows(s)),e.table._clearSelection()}else i.ctrlKey||i.metaKey?(e.toggleRow(t),e.lastClickedRow=t):(e.deselectRows(void 0,!0),e.selectRows(t),e.lastClickedRow=t)})):(i.addEventListener("click",(function(i){e.table.modExists("edit")&&e.table.modules.edit.getCurrentCell()||e.table._clearSelection(),e.selecting||e.toggleRow(t)})),i.addEventListener("mousedown",(function(i){if(i.shiftKey)return e.table._clearSelection(),e.selecting=!0,e.selectPrev=[],document.body.addEventListener("mouseup",n),document.body.addEventListener("keyup",n),e.toggleRow(t),!1})),i.addEventListener("mouseenter",(function(i){e.selecting&&(e.table._clearSelection(),e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))})),i.addEventListener("mouseout",(function(i){e.selecting&&(e.table._clearSelection(),e.selectPrev.unshift(t))}))))):(i.classList.add("tabulator-unselectable"),i.classList.remove("tabulator-selectable"))},W.prototype.toggleRow=function(t){this.table.options.selectableCheck.call(this.table,t.getComponent())&&(t.modules.select&&t.modules.select.selected?this._deselectRow(t):this._selectRow(t))},W.prototype.selectRows=function(t){var e,i=this;switch(void 0===t?"undefined":s(t)){case"undefined":this.table.rowManager.rows.forEach((function(t){i._selectRow(t,!0,!0)})),this._rowSelectionChanged();break;case"string":(e=this.table.rowManager.findRow(t))?this._selectRow(e,!0,!0):this.table.rowManager.getRows(t).forEach((function(t){i._selectRow(t,!0,!0)})),this._rowSelectionChanged();break;default:Array.isArray(t)?(t.forEach((function(t){i._selectRow(t,!0,!0)})),this._rowSelectionChanged()):this._selectRow(t,!1,!0)}},W.prototype._selectRow=function(t,e,i){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!i&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var n=this.table.rowManager.findRow(t);n?-1==this.selectedRows.indexOf(n)&&(n.modules.select||(n.modules.select={}),n.modules.select.selected=!0,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!0),n.getElement().classList.add("tabulator-selected"),this.selectedRows.push(n),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!0),e||this.table.options.rowSelected.call(this.table,n.getComponent()),this._rowSelectionChanged(e)):e||console.warn("Selection Error - No such row found, ignoring selection:"+t)},W.prototype.isRowSelected=function(t){return-1!==this.selectedRows.indexOf(t)},W.prototype.deselectRows=function(t,e){var i,n=this;if(void 0===t){i=n.selectedRows.length;for(var o=0;o<i;o++)n._deselectRow(n.selectedRows[0],!0);n._rowSelectionChanged(e)}else Array.isArray(t)?(t.forEach((function(t){n._deselectRow(t,!0)})),n._rowSelectionChanged(e)):n._deselectRow(t,e)},W.prototype._deselectRow=function(t,e){var i,n=this.table.rowManager.findRow(t);n?(i=this.selectedRows.findIndex((function(t){return t==n})))>-1&&(n.modules.select||(n.modules.select={}),n.modules.select.selected=!1,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!1),n.getElement().classList.remove("tabulator-selected"),this.selectedRows.splice(i,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!1),e||this.table.options.rowDeselected.call(this.table,n.getComponent()),this._rowSelectionChanged(e)):e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)},W.prototype.getSelectedData=function(){var t=[];return this.selectedRows.forEach((function(e){t.push(e.getData())})),t},W.prototype.getSelectedRows=function(){var t=[];return this.selectedRows.forEach((function(e){t.push(e.getComponent())})),t},W.prototype._rowSelectionChanged=function(t){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),t||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},W.prototype.registerRowSelectCheckbox=function(t,e){t._row.modules.select||(t._row.modules.select={}),t._row.modules.select.checkboxEl=e},W.prototype.registerHeaderSelectCheckbox=function(t){this.headerCheckboxElement=t},W.prototype.childRowSelection=function(t,e){var i=this.table.modules.dataTree.getChildren(t);if(e){var n=i,o=Array.isArray(n),r=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var s=a;this._selectRow(s,!0)}}else{var l=i,c=Array.isArray(l),u=0;for(l=c?l:l[Symbol.iterator]();;){var h;if(c){if(u>=l.length)break;h=l[u++]}else{if((u=l.next()).done)break;h=u.value}var d=h;this._deselectRow(d,!0)}}},h.prototype.registerModule("selectRow",W);var Y=function(t){this.table=t,this.sortList=[],this.changed=!1};Y.prototype.initializeColumn=function(t,e){var i,n,o=this,r=!1;switch(s(t.definition.sorter)){case"string":o.sorters[t.definition.sorter]?r=o.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":r=t.definition.sorter}t.modules.sort={sorter:r,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:void 0!==t.definition.headerSortTristate?t.definition.headerSortTristate:this.table.options.headerSortTristate},(void 0===t.definition.headerSort?!1!==this.table.options.headerSort:!1!==t.definition.headerSort)&&((i=t.getElement()).classList.add("tabulator-sortable"),(n=document.createElement("div")).classList.add("tabulator-arrow"),e.appendChild(n),i.addEventListener("click",(function(e){var i="",n=[],r=!1;if(t.modules.sort){if(t.modules.sort.tristate)i="none"==t.modules.sort.dir?t.modules.sort.startingDir:t.modules.sort.dir==t.modules.sort.startingDir?"asc"==t.modules.sort.dir?"desc":"asc":"none";else switch(t.modules.sort.dir){case"asc":i="desc";break;case"desc":i="asc";break;default:i=t.modules.sort.startingDir}o.table.options.columnHeaderSortMulti&&(e.shiftKey||e.ctrlKey)?((r=(n=o.getSort()).findIndex((function(e){return e.field===t.getField()})))>-1?(n[r].dir=i,r!=n.length-1&&(r=n.splice(r,1)[0],"none"!=i&&n.push(r))):"none"!=i&&n.push({column:t,dir:i}),o.setSort(n)):"none"==i?o.clear():o.setSort(t,i),o.table.rowManager.sorterRefresh(!o.sortList.length)}})))},Y.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},Y.prototype.getSort=function(){var t=[];return this.sortList.forEach((function(e){e.column&&t.push({column:e.column.getComponent(),field:e.column.getField(),dir:e.dir})})),t},Y.prototype.setSort=function(t,e){var i=this,n=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach((function(t){var e;(e=i.table.columnManager.findColumn(t.column))?(t.column=e,n.push(t),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)})),i.sortList=n,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},Y.prototype.clear=function(){this.setSort([])},Y.prototype.findSorter=function(t){var e,i=this.table.rowManager.activeRows[0],n="string";if(i&&(i=i.getData(),t.getField()))switch(void 0===(e=t.getFieldValue(i))?"undefined":s(e)){case"undefined":n="string";break;case"boolean":n="boolean";break;default:isNaN(e)||""===e?e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(n="alphanum"):n="number"}return this.sorters[n]},Y.prototype.sort=function(t){var e,i=this;e=this.table.options.sortOrderReverse?i.sortList.slice().reverse():i.sortList,i.table.options.dataSorting&&i.table.options.dataSorting.call(i.table,i.getSort()),i.clearColumnHeaders(),i.table.options.ajaxSorting?e.forEach((function(t,e){i.setColumnHeader(t.column,t.dir)})):e.forEach((function(n,o){n.column&&n.column.modules.sort&&(n.column.modules.sort.sorter||(n.column.modules.sort.sorter=i.findSorter(n.column)),i._sortItem(t,n.column,n.dir,e,o)),i.setColumnHeader(n.column,n.dir)})),i.table.options.dataSorted&&i.table.options.dataSorted.call(i.table,i.getSort(),i.table.rowManager.getComponents("active"))},Y.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach((function(t){t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"))}))},Y.prototype.setColumnHeader=function(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e)},Y.prototype._sortItem=function(t,e,i,n,o){var r=this,a="function"==typeof e.modules.sort.params?e.modules.sort.params(e.getComponent(),i):e.modules.sort.params;t.sort((function(t,s){var l=r._sortRow(t,s,e,i,a);if(0===l&&o)for(var c=o-1;c>=0&&0===(l=r._sortRow(t,s,n[c].column,n[c].dir,a));c--);return l}))},Y.prototype._sortRow=function(t,e,i,n,o){var r,a,s="asc"==n?t:e,l="asc"==n?e:t;return t=void 0!==(t=i.getFieldValue(s.getData()))?t:"",e=void 0!==(e=i.getFieldValue(l.getData()))?e:"",r=s.getComponent(),a=l.getComponent(),i.modules.sort.sorter.call(this,t,e,r,a,i.getComponent(),n,o)},Y.prototype.sorters={number:function(t,e,i,n,o,r,a){var s=a.alignEmptyValues,l=a.decimalSeparator||".",c=a.thousandSeparator||",",u=0;if(t=parseFloat(String(t).split(c).join("").split(l).join(".")),e=parseFloat(String(e).split(c).join("").split(l).join(".")),isNaN(t))u=isNaN(e)?0:-1;else{if(!isNaN(e))return t-e;u=1}return("top"===s&&"desc"===r||"bottom"===s&&"asc"===r)&&(u*=-1),u},string:function(t,e,i,n,o,r,a){var l,c=a.alignEmptyValues,u=0;if(t){if(e){switch(s(a.locale)){case"boolean":a.locale&&(l=this.table.modules.localize.getLocale());break;case"string":l=a.locale}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),l)}u=1}else u=e?-1:0;return("top"===c&&"desc"===r||"bottom"===c&&"asc"===r)&&(u*=-1),u},date:function(t,e,i,n,o,r,a){return a.format||(a.format="DD/MM/YYYY"),this.sorters.datetime.call(this,t,e,i,n,o,r,a)},time:function(t,e,i,n,o,r,a){return a.format||(a.format="hh:mm"),this.sorters.datetime.call(this,t,e,i,n,o,r,a)},datetime:function(t,e,i,n,o,r,a){var s=a.format||"DD/MM/YYYY hh:mm:ss",l=a.alignEmptyValues,c=0;if("undefined"!=typeof moment){if(t=moment(t,s),e=moment(e,s),t.isValid()){if(e.isValid())return t-e;c=1}else c=e.isValid()?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(t,e,i,n,o,r,a){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},array:function(t,e,i,n,o,r,a){var s=a.type||"length",l=a.alignEmptyValues,c=0;function u(t){switch(s){case"length":return t.length;case"sum":return t.reduce((function(t,e){return t+e}));case"max":return Math.max.apply(null,t);case"min":return Math.min.apply(null,t);case"avg":return t.reduce((function(t,e){return t+e}))/t.length}}if(Array.isArray(t)){if(Array.isArray(e))return(t?u(t):0)-(e?u(e):0);l=1}else l=Array.isArray(e)?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c},exists:function(t,e,i,n,o,r,a){return(void 0===t?0:1)-(void 0===e?0:1)},alphanum:function(t,e,i,n,o,r,a){var s,l,c,u,h,d=0,p=/(\d+)|(\D+)/g,f=/\d/,g=a.alignEmptyValues,m=0;if(t||0===t){if(e||0===e){if(isFinite(t)&&isFinite(e))return t-e;if((s=String(t).toLowerCase())===(l=String(e).toLowerCase()))return 0;if(!f.test(s)||!f.test(l))return s>l?1:-1;for(s=s.match(p),l=l.match(p),h=s.length>l.length?l.length:s.length;d<h;)if((c=s[d])!==(u=l[d++]))return isFinite(c)&&isFinite(u)?("0"===c.charAt(0)&&(c="."+c),"0"===u.charAt(0)&&(u="."+u),c-u):c>u?1:-1;return s.length>l.length}m=1}else m=e||0===e?-1:0;return("top"===g&&"desc"===r||"bottom"===g&&"asc"===r)&&(m*=-1),m}},h.prototype.registerModule("sort",Y);var q=function(t){this.table=t};return q.prototype.initializeColumn=function(t){var e,i=this,n=[];t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach((function(t){(e=i._extractValidator(t))&&n.push(e)})):(e=this._extractValidator(t.definition.validator))&&n.push(e),t.modules.validate=!!n.length&&n)},q.prototype._extractValidator=function(t){var e,i,n;switch(void 0===t?"undefined":s(t)){case"string":return(n=t.indexOf(":"))>-1?(e=t.substring(0,n),i=t.substring(n+1)):e=t,this._buildValidator(e,i);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}},q.prototype._buildValidator=function(t,e){var i="function"==typeof t?t:this.validators[t];return i?{type:"function"==typeof t?"function":t,func:i,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)},q.prototype.validate=function(t,e,i){var n=this,o=[];return t&&t.forEach((function(t){t.func.call(n,e,i,t.params)||o.push({type:t.type,parameters:t.params})})),!o.length||o},q.prototype.validators={integer:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&Math.floor(e)===e},float:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&e%1!=0},numeric:function(t,e,i){return""===e||null==e||!isNaN(e)},string:function(t,e,i){return""===e||null==e||isNaN(e)},max:function(t,e,i){return""===e||null==e||parseFloat(e)<=i},min:function(t,e,i){return""===e||null==e||parseFloat(e)>=i},minLength:function(t,e,i){return""===e||null==e||String(e).length>=i},maxLength:function(t,e,i){return""===e||null==e||String(e).length<=i},in:function(t,e,i){return""===e||null==e||("string"==typeof i&&(i=i.split("|")),""===e||i.indexOf(e)>-1)},regex:function(t,e,i){return""===e||null==e||new RegExp(i).test(e)},unique:function(t,e,i){if(""===e||null==e)return!0;var n=!0,o=t.getData(),r=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach((function(t){var i=t.getData();i!==o&&e==r.getFieldValue(i)&&(n=!1)})),n},required:function(t,e,i){return""!==e&&null!=e}},h.prototype.registerModule("validate",q),h},"object"===s(i)?t.exports=a():void 0===(r="function"==typeof(o=a)?o.call(i,n,i,t):o)||(t.exports=r)},2470:t=>{"use strict";if("undefined"==typeof moment){var e=new Error("Cannot find module 'moment'");throw e.code="MODULE_NOT_FOUND",e}t.exports=moment}},i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{Chart:()=>B(),Chroma:()=>h(),JWTDecode:()=>W(),Tabulator:()=>Z(),TabulatorFormatter:()=>G,bind:()=>r,cloneDeep:()=>Yt(),compose:()=>qt,copyToClipboard:()=>k,createElement:()=>T,dataURLtoBlob:()=>S,deepMerge:()=>R,flatpickr:()=>F,formatDate:()=>N,formatDateTime:()=>j,getCircularReplacer:()=>M,loadScript:()=>C,meltDateStr:()=>A,paramString:()=>x,svg_symbols:()=>d,toggleExpanderParent:()=>E,touch:()=>Ut,turf:()=>Xt,wire:()=>c});var e={};n.r(e),n.d(e,{Circle:()=>Qo,Geometry:()=>Je.Z,GeometryCollection:()=>ei,LineString:()=>ue.Z,LinearRing:()=>Br.Z,MultiLineString:()=>_e,MultiPoint:()=>ke,MultiPolygon:()=>De,Point:()=>xe.Z,Polygon:()=>Te.ZP});var i=function(t){var e={};try{e.WeakMap=WeakMap}catch(u){e.WeakMap=function(t,e){var i=e.defineProperty,n=e.hasOwnProperty,o=r.prototype;return o.delete=function(t){return this.has(t)&&delete t[this._]},o.get=function(t){return this.has(t)?t[this._]:void 0},o.has=function(t){return n.call(t,this._)},o.set=function(t,e){return i(t,this._,{configurable:!0,value:e}),this},r;function r(e){i(this,"_",{value:"_@ungap/weakmap"+t++}),e&&e.forEach(a,this)}function a(t){this.set(t[0],t[1])}}(Math.random(),Object)}var i=e.WeakMap,n={};try{n.WeakSet=WeakSet}catch(u){!function(t,e){var i=o.prototype;function o(){e(this,"_",{value:"_@ungap/weakmap"+t++})}i.add=function(t){return this.has(t)||e(t,this._,{value:!0,configurable:!0}),this},i.has=function(t){return this.hasOwnProperty.call(t,this._)},i.delete=function(t){return this.has(t)&&delete t[this._]},n.WeakSet=o}(Math.random(),Object.defineProperty)}function o(t,e,i,n,o,r){for(var a=("selectedIndex"in e),s=a;n<o;){var l=t(i[n],1);if(e.insertBefore(l,r),a&&s&&l.selected){s=!s;var c=e.selectedIndex;e.selectedIndex=c<0?n:h.call(e.querySelectorAll("option"),l)}n++}}function r(t,e){return t==e}function a(t){return t}function s(t,e,i,n,o,r,a){var s=r-o;if(s<1)return-1;for(;s<=i-e;){for(var l=e,c=o;l<i&&c<r&&a(t[l],n[c]);)l++,c++;if(c===r)return e;e=l+1}return-1}function l(t,e,i,n,o){return i<n?t(e[i],0):0<i?t(e[i-1],-0).nextSibling:o}function c(t,e,i,n){for(;i<n;)p(t(e[i++],-1))}var u=n.WeakSet,h=[].indexOf,d=function(t,e,i){for(var n=1,o=e;n<o;){var r=(n+o)/2>>>0;i<t[r]?o=r:n=1+r}return n},p=function(t){return(t.remove||function(){var t=this.parentNode;t&&t.removeChild(this)}).call(t)};function f(t,e,i,n){for(var u=(n=n||{}).compare||r,h=n.node||a,p=null==n.before?null:h(n.before,0),f=e.length,g=f,m=0,v=i.length,y=0;m<g&&y<v&&u(e[m],i[y]);)m++,y++;for(;m<g&&y<v&&u(e[g-1],i[v-1]);)g--,v--;var b=m===g,w=y===v;if(b&&w)return i;if(b&&y<v)return o(h,t,i,y,v,l(h,e,m,f,p)),i;if(w&&m<g)return c(h,e,m,g),i;var _=g-m,x=v-y,C=-1;if(_<x){if(-1<(C=s(i,y,v,e,m,g,u)))return o(h,t,i,y,C,h(e[m],0)),o(h,t,i,C+_,v,l(h,e,g,f,p)),i}else if(x<_&&-1<(C=s(e,m,g,i,y,v,u)))return c(h,e,m,C),c(h,e,C+x,g),i;return _<2||x<2?(o(h,t,i,y,v,h(e[m],0)),c(h,e,m,g)):_==x&&function(t,e,i,n,o,r){for(;n<o&&r(i[n],t[e-1]);)n++,e--;return 0===e}(i,v,e,m,g,u)?o(h,t,i,y,v,l(h,e,g,f,p)):function(t,e,i,n,r,a,s,l,u,h,p,f,g){!function(t,e,i,n,r,a,s,l,u){for(var h=[],d=t.length,p=s,f=0;f<d;)switch(t[f++]){case 0:r++,p++;break;case 1:h.push(n[r]),o(e,i,n,r++,r,p<l?e(a[p],0):u);break;case-1:p++}for(f=0;f<d;)switch(t[f++]){case 0:s++;break;case-1:-1<h.indexOf(a[s])?s++:c(e,a,s++,s)}}(function(t,e,i,n,o,r,a){var s,l,c,u,h,d,p,f=i+r,g=[];t:for(s=0;s<=f;s++){if(50<s)return null;for(p=s-1,h=s?g[s-1]:[0,0],d=g[s]=[],l=-s;l<=s;l+=2){for(c=(u=l===-s||l!==s&&h[p+l-1]<h[p+l+1]?h[p+l+1]:h[p+l-1]+1)-l;u<r&&c<i&&a(n[o+u],t[e+c]);)u++,c++;if(u===r&&c===i)break t;d[s+l]=u}}var m=Array(s/2+f/2),v=m.length-1;for(s=g.length-1;0<=s;s--){for(;0<u&&0<c&&a(n[o+u-1],t[e+c-1]);)m[v--]=0,u--,c--;if(!s)break;p=s-1,h=s?g[s-1]:[0,0],(l=u-c)==-s||l!==s&&h[p+l-1]<h[p+l+1]?(c--,m[v--]=1):(u--,m[v--]=-1)}return m}(i,n,a,s,l,h,f)||function(t,e,i,n,o,r,a,s){var l=0,c=n<s?n:s,u=Array(c++),h=Array(c);h[0]=-1;for(var p=1;p<c;p++)h[p]=a;for(var f=o.slice(r,a),g=e;g<i;g++){var m=f.indexOf(t[g]);if(-1<m){var v=m+r;-1<(l=d(h,c,v))&&(h[l]=v,u[l]={newi:g,oldi:v,prev:u[l-1]})}}for(l=--c,--a;h[l]>a;)--l;c=s+n-l;var y=Array(c),b=u[l];for(--i;b;){for(var w=b.newi,_=b.oldi;w<i;)y[--c]=1,--i;for(;_<a;)y[--c]=-1,--a;y[--c]=0,--i,--a,b=b.prev}for(;e<=i;)y[--c]=1,--i;for(;r<=a;)y[--c]=-1,--a;return y}(i,n,r,a,s,l,u,h),t,e,i,n,s,l,p,g)}(h,t,i,y,v,x,e,m,g,_,f,u,p),i}var g={};function m(e,i){i=i||{};var n=t.createEvent("CustomEvent");return n.initCustomEvent(e,!!i.bubbles,!!i.cancelable,i.detail),n}g.CustomEvent="function"==typeof CustomEvent?CustomEvent:(m["prototype"]=new m("").constructor.prototype,m);var v=g.CustomEvent,y={};try{y.Map=Map}catch(u){y.Map=function(){var t=0,e=[],i=[];return{delete:function(o){var r=n(o);return r&&(e.splice(t,1),i.splice(t,1)),r},forEach:function(t,n){e.forEach((function(e,o){t.call(n,i[o],e,this)}),this)},get:function(e){return n(e)?i[t]:void 0},has:function(t){return n(t)},set:function(o,r){return i[n(o)?t:e.push(o)-1]=r,this}};function n(i){return-1<(t=e.indexOf(i))}}}var b=y.Map;function w(){return this}function _(t,e){var i="_"+t+"$";return{get:function(){return this[i]||x(this,i,e.call(this,t))},set:function(t){x(this,i,t)}}}var x=function(t,e,i){return Object.defineProperty(t,e,{configurable:!0,value:"function"==typeof i?function(){return t._wire$=i.apply(this,arguments)}:i})[e]};Object.defineProperties(w.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});var C,E,k,T,S,M,R={},P={},L=[],O=P.hasOwnProperty,D=0,I={attributes:R,define:function(t,e){t.indexOf("-")<0?(t in P||(D=L.push(t)),P[t]=e):R[t]=e},invoke:function(t,e){for(var i=0;i<D;i++){var n=L[i];if(O.call(t,n))return P[n](t[n],e)}}},F=Array.isArray||(E=(C={}.toString).call([]),function(t){return C.call(t)===E}),A=(k=t,T="fragment",M="content"in j(S="template")?function(t){var e=j(S);return e.innerHTML=t,e.content}:function(t){var e=j(T),i=j(S),n=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(t)){var o=RegExp.$1;i.innerHTML="<table>"+t+"</table>",n=i.querySelectorAll(o)}else i.innerHTML=t,n=i.childNodes;return N(e,n),e},function(t,e){return("svg"===e?function(t){var e=j(T),i=j("div");return i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>",N(e,i.firstChild.childNodes),e}:M)(t)});function N(t,e){for(var i=e.length;i--;)t.appendChild(e[0])}function j(t){return t===T?k.createDocumentFragment():k.createElementNS("http://www.w3.org/1999/xhtml",t)}var z,Z,G,H,B,V,W,Y,q,U=(Z="appendChild",G="cloneNode",H="createTextNode",V=(B="importNode")in(z=t),(W=z.createDocumentFragment())[Z](z[H]("g")),W[Z](z[H]("")),(V?z[B](W,!0):W[G](!0)).childNodes.length<2?function t(e,i){for(var n=e[G](),o=e.childNodes||[],r=o.length,a=0;i&&a<r;a++)n[Z](t(o[a],i));return n}:V?z[B]:function(t,e){return t[G](!!e)}),X="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},$="-"+Math.random().toFixed(6)+"%",K=!1;try{Y=t.createElement("template"),q="tabindex","content"in Y&&(Y.innerHTML="<p "+q+'="'+$+'"></p>',Y.content.childNodes[0].getAttribute(q)==$)||($="_dt: "+$.slice(1,-1)+";",K=!0)}catch(u){}var J="\x3c!--"+$+"--\x3e",Q=/^(?:style|textarea)$/i,tt=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,et=" \\f\\n\\r\\t",it="[^"+et+"\\/>\"'=]+",nt="["+et+"]+"+it,ot="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",rt="(?:\\s*=\\s*(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+it.replace("\\/","")+"))?)",at=new RegExp(ot+nt+rt+"+)(["+et+"]*/?>)","g"),st=new RegExp(ot+nt+rt+"*)(["+et+"]*/>)","g"),lt=new RegExp("("+nt+"\\s*=\\s*)(['\"]?)"+J+"\\2","gi");function ct(t,e,i,n){return"<"+e+i.replace(lt,ut)+n}function ut(t,e,i){return e+(i||'"')+$+(i||'"')}function ht(t,e,i){return tt.test(e)?t:"<"+e+i+"></"+e+">"}var dt=K?function(t,e){var i=e.join(" ");return e.slice.call(t,0).sort((function(t,e){return i.indexOf(t.name)<=i.indexOf(e.name)?-1:1}))}:function(t,e){return e.slice.call(t,0)};function pt(t,e){for(var i=e.length,n=0;n<i;)t=t.childNodes[e[n++]];return t}function ft(e,i,n,o){for(var r=e.attributes,a=[],s=[],l=dt(r,n),c=l.length,u=0;u<c;){var h,d=l[u++],p=d.value===$;if(p||1<(h=d.value.split(J)).length){var f=d.name;if(a.indexOf(f)<0){a.push(f);var g=n.shift().replace(p?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+f+")\\s*=\\s*('|\")[\\S\\s]*","i"),"$1"),m=r[g]||r[g.toLowerCase()];if(p)i.push(gt(m,o,g,null));else{for(var v=h.length-2;v--;)n.shift();i.push(gt(m,o,g,h))}}s.push(d)}}for(var y=((u=0)<(c=s.length)&&K&&!("ownerSVGElement"in e));u<c;){var b=s[u++];y&&(b.value=""),e.removeAttribute(b.name)}var w=e.nodeName;if(/^script$/i.test(w)){var _=t.createElement(w);for(c=r.length,u=0;u<c;)_.setAttributeNode(r[u++].cloneNode(!0));_.textContent=e.textContent,e.parentNode.replaceChild(_,e)}}function gt(t,e,i,n){return{type:"attr",node:t,path:e,name:i,sparse:n}}function mt(t,e){return{type:"text",node:t,path:e}}var vt,yt=(vt=new i,{get:function(t){return vt.get(t)},set:function(t,e){return vt.set(t,e),e}});function bt(t,e){var i=(t.convert||function(t){return t.join(J).replace(st,ht).replace(at,ct)})(e),n=t.transform;n&&(i=n(i));var o=A(i,t.type);_t(o);var r=[];return function t(e,i,n,o){for(var r=e.childNodes,a=r.length,s=0;s<a;){var l=r[s];switch(l.nodeType){case 1:var c=o.concat(s);ft(l,i,n,c),t(l,i,n,c);break;case 8:var u=l.textContent;if(u===$)n.shift(),i.push(Q.test(e.nodeName)?mt(e,o):{type:"any",node:l,path:o.concat(s)});else switch(u.slice(0,2)){case"/*":if("*/"!==u.slice(-2))break;case"👻":e.removeChild(l),s--,a--}break;case 3:Q.test(e.nodeName)&&X.call(l.textContent)===J&&(n.shift(),i.push(mt(e,o)))}s++}}(o,r,e.slice(0),[]),{content:o,updates:function(i){for(var n=[],o=r.length,a=0,s=0;a<o;){var l=r[a++],c=pt(i,l.path);switch(l.type){case"any":n.push({fn:t.any(c,[]),sparse:!1});break;case"attr":var u=l.sparse,h=t.attribute(c,l.name,l.node);null===u?n.push({fn:h,sparse:!1}):(s+=u.length-2,n.push({fn:h,sparse:!0,values:u}));break;case"text":n.push({fn:t.text(c),sparse:!1}),c.textContent=""}}return o+=s,function(){var t=arguments.length;if(o!==t-1)throw new Error(t-1+" values instead of "+o+"\n"+e.join("${value}"));for(var r=1,a=1;r<t;){var s=n[r-a];if(s.sparse){var l=s.values,c=l[0],u=1,h=l.length;for(a+=h-2;u<h;)c+=arguments[r++]+l[u++];s.fn(c)}else s.fn(arguments[r++])}return i}}}}var wt=[];function _t(t){for(var e=t.childNodes,i=e.length;i--;){var n=e[i];1!==n.nodeType&&0===X.call(n.textContent).length&&t.removeChild(n)}}var xt,Ct,Et=(xt=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Ct=/([^A-Z])([A-Z]+)/g,function(t,e){return"ownerSVGElement"in t?function(t,e){var i;return(i=e?e.cloneNode(!0):(t.setAttribute("style","--hyper:style;"),t.getAttributeNode("style"))).value="",t.setAttributeNode(i),Tt(i,!0)}(t,e):Tt(t.style,!1)});function kt(t,e,i){return e+"-"+i.toLowerCase()}function Tt(t,e){var i,n;return function(o){var r,a,s,l;switch(typeof o){case"object":if(o){if("object"===i){if(!e&&n!==o)for(a in n)a in o||(t[a]="")}else e?t.value="":t.cssText="";for(a in r=e?{}:t,o)s="number"!=typeof(l=o[a])||xt.test(a)?l:l+"px",!e&&/^--/.test(a)?r.setProperty(a,s):r[a]=s;i="object",e?t.value=function(t){var e,i=[];for(e in t)i.push(e.replace(Ct,kt),":",t[e],";");return i.join("")}(n=r):n=o;break}default:n!=o&&(i="string",n=o,e?t.value=o||"":t.cssText=o||"")}}}var St,Mt,Rt=(St=[].slice,(Mt=Pt.prototype).ELEMENT_NODE=1,Mt.nodeType=111,Mt.remove=function(t){var e=this.childNodes,i=this.firstChild,n=this.lastChild;if(this._=null,t&&2===e.length)n.parentNode.removeChild(n);else{var o=this.ownerDocument.createRange();o.setStartBefore(t?e[1]:i),o.setEndAfter(n),o.deleteContents()}return i},Mt.valueOf=function(t){var e=this._,i=null==e;if(i&&(e=this._=this.ownerDocument.createDocumentFragment()),i||t)for(var n=this.childNodes,o=0,r=n.length;o<r;o++)e.appendChild(n[o]);return e},Pt);function Pt(t){var e=this.childNodes=St.call(t,0);this.firstChild=e[0],this.lastChild=e[e.length-1],this.ownerDocument=e[0].ownerDocument,this._=null}function Lt(t){return{html:t}}function Ot(t,e){switch(t.nodeType){case Ht:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case Gt:return Ot(t.render(),e);default:return t}}function Dt(t,e){e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(Lt).then(e):Promise.resolve(I.invoke(t,e)).then(e)}function It(t){return null!=t&&"then"in t}var Ft,At,Nt,jt,zt,Zt="ownerSVGElement",Gt=w.prototype.nodeType,Ht=Rt.prototype.nodeType,Bt=(At=(Ft={Event:v,WeakSet:u}).Event,Nt=Ft.WeakSet,jt=!0,zt=null,function(t){return jt&&(jt=!jt,zt=new Nt,function(t){var e=new Nt,i=new Nt;try{new MutationObserver(a).observe(t,{subtree:!0,childList:!0})}catch(e){var n=0,o=[],r=function(t){o.push(t),clearTimeout(n),n=setTimeout((function(){a(o.splice(n=0,o.length))}),0)};t.addEventListener("DOMNodeRemoved",(function(t){r({addedNodes:[],removedNodes:[t.target]})}),!0),t.addEventListener("DOMNodeInserted",(function(t){r({addedNodes:[t.target],removedNodes:[]})}),!0)}function a(t){for(var n,o=t.length,r=0;r<o;r++)s((n=t[r]).removedNodes,"disconnected",i,e),s(n.addedNodes,"connected",e,i)}function s(t,e,i,n){for(var o,r=new At(e),a=t.length,s=0;s<a;1===(o=t[s++]).nodeType&&l(o,r,e,i,n));}function l(t,e,i,n,o){zt.has(t)&&!n.has(t)&&(o.delete(t),n.add(t),t.dispatchEvent(e));for(var r=t.children||[],a=r.length,s=0;s<a;l(r[s++],e,i,n,o));}}(t.ownerDocument)),zt.add(t),t}),Vt=/^(?:form|list)$/i,Wt=[].slice;function Yt(e){return this.type=e,function(e){var i=wt,n=_t;return function(o){var r,a,s;return i!==o&&(r=e,a=i=o,s=yt.get(a)||yt.set(a,bt(r,a)),n=s.updates(U.call(t,s.content,!0))),n.apply(null,arguments)}}(this)}var qt=!(Yt.prototype={attribute:function(t,e,i){var n,o=Zt in t;if("style"===e)return Et(t,i,o);if("."===e.slice(0,1))return a=t,s=e.slice(1),o?function(t){try{a[s]=t}catch(e){a.setAttribute(s,t)}}:function(t){a[s]=t};if(/^on/.test(e)){var r=e.slice(2);return"connected"===r||"disconnected"===r?Bt(t):e.toLowerCase()in t&&(r=r.toLowerCase()),function(e){n!==e&&(n&&t.removeEventListener(r,n,!1),(n=e)&&t.addEventListener(r,e,!1))}}if("data"===e||!o&&e in t&&!Vt.test(e))return function(i){n!==i&&(n=i,t[e]!==i&&null==i?(t[e]="",t.removeAttribute(e)):t[e]=i)};if(e in I.attributes)return function(i){var o=I.attributes[e](t,i);n!==o&&(null==(n=o)?t.removeAttribute(e):t.setAttribute(e,o))};var a,s,l=!1,c=i.cloneNode(!0);return function(e){n!==e&&(n=e,c.value!==e&&(null==e?(l&&(l=!1,t.removeAttributeNode(c)),c.value=e):(c.value=e,l||(l=!0,t.setAttributeNode(c)))))}},any:function(t,e){var i,n={node:Ot,before:t},o=Zt in t?"svg":"html",r=!1;return function a(s){switch(typeof s){case"string":case"number":case"boolean":r?i!==s&&(i=s,e[0].textContent=s):(r=!0,i=s,e=f(t.parentNode,e,[(l=s,t.ownerDocument.createTextNode(l))],n));break;case"function":a(s(t));break;case"object":case"undefined":if(null==s){r=!1,e=f(t.parentNode,e,[],n);break}default:if(r=!1,F(i=s))if(0===s.length)e.length&&(e=f(t.parentNode,e,[],n));else switch(typeof s[0]){case"string":case"number":case"boolean":a({html:s});break;case"object":if(F(s[0])&&(s=s.concat.apply([],s)),It(s[0])){Promise.all(s).then(a);break}default:e=f(t.parentNode,e,s,n)}else"ELEMENT_NODE"in s?e=f(t.parentNode,e,11===s.nodeType?Wt.call(s.childNodes):[s],n):It(s)?s.then(a):"placeholder"in s?Dt(s,a):"text"in s?a(String(s.text)):"any"in s?a(s.any):"html"in s?e=f(t.parentNode,e,Wt.call(A([].concat(s.html).join(""),o).childNodes),n):a("length"in s?Wt.call(s):I.invoke(s,a))}var l}},text:function(t){var e;return function i(n){if(e!==n){var o=typeof(e=n);"object"==o&&n?It(n)?n.then(i):"placeholder"in n?Dt(n,i):i("text"in n?String(n.text):"any"in n?n.any:"html"in n?[].concat(n.html).join(""):"length"in n?Wt.call(n).join(""):I.invoke(n,i)):"function"==o?i(n(t)):t.textContent=null==n?"":n}}}}),Ut=function(e){var n,o=(n=(t.defaultView.navigator||{}).userAgent,/(Firefox|Safari)\/(\d+)/.test(n)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(n)),r=!("raw"in e)||e.propertyIsEnumerable("raw")||!Object.isFrozen(e.raw);if(o||r){var a={},s=function(t){for(var e=".",i=0;i<t.length;i++)e+=t[i].length+"."+t[i];return a[e]||(a[e]=t)};if(r)Ut=s;else{var l=new i;Ut=function(t){return l.get(t)||(i=s(e=t),l.set(e,i),i);var e,i}}}else qt=!0;return Xt(e)};function Xt(t){return qt?t:Ut(t)}function $t(t){for(var e=arguments.length,i=[Xt(t)],n=1;n<e;)i.push(arguments[n++]);return i}var Kt=new i,Jt=function(t){var e,i,n;return function(){var o=$t.apply(null,arguments);return n!==o[0]?(n=o[0],i=new Yt(t),e=te(i.apply(i,o))):i.apply(i,o),e}},Qt=function(t,e){var i=e.indexOf(":"),n=Kt.get(t),o=e;return-1<i&&(o=e.slice(i+1),e=e.slice(0,i)||"html"),n||Kt.set(t,n={}),n[o]||(n[o]=Jt(e))},te=function(t){var e=t.childNodes,i=e.length;return 1===i?e[0]:i?new Rt(e):t},ee=new i;function ie(){var t=ee.get(this),e=$t.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):function(t){var e=new Yt(Zt in this?"svg":"html");ee.set(this,{tagger:e,template:t}),this.textContent="",this.appendChild(e.apply(null,arguments))}.apply(this,e),this}var ne,oe,re,ae,se=I.define,le=Yt.prototype;function ce(t){return arguments.length<2?null==t?Jt("html"):"string"==typeof t?ce.wire(null,t):"raw"in t?Jt("html")(t):"nodeType"in t?ce.bind(t):Qt(t,"html"):("raw"in t?Jt("html"):ce.wire).apply(null,arguments)}return ce.Component=w,ce.bind=function(t){return ie.bind(t)},ce.define=se,ce.diff=f,(ce.hyper=ce).observe=Bt,ce.tagger=le,ce.wire=function(t,e){return null==t?Jt(e||"html"):Qt(t,e||"html")},ce._={WeakMap:i,WeakSet:u},ne=Jt,oe=new i,re=Object.create,ae=function(t,e){var i={w:null,p:null};return e.set(t,i),i},Object.defineProperties(w,{for:{configurable:!0,value:function(t,e){return function(t,e,n,o){var r,a,s,l=e.get(t)||ae(t,e);switch(typeof o){case"object":case"function":var c=l.w||(l.w=new i);return c.get(o)||(r=c,a=o,s=new t(n),r.set(a,s),s);default:var u=l.p||(l.p=re(null));return u[o]||(u[o]=new t(n))}}(this,oe.get(t)||(n=t,o=new b,oe.set(n,o),o),t,null==e?"default":e);var n,o}}}),Object.defineProperties(w.prototype,{handleEvent:{value:function(t){var e=t.currentTarget;this["getAttribute"in e&&e.getAttribute("data-call")||"on"+t.type](t)}},html:_("html",ne),svg:_("svg",ne),state:_("state",(function(){return this.defaultState})),defaultState:{get:function(){return{}}},dispatch:{value:function(t,e){var i=this._wire$;if(i){var n=new v(t,{bubbles:!0,cancelable:!0,detail:e});return n.component=this,(i.dispatchEvent?i:i.firstChild).dispatchEvent(n)}return!1}},setState:{value:function(t,e){var i=this.state,n="function"==typeof t?t.call(this,i):t;for(var o in n)i[o]=n[o];return!1!==e&&this.render(),this}}}),ce}(document);const{Component:o,bind:r,define:a,diff:s,hyper:l,wire:c}=i;var u=n(5792),h=n.n(u);const d=t=>{if(t.svg)return t.svg;const e={dot:f(t),target:g(t),triangle:m(t),square:v(t),semiCircle:y(t),markerLetter:b(t),markerColor:w(t),geo:_()};return t.type?e[t.type]:f({color:"#666"})},p=new XMLSerializer;function f(t){const e=c()`
  <svg width=866 height=1000 viewBox='0 0 866 1000' xmlns='http://www.w3.org/2000/svg'>`;return e.appendChild(c(null,"svg")`
  <circle cx=466 cy=532 r=395 fill=${h()(t.fillColor||"#fff").darken()}>`),e.appendChild(c(null,"svg")`
  <circle cx=400 cy=468 r=395 fill=${t.fillColor||"#fff"}>`),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function g(t){const e=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;let i=c(null,"svg")`
  <circle cx=540 cy=540 fill='#333' opacity=0.4>`;i.setAttribute("r",400),e.appendChild(i);let n=c(null,"svg")`<circle cx=500 cy=500 fill=${t.fillColor||"#FFF"}>`;return n.setAttribute("r",400),e.appendChild(n),t.layers?(Object.entries(t.layers).forEach(t=>{const i=c(null,"svg")`<circle cx=500 cy=500 fill=${t[1]}>`;i.setAttribute("r",400*parseFloat(t[0])),e.appendChild(i)}),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))):"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function m(t){const e=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;let i="M0,-19.618873042551414L16.990442448471224,9.809436521275707L-16.990442448471224,9.809436521275707Z",n=c(null,"svg")`<path fill='#333' opacity=0.4>`;n.setAttribute("d",i),n.setAttribute("transform","translate(540 520) rotate(180) scale(-20, -20)"),e.appendChild(n);let o=c(null,"svg")`<path fill=${t.fillColor||"#FFF"}>`;return o.setAttribute("d",i),o.setAttribute("transform","translate(500 500) rotate(180) scale(-20, -20)"),e.appendChild(o),t.layers?(Object.entries(t.layers).map(t=>{const n=c(null,"svg")`<path fill=${t[1]}>`;n.setAttribute("d",i),n.setAttribute("transform",`translate(500 500) rotate(180) scale(${-20*t[0]}, ${-20*t[0]})`),e.appendChild(n)}),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))):"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function v(t){let e=1e3,i=800;const n=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;let o=c(null,"svg")`<rect fill='#333' opacity=0.3 >`;o.setAttribute("width",i),o.setAttribute("height",i),o.setAttribute("x",110),o.setAttribute("y",110),n.appendChild(o);let r=c(null,"svg")`<rect fill=${t.fillColor||"#FFF"}>`;return r.setAttribute("width",i),r.setAttribute("height",i),r.setAttribute("x",100),r.setAttribute("y",100),n.appendChild(r),t.layers?(Object.entries(t.layers).map(t=>{const o=c(null,"svg")`<rect fill=${t[1]}>`;o.setAttribute("width",t[0]*i),o.setAttribute("height",t[0]*i),o.setAttribute("x",(e-t[0]*i)/2),o.setAttribute("y",(e-t[0]*i)/2),n.appendChild(o)}),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(n))):"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(n))}function y(t){const e=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>
    <defs>
      <clipPath id="cut-off-shade">
        <rect x="0" y="0" width="1000" height="710"/>
      </clipPath>
      <clipPath id="cut-off">
        <rect x="0" y="0" width="1000" height="700"/>
      </clipPath>
    </defs>
    <circle cx="510" cy="710" r="400" fill="#333" opacity="0.3" clip-path="url(#cut-off-shade)"/>
  </svg>`;return e.appendChild(c(null,"svg")`
  <circle cx=500 cy=700 r=400 fill=${t.fillColor} clip-path='url(#cut-off)'>`),t.layers&&Object.entries(t.layers).map(t=>{const i=c(null,"svg")`<circle cx=500 cy=700 fill=${t[1]} clip-path='url(#cut-off)'>`;i.setAttribute("r",parseInt(400*parseFloat(t[0]))),e.appendChild(i)}),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function b(t){const e=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;return e.appendChild(c(null,"svg")`
  <path style="opacity: 0.5;" fill=${t.color}
    d="M570,20C370,20,210,180,210,380C210,460,230,520,280,610C380,780,570,1000,570,1000C570,1000,760,780,860,610C910,520,930,460,930,380C930,180,770,20,570,20Z"/>`),e.appendChild(c(null,"svg")`
  <path fill=${t.color}
    d="M500,20C300,20,140,180,140,380C140,440,160,520,210,610C310,780,500,1000,500,1000C500,1000,690,780,790,610C840,520,860,460,860,380C860,180,700,20,500,20Z"/>`),e.appendChild(c(null,"svg")`
  <circle cx=500 cy=360 r=250 opacity=0.8 fill="rgb(255, 255, 255)"/>`),e.appendChild(c(null,"svg")`
  <text x=500 y=500 style="text-anchor: middle; font-weight: 600; font-size: 470px; font-family: sans-serif; fill: rgb(85, 85, 85);">
    ${t.letter}`),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function w(t){const e=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;return e.appendChild(c(null,"svg")`
  <path style="opacity: 0.5;" fill=${t.colorMarker}
    d="M570,20C370,20,210,180,210,380C210,460,230,520,280,610C380,780,570,1000,570,1000C570,1000,760,780,860,610C910,520,930,460,930,380C930,180,770,20,570,20Z"/>`),e.appendChild(c(null,"svg")`
  <path fill=${t.colorMarker}
    d="M500,20C300,20,140,180,140,380C140,440,160,520,210,610C310,780,500,1000,500,1000C500,1000,690,780,790,610C840,520,860,460,860,380C860,180,700,20,500,20Z"/>`),e.appendChild(c(null,"svg")`
  <circle cx=500 cy=360 r=250 opacity=0.8 fill="rgb(255, 255, 255)"/>`),e.appendChild(c(null,"svg")`
  <circle cx=500 cy=360 r=180 opacity=0.8 fill=${t.colorDot}/>`),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(e))}function _(){const t=c()`
  <svg width=1000 height=1000 viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'>`;t.appendChild(c(null,"svg")`
  <circle cx=500 cy=500 r=350 stroke='#1F964D' opacity=0.8 stroke-width=75 fill=none>`),t.appendChild(c(null,"svg")`
  <circle cx=500 cy=500 r=200 fill='#1F964D' opacity=0.8>`);let e=c(null,"svg")`
  <path stroke='#1F964D' opacity=0.8 stroke-width=75>`;return e.setAttribute("d","M500,150L500,0M500,850L500,1000M0,500L150,500M850,500L1000,500"),t.appendChild(e),"data:image/svg+xml,"+encodeURIComponent(p.serializeToString(t))}const x=t=>Object.entries(t).filter(t=>0===t[1]||!!t[1]).filter(t=>"{}"!==t[1]).filter(t=>t[1].length>0||"object"!=typeof t[1]).map(t=>encodeURI(`${t[0]}=${t[1]}`)).join("&");function C(t){return new Promise((e,i)=>{const n=Object.assign(document.createElement("script"),{src:t,onerror:()=>i(console.error("failed:"+t)),onload:()=>e(console.log("loaded:"+t))});document.head.appendChild(n)})}function E(t,e){const i=t.closest(".expandable");if(i){if(i.classList.contains("expanded"))return i.classList.remove("expanded");e&&[...i.parentElement.children].forEach(t=>{t.classList.remove("expanded")}),i.classList.add("expanded")}}function k(t){let e=_xyz.utils.wire()`<textarea style="visibility=none;">`;e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}function T(t){let e=document.createElement(t.tag);return t.options&&Object.keys(t.options).forEach(i=>{t.options[i]&&(e[i]=t.options[i])}),t.style&&Object.keys(t.style).forEach(i=>e.style[i]=t.style[i]),t.appendTo&&t.appendTo.appendChild(e),t.eventListener&&e.addEventListener(t.eventListener.event,t.eventListener.funct),e}function S(t){if(-1==t.indexOf(";base64,")){let e=t.split(","),i=e[0].split(":")[1],n=e[1];return new Blob([n],{type:i})}let e=t.split(";base64,"),i=e[0].split(":")[1],n=window.atob(e[1]),o=new Uint8Array(n.length);for(let t=0;t<n.length;++t)o[t]=n.charCodeAt(t);return new Blob([o],{type:i})}const M=()=>{const t=new WeakSet;return(e,i)=>{if("object"==typeof i&&null!==i){if(t.has(i))return;t.add(i)}return i}};function R(t,e,i){var n=Array.isArray(e),o=(i||{arrayMerge:O}).arrayMerge||O;return n?Array.isArray(t)?o(t,e,i):L(e,i):function(t,e,i){var n={};P(t)&&Object.keys(t).forEach((function(e){n[e]=L(t[e],i)}));return Object.keys(e).forEach((function(o){P(e[o])&&t[o]?n[o]=R(t[o],e[o],i):n[o]=L(e[o],i)})),n}(t,e,i)}function P(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function L(t,e){var i;return e&&!0===e.clone&&P(t)?R((i=t,Array.isArray(i)?[]:{}),t,e):t}function O(t,e,i){var n=t.slice();return e.forEach((function(e,o){void 0===n[o]?n[o]=L(e,i):P(e)?n[o]=R(t[o],e,i):-1===t.indexOf(e)&&n.push(L(e,i))})),n}var D=n(4953),I=n.n(D);function F(t){return I()(t.element,{defaultDate:t.value,enableTime:t.enableTime||!1,time_24hr:!0,dateFormat:t.enableTime?"j M Y H:i":"j M Y",onClose:(e,i,n)=>{t.callback(i)}})}function A(t){return Math.round(new Date(t).getTime()/1e3)}function N(t){if(!t)return;if(t=parseInt(t)?t:t.getValue(),isNaN(parseInt(t)))return" ";let e=new Date(1e3*t),i=e.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],o=e.getDate();e.getDay();return`${o} ${n} ${i}`}function j(t){if(!t)return;if(t=parseInt(t)?t:t.getValue(),isNaN(parseInt(t)))return" ";let e=N(t),i=new Date(1e3*t),n="0"+i.getHours(),o="0"+i.getMinutes();i.getSeconds();return`${e}, ${n.substr(-2)}:${o.substr(-2)}`}var z=n(8508),Z=n.n(z);const G={red:(t,e,i)=>{t.getElement().style.backgroundColor="red"},colour:(t,e,i)=>{t.getElement().style.backgroundColor=e.colour},conditional:(t,e,i)=>{if(t.getValue())return e[""+t.getValue()]?void(t.getElement().style.backgroundColor=e[""+t.getValue()]):t.getValue()}};var H=n(7757),B=n.n(H),V=n(6489),W=n.n(V);n(9523);function Y(t,e,i){if(!U(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&X(n),o&&$(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function q(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function U(t){return!!t&&t.constructor===Object}function X(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!q(t))throw new Error("bbox must only contain numbers")}))}function $(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function K(t,e,i){if(null!==t)for(var n,o,r,a,s,l,c,u,h=0,d=0,p=t.type,f="FeatureCollection"===p,g="Feature"===p,m=f?t.features.length:1,v=0;v<m;v++){s=(u=!!(c=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<s;y++){var b=0,w=0;if(null!==(a=u?c.geometries[y]:c)){l=a.coordinates;var _=a.type;switch(h=!i||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===e(l,d,v,b,w))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],d,v,b,w))return!1;d++,"MultiPoint"===_&&b++}"LineString"===_&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-h;o++){if(!1===e(l[n][o],d,v,b,w))return!1;d++}"MultiLineString"===_&&b++,"Polygon"===_&&w++}"Polygon"===_&&b++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===_&&(w=0),o=0;o<l[n].length;o++){for(r=0;r<l[n][o].length-h;r++){if(!1===e(l[n][o][r],d,v,b,w))return!1;d++}w++}b++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===K(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function J(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function Q(t,e){var i,n,o,r,a,s,l,c,u,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,g=p?t.features.length:1;for(i=0;i<g;i++){for(s=p?t.features[i].geometry:f?t.geometry:t,c=p?t.features[i].properties:f?t.properties:{},u=p?t.features[i].bbox:f?t.bbox:void 0,h=p?t.features[i].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,d,c,u,h))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,c,u,h))return!1;d++}}function tt(t,e){Q(t,(function(t,i,n,o,r){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Y(t,n,{bbox:o,id:r}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(Y({type:a,coordinates:c},n),i,l))return!1}}))}function et(t,e,i){if(!rt(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&at(n),o&&st(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function it(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ot(t[0])||!ot(t[1]))throw new Error("coordinates must contain numbers");return et({type:"Point",coordinates:t},e,i)}function nt(t,e){if(!rt(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&at(i),n&&st(n);var o={type:"FeatureCollection"};return n&&(o.id=n),i&&(o.bbox=i),o.features=t,o}function ot(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function rt(t){return!!t&&t.constructor===Object}function at(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!ot(t))throw new Error("bbox must only contain numbers")}))}function st(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}const lt=function(t){var e=[];return"FeatureCollection"===t.type?J(t,(function(t){K(t,(function(i){e.push(it(i,t.properties))}))})):K(t,(function(i){e.push(it(i,t.properties))})),nt(e)};const ct=function(t){var e=[1/0,1/0,-1/0,-1/0];return K(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e};function ut(t,e,i){if(!pt(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&ft(n),o&&gt(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function ht(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!dt(t[0])||!dt(t[1]))throw new Error("coordinates must contain numbers");return ut({type:"Point",coordinates:t},e,i)}function dt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function pt(t){return!!t&&t.constructor===Object}function ft(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!dt(t))throw new Error("bbox must only contain numbers")}))}function gt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}const mt=function(t,e){if(!pt(e=e||{}))throw new Error("options is invalid");var i=e.properties;if(!t)throw new Error("geojson is required");var n=ct(t);return ht([(n[0]+n[2])/2,(n[1]+n[3])/2],i)};function vt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}})),e.properties=function t(e){var i={};return e?(Object.keys(e).forEach((function(n){var o=e[n];"object"==typeof o?null===o?i[n]=null:o.length?i[n]=o.map((function(t){return t})):i[n]=t(o):i[n]=o})),i):i}(t.properties),e.geometry=yt(t.geometry),e}function yt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return yt(t)})),e):(e.coordinates=function t(e){if("object"!=typeof e[0])return e.slice();return e.map((function(e){return t(e)}))}(t.coordinates),e)}const bt=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return vt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(i){switch(i){case"type":case"features":return;default:e[i]=t[i]}})),e.features=t.features.map((function(t){return vt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return yt(t);default:throw new Error("unknown GeoJSON type")}};function wt(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var _t={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function xt(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=_t[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}function Ct(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Et(t){return!!t&&t.constructor===Object}const kt=function(t,e,i){if(!Et(i=i||{}))throw new Error("options is invalid");var n=i.units,o=wt(t),r=wt(e),a=Ct(r[1]-o[1]),s=Ct(r[0]-o[0]),l=Ct(o[1]),c=Ct(r[1]),u=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(c);return xt(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n)};const Tt=function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i,n=1/0;return J(e,(function(e,o){var r=kt(t,e);r<n&&((i=bt(e)).properties.featureIndex=o,i.properties.distanceToPoint=r,n=r)})),i};function St(t,e,i){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,r=e.length-1;o<e.length;r=o++){var a=e[o][0],s=e[o][1],l=e[r][0],c=e[r][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!i;s>t[1]!=c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(n=!n)}return n}const Mt=function(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var n=i.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=wt(t),r=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,s))return!1;"Polygon"===a&&(r=[r]);for(var l=0,c=!1;l<r.length&&!c;l++)if(St(o,r[l][0],n)){for(var u=!1,h=1;h<r[l].length&&!u;)St(o,r[l][h],!n)&&(u=!0),h++;u||(c=!0)}return c};function Rt(t,e,i){if(!Dt(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&It(n),o&&Ft(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function Pt(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ot(t[0])||!Ot(t[1]))throw new Error("coordinates must contain numbers");return Rt({type:"Point",coordinates:t},e,i)}function Lt(t,e){if(!Dt(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&It(i),n&&Ft(n);var o={type:"FeatureCollection"};return n&&(o.id=n),i&&(o.bbox=i),o.features=t,o}function Ot(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Dt(t){return!!t&&t.constructor===Object}function It(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Ot(t))throw new Error("bbox must only contain numbers")}))}function Ft(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function At(t,e,i,n,o,r){return Math.sqrt((o-i)*(o-i)+(r-n)*(r-n))===Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))+Math.sqrt((o-t)*(o-t)+(r-e)*(r-e))}const Nt=function(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?Lt([Rt(t)]):Lt([t]);return t}(t),i=mt(e),n=!1,o=0;!n&&o<e.features.length;){var r,a=e.features[o].geometry,s=!1;if("Point"===a.type)i.geometry.coordinates[0]===a.coordinates[0]&&i.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var l=!1;for(r=0;!l&&r<a.coordinates.length;)i.geometry.coordinates[0]===a.coordinates[r][0]&&i.geometry.coordinates[1]===a.coordinates[r][1]&&(n=!0,l=!0),r++}else if("LineString"===a.type)for(r=0;!s&&r<a.coordinates.length-1;)At(i.geometry.coordinates[0],i.geometry.coordinates[1],a.coordinates[r][0],a.coordinates[r][1],a.coordinates[r+1][0],a.coordinates[r+1][1])&&(s=!0,n=!0),r++;else if("MultiLineString"===a.type)for(var c=0;c<a.coordinates.length;){s=!1,r=0;for(var u=a.coordinates[c];!s&&r<u.length-1;)At(i.geometry.coordinates[0],i.geometry.coordinates[1],u[r][0],u[r][1],u[r+1][0],u[r+1][1])&&(s=!0,n=!0),r++;c++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||Mt(i,a)&&(n=!0);o++}if(n)return i;var h=Lt([]);for(o=0;o<e.features.length;o++)h.features=h.features.concat(lt(e.features[o]).features);return Pt(Tt(i,h).geometry.coordinates)};var jt=n(1848);function zt(t,e){if(!Gt(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&Ht(i),n&&Bt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),i&&(o.bbox=i),o.features=t,o}function Zt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Gt(t){return!!t&&t.constructor===Object}function Ht(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Zt(t))throw new Error("bbox must only contain numbers")}))}function Bt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}const Vt=function(t){if(!t)throw new Error("geojson is required");var e=[];return tt(t,(function(t){e.push(t)})),zt(e)};var Wt=n(361),Yt=n.n(Wt);const qt=(...t)=>e=>t.forEach(t=>t(e)),Ut=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Xt={pointOnFeature:Nt,kinks:jt.Z.default,flatten:Vt},$t=t=>({fetchLocales:async function(){const e=await fetch(t.host+"/api/workspace/get/locales");t.workspace.locales=await e.json()},getLocales:function(e){const i=new XMLHttpRequest;i.open("GET",t.host+"/api/workspace/get/locales"),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=i=>{if(200!==i.target.status)return console.error("Failed to retrieve workspace from XYZ host!");t.workspace.locales=i.target.response,function(e){t.locale=t.locale||t.hooks&&t.hooks.current.locale||t.workspace.locales[0];const i=new XMLHttpRequest;i.open("GET",t.host+"/api/workspace/get/locale?"+t.utils.paramString({locale:t.locale})),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=i=>{if(200!==i.target.status)return console.error("Failed to retrieve workspace from XYZ host!");t.workspace.locale=Object.assign({key:t.locale},i.target.response),Object.keys(t.workspace.locale.layers).filter(t=>-1===t.indexOf("__")).forEach(e=>{t.layers.list[e]=t.layers.decorate(t.workspace.locale.layers[e])}),e&&e(t)},i.send()}(e)},i.send()}});var Kt=n(8906),Jt=n(3614),Qt=n.n(Jt),te=n(3580),ee=n(9179),ie=n(3272),ne=n(868);const oe=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?(0,ie.U2)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===ne.Z.TILE_PIXELS&&(n=(0,ie.U2)(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return(0,te.f0)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return(0,ee.O3)()},t.prototype.readFeature=function(t,e){return(0,ee.O3)()},t.prototype.readFeatures=function(t,e){return(0,ee.O3)()},t.prototype.readGeometry=function(t,e){return(0,ee.O3)()},t.prototype.readProjection=function(t){return(0,ee.O3)()},t.prototype.writeFeature=function(t,e){return(0,ee.O3)()},t.prototype.writeFeatures=function(t,e){return(0,ee.O3)()},t.prototype.writeGeometry=function(t,e){return(0,ee.O3)()},t}();function re(t,e,i){var n,o=i?(0,ie.U2)(i.featureProjection):null,r=i?(0,ie.U2)(i.dataProjection):null;if(n=o&&r&&!(0,ie.OP)(o,r)?(e?t.clone():t).transform(e?o:r,e?r:o):t,e&&i&&void 0!==i.decimals){var a=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return n}var ae,se=n(4007),le=n(3696),ce=n(8795),ue=n(4538),he=n(9682),de=n(1915),pe=n(2538),fe=n(3729),ge=n(8667),me=n(6204),ve=n(1422),ye=n(897),be=n(1193),we=(ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const _e=function(t){function e(e,i,n){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,i);else if(void 0!==i&&n)o.setFlatCoordinates(i,e),o.ends_=n;else{for(var r=o.getLayout(),a=e,s=[],l=[],c=0,u=a.length;c<u;++c){var h=a[c];0===c&&(r=h.getLayout()),(0,he.l7)(s,h.getFlatCoordinates()),l.push(s.length)}o.setFlatCoordinates(r,s),o.ends_=l}return o}return we(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?(0,he.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,de.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,fe.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,fe.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=le.Z.XYM&&this.layout!=le.Z.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,o=void 0!==i&&i;return(0,ve.dG)(this.flatCoordinates,0,this.ends_,this.stride,t,n,o)},e.prototype.getCoordinates=function(){return(0,me.o1)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new ue.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],o=0,r=0,a=e.length;r<a;++r){var s=e[r],l=new ue.Z(t.slice(o,s),i);n.push(l),o=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,o=this.stride,r=0,a=n.length;r<a;++r){var s=n[r],l=(0,ve.WW)(e,i,s,o,.5);(0,he.l7)(t,l),i=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=(0,be.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,le.Z.XY,n)},e.prototype.getType=function(){return ce.Z.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,ye.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,ge._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(pe.ZP);var xe=n(2043),Ce=n(1882),Ee=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ke=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return Ee(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?(0,he.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<(0,de.qf)(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,r=this.stride,a=0,s=o.length;a<s;a+=r){var l=(0,Ce.bI)(t,e,o[a],o[a+1]);if(l<n){n=l;for(var c=0;c<r;++c)i[c]=o[a+c];i.length=r}}return n},e.prototype.getCoordinates=function(){return(0,me.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new xe.Z(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],o=0,r=t.length;o<r;o+=i){var a=new xe.Z(t.slice(o,o+i),e);n.push(a)}return n},e.prototype.getType=function(){return ce.Z.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,o=e.length;n<o;n+=i){var r=e[n],a=e[n+1];if((0,de.jE)(t,r,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,ge.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(pe.ZP);var Te=n(8739),Se=n(2562);function Me(t,e,i,n){for(var o=[],r=(0,de.lJ)(),a=0,s=i.length;a<s;++a){var l=i[a];r=(0,de.GN)(t,e,l[0],n),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return o}var Re=n(197),Pe=n(8529),Le=n(8385),Oe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const De=function(t){function e(e,i,n){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var r=o.getLayout(),a=e,s=[],l=[],c=0,u=a.length;c<u;++c){var h=a[c];0===c&&(r=h.getLayout());for(var d=s.length,p=h.getEnds(),f=0,g=p.length;f<g;++f)p[f]+=d;(0,he.l7)(s,h.getFlatCoordinates()),l.push(p)}i=r,e=s,n=l}return void 0!==i&&n?(o.setFlatCoordinates(i,e),o.endss_=n):o.setCoordinates(e,i),o}return Oe(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;(0,he.l7)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,de.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,fe.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,fe.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return(0,Re.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return(0,Se.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,Le.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,me.ug)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Me(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,Pe.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new ke(this.getFlatInteriorPoints().slice(),le.Z.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,Le.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,Le.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=(0,be.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,le.Z.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),o=n[n.length-1];if(0!==e)for(var r=0,a=n.length;r<a;++r)n[r]-=e;return new Te.ZP(this.flatCoordinates.slice(e,o),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],o=0,r=0,a=i.length;r<a;++r){var s=i[r].slice(),l=s[s.length-1];if(0!==o)for(var c=0,u=s.length;c<u;++c)s[c]-=o;var h=new Te.ZP(e.slice(o,l),t,s);n.push(h),o=l}return n},e.prototype.getType=function(){return ce.Z.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return(0,ye.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,ge.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(pe.ZP);var Ie=n(4183),Fe=n(7882),Ae=n(2359),Ne=(0,Ae.Ue)(),je=function(){function t(t,e,i,n,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===ce.Z.POINT?(0,de.HK)(this.flatCoordinates_):(0,de.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,de.qg)(this.getExtent());this.flatInteriorPoints_=(0,Pe.X)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Me(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,Pe.U)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,ve.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,n=0,o=i.length;n<o;++n){var r=i[n],a=(0,ve.WW)(t,e,r,2,.5);(0,he.l7)(this.flatMidpoints_,a),e=r}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var i=(t=(0,ie.U2)(t)).getExtent(),n=t.getWorldExtent(),o=(0,de.Cr)(n)/(0,de.Cr)(i);(0,Ae.qC)(Ne,n[0],n[3],o,-o,0,0,0),(0,Fe.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ne,this.flatCoordinates_)},t}();je.prototype.getEnds=function(){return this.ends_},je.prototype.getEndss=je.prototype.getEnds,je.prototype.getFlatCoordinates=je.prototype.getOrientedFlatCoordinates;const ze=je;var Ze=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Ge(t,e,i){if(3===t){var n={keys:[],values:[],features:[]},o=i.readVarint()+i.pos;i.readFields(He,n,o),n.length=n.features.length,n.length&&(e[n.name]=n)}}function He(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var n=null,o=i.readVarint()+i.pos;i.pos<o;)n=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(n)}}function Be(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var n=i.readVarint()+i.pos;i.pos<n;){var o=e.layer.keys[i.readVarint()],r=e.layer.values[i.readVarint()];e.properties[o]=r}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function Ve(t,e,i){t.pos=e.features[i];var n=t.readVarint()+t.pos,o={layer:e,type:0,properties:{}};return t.readFields(Be,o,n),o}const We=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=new Ie.Z({code:"",units:ne.Z.TILE_PIXELS}),i.featureClass_=n.featureClass?n.featureClass:ze,i.geometryName_=n.geometryName,i.layerName_=n.layerName?n.layerName:"layer",i.layers_=n.layers?n.layers:null,i.idProperty_=n.idProperty,i}return Ze(e,t),e.prototype.readRawGeometry_=function(t,e,i,n){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,r=1,a=0,s=0,l=0,c=0,u=0;t.pos<o;){if(!a){var h=t.readVarint();r=7&h,a=h>>3}a--,1===r||2===r?(s+=t.readSVarint(),l+=t.readSVarint(),1===r&&c>u&&(n.push(c),u=c),i.push(s,l),c+=2):7===r?c>u&&(i.push(i[u],i[u+1]),c+=2):(0,Kt.h)(!1,59)}c>u&&(n.push(c),u=c)},e.prototype.createFeature_=function(t,e,i){var n,o=e.type;if(0===o)return null;var r,a=e.properties;this.idProperty_?(r=a[this.idProperty_],delete a[this.idProperty_]):r=e.id,a[this.layerName_]=e.layer.name;var s=[],l=[];this.readRawGeometry_(t,e,s,l);var c=function(t,e){var i;1===t?i=1===e?ce.Z.POINT:ce.Z.MULTI_POINT:2===t?i=1===e?ce.Z.LINE_STRING:ce.Z.MULTI_LINE_STRING:3===t&&(i=ce.Z.POLYGON);return i}(o,l.length);if(this.featureClass_===ze)(n=new this.featureClass_(c,s,l,a,r)).transform(i.dataProjection,i.featureProjection);else{var u=void 0;if(c==ce.Z.POLYGON){for(var h=[],d=0,p=0,f=0,g=l.length;f<g;++f){var m=l[f];(0,Le.bt)(s,d,m,2)||(h.push(l.slice(p,f)),p=f),d=m}u=h.length>1?new De(s,le.Z.XY,h):new Te.ZP(s,le.Z.XY,l)}else u=c===ce.Z.POINT?new xe.Z(s,le.Z.XY):c===ce.Z.LINE_STRING?new ue.Z(s,le.Z.XY):c===ce.Z.POLYGON?new Te.ZP(s,le.Z.XY,l):c===ce.Z.MULTI_POINT?new ke(s,le.Z.XY):c===ce.Z.MULTI_LINE_STRING?new _e(s,le.Z.XY,l):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var v=re(u,!1,i);n.setGeometry(v),n.setId(r),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return se.Z.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var i=this.layers_,n=this.adaptOptions(e),o=(0,ie.U2)(n.dataProjection);o.setWorldExtent(n.extent),n.dataProjection=o;var r=new(Qt())(t),a=r.readFields(Ge,{}),s=[];for(var l in a)if(!i||-1!=i.indexOf(l)){var c=a[l],u=c?[0,0,c.extent,c.extent]:null;o.setExtent(u);for(var h=0,d=c.length;h<d;++h){var p=Ve(r,c,h);s.push(this.createFeature_(r,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(oe);var Ye=n(3068),qe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Ue(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}const Xe=function(t){function e(){return t.call(this)||this}return qe(e,t),e.prototype.getType=function(){return se.Z.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Ue(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Ue(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return(0,ee.O3)()},e.prototype.readFeaturesFromObject=function(t,e){return(0,ee.O3)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Ue(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return(0,ee.O3)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Ue(t))},e.prototype.readProjectionFromObject=function(t){return(0,ee.O3)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return(0,ee.O3)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return(0,ee.O3)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return(0,ee.O3)()},e}(oe);var $e=n(3002),Ke=n(3381),Je=n(8204),Qe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ti(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}const ei=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return Qe(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach($e.bN),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,$e.oL)(this.geometries_[t],Ke.Z.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<(0,de.qf)(this.getExtent(),t,e))return n;for(var o=this.geometries_,r=0,a=o.length;r<a;++r)n=o[r].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){(0,de.YN)(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)(0,de.l7)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return ti(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,o=!1,r=0,a=n.length;r<a;++r){var s=n[r],l=s.getSimplifiedGeometry(t);i.push(l),l!==s&&(o=!0)}if(o){var c=new e(null);return c.setGeometriesArray(i),c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return ce.Z.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=(0,de.qg)(this.getExtent()));for(var o=this.geometries_,r=0,a=o.length;r<a;++r)o[r].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(ti(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,o=i.length;n<o;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Je.Z);var ii=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ni(t,e){if(!t)return null;var i;switch(t.type){case ce.Z.POINT:i=function(t){return new xe.Z(t.coordinates)}(t);break;case ce.Z.LINE_STRING:i=function(t){return new ue.Z(t.coordinates)}(t);break;case ce.Z.POLYGON:i=function(t){return new Te.ZP(t.coordinates)}(t);break;case ce.Z.MULTI_POINT:i=function(t){return new ke(t.coordinates)}(t);break;case ce.Z.MULTI_LINE_STRING:i=function(t){return new _e(t.coordinates)}(t);break;case ce.Z.MULTI_POLYGON:i=function(t){return new De(t.coordinates)}(t);break;case ce.Z.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map((function(t){return ni(t,e)}));return new ei(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return re(i,!1,e)}function oi(t,e){var i,n=(t=re(t,!0,e)).getType();switch(n){case ce.Z.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case ce.Z.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case ce.Z.POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case ce.Z.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case ce.Z.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case ce.Z.MULTI_POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case ce.Z.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=(0,te.f0)({},e);return delete i.featureProjection,oi(t,i)}))}}(t,e);break;case ce.Z.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}const ri=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).dataProjection=(0,ie.U2)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=(0,ie.U2)(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i}return ii(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,n=ni((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new Ye.Z;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&o.setGeometryName(i.geometry_name),o.setGeometry(n),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,o=0,r=n.length;o<r;++o)i.push(this.readFeatureFromObject(n[o],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return ni(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=(0,ie.U2)(i.properties.name):"EPSG"===i.type?e=(0,ie.U2)("EPSG:"+i.properties.code):(0,Kt.h)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var o=t.getGeometry();o&&(i.geometry=oi(o,e));var r=t.getProperties();return delete r[t.getGeometryName()],(0,te.xb)(r)||(i.properties=r),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,o=t.length;n<o;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return oi(t,this.adaptOptions(e))},e}(Xe);var ai=n(9900),si=n(6320),li=n(6575),ci=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ui=function(t){function e(e,i,n){var o=t.call(this)||this,r=n||{};return o.tileCoord=e,o.state=i,o.interimTile=null,o.hifi=!0,o.key="",o.transition_=void 0===r.transition?250:r.transition,o.transitionStarts_={},o}return ci(e,t),e.prototype.changed=function(){this.dispatchEvent(Ke.Z.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ai.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==ai.Z.LOADED){t.interimTile=null;break}t.getState()==ai.Z.LOADING?e=t:t.getState()==ai.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==ai.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){(0,ee.O3)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:(0,si.YQ)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(li.Z);var hi=n(5386),di=n(2022),pi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const fi=function(t){function e(e,i,n,o,r,a){var s=t.call(this,e,i,a)||this;return s.crossOrigin_=o,s.src_=n,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.tileLoadFunction_=r,s}return pi(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=ai.Z.ERROR,this.unlistenImage_(),this.image_=((t=(0,hi.E4)(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ai.Z.LOADED:this.state=ai.Z.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==ai.Z.ERROR&&(this.state=ai.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ai.Z.IDLE&&(this.state=ai.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,di.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ui);const gi=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return(0,Kt.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return(0,Kt.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){(0,Kt.h)(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function mi(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function vi(t,e,i){return t+"/"+e+"/"+i}function yi(t){return vi(t[0],t[1],t[2])}function bi(t){return t.split("/").map(Number)}var wi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const _i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=bi(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(yi(e.tileCoord)),e.release())}.bind(this))}},e}(gi);function xi(t,e,i,n){var o=i-t,r=n-e,a=Math.sqrt(o*o+r*r);return[Math.round(i+o/a),Math.round(n+r/a)]}const Ci=function(){function t(t,e,i,n,o,r){this.sourceProj_=t,this.targetProj_=e;var a={},s=(0,ie.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,de.dz)(n)==(0,de.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,de.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,de.dz)(this.targetProj_.getExtent()):null;var l=(0,de.rL)(i),c=(0,de.Xv)(i),u=(0,de.w$)(i),h=(0,de.hC)(i),d=this.transformInv_(l),p=this.transformInv_(c),f=this.transformInv_(u),g=this.transformInv_(h),m=10+(r?Math.max(0,Math.ceil(Math.log2((0,de.bg)(i)/(r*r*256*256)))):0);if(this.addQuad_(l,c,u,h,d,p,f,g,m),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach((function(t,e,i){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,i,n,o,r){this.triangles_.push({source:[n,o,r],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,o,r,a,s,l){var c=(0,de.hI)([o,r,a,s]),u=this.sourceWorldWidth_?(0,de.dz)(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&u>.5&&u<1,p=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var f=(0,de.hI)([t,e,i,n]);p=(0,de.dz)(f)/this.targetWorldWidth_>.25||p}!d&&this.sourceProj_.isGlobal()&&u&&(p=u>.25||p)}if(p||!this.maxSourceExtent_||(0,de.kK)(c,this.maxSourceExtent_)){if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(l>0))return;p=!0}if(l>0){if(!p){var g=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(g),v=void 0;if(d)v=((0,Ce.$W)(o[0],h)+(0,Ce.$W)(a[0],h))/2-(0,Ce.$W)(m[0],h);else v=(o[0]+a[0])/2-m[0];var y=(o[1]+a[1])/2-m[1];p=v*v+y*y>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var b=[(e[0]+i[0])/2,(e[1]+i[1])/2],w=this.transformInv_(b),_=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(_);this.addQuad_(t,e,b,_,o,r,w,x,l-1),this.addQuad_(_,b,i,n,x,w,a,s,l-1)}else{var C=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(C),k=[(i[0]+n[0])/2,(i[1]+n[1])/2],T=this.transformInv_(k);this.addQuad_(t,C,k,n,o,E,T,s,l-1),this.addQuad_(C,e,i,k,E,r,a,T,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,o,a,s),this.addTriangle_(t,e,i,o,r,a)}},t.prototype.calculateSourceExtent=function(){var t=(0,de.lJ)();return this.triangles_.forEach((function(e,i,n){var o=e.source;(0,de.Wj)(t,o[0]),(0,de.Wj)(t,o[1]),(0,de.Wj)(t,o[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Ei=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ki=function(t){function e(e,i,n,o,r,a,s,l,c,u,h){var d=t.call(this,r,ai.Z.IDLE)||this;d.renderEdges_=void 0!==h&&h,d.pixelRatio_=s,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=i,d.targetTileGrid_=o,d.wrappedTileCoord_=a||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var p=o.getTileCoordExtent(d.wrappedTileCoord_),f=d.targetTileGrid_.getExtent(),g=d.sourceTileGrid_.getExtent(),m=f?(0,de.Ed)(p,f):p;if(0===(0,de.bg)(m))return d.state=ai.Z.EMPTY,d;var v=e.getExtent();v&&(g=g?(0,de.Ed)(g,v):v);var y=o.getResolution(d.wrappedTileCoord_[0]),b=function(t,e,i,n){var o=(0,ie.vs)(i,e,t),r=(0,ie._Q)(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(r*=a);var s=t.getMetersPerUnit();void 0!==s&&(r/=s);var l=t.getExtent();if(!l||(0,de.b8)(l,o)){var c=(0,ie._Q)(t,r,o)/r;isFinite(c)&&c>0&&(r/=c)}return r}(e,n,(0,de.qg)(m),y);if(!isFinite(b)||b<=0)return d.state=ai.Z.EMPTY,d;var w=void 0!==u?u:.5;if(d.triangulation_=new Ci(e,n,m,g,b*w,y),0===d.triangulation_.getTriangles().length)return d.state=ai.Z.EMPTY,d;d.sourceZ_=i.getZForResolution(b);var _=d.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(_[1]=(0,Ce.uZ)(_[1],g[1],g[3]),_[3]=(0,Ce.uZ)(_[3],g[1],g[3])):_=(0,de.Ed)(_,g)),(0,de.bg)(_)){for(var x=i.getTileRangeForExtentAndZ(_,d.sourceZ_),C=x.minX;C<=x.maxX;C++)for(var E=x.minY;E<=x.maxY;E++){var k=c(d.sourceZ_,C,E,s);k&&d.sourceTiles_.push(k)}0===d.sourceTiles_.length&&(d.state=ai.Z.EMPTY)}else d.state=ai.Z.EMPTY;return d}return Ei(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==ai.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=ai.Z.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],r=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,o,r,a,s,l,c,u){var h=(0,hi.E4)(Math.round(i*t),Math.round(i*e));if(0===l.length)return h.canvas;h.scale(i,i);var d=(0,de.lJ)();l.forEach((function(t,e,i){(0,de.l7)(d,t.extent)}));var p=(0,de.dz)(d),f=(0,de.Cr)(d),g=(0,hi.E4)(Math.round(i*p/n),Math.round(i*f/n)),m=i/n;l.forEach((function(t,e,i){var n=t.extent[0]-d[0],o=-(t.extent[3]-d[3]),r=(0,de.dz)(t.extent),a=(0,de.Cr)(t.extent);g.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,n*m,o*m,r*m,a*m)}));var v=(0,de.rL)(a);return s.getTriangles().forEach((function(t,e,o){var a=t.source,s=t.target,l=a[0][0],c=a[0][1],u=a[1][0],p=a[1][1],f=a[2][0],m=a[2][1],y=(s[0][0]-v[0])/r,b=-(s[0][1]-v[1])/r,w=(s[1][0]-v[0])/r,_=-(s[1][1]-v[1])/r,x=(s[2][0]-v[0])/r,C=-(s[2][1]-v[1])/r,E=l,k=c;l=0,c=0;var T=[[u-=E,p-=k,0,0,w-y],[f-=E,m-=k,0,0,x-y],[0,0,u,p,_-b],[0,0,f,m,C-b]],S=(0,Ce.SV)(T);if(S){h.save(),h.beginPath();var M=(y+w+x)/3,R=(b+_+C)/3,P=xi(M,R,y,b),L=xi(M,R,w,_),O=xi(M,R,x,C);h.moveTo(L[0],L[1]),h.lineTo(P[0],P[1]),h.lineTo(O[0],O[1]),h.clip(),h.transform(S[0],S[2],S[1],S[3],y,b),h.translate(d[0]-E,d[3]-k),h.scale(n/i,-n/i),h.drawImage(g.canvas,0,0),h.restore()}})),u&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,i){var n=t.target,o=(n[0][0]-v[0])/r,a=-(n[0][1]-v[1])/r,s=(n[1][0]-v[0])/r,l=-(n[1][1]-v[1])/r,c=(n[2][0]-v[0])/r,u=-(n[2][1]-v[1])/r;h.beginPath(),h.moveTo(s,l),h.lineTo(o,a),h.lineTo(c,u),h.closePath(),h.stroke()})),h.restore()),h.canvas}(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),r,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ai.Z.LOADED}this.changed()},e.prototype.load=function(){if(this.state==ai.Z.IDLE){this.state=ai.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var o=e.getState();if(o==ai.Z.IDLE||o==ai.Z.LOADING){t++;var r=(0,$e.oL)(e,Ke.Z.CHANGE,(function(i){var n=e.getState();n!=ai.Z.LOADED&&n!=ai.Z.ERROR&&n!=ai.Z.EMPTY||((0,$e.bN)(r),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){t.getState()==ai.Z.IDLE&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach($e.bN),this.sourcesListenerKeys_=null},e}(ui);function Ti(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(a,s,l){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(r,(function(){var t=a[0],i=e.getFullTileRange(t);return(0,Kt.h)(i,55),(i.getHeight()-a[2]-1).toString()})):void 0}}function Si(t,e){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=Ti(t[o],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(e){var o=function(t){return(t[1]<<t[0])+t[2]}(e),r=(0,Ce.$W)(o,t.length);return t[r](e,i,n)}}}(n)}function Mi(t,e,i){}var Ri=n(9520),Pi=n(596),Li=n(1405),Oi=n(508),Di=n(1748),Ii=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Fi(t,e,i,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=n,o):new Ii(t,e,i,n)}const Ai=Ii;var Ni=[0,0,0];const ji=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,Kt.h)((0,he.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,Kt.h)(this.origins_.length==this.resolutions_.length,20));var o=t.extent;void 0===o||this.origin_||this.origins_||(this.origin_=(0,de.rL)(o)),(0,Kt.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,Kt.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Oi.S,(0,Kt.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Ai(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):o&&this.calculateTileRanges_(o)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,r=n.maxX;o<=r;++o)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,o,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var o,r,a=null,s=t[0]-1;for(2===this.zoomFactor_?(o=t[1],r=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?Fi(o=Math.floor(o/2),o,r=Math.floor(r/2),r,i):this.getTileRangeForExtentAndZ(a,s,i)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return Fi(n,n+1,o,o+1,e)}var r=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),o=this.getResolution(t),r=(0,Pi.Pq)(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*r[0]*o,s=n[0]+(e.maxX+1)*r[0]*o,l=n[1]+e.minY*r[1]*o,c=n[1]+(e.maxY+1)*r[1]*o;return(0,de.T9)(a,l,s,c,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=Ni;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var o=n[1],r=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),Fi(o,n[1],r,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,Pi.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=(0,Pi.Pq)(this.getTileSize(t[0]),this.tmpSize_),r=i[0]+t[1]*o[0]*n,a=i[1]-(t[2]+1)*o[1]*n,s=r+o[0]*n,l=a+o[1]*n;return(0,de.T9)(r,a,s,l,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,o){var r=this.getZForResolution(i),a=i/this.getResolution(r),s=this.getOrigin(r),l=(0,Pi.Pq)(this.getTileSize(r),this.tmpSize_),c=n?.5:0,u=n?.5:0,h=Math.floor((t-s[0])/i+c),d=Math.floor((s[1]-e)/i+u),p=a*h/l[0],f=a*d/l[1];return n?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),mi(r,p,f,o)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,o){var r=this.getOrigin(i),a=this.getResolution(i),s=(0,Pi.Pq)(this.getTileSize(i),this.tmpSize_),l=n?.5:0,c=n?.5:0,u=Math.floor((t-r[0])/a+l),h=Math.floor((r[1]-e)/a+c),d=u/s[0],p=h/s[1];return n?(d=Math.ceil(d)-1,p=Math.ceil(p)-1):(d=Math.floor(d),p=Math.floor(p)),mi(i,d,p,o)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){var i=(0,he.h7)(this.resolutions_,t,e||0);return(0,Ce.uZ)(i,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}();function zi(t){var e=t.getDefaultTileGrid();return e||(e=Hi(t),t.setDefaultTileGrid(e)),e}function Zi(t){var e=t||{},i=e.extent||(0,ie.U2)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Gi(i,e.maxZoom,e.tileSize,e.maxResolution)};return new ji(n)}function Gi(t,e,i,n){for(var o=void 0!==e?e:Oi.e,r=(0,de.Cr)(t),a=(0,de.dz)(t),s=(0,Pi.Pq)(void 0!==i?i:Oi.S),l=n>0?n:Math.max(a/s[0],r/s[1]),c=o+1,u=new Array(c),h=0;h<c;++h)u[h]=l/Math.pow(2,h);return u}function Hi(t,e,i,n){return function(t,e,i,n){var o=void 0!==n?n:Di.Z.TOP_LEFT,r=Gi(t,e,i);return new ji({extent:t,origin:(0,de.g0)(t,o),resolutions:r,tileSize:i})}(Bi(t),e,i,n)}function Bi(t){var e=(t=(0,ie.U2)(t)).getExtent();if(!e){var i=180*ie.Wm[ne.Z.DEGREES]/t.getMetersPerUnit();e=(0,de.T9)(-i,-i,i,i)}return e}var Vi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wi=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],o=e.tileGrid;o&&(0,Pi.Pq)(o.getTileSize(o.getMinZoom()),n);var r="undefined"!=typeof screen,a=r?screen.availWidth||screen.width:1920,s=r?screen.availHeight||screen.height:1080,l=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return i.tileCache=new _i(Math.max(l,e.cacheSize||0)),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return Vi(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var r,a,s,l=!0,c=i.minX;c<=i.maxX;++c)for(var u=i.minY;u<=i.maxY;++u)a=vi(e,c,u),s=!1,o.containsKey(a)&&(s=(r=o.get(a)).getState()===ai.Z.LOADED)&&(s=!1!==n(r)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,o){return(0,ee.O3)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:zi(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,ie.OP)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),r=(0,Pi.Pq)(n.getTileSize(t),this.tmpSize);return 1==o?r:(0,Pi.bA)(r,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],o=t.getTileCoordCenter(e),r=Bi(i);if((0,de.b8)(r,o))return e;var a=(0,de.dz)(r),s=Math.ceil((r[0]-o[0])/a);return o[0]+=a*s,t.getTileCoordForCoordAndZ(o,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],o=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var r,a=e.getExtent();return!(r=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||r.containsXY(n,o)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,i,n){},e}(Li.Z),Yi=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return Vi(e,t),e}(Ri.ZP);const qi=Wi,Ui="tileloadstart",Xi="tileloadend",$i="tileloaderror";var Ki=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ji=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=!e.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,i.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(i):Mi,i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return Ki(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=(0,ee.sq)(i),o=i.getState();o==ai.Z.LOADING?(this.tileLoadingKeys_[n]=!0,e=Ui):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=o==ai.Z.ERROR?$i:o==ai.Z.LOADED?Xi:void 0),null!=e&&this.dispatchEvent(new Yi(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),o=i[2].charCodeAt(0),r=void 0;for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Si(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=vi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(qi);var Qi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function tn(t,e){t.getImage().src=e}const en=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:tn,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:fi,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Qi(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!(0,ie.OP)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!(0,ie.OP)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!(0,ie.OP)(e,t)){var i=(0,ee.sq)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=zi(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||(0,ie.OP)(e,t))return this.tileCache;var i=(0,ee.sq)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new _i(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,o,r){var a=[t,e,i],s=this.getTileCoordForTileUrlFunction(a,o),l=s?this.tileUrlFunction(s,n,o):void 0,c=new this.tileClass(a,void 0!==l?ai.Z.IDLE:ai.Z.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=r,c.addEventListener(Ke.Z.CHANGE,this.handleTileChange.bind(this)),c},e.prototype.getTile=function(t,e,i,n,o){var r=this.getProjection();if(r&&o&&!(0,ie.OP)(r,o)){var a=this.getTileCacheForProjection(o),s=[t,e,i],l=void 0,c=yi(s);a.containsKey(c)&&(l=a.get(c));var u=this.getKey();if(l&&l.key==u)return l;var h=this.getTileGridForProjection(r),d=this.getTileGridForProjection(o),p=this.getTileCoordForTileUrlFunction(s,o),f=new ki(r,h,o,d,s,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,l?(f.interimTile=l,f.refreshInterimChain(),a.replace(c,f)):a.set(c,f),f}return this.getTileInternal(t,e,i,n,r||o)},e.prototype.getTileInternal=function(t,e,i,n,o){var r=null,a=vi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)){if((r=this.tileCache.get(a)).key!=s){var l=r;r=this.createTile_(t,e,i,n,o,s),l.getState()==ai.Z.IDLE?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(a,r)}}else r=this.createTile_(t,e,i,n,o,s),this.tileCache.set(a,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=(0,ie.U2)(t);if(i){var n=(0,ee.sq)(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(Ji);var nn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const on=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:Zi({extent:Bi(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return nn(e,t),e}(en);var rn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const an=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:o,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:r,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return rn(e,t),e}(on);var sn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ln=[];const cn=function(t){function e(e,i,n,o){var r=t.call(this,e,i,{transition:0})||this;return r.context_={},r.executorGroups={},r.loadingSourceTiles=0,r.errorSourceTileKeys={},r.hitDetectionImageData={},r.replayState_={},r.sourceTiles=null,r.wantedResolution,r.getSourceTiles=o.bind(void 0,r),r.sourceZ=-1,r.hifi=!1,r.wrappedTileCoord=n,r}return sn(e,t),e.prototype.getContext=function(t){var e=(0,ee.sq)(t);return e in this.context_||(this.context_[e]=(0,hi.E4)(1,1,ln)),this.context_[e]},e.prototype.hasContext=function(t){return(0,ee.sq)(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=(0,ee.sq)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)ln.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(ui);var un=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const hn=function(t){function e(e,i,n,o,r,a){var s=t.call(this,e,i,a)||this;return s.extent=null,s.format_=o,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=r,s.url_=n,s}return un(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==ai.Z.IDLE&&(this.setState(ai.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(ai.Z.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(ai.Z.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(ui);var dn=n(800),pn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const fn=function(t){function e(e){var i=this,n=e.projection||"EPSG:3857",o=e.extent||Bi(n),r=e.tileGrid||Zi({extent:o,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:gn,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,i.loadingTiles_={},i.sourceTileCache=new _i(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:hn,i.tileGrids_={},i}return pn(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],i=this.tileCache;if(0===i.getCount())return e;var n=bi(i.peekFirstKey())[0],o=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]===n&&i.getState()===ai.Z.LOADED)for(var r=i.getSourceTiles(),a=0,s=r.length;a<s;++a){var l=r[a],c=l.tileCoord;if((0,de.kK)(t,o.getTileCoordExtent(c))){var u=l.getFeatures();if(u)for(var h=0,d=u.length;h<d;++h){var p=u[h],f=p.getGeometry();(0,de.kK)(t,f.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,i){t.prototype.expireCache.call(this,e,i),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,i){var n=i.wrappedTileCoord,o=this.getTileGridForProjection(e),r=o.getTileCoordExtent(n),a=n[0],s=o.getResolution(a);(0,de.f3)(r,-s,r);var l=this.tileGrid,c=l.getExtent();c&&(0,de.Ed)(r,c,r);var u,h,d,p=l.getZForResolution(s,1),f=l.getMinZoom(),g=i.sourceTiles;if(g&&g.length>0&&g[0].tileCoord[0]===p)u=g,h=!0,d=p;else{u=[],d=p+1;do{--d,h=!0,l.forEachTileCoord(r,d,function(n){var o,r=this.tileUrlFunction(n,t,e);if(void 0!==r)if(this.sourceTileCache.containsKey(r)){var a=(o=this.sourceTileCache.get(r)).getState();if(a===ai.Z.LOADED||a===ai.Z.ERROR||a===ai.Z.EMPTY)return void u.push(o)}else d===p&&((o=new this.tileClass(n,ai.Z.IDLE,r,this.format_,this.tileLoadFunction)).extent=l.getTileCoordExtent(n),o.projection=e,o.resolution=l.getResolution(n[0]),this.sourceTileCache.set(r,o),o.addEventListener(Ke.Z.CHANGE,this.handleTileChange.bind(this)),o.load());h=h&&o&&o.getState()===ai.Z.LOADED,o&&o.getState()!==ai.Z.EMPTY&&i.getState()===ai.Z.IDLE&&(i.loadingSourceTiles++,o.addEventListener(Ke.Z.CHANGE,(function t(){var e=o.getState(),n=o.getKey();if(e===ai.Z.LOADED||e===ai.Z.ERROR){e===ai.Z.LOADED?(o.removeEventListener(Ke.Z.CHANGE,t),i.loadingSourceTiles--,delete i.errorSourceTileKeys[n]):e===ai.Z.ERROR&&(i.errorSourceTileKeys[n]=!0);var r=Object.keys(i.errorSourceTileKeys).length;i.loadingSourceTiles-r==0&&(i.hifi=0===r,i.sourceZ=p,i.setState(ai.Z.LOADED))}})))}.bind(this)),h||(u.length=0)}while(!h&&d>f)}return i.getState()===ai.Z.IDLE&&i.setState(ai.Z.LOADING),h&&(i.hifi=p===d,i.sourceZ=d,i.getState()<ai.Z.LOADED?i.setState(ai.Z.LOADED):g&&(0,he.fS)(u,g)||(i.sourceTiles=u)),u},e.prototype.getTile=function(t,e,i,n,o){var r,a=vi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)&&(r=this.tileCache.get(a)).key===s)return r;var l=[t,e,i],c=this.getTileCoordForTileUrlFunction(l,o),u=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(c&&u){var d=h.getTileCoordExtent(c);(0,de.f3)(d,-h.getResolution(t),d),(0,de.kK)(u,d)||(c=null)}var p=!0;if(null!==c){var f=this.tileGrid,g=h.getResolution(t),m=f.getZForResolution(g,1),v=h.getTileCoordExtent(c);(0,de.f3)(v,-g,v),f.forEachTileCoord(v,m,function(t){p=p&&!this.tileUrlFunction(t,n,o)}.bind(this))}var y=new cn(l,p?ai.Z.EMPTY:ai.Z.IDLE,c,this.getSourceTiles.bind(this,n,o));return y.key=s,r?(y.interimTile=r,y.refreshInterimChain(),this.tileCache.replace(a,y)):this.tileCache.set(a,y),y},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var n=this.tileGrid;i=Hi(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=i}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),o=(0,Pi.Pq)(n.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]},e}(Ji);function gn(t,e){var i=(0,dn.ov)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var mn=n(3410),vn=n(161),yn=n(7701);const bn="preload",wn="useInterimTilesOnError";var _n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const xn=function(t){function e(e){var i=this,n=e||{},o=(0,te.f0)({},n);return delete o.preload,delete o.useInterimTilesOnError,(i=t.call(this,o)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return _n(e,t),e.prototype.getPreload=function(){return this.get(bn)},e.prototype.setPreload=function(t){this.set(bn,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(wn)},e.prototype.setUseInterimTilesOnError=function(t){this.set(wn,t)},e}(yn.Z);var Cn=n(5381),En=n(8509),kn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tn=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=(0,de.lJ)(),i.tmpTileRange_=new Ai(0,0,0,0),i}return kn(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==ai.Z.LOADED||i==ai.Z.EMPTY||i==ai.Z.ERROR&&!n},e.prototype.getTile=function(t,e,i,n){var o=n.pixelRatio,r=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,i,o,r);return s.getState()==ai.Z.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(ai.Z.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,r=n.resolution,a=n.center,s=n.rotation,l=t.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getRevision(),d=u.getTileGridForProjection(o),p=d.getZForResolution(r,u.zDirection),f=d.getResolution(p),g=t.extent,m=i.extent&&(0,ie.dY)(i.extent,o);m&&(g=(0,de.Ed)(g,(0,ie.dY)(i.extent,o)));var v=u.getTilePixelRatio(l),y=Math.round(t.size[0]*v),b=Math.round(t.size[1]*v);if(s){var w=Math.round(Math.sqrt(y*y+b*b));y=w,b=w}var _=f*y/2/v,x=f*b/2/v,C=[a[0]-_,a[1]-x,a[0]+_,a[1]+x],E=d.getTileRangeForExtentAndZ(g,p),k={};k[p]={};var T=this.createLoadedTileFinder(u,o,k),S=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var R=E.minX;R<=E.maxX;++R)for(var P=E.minY;P<=E.maxY;++P){var L=this.getTile(p,R,P,t);if(this.isDrawableTile(L)){var O=(0,ee.sq)(this);if(L.getState()==ai.Z.LOADED){k[p][L.tileCoord.toString()]=L;var D=L.inTransition(O);this.newTiles_||!D&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(O,t.time))continue}var I=d.getTileCoordChildTileRange(L.tileCoord,M,S),F=!1;I&&(F=T(p+1,I)),F||d.forEachTileCoordParentTileRange(L.tileCoord,T,M,S)}var A=f/r;(0,Ae.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/v,1/v,s,-y/2,-b/2);var N=(0,En.QP)(this.pixelTransform);this.useContainer(e,N,i.opacity);var j=this.context,z=j.canvas;(0,Ae.nb)(this.inversePixelTransform,this.pixelTransform),(0,Ae.qC)(this.tempTransform_,y/2,b/2,A,A,0,-y/2,-b/2),z.width!=y||z.height!=b?(z.width=y,z.height=b):this.containerReused||j.clearRect(0,0,y,b),m&&this.clipUnrotated(j,t,m),this.preRender(j,t),this.renderedTiles.length=0;var Z,G,H,B=Object.keys(k).map(Number);B.sort(he.kK),1!==i.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(Z=[],G=[]):B=B.reverse();for(var V=B.length-1;V>=0;--V){var W=B[V],Y=u.getTilePixelSize(W,l,o),q=d.getResolution(W)/f,U=Y[0]*q*A,X=Y[1]*q*A,$=d.getTileCoordForCoordAndZ((0,de.rL)(C),W),K=d.getTileCoordExtent($),J=(0,Ae.nn)(this.tempTransform_,[v*(K[0]-C[0])/f,v*(C[3]-K[3])/f]),Q=v*u.getGutterForProjection(o),tt=k[W];for(var et in tt){var it=(L=tt[et]).tileCoord,nt=J[0]-($[1]-it[1])*U,ot=Math.round(nt+U),rt=J[1]-($[2]-it[2])*X,at=Math.round(rt+X),st=ot-(R=Math.round(nt)),lt=at-(P=Math.round(rt)),ct=p===W;if(!(D=ct&&1!==L.getAlpha((0,ee.sq)(this),t.time)))if(Z){j.save(),H=[R,P,R+st,P,R+st,P+lt,R,P+lt];for(var ut=0,ht=Z.length;ut<ht;++ut)if(p!==W&&W<G[ut]){var dt=Z[ut];j.beginPath(),j.moveTo(H[0],H[1]),j.lineTo(H[2],H[3]),j.lineTo(H[4],H[5]),j.lineTo(H[6],H[7]),j.moveTo(dt[6],dt[7]),j.lineTo(dt[4],dt[5]),j.lineTo(dt[2],dt[3]),j.lineTo(dt[0],dt[1]),j.clip()}Z.push(H),G.push(W)}else j.clearRect(R,P,st,lt);this.drawTileImage(L,t,R,P,st,lt,Q,ct,i.opacity),Z&&!D&&j.restore(),this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,u,L)}}return this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!(0,de.fS)(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=l,this.renderedProjection=o,this.manageTilePyramid(t,u,d,l,o,g,p,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(j,t),i.extent&&j.restore(),N!==z.style.transform&&(z.style.transform=N),this.container},e.prototype.drawTileImage=function(t,e,i,n,o,r,a,s,l){var c=this.getTileImage(t);if(c){var u=(0,ee.sq)(this),h=s?t.getAlpha(u,e.time):1,d=l*h,p=d!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,n,o,r),p&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=(0,ee.sq)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i){var n=(0,ee.sq)(e);n in t||(t[n]={}),t[n][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,i,n,o,r,a,s,l){var c=(0,ee.sq)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var u,h,d,p,f,g,m=t.wantedTiles[c],v=t.tileQueue;for(g=i.getMinZoom();g<=a;++g)for(h=i.getTileRangeForExtentAndZ(r,g,h),d=i.getResolution(g),p=h.minX;p<=h.maxX;++p)for(f=h.minY;f<=h.maxY;++f)a-g<=s?((u=e.getTile(g,p,f,n,o)).getState()==ai.Z.IDLE&&(m[u.getKey()]=!0,v.isKeyQueued(u.getKey())||v.enqueue([u,c,i.getTileCoordCenter(u.tileCoord),d])),void 0!==l&&l(u)):e.useTile(g,p,f,o)},e}(Cn.Z);Tn.prototype.getLayer;const Sn=Tn;var Mn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Rn=function(t){function e(e){return t.call(this,e)||this}return Mn(e,t),e.prototype.createRenderer=function(){return new Sn(this)},e}(xn);var Pn=n(9625);const Ln="image",On="hybrid",Dn="vector";var In=n(6908),Fn=n(1456),An=n(2152),Nn=n(3631),jn=n(4247),zn=n(7746),Zn=n(728),Gn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hn={image:[Fn.Z.POLYGON,Fn.Z.CIRCLE,Fn.Z.LINE_STRING,Fn.Z.IMAGE,Fn.Z.TEXT],hybrid:[Fn.Z.POLYGON,Fn.Z.LINE_STRING],vector:[]},Bn={image:[Fn.Z.DEFAULT],hybrid:[Fn.Z.IMAGE,Fn.Z.TEXT,Fn.Z.DEFAULT],vector:[Fn.Z.POLYGON,Fn.Z.CIRCLE,Fn.Z.LINE_STRING,Fn.Z.IMAGE,Fn.Z.TEXT,Fn.Z.DEFAULT]};const Vn=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.renderedLayerRevision_,i.renderedPixelToCoordinateTransform_=null,i.renderedRotation_,i.renderTileImageQueue_={},i.tileListenerKeys_={},i.tmpTransform_=(0,Ae.Ue)(),i}return Gn(e,t),e.prototype.prepareTile=function(t,e,i,n){var o,r=(0,ee.sq)(t),a=t.getState();return(a===ai.Z.LOADED&&t.hifi||a===ai.Z.ERROR)&&r in this.tileListenerKeys_&&((0,$e.bN)(this.tileListenerKeys_[r]),delete this.tileListenerKeys_[r]),a!==ai.Z.LOADED&&a!==ai.Z.ERROR||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t,e,i)&&(o=!0,n&&(this.renderTileImageQueue_[r]=t))),o},e.prototype.getTile=function(e,i,n,o){var r=o.pixelRatio,a=o.viewState,s=a.resolution,l=a.projection,c=this.getLayer(),u=c.getSource().getTile(e,i,n,r,l);if(u.getState()<ai.Z.LOADED){u.wantedResolution=s;var h=(0,ee.sq)(u);if(!(h in this.tileListenerKeys_)){var d=(0,$e.oL)(u,Ke.Z.CHANGE,this.prepareTile.bind(this,u,r,l,!0));this.tileListenerKeys_[h]=d}}else{var p=o.viewHints;!!(p[In.Z.ANIMATING]||p[In.Z.INTERACTING])&&u.wantedResolution||(u.wantedResolution=s),this.prepareTile(u,r,l,!1)&&c.getRenderMode()!==Dn&&this.renderTileImage_(u,o)}return t.prototype.getTile.call(this,e,i,n,o)},e.prototype.isDrawableTile=function(e){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&i.getRenderMode()===Dn||e.hasContext(i)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,i){var n=this.getLayer(),o=n.getRevision(),r=n.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(n);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=o||s.renderedRenderOrder!=r||s.renderedZ!==t.sourceZ){var l=n.getSource(),c=l.getTileGrid(),u=l.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),h=l.getSourceTiles(e,i,t),d=(0,ee.sq)(n);delete t.hitDetectionImageData[d],t.executorGroups[d]=[];for(var p=function(i,o){var p=h[i];if(p.getState()!=ai.Z.LOADED)return"continue";var g=p.tileCoord,m=c.getTileCoordExtent(g),v=(0,de.Ed)(u,m),y=(0,de.fS)(m,v)?null:(0,de.f3)(v,n.getRenderBuffer()*a,f.tmpExtent);s.dirty=!1;var b=new An.Z(0,v,a,e,n.getDeclutter()),w=(0,Nn.se)(a,e),_=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,a)),e){var o=this.renderFeature(t,w,e,b);this.dirty_=this.dirty_||o,s.dirty=s.dirty||o}},x=p.getFeatures();r&&r!==s.renderedRenderOrder&&x.sort(r);for(var C=0,E=x.length;C<E;++C){var k=x[C];y&&!(0,de.kK)(y,k.getGeometry().getExtent())||_.call(f,k)}var T=b.finish(),S=n.getRenderMode()!==Dn&&n.getDeclutter()&&1===h.length?null:v,M=new jn.ZP(S,a,e,l.getOverlaps(),T,n.getRenderBuffer());t.executorGroups[d].push(M)},f=this,g=0,m=h.length;g<m;++g)p(g);s.renderedRevision=o,s.renderedZ=t.sourceZ,s.renderedRenderOrder=r,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){var r=e.viewState.resolution,a=e.viewState.rotation;i=null==i?0:i;var s,l,c,u=this.getLayer(),h=u.getDeclutter(),d=u.getSource().getTileGridForProjection(e.viewState.projection),p={},f=this.renderedTiles,g=function(){var e=f[l],c=d.getTileCoordExtent(e.wrappedTileCoord),g=(0,de.b8)(c,t);if(!h&&!g)return"continue";for(var m=e.executorGroups[(0,ee.sq)(u)],v=0,y=m.length;v<y;++v){var b=m[v];s=s||b.forEachFeatureAtCoordinate(t,r,a,i,(function(t){if(g||o&&-1!==o.indexOf(t)){var e=t.getId();if(void 0===e&&(e=(0,ee.sq)(t)),!(e in p))return p[e]=!0,n(t,u)}}),u.getDeclutter()?o:null)}};for(l=0,c=f.length;l<c;++l)g();return s},e.prototype.getFeatures=function(t){return new Promise(function(e,i){for(var n,o=this.getLayer(),r=(0,ee.sq)(o),a=o.getSource(),s=this.renderedProjection,l=s.getExtent(),c=this.renderedResolution,u=a.getTileGridForProjection(s),h=(0,Ae.nn)(this.renderedPixelToCoordinateTransform_,t.slice()),d=u.getTileCoordForCoordAndResolution(h,c),p=0,f=this.renderedTiles.length;p<f;++p)if(d.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===ai.Z.LOADED&&n.hifi){var g=u.getTileCoordExtent(n.tileCoord);a.getWrapX()&&s.canWrapX()&&!(0,de.r4)(l,g)&&(0,Zn.Cf)(h,s);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var m=u.getTileCoordExtent(n.wrappedTileCoord),v=(0,de.rL)(m),y=[(h[0]-v[0])/c,(v[1]-h[1])/c],b=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),w=n.hitDetectionImageData[r];if(!w&&!this.animatingOrInteracting_){var _=(0,Pi.Pq)(u.getTileSize(u.getZForResolution(c))),x=[_[0]/2,_[1]/2],C=this.renderedRotation_,E=[this.getRenderTransform(u.getTileCoordCenter(n.wrappedTileCoord),c,0,.5,x[0],x[1],0)];w=(0,zn.T)(_,E,b,o.getStyleFunction(),u.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(o).renderedResolution,C),n.hitDetectionImageData[r]=w}e((0,zn.i)(y,b,w))}}.bind(this))},e.prototype.handleFontsChanged=function(){(0,te.ZH)(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[In.Z.ANIMATING]||n[In.Z.INTERACTING]);this.renderQueuedTileImages_(o,e),t.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var r=this.getLayer(),a=r.getRenderMode();if(a===Ln)return this.container;var s=r.getSource(),l=e.usedTiles[(0,ee.sq)(s)];for(var c in this.renderTileImageQueue_)l&&c in l||delete this.renderTileImageQueue_[c];for(var u=this.context,h=r.getDeclutter()?{}:null,d=Bn[a],p=e.pixelRatio,f=e.viewState,g=f.center,m=f.resolution,v=f.rotation,y=e.size,b=Math.round(y[0]*p),w=Math.round(y[1]*p),_=this.renderedTiles,x=s.getTileGridForProjection(e.viewState.projection),C=[],E=[],k=_.length-1;k>=0;--k)for(var T=_[k],S=T.tileCoord,M=x.getTileCoordExtent(T.wrappedTileCoord),R=x.getTileCoordExtent(S,this.tmpExtent)[0]-M[0],P=(0,Ae.Jp)((0,Ae.bA)(this.inversePixelTransform.slice(),1/p,1/p),this.getRenderTransform(g,m,v,p,b,w,R)),L=T.executorGroups[(0,ee.sq)(r)],O=!1,D=0,I=L.length;D<I;++D){var F=L[D];if(F.hasExecutors(d)){var A=T.tileCoord[0],N=void 0;if(!h&&!O){N=F.getClipCoords(P),u.save();for(var j=0,z=C.length;j<z;++j){var Z=C[j];A<E[j]&&(u.beginPath(),u.moveTo(N[0],N[1]),u.lineTo(N[2],N[3]),u.lineTo(N[4],N[5]),u.lineTo(N[6],N[7]),u.moveTo(Z[6],Z[7]),u.lineTo(Z[4],Z[5]),u.lineTo(Z[2],Z[3]),u.lineTo(Z[0],Z[1]),u.clip())}}F.execute(u,P,v,o,d,h),h||O||(u.restore(),C.push(N),E.push(A),O=!0)}}if(h){var G=e.layerStatesArray[e.layerIndex];(0,jn.SK)(h,u,v,G.opacity,o,e.declutterItems)}return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var i in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var r=0,a=i.length;r<a;++r)o=(0,Nn.Pn)(n,t,i[r],e,this.boundHandleStyleImageChange_)||o;else o=(0,Nn.Pn)(n,t,i,e,this.boundHandleStyleImageChange_);return o},e.prototype.tileImageNeedsRender_=function(t,e,i){var n=this.getLayer(),o=t.getReplayState(n),r=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return o.renderedTileResolution!==s||o.renderedTileRevision!==r||o.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),r=t.executorGroups[(0,ee.sq)(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var a=t.wrappedTileCoord,s=a[0],l=i.getSource(),c=e.pixelRatio,u=e.viewState.projection,h=l.getTileGridForProjection(u),d=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*d,f=h.getResolution(s),g=t.getContext(i);c=Math.max(c,p/c);var m=l.getTilePixelSize(s,c,u);g.canvas.width=m[0],g.canvas.height=m[1];var v=c/p;if(1!==v){var y=(0,Ae.mc)(this.tmpTransform_);(0,Ae.bA)(y,v,v),g.setTransform.apply(g,y)}var b=h.getTileCoordExtent(a,this.tmpExtent),w=p/f,_=(0,Ae.mc)(this.tmpTransform_);(0,Ae.bA)(_,w,-w),(0,Ae.Iu)(_,-b[0],-b[3]);for(var x=0,C=r.length;x<C;++x){r[x].execute(g,_,0,!0,Hn[i.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(Sn);var Wn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Yn=function(t){function e(e){var i=this,n=e||{},o=(0,te.f0)({},n);delete o.preload,delete o.useInterimTilesOnError,i=t.call(this,o)||this;var r=n.renderMode||On;return(0,Kt.h)(null==r||r==Ln||r==On||r==Dn,28),i.renderMode_=r,i.setPreload(n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Wn(e,t),e.prototype.createRenderer=function(){return new Vn(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(bn)},e.prototype.getUseInterimTilesOnError=function(){return this.get(wn)},e.prototype.setPreload=function(t){this.set(bn,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(wn,t)},e}(Pn.Z);var qn=n(7976),Un=n(1219),Xn=n(8185),$n=n(767),Kn=n(3156),Jn=n(3298),Qn=n(5565),to=n(8426);const eo=function(){function t(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var o=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var io=n(6),no=n(7588),oo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ro(t){var e=!1;if(t.type==io.Z.DBLCLICK){var i=t.originalEvent,n=t.map,o=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_,a=n.getView();(0,no.FW)(a,r,o,this.duration_),t.preventDefault(),e=!0}return!e}const ao=function(t){function e(e){var i=t.call(this,{handleEvent:ro})||this,n=e||{};return i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:250,i}return oo(e,t),e}(no.ZP);var so=n(6403),lo=n(4011),co=n(8024),uo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ho(t){return(0,so.rM)(t)&&(0,so.Xp)(t)}const po=function(t){function e(e){var i=t.call(this,{stopDown:lo.Dv})||this,n=e||{};return i.kinetic_=n.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1,i.condition_=n.condition?n.condition:ho,i.noKinetic_=!1,i}return uo(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=(0,so.T_)(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,i=(0,co.S)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=t.map.getView();(0,Zn.bA)(n,o.getResolution()),(0,Zn.U1)(n,o.getRotation()),o.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:si.Vv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(co.Z);var fo=n(8642),go=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const mo=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{stopDown:lo.Dv})||this).condition_=n.condition?n.condition:so.aj,i.lastAngle_=void 0,i.duration_=void 0!==n.duration?n.duration:250,i}return go(e,t),e.prototype.handleDragEvent=function(t){if((0,so.QL)(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==fo.h$){var n=e.getSize(),o=t.pixel,r=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=r-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!(0,so.QL)(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!(0,so.QL)(t)&&(!(!(0,so.v8)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(co.Z);var vo=n(967),yo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const bo=function(t){function e(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return yo(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Te.ZP([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(vo.Z);var wo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_o="boxstart",xo="boxdrag",Co="boxend",Eo=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.coordinate=i,o.mapBrowserEvent=n,o}return wo(e,t),e}(Ri.ZP);const ko=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.box_=new bo(n.className||"ol-dragbox"),i.minArea_=void 0!==n.minArea?n.minArea:64,i.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:lo.Zn,i.startPixel_=null,i.condition_=n.condition?n.condition:so.v8,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return wo(e,t),e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],o=i[1]-e[1];return n*n+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Eo(xo,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Eo(Co,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Eo(_o,t.coordinate,t)),!0)},e}(co.Z);var To=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function So(){var t=this.getMap(),e=t.getView(),i=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var o=e.calculateExtentInternal(i),r=(0,de.ZT)([t.getPixelFromCoordinateInternal((0,de.hC)(n)),t.getPixelFromCoordinateInternal((0,de.Xv)(n))]),a=e.getResolutionForExtentInternal(r,i);(0,de.H9)(o,1/a),n=o}var s=e.getConstrainedResolution(e.getResolutionForExtentInternal(n,i)),l=e.getConstrainedCenter((0,de.qg)(n),s);e.animateInternal({resolution:s,center:l,duration:this.duration_,easing:si.Vv})}const Mo=function(t){function e(e){var i=this,n=e||{},o=n.condition?n.condition:so.vY;return(i=t.call(this,{condition:o,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:So})||this).duration_=void 0!==n.duration?n.duration:200,i.out_=void 0!==n.out&&n.out,i}return To(e,t),e}(ko),Ro=37,Po=38,Lo=39,Oo=40;var Do=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Io(t){var e=!1;if(t.type==Ke.Z.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==Oo||i==Ro||i==Lo||i==Po)){var n=t.map.getView(),o=n.getResolution()*this.pixelDelta_,r=0,a=0;i==Oo?a=-o:i==Ro?r=-o:i==Lo?r=o:a=o;var s=[r,a];(0,Zn.U1)(s,n.getRotation()),(0,no.Cv)(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}const Fo=function(t){function e(e){var i=t.call(this,{handleEvent:Io})||this,n=e||{};return i.defaultCondition_=function(t){return(0,so.rM)(t)&&(0,so.TN)(t)},i.condition_=void 0!==n.condition?n.condition:i.defaultCondition_,i.duration_=void 0!==n.duration?n.duration:100,i.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,i}return Do(e,t),e}(no.ZP);var Ao=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function No(t){var e=!1;if(t.type==Ke.Z.KEYDOWN||t.type==Ke.Z.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,o=i=="+".charCodeAt(0)?this.delta_:-this.delta_,r=n.getView();(0,no.FW)(r,o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}const jo=function(t){function e(e){var i=t.call(this,{handleEvent:No})||this,n=e||{};return i.condition_=n.condition?n.condition:so.TN,i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:100,i}return Ao(e,t),e}(no.ZP);var zo=n(1358),Zo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Go="trackpad",Ho="wheel";const Bo=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,i.duration_=void 0!==n.duration?n.duration:250,i.timeout_=void 0!==n.timeout?n.timeout:80,i.useAnchor_=void 0===n.useAnchor||n.useAnchor,i.condition_=n.condition?n.condition:so.Bx,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return Zo(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=(0,so.T_)(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==Ke.Z.WHEEL)return!0;t.preventDefault();var e,i=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Ke.Z.WHEEL&&(e=n.deltaY,zo.V&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=zo.MP),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Go:Ho);var r=i.getView();if(this.mode_===Go&&!r.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-(0,Ce.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(i=i?i>0?1:-1:0),(0,no.FW)(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(no.ZP);var Vo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Wo=function(t){function e(e){var i=this,n=e||{},o=n;return o.stopDown||(o.stopDown=lo.Dv),(i=t.call(this,o)||this).anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=void 0!==n.threshold?n.threshold:.3,i.duration_=void 0!==n.duration?n.duration:250,i}return Vo(e,t),e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==fo.h$){var l=a.getViewport().getBoundingClientRect(),c=(0,co.S)(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(c),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(co.Z);var Yo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const qo=function(t){function e(e){var i=this,n=e||{},o=n;return o.stopDown||(o.stopDown=lo.Dv),(i=t.call(this,o)||this).anchor_=null,i.duration_=void 0!==n.duration?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return Yo(e,t),e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,r=i.clientY-n.clientY,a=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var c=s.getViewport().getBoundingClientRect(),u=(0,co.S)(this.targetPointers);u[0]-=c.left,u[1]-=c.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(co.Z);function Uo(t){var e=t||{},i=new to.Z,n=new eo(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new mo),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new ao({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new po({condition:e.onFocusOnly?so.T_:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Wo),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new qo({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Fo),i.push(new jo({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Bo({condition:e.onFocusOnly?so.T_:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new Mo({duration:e.zoomDuration})),i}var Xo=n(6968),$o=n(8493),Ko=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jo=function(t){function e(e,i,n){var o=t.call(this)||this;if(void 0!==n&&void 0===i)o.setFlatCoordinates(n,e);else{var r=i||0;o.setCenterAndRadius(e,r,n)}return o}return Ko(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=t-o[0],a=e-o[1],s=r*r+a*a;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)i[l]=o[l];else{var c=this.getRadius()/Math.sqrt(s);i[0]=o[0]+c*r,i[1]=o[1]+c*a;for(l=2;l<this.stride;++l)i[l]=o[l]}return i.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],o=e-i[1];return n*n+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,de.T9)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return ce.Z.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,de.kK)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||(0,de.H6)(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,o=(0,ge.IG)(n,0,t,this.stride);n[o++]=n[0]+e;for(var r=1,a=this.stride;r<a;++r)n[o++]=n[r];n.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter((0,Fe.U1)(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter((0,Fe.Iu)(i,0,i.length,n,t,e,i)),this.changed()},e}(pe.ZP);Jo.prototype.transform;const Qo=Jo;var tr=n(3604),er=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ir="Point",nr="LineString",or="Polygon",rr="Circle",ar="drawstart",sr="drawend",lr="drawabort",cr=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return er(e,t),e}(Ri.ZP);function ur(t,e){return function(i,n,o){var r=(0,ie.Vs)(i[0],o),a=(0,ie.Vs)(i[1],o),s=Math.sqrt((0,Zn.bI)(r,a)),l=n||(0,Te.Bb)(new Qo(r),t),c=e;if(!e){var u=a[0]-r[0],h=a[1]-r[1];c=Math.atan(h/u)-(u<0?Math.PI:0)}(0,Te.Ej)(l,r,s,c);var d=(0,ie.Cs)();return d&&l.transform(o,d),l}}function hr(){return function(t,e,i){var n=(0,de.hI)(t.map((function(t){return(0,ie.Vs)(t,i)}))),o=[[(0,de.hC)(n),(0,de.w$)(n),(0,de.Xv)(n),(0,de.rL)(n),(0,de.hC)(n)]],r=e;r?r.setCoordinates(o):r=new Te.ZP(o);var a=(0,ie.Cs)();return a&&r.transform(i,a),r}}const dr=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=lo.Dv),(i=t.call(this,n)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;t===ce.Z.POINT||t===ce.Z.MULTI_POINT?e=ir:t===ce.Z.LINE_STRING||t===ce.Z.MULTI_LINE_STRING?e=nr:t===ce.Z.POLYGON||t===ce.Z.MULTI_POLYGON?e=or:t===ce.Z.CIRCLE&&(e=rr);return e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===or?3:2,i.maxPoints_=e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:lo.uX;var o,r=e.geometryFunction;if(!r)if(i.type_===ce.Z.CIRCLE)r=function(t,e,i){var n=e||new Qo([NaN,NaN]),o=(0,ie.Vs)(t[0],i),r=(0,Zn.bI)(o,(0,ie.Vs)(t[1],i));n.setCenterAndRadius(o,Math.sqrt(r));var a=(0,ie.Cs)();return a&&n.transform(i,a),n};else{var a,s=i.mode_;s===ir?a=xe.Z:s===nr?a=ue.Z:s===or&&(a=Te.ZP),r=function(t,e,i){var n=e;return n?s===or?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new a(t),n}}return i.geometryFunction_=r,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new qn.Z({source:new mn.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(o=(0,Un.Ly)(),function(t,e){return o[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:so.rM,i.freehandCondition_,e.freehand?i.freehandCondition_=so.Bx:i.freehandCondition_=e.freehandCondition?e.freehandCondition:so.vY,i.addEventListener((0,$o.v_)(tr.Z.ACTIVE),i.updateState_),i}return er(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Ke.Z.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==ir&&this.freehandCondition_(e);var i=e.type===io.Z.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===io.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===io.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===io.Z.POINTERDOWN?n=!1:i?(n=e.type===io.Z.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===io.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===io.Z.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Xo.Z(io.Z.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===rr;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===ir&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],o=e[1]-i[1],r=n*n+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===nr)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===or){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]]}if(i)for(var r=t.map,a=0,s=n.length;a<s;a++){var l=n[a],c=r.getPixelFromCoordinate(l),u=t.pixel,h=u[0]-c[0],d=u[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+d*d)<=p){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ye.Z(new xe.Z(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===ir?this.sketchCoords_=e.slice():this.mode_===or?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ye.Z(new ue.Z(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new Ye.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new cr(ar,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,o=t.coordinate,r=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===ir?i=this.sketchCoords_:this.mode_===or?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=o[0],i[1]=o[1],this.geometryFunction_(this.sketchCoords_,r,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(r.getType()==ce.Z.POLYGON&&this.mode_!==or){this.sketchLine_||(this.sketchLine_=new Ye.Z);var s=r.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new ue.Z(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===nr?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,o)):this.mode_===or&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===nr?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===or&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===nr?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_===or&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_===ce.Z.MULTI_POINT?t.setGeometry(new ke([e])):this.type_===ce.Z.MULTI_LINE_STRING?t.setGeometry(new _e([e])):this.type_===ce.Z.MULTI_POLYGON&&t.setGeometry(new De([e])),this.dispatchEvent(new cr(sr,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new cr(lr,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===nr?i=this.sketchCoords_:e===or&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=i.pop(),o=0;o<t.length;o++)this.addToDrawing_(t[o]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new cr(ar,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(co.Z);var pr=n(9629),fr=n(5753),gr=n(3101),mr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vr=[0,0,0,0],yr=[],br="modifystart",wr="modifyend",_r=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.features=i,o.mapBrowserEvent=n,o}return mr(e,t),e}(Ri.ZP);function xr(t,e){return t.index-e.index}function Cr(t,e,i){var n=e.geometry;if(n.getType()===ce.Z.CIRCLE){var o=n;if(1===e.index){var r=(0,ie.Cs)();r&&(o=o.clone().transform(r,i));var a=(0,Zn.bI)(o.getCenter(),(0,ie.Vs)(t,i)),s=Math.sqrt(a)-o.getRadius();return s*s}}var l=(0,ie.Vs)(t,i);return yr[0]=(0,ie.Vs)(e.segment[0],i),yr[1]=(0,ie.Vs)(e.segment[1],i),(0,Zn.Bs)(l,yr)}function Er(t,e,i){var n=e.geometry;if(n.getType()===ce.Z.CIRCLE&&1===e.index){var o=n,r=(0,ie.Cs)();return r&&(o=o.clone().transform(r,i)),(0,ie.lO)(o.getClosestPoint((0,ie.Vs)(t,i)),i)}var a=(0,ie.Vs)(t,i);return yr[0]=(0,ie.Vs)(e.segment[0],i),yr[1]=(0,ie.Vs)(e.segment[1],i),(0,ie.lO)((0,Zn.oL)(a,yr),i)}const kr=function(t){function e(e){var i,n,o=t.call(this,e)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=e.condition?e.condition:so.Xp,o.defaultDeleteCondition_=function(t){return(0,so.Ko)(t)&&(0,so.Kf)(t)},o.deleteCondition_=e.deleteCondition?e.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:so.Bx,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.modified_=!1,o.rBush_=new gr.Z,o.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new qn.Z({source:new mn.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=(0,Un.Ly)(),function(t,e){return i[ce.Z.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,e.source?(o.source_=e.source,n=new to.Z(o.source_.getFeatures()),o.source_.addEventListener(fr.Z.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(fr.Z.REMOVEFEATURE,o.handleSourceRemove_.bind(o))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return o.features_=n,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(pr.Z.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(pr.Z.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o}return mr(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Ke.Z.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new _r(br,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Ke.Z.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var n=i.length-1;n>=0;--n){for(var o=i[n],r=this.dragSegments_.length-1;r>=0;--r)this.dragSegments_[r][0]===o&&this.dragSegments_.splice(r,1);e.remove(o)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,o=i.length;n<o;++n){var r=i[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,o=i.length-1;n<o;++n){var r=i.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:r};this.rBush_.insert((0,de.hI)(r),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,o=i.length;n<o;++n)for(var r=i[n],a=0,s=r.length-1;a<s;++a){var l=r.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert((0,de.hI)(l),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,o=i.length;n<o;++n)for(var r=i[n],a=0,s=r.length-1;a<s;++a){var l=r.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert((0,de.hI)(l),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,o=i.length;n<o;++n)for(var r=i[n],a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,u=l.length-1;c<u;++c){var h=l.slice(c,c+2),d={feature:t,geometry:e,depth:[a,n],index:c,segment:h};this.rBush_.insert((0,de.hI)(h),d)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},o={feature:t,geometry:e,index:1,segment:[i,i]},r=[n,o];n.featureSegments=r,o.featureSegments=r,this.rBush_.insert((0,de.HK)(i),n);var a=e,s=(0,ie.Cs)();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=a.clone().transform(s,l),a=(0,Te.Bb)(a).transform(l,s)}this.rBush_.insert(a.getExtent(),o)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var o=i[n];(0,this.SEGMENT_WRITERS_[o.getType()])(t,o)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new Ye.Z(new xe.Z(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=io.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=io.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==io.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var o=this.dragSegments_[i],r=o[0],a=r.depth,s=r.geometry,l=void 0,c=r.segment,u=o[1];e.length<s.getStride();)e.push(c[u][e.length]);switch(s.getType()){case ce.Z.POINT:l=e,c[0]=e,c[1]=e;break;case ce.Z.MULTI_POINT:(l=s.getCoordinates())[r.index]=e,c[0]=e,c[1]=e;break;case ce.Z.LINE_STRING:(l=s.getCoordinates())[r.index+u]=e,c[u]=e;break;case ce.Z.MULTI_LINE_STRING:case ce.Z.POLYGON:(l=s.getCoordinates())[a[0]][r.index+u]=e,c[u]=e;break;case ce.Z.MULTI_POLYGON:(l=s.getCoordinates())[a[1]][a[0]][r.index+u]=e,c[u]=e;break;case ce.Z.CIRCLE:if(c[0]=e,c[1]=e,0===r.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=t.map.getView().getProjection(),d=(0,Zn.TE)((0,ie.Vs)(s.getCenter(),h),(0,ie.Vs)(e,h)),p=(0,ie.Cs)();if(p){var f=s.clone().transform(p,h);f.setRadius(d),d=f.transform(h,p).getRadius()}s.setRadius(d),this.changingFeature_=!1}}l&&this.setGeometryCoordinates_(s,l)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=t.map.getView().getProjection(),o=[],r=i.getGeometry().getCoordinates(),a=(0,de.hI)([r]),s=this.rBush_.getInExtent(a),l={};s.sort(xr);for(var c=0,u=s.length;c<u;++c){var h=s[c],d=h.segment,p=(0,ee.sq)(h.feature),f=h.depth;if(f&&(p+="-"+f.join("-")),l[p]||(l[p]=new Array(2)),h.geometry.getType()!==ce.Z.CIRCLE||1!==h.index)if(!(0,Zn.fS)(d[0],r)||l[p][0])if(!(0,Zn.fS)(d[1],r)||l[p][1])(0,ee.sq)(d)in this.vertexSegments_&&!l[p][0]&&!l[p][1]&&this.insertVertexCondition_(t)&&o.push([h,r]);else{if((h.geometry.getType()===ce.Z.LINE_STRING||h.geometry.getType()===ce.Z.MULTI_LINE_STRING)&&l[p][0]&&0===l[p][0].index)continue;this.dragSegments_.push([h,1]),l[p][1]=h}else this.dragSegments_.push([h,0]),l[p][0]=h;else{var g=Er(e,h,n);(0,Zn.fS)(g,r)&&!l[p][0]&&(this.dragSegments_.push([h,0]),l[p][0]=h)}}o.length&&this.willModifyFeatures_(t);for(var m=o.length-1;m>=0;--m)this.insertVertex_.apply(this,o[m])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===ce.Z.CIRCLE){var o=n.getCenter(),r=i.featureSegments[0],a=i.featureSegments[1];r.segment[0]=o,r.segment[1]=o,a.segment[0]=o,a.segment[1]=o,this.rBush_.update((0,de.HK)(o),r);var s=n,l=(0,ie.Cs)();if(l){var c=t.map.getView().getProjection();s=s.clone().transform(l,c),s=(0,Te.Bb)(s).transform(c,l)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update((0,de.hI)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new _r(wr,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var n=i||e.getCoordinateFromPixel(t),o=e.getView().getProjection(),r=(0,ie.dY)((0,de.HK)(n,vr),o),a=e.getView().getResolution()*this.pixelTolerance_,s=(0,ie.Fj)((0,de.f3)(r,a,vr),o),l=this.rBush_.getInExtent(s);if(l.length>0){l.sort((function(t,e){return Cr(n,t,o)-Cr(n,e,o)}));var c=l[0],u=c.segment,h=Er(n,c,o),d=e.getPixelFromCoordinate(h),p=(0,Zn.TE)(t,d);if(p<=this.pixelTolerance_){var f={};if(c.geometry.getType()===ce.Z.CIRCLE&&1===c.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var g=e.getPixelFromCoordinate(u[0]),m=e.getPixelFromCoordinate(u[1]),v=(0,Zn.bI)(d,g),y=(0,Zn.bI)(d,m);p=Math.sqrt(Math.min(v,y)),this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(h=v>y?u[1]:u[0]),this.createOrUpdateVertexFeature_(h);for(var b=1,w=l.length;b<w;++b){var _=l[b].segment;if(!((0,Zn.fS)(u[0],_[0])&&(0,Zn.fS)(u[1],_[1])||(0,Zn.fS)(u[0],_[1])&&(0,Zn.fS)(u[1],_[0])))break;f[(0,ee.sq)(_)]=!0}}return f[(0,ee.sq)(u)]=!0,void(this.vertexSegments_=f)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,o=t.feature,r=t.geometry,a=t.depth,s=t.index;e.length<r.getStride();)e.push(0);switch(r.getType()){case ce.Z.MULTI_LINE_STRING:case ce.Z.POLYGON:(i=r.getCoordinates())[a[0]].splice(s+1,0,e);break;case ce.Z.MULTI_POLYGON:(i=r.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case ce.Z.LINE_STRING:(i=r.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(r,i);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,s,a,1);var c={segment:[n[0],e],feature:o,geometry:r,depth:a,index:s};l.insert((0,de.hI)(c.segment),c),this.dragSegments_.push([c,1]);var u={segment:[e,n[1]],feature:o,geometry:r,depth:a,index:s+1};l.insert((0,de.hI)(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=io.Z.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new _r(wr,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,o,r,a,s,l,c,u,h=this.dragSegments_,d={},p=!1;for(o=h.length-1;o>=0;--o)c=(i=h[o])[0],u=(0,ee.sq)(c.feature),c.depth&&(u+="-"+c.depth.join("-")),u in d||(d[u]={}),0===i[1]?(d[u].right=c,d[u].index=c.index):1==i[1]&&(d[u].left=c,d[u].index=c.index+1);for(u in d){switch(l=d[u].right,a=d[u].left,(s=(r=d[u].index)-1)<0&&(s=0),t=e=(n=(c=void 0!==a?a:l).geometry).getCoordinates(),p=!1,n.getType()){case ce.Z.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(r,1),p=!0);break;case ce.Z.LINE_STRING:e.length>2&&(e.splice(r,1),p=!0);break;case ce.Z.MULTI_POLYGON:t=t[c.depth[1]];case ce.Z.POLYGON:(t=t[c.depth[0]]).length>4&&(r==t.length-1&&(r=0),t.splice(r,1),p=!0,0===r&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var f=[];if(void 0!==a&&(this.rBush_.remove(a),f.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),f.push(l.segment[1])),void 0!==a&&void 0!==l){var g={depth:c.depth,feature:c.feature,geometry:c.geometry,index:s,segment:f};this.rBush_.insert((0,de.hI)(g.segment),g)}this.updateSegmentIndices_(n,r,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(o){o.geometry===t&&(void 0===i||void 0===o.depth||(0,he.fS)(o.depth,i))&&o.index>e&&(o.index+=n)}))},e}(co.Z);var Tr=n(6993),Sr=n(9530),Mr=n(7644),Rr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Pr(t){this.updateElement_(t.frameState)}const Lr=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||Pr,target:n.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===n.collapsed||n.collapsed,i.overrideCollapsible_=void 0!==n.collapsible,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var o=void 0!==n.className?n.className:"ol-attribution",r=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a):i.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(i.label_=document.createElement("span"),i.label_.textContent=s):i.label_=s;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=r,c.appendChild(l),c.addEventListener(Ke.Z.CLICK,i.handleClick_.bind(i),!1);var u=o+" "+Mr.XV+" "+Mr.hg+(i.collapsed_&&i.collapsible_?" "+Mr.hN:"")+(i.collapsible_?"":" ol-uncollapsible"),h=i.element;return h.className=u,h.appendChild(i.ulElement_),h.appendChild(c),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return Rr(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,o=0,r=n.length;o<r;++o){var a=n[o];if((0,yn.j)(a,t.viewState)){var s=a.layer.getSource();if(s){var l=s.getAttributions();if(l){var c=l(t);if(c)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var u=0,h=c.length;u<h;++u)c[u]in e||(i.push(c[u]),e[c[u]]=!0);else c in e||(i.push(c),e[c]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,he.fS)(e,this.renderedAttributions_)){(0,hi.ep)(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var r=document.createElement("li");r.innerHTML=e[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(Mr.hN),this.collapsed_?(0,hi.$H)(this.collapseLabel_,this.label_):(0,hi.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Sr.Z);var Or=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Dr(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var o=this.element.classList.contains(Mr.oj);o||0!==i?o&&0!==i&&this.element.classList.remove(Mr.oj):this.element.classList.add(Mr.oj)}this.label_.style.transform=n}this.rotation_=i}}const Ir=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render||Dr,target:n.target})||this;var o=void 0!==n.className?n.className:"ol-rotate",r=void 0!==n.label?n.label:"⇧";i.label_=null,"string"==typeof r?(i.label_=document.createElement("span"),i.label_.className="ol-compass",i.label_.textContent=r):(i.label_=r,i.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=o+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(i.label_),s.addEventListener(Ke.Z.CLICK,i.handleClick_.bind(i),!1);var l=o+" "+Mr.XV+" "+Mr.hg,c=i.element;return c.className=l,c.appendChild(s),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=void 0!==n.duration?n.duration:250,i.autoHide_=void 0===n.autoHide||n.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(Mr.oj),i}return Or(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:si.Vv}):t.setRotation(0))}},e}(Sr.Z);var Fr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ar=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),target:n.target})||this;var o=void 0!==n.className?n.className:"ol-zoom",r=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",c=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=o+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener(Ke.Z.CLICK,i.handleClick_.bind(i,r),!1);var h=document.createElement("button");h.className=o+"-out",h.setAttribute("type","button"),h.title=c,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(Ke.Z.CLICK,i.handleClick_.bind(i,-r),!1);var d=o+" "+Mr.XV+" "+Mr.hg,p=i.element;return p.className=d,p.appendChild(u),p.appendChild(h),i.duration_=void 0!==n.duration?n.duration:250,i}return Fr(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();if(void 0!==i){var n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:si.Vv})):e.setZoom(n)}}},e}(Sr.Z);function Nr(t){var e=t||{},i=new to.Z;return(void 0===e.zoom||e.zoom)&&i.push(new Ar(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Ir(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new Lr(e.attributionOptions)),i}var jr=n(5317),zr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Zr=function(t){function e(e){return(e=(0,te.f0)({},e)).controls||(e.controls=Nr()),e.interactions||(e.interactions=Uo()),t.call(this,e)||this}return zr(e,t),e.prototype.createRenderer=function(){return new jr.Z(this)},e}(Tr.Z);var Gr=n(2138),Hr=n(3409),Br=n(2948),Vr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wr="degrees",Yr="imperial",qr="nautical",Ur="metric",Xr="us",$r=[1,2,5];function Kr(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}const Jr=function(t){function e(e){var i=this,n=e||{},o=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:n.render||Kr,target:n.target})||this).innerElement_=document.createElement("div"),i.innerElement_.className=o+"-inner",i.element.className=o+" "+Mr.XV,i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=void 0!==n.minWidth?n.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addEventListener((0,$o.v_)("units"),i.handleUnitsChanged_),i.setUnits(n.units||Ur),i.scaleBar_=n.bar||!1,i.scaleBarSteps_=n.steps||4,i.scaleBarText_=n.text||!1,i}return Vr(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,n=this.getUnits(),o=n==Wr?ne.Z.DEGREES:ne.Z.METERS,r=(0,ie._Q)(i,t.resolution,e,o),a=this.minWidth_*r,s="";if(n==Wr){var l=ie.Wm[ne.Z.DEGREES];(a*=l)<l/60?(s="″",r*=3600):a<l?(s="′",r*=60):s="°"}else n==Yr?a<.9144?(s="in",r/=.0254):a<1609.344?(s="ft",r/=.3048):(s="mi",r/=1609.344):n==qr?(r/=1852,s="nm"):n==Ur?a<.001?(s="μm",r*=1e6):a<1?(s="mm",r*=1e3):a<1e3?s="m":(s="km",r/=1e3):n==Xr?a<.9144?(s="in",r*=39.37):a<1609.344?(s="ft",r/=.30480061):(s="mi",r/=1609.3472):(0,Kt.h)(!1,33);for(var c,u,h,d,p=3*Math.floor(Math.log(this.minWidth_*r)/Math.log(10));;){h=Math.floor(p/3);var f=Math.pow(10,h);if(c=$r[(p%3+3)%3]*f,u=Math.round(c/r),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(u>=this.minWidth_)break;++p}d=this.scaleBar_?this.createScaleBar(u,c,s):c.toFixed(h<0?-h:0)+" "+s,this.renderedHTML_!=d&&(this.innerElement_.innerHTML=d,this.renderedHTML_=d),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,i){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),o=[],r=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&o.push(this.createMarker("absolute",s)),o.push('<div><div class="ol-scale-singlebar" style="width: '+r+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,i):"")+"</div>"),s===this.scaleBarSteps_-1&&o.push(this.createStepText(s+1,t,!0,e,i)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+o.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,i,n,o){var r=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+o);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(i?e+"px":"unset")+';">'+r+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(Sr.Z),Qr=t=>e=>{if(!e.target)return console.log("No target for mapview!");t.mapview.node=e.target,t.mapview.srid=e.srid||"3857";const i=e.view&&e.view.z||t.workspace.locale.view.z||t.workspace.locale.minZoom||0,n=t.mapview.lib.proj.fromLonLat([parseFloat(e.view&&e.view.lng||t.workspace.locale.view.lng||0),parseFloat(e.view&&e.view.lat||t.workspace.locale.view.lat||0)]);if(t.map=new t.mapview.lib.Map({target:t.mapview.node,interactions:t.mapview.lib.interaction.defaults({mouseWheelZoom:e.scrollWheelZoom||!1}),controls:[],view:new t.mapview.lib.View({projection:"EPSG:"+t.mapview.srid,zoom:i,minZoom:t.workspace.locale.minZoom,maxZoom:t.workspace.locale.maxZoom,center:n,extent:t.mapview.lib.proj.transformExtent([parseFloat(e.bounds&&e.bounds.west||t.workspace.locale.bounds.west),parseFloat(e.bounds&&e.bounds.south||t.workspace.locale.bounds.south),parseFloat(e.bounds&&e.bounds.east||t.workspace.locale.bounds.east),parseFloat(e.bounds&&e.bounds.north||t.workspace.locale.bounds.north)],"EPSG:4326","EPSG:"+t.mapview.srid)})}),t.map.on("movestart",()=>t.mapview.interaction.break=!0),t.mapview.node.addEventListener("changeEnd",()=>{if(Object.values(t.layers.list).forEach(t=>{t.display&&t._dataviews.forEach(t=>t.update()),t.view&&t.tables&&(null===t.tableCurrent()?t.view.classList.add("disabled"):t.view.classList.remove("disabled"))}),t.hooks){const e=t.mapview.lib.proj.transform(t.map.getView().getCenter(),"EPSG:"+t.mapview.srid,"EPSG:4326");t.hooks.set({lat:e[1],lng:e[0],z:t.map.getView().getZoom()})}setTimeout(()=>delete t.mapview.interaction.break,500)}),t.mapview.interaction.highlight.begin(),"never"!==e.zoomControl&&(e.zoomControl||t.workspace.locale.zoomControl)&&t.map.addControl(new t.mapview.lib.control.Zoom),e.attribution&&t.mapview.attribution.create(e.attribution),"never"!==e.showScaleBar&&(e.showScaleBar||t.workspace.locale.showScaleBar)&&t.map.addControl(new t.mapview.lib.control.ScaleLine({target:"ol-scale"})),e.maskBounds||t.workspace.locale.maskBounds){const e=[[180,90],[180,-90],[-180,-90],[-180,90],[180,90]],i=[[t.workspace.locale.bounds.east,t.workspace.locale.bounds.north],[t.workspace.locale.bounds.east,t.workspace.locale.bounds.south],[t.workspace.locale.bounds.west,t.workspace.locale.bounds.south],[t.workspace.locale.bounds.west,t.workspace.locale.bounds.north],[t.workspace.locale.bounds.east,t.workspace.locale.bounds.north]];var o=new t.mapview.lib.Feature({geometry:new t.mapview.lib.geom.Polygon([e,i]).transform("EPSG:4326","EPSG:"+t.mapview.srid)}),r=new t.mapview.lib.layer.Vector({source:new t.mapview.lib.source.Vector({features:[o]}),style:new t.mapview.lib.style.Style({fill:new t.mapview.lib.style.Fill({color:t.utils.Chroma("#000").alpha(.2).rgba()})}),zIndex:999});t.map.addLayer(r)}let a;t.map.on("moveend",(function(){clearTimeout(a),a=setTimeout(()=>t.mapview.node.dispatchEvent(t.mapview.changeEndEvent),500)})),t.hooks&&t.hooks.current.layers.length&&Object.values(t.layers.list).forEach(e=>{e.display=!!~t.hooks.current.layers.indexOf(e.key)}),Object.values(t.layers.list).forEach(t=>t.display&&t.show())},ta=t=>{const e={create:function(n){e.container&&e.container.remove(),e.container=t.utils.wire()`<div class="attribution">`,t.mapview.node.appendChild(e.container),e.scalebar=t.utils.wire()`<div id="ol-scale">`,e.container.appendChild(e.scalebar),n.logo&&e.container.appendChild(n.logo),e.links=t.utils.wire()`
    <div>
      <a target="_blank" href="https://geolytix.github.io/xyz">XYZ v${t.version}</a>
      <a target="_blank" href="https://openlayers.org">Openlayers</a>`,e.container.appendChild(e.links),t.workspace.locale.attribution&&Object.entries(t.workspace.locale.attribution).forEach(i=>{e.links.appendChild(t.utils.wire()`
        <a target="_blank" href="${i[1]}">${i[0]}`)});e.layer={},i()},check:i,set:n,remove:function(t){Object.entries(t).forEach(t=>{e.layer&&e.layer[t[0]]&&(e.layer[t[0]].remove(),delete e.layer[t[0]])})}};return e;function i(){Object.values(t.layers.list).forEach(t=>{t.display&&t.attribution&&n(t.attribution)})}function n(i){Object.entries(i).forEach(i=>{e.layer&&!e.layer[i[0]]&&(e.layer[i[0]]=t.utils.wire()`
        <a target="_blank" href="${i[1]}">${i[0]}</a>`,e.links.appendChild(e.layer[i[0]]))})}},ea=t=>{const e={toggle:function(){e.active=!e.active;let i=!0;e.L||(e.L=new t.mapview.lib.layer.Vector({source:new t.mapview.lib.source.Vector({features:[e.marker]}),zIndex:40,style:new t.mapview.lib.style.Style({image:t.mapview.icon(t.mapview.locate.icon)})}));if(!e.active)return t.map.removeLayer(e.L);t.map.addLayer(e.L),e.watcher||(e.watcher=navigator.geolocation.watchPosition(n=>{if(e.active){const o=t.mapview.lib.proj.fromLonLat([parseFloat(n.coords.longitude),parseFloat(n.coords.latitude)]);e.marker.getGeometry().setCoordinates(o),i&&t.map.getView().animate({center:o},{zoom:t.workspace.locale.maxZoom}),i=!1}},t=>{console.error(t)},{}))},active:!1,icon:{type:"geo",scale:.05},marker:new t.mapview.lib.Feature({geometry:new t.mapview.lib.geom.Point([0,0])})};return e},ia=t=>function(e){const i=(new t.mapview.lib.format.GeoJSON).readFeature({type:"Feature",geometry:e.geometry},{dataProjection:"EPSG:"+(e.dataProjection||t.mapview.srid),featureProjection:"EPSG:"+(e.featureProjection||t.mapview.srid)}),n=new t.mapview.lib.source.Vector({features:[i]}),o=new t.mapview.lib.layer.Vector({source:n,zIndex:isNaN(e.zIndex)?2e3:e.zIndex,style:e.style});return t.map.addLayer(o),o},na=t=>({create:function(e){this.node&&this.node.remove(),this.node=t.utils.wire()`<div class="popup">`,this.node.addEventListener("mousemove",t=>t.stopPropagation());const i=t.utils.wire()`<div>`;i.appendChild(e.content),this.node.appendChild(i),this.overlay&&t.map.removeOverlay(this.overlay);this.overlay=new t.mapview.lib.Overlay({element:this.node,positioning:"bottom-center",autoPan:!0,insertFirst:!0,autoPanAnimation:{duration:250}}),t.map.addOverlay(this.overlay),this.overlay.setPosition(e.coords)}}),oa=t=>{const e={begin:function(){t.mapview.interaction.current&&t.mapview.interaction.current.finish&&t.mapview.interaction.current.finish(),t.mapview.interaction.current=e,t.mapview.node.style.cursor="auto",e.featureSet=new Set,t.utils.touch()&&(t.mapview.node.addEventListener("touchend",a),t.mapview.node.addEventListener("touchmove",i),t.mapview.node.addEventListener("touchstart",i));t.mapview.node.addEventListener("click",s),t.mapview.node.addEventListener("mousemove",n),t.mapview.node.addEventListener("mouseout",o)},pointerMove:r,finish:function(){t.mapview.node.removeEventListener("click",s),t.utils.touch()&&(t.mapview.node.removeEventListener("touchend",a),t.mapview.node.removeEventListener("touchmove",i),t.mapview.node.removeEventListener("touchstart",i));t.mapview.node.removeEventListener("mousemove",n),t.mapview.node.removeEventListener("mouseout",o)},select:s,clear:l};return e;function i(t){e.lastmove=t}function n(e){t.mapview.interaction.break||(t.mapview.pointerLocation={x:e.clientX,y:e.clientY},t.mapview.infotip.node&&t.mapview.infotip.position(),r(e))}function o(e){t.mapview.pointerLocation={x:null,y:null},l()}function r(i){const n=new Set;t.map.forEachFeatureAtPixel(t.map.getEventPixel(i),(i,o)=>{n.add(i),e.featureSet.has(i)||(e.feature=i,e.layer=o.get("layer"),e.layer.highlight=i.get("id"),t.mapview.node.style.cursor="pointer",e.layer.L.setStyle(e.layer.L.getStyle()),e.layer.hover&&e.layer.hover.field&&e.layer.infotip())},{layerFilter:e=>Object.values(t.layers.list).some(t=>t.qID&&t.style&&t.style.highlight&&t.L===e),hitTolerance:5}),e.featureSet=n,n.size&&n.has(e.feature)||l()}function a(i){if(e.recentTouched)return;if(e.recentTouched=!0,setTimeout(()=>delete e.recentTouched,1e3),t.mapview.interaction.break)return;if(i.touches.length>1)return;const n=new Set;t.map.forEachFeatureAtPixel(t.map.getEventPixel(e.lastmove),(t,i)=>{n.add(t),e.featureSet.has(t)||(e.feature=t,e.layer=i.get("layer"))},{layerFilter:e=>Object.values(t.layers.list).some(t=>t.qID&&t.L===e),hitTolerance:5}),e.featureSet=n,n.size&&e.feature&&e.layer.select(e.feature)}function s(){e.recentTouched||(t.mapview.popup.overlay&&t.map.removeOverlay(t.mapview.popup.overlay),e.layer&&e.feature&&e.layer.select(e.feature))}function l(){e.featureSet=new Set,t.mapview.infotip.node&&t.mapview.infotip.node.remove(),e.layer&&(e.layer.highlight=!0,t.mapview.node.style.cursor="auto",e.layer.L.setStyle(e.layer.L.getStyle()),delete e.layer,delete e.feature)}},ra=t=>{const e={begin:function(i){t.mapview.interaction.current&&t.mapview.interaction.current.finish&&t.mapview.interaction.current.finish(),t.mapview.interaction.current=e,e.finish=i.finish||n,e.callback=i.callback,e.layer=i.layer,e.layer.display||e.layer.show();t.mapview.node.style.cursor="crosshair",e.vertices=[],t.map.addLayer(e.Layer),e.interaction=new t.mapview.lib.interaction.Draw({source:e.Layer.getSource(),geometryFunction:i.geometryFunction,freehand:i.freehand,type:i.type,condition:n=>{if("Polygon"===i.type||"LineString"===i.type){if(e.trail&&t.utils.turf.kinks(e.trail).features.length>0)return!1;t.map.on("pointermove",a),t.map.un("click",s)}if(1===n.pointerEvent.buttons)return e.vertices.push(n.coordinate),t.mapview.popup.node&&t.mapview.popup.node.remove(),!0}}),e.interaction.on("drawstart",n=>{i.style&&n.feature.setStyle(new t.mapview.lib.style.Style({stroke:i.style.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(i.style.strokeColor),width:i.style.strokeWidth||1})})),e.Layer.getSource().clear(),t.mapview.popup.node&&t.mapview.popup.node.remove()}),e.interaction.on("drawend",t=>{if(i.freehand&&e.vertices.push(t.target.sketchCoords_.pop()),i.drawend)return i.drawend(t);setTimeout(r,400)}),t.map.addInteraction(e.interaction),t.mapview.node.addEventListener("contextmenu",r)},finish:n,cancel:i,update:o,feature:function(i){const n=e.format.readFeature({type:"Feature",geometry:i.geometry},{dataProjection:i.dataProjection||"EPSG:4326",featureProjection:"EPSG:"+t.mapview.srid});e.Layer.getSource().clear(),e.Layer.getSource().addFeature(n)},format:new t.mapview.lib.format.GeoJSON,Layer:new t.mapview.lib.layer.Vector({source:new t.mapview.lib.source.Vector})};return e;function i(){n(),t.mapview.interaction.highlight.begin()}function n(){e.callback&&(e.callback(),delete e.callback),t.mapview.popup.node&&t.mapview.popup.node.remove(),t.mapview.node.removeEventListener("contextmenu",r),t.map.removeInteraction(e.interaction),t.map.removeLayer(e.Layer),e.Layer.getSource().clear()}function o(){const n=e.Layer.getSource().getFeatures(),o=JSON.parse(e.format.writeFeature(n[0],{dataProjection:"EPSG:"+e.layer.srid,featureProjection:"EPSG:"+t.mapview.srid})),r=new XMLHttpRequest;r.open("POST",t.host+"/api/location/new?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.layer.key,table:e.layer.table})),r.setRequestHeader("Content-Type","application/json"),r.onload=i=>{200===i.target.status&&(e.layer.reload(),t.locations.select({layer:e.layer,table:e.layer.table,id:i.target.response}))},r.send(JSON.stringify({geometry:o.geometry})),i()}function r(i){if(s(i),0===e.vertices.length)return;i&&i.preventDefault();const r=t.utils.wire()`<ul>`,l=e.Layer.getSource().getFeatures();l.length&&r.appendChild(t.utils.wire()`
      <li  class="off-white-hover" onclick=${o}>Save</li>`),l.length||r.appendChild(t.utils.wire()`
      <li  class="off-white-hover" onclick=${i=>{i.preventDefault(),e.interaction.removeLastPoint(),e.vertices.pop(),t.mapview.popup.node&&t.mapview.popup.node.remove(),t.map.on("pointermove",a)}}>Remove last vertex</li>`),r.appendChild(t.utils.wire()`
      <li  class="off-white-hover" onclick=${n}>Cancel</li>`),t.mapview.popup.create({coords:e.vertices[e.vertices.length-1],content:r})}function a(i){let n=t.mapview.lib.proj.transform(i.coordinate,"EPSG:"+t.mapview.srid,"EPSG:4326"),o=e.vertices.map(e=>t.mapview.lib.proj.transform(e,"EPSG:"+t.mapview.srid,"EPSG:4326"));o.push(n),o.unshift(n),e.trail={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[o]}},e.info&&e.info.remove(),e.info=null,t.utils.turf.kinks(t.utils.turf.flatten(e.trail).features[0]).features.length>0&&(i.stopPropagation(),i.preventDefault(),e.info=t.utils.wire()`<div class="infotip" style="color:#d32f2f;">Invalid geometry.`,t.mapview.node.appendChild(e.info),e.info.style.left=i.originalEvent.clientX+"px",e.info.style.top=i.originalEvent.clientY+"px",e.info.style.opacity=1,setTimeout(()=>{e.info&&e.info.remove(),e.info=null},1500))}function s(i){t.map.un("pointermove",a),e.trail=null}},aa=t=>{return{begin:function(i){t.mapview.interaction.current.finish&&t.mapview.interaction.current.finish(),t.mapview.interaction.current=t.mapview.interaction.edit,t.mapview.interaction.edit.finish=i.finish||e,t.mapview.interaction.edit.callback=i.callback,t.mapview.interaction.edit.location=i.location,t.mapview.node.style.cursor="crosshair",t.mapview.interaction.edit.vertices=[i.location.marker],t.mapview.interaction.edit.feature=[],t.mapview.interaction.edit.Source=new t.mapview.lib.source.Vector({features:[t.mapview.interaction.edit.location.Layer.getSource().getFeatures()[0].clone()]}),t.mapview.interaction.edit.Layer=new t.mapview.lib.layer.Vector({source:t.mapview.interaction.edit.Source,zIndex:20,style:t.mapview.interaction.edit.style}),t.map.addLayer(t.mapview.interaction.edit.Layer),t.mapview.interaction.edit.interaction=new t.mapview.lib.interaction.Modify({source:t.mapview.interaction.edit.Source,condition:e=>"Polygon"!==i.type&&"LineString"===i.type||!(t.mapview.interaction.edit.trail&&t.utils.turf.kinks(t.utils.flatten(t.mapview.interaction.edit.trail).features[0]).features.length>0)}),t.mapview.interaction.edit.interaction.on("modifystart",e=>{t.mapview.popup.node&&t.mapview.popup.node.remove(),t.mapview.interaction.edit.feature.push(t.mapview.interaction.edit.Source.getFeatures()[0].clone())}),t.mapview.interaction.edit.interaction.on("modifyend",e=>{t.mapview.interaction.edit.vertices.push(e.mapBrowserEvent.coordinate),"Polygon"!==i.type&&"LineString"!==i.type||r(e)}),t.map.addInteraction(t.mapview.interaction.edit.interaction),t.mapview.node.addEventListener("contextmenu",o)},finish:e,update:i,style:[new t.mapview.lib.style.Style({stroke:new t.mapview.lib.style.Stroke({color:"#3399CC",width:1})}),new t.mapview.lib.style.Style({image:new t.mapview.lib.style.Circle({radius:6,stroke:new t.mapview.lib.style.Stroke({color:"#3399CC",width:1})}),geometry:function(e){const i=e.getGeometry();return"Point"===i.getType()?new t.mapview.lib.geom.Point(i.getCoordinates()):"LineString"===i.getType()?new t.mapview.lib.geom.MultiPoint(i.getCoordinates()):new t.mapview.lib.geom.MultiPoint(i.getCoordinates()[0])}})]};function e(){delete t.mapview.interaction.edit.finish,t.mapview.interaction.edit.Source&&t.mapview.interaction.edit.Source.clear(),t.mapview.popup.node&&t.mapview.popup.node.remove(),t.mapview.node.removeEventListener("contextmenu",o),t.map.removeLayer(t.mapview.interaction.edit.Layer),t.map.removeInteraction(t.mapview.interaction.edit.interaction),t.mapview.interaction.edit.callback&&t.mapview.interaction.edit.callback(),t.mapview.interaction.highlight.begin(),t.mapview.interaction.edit.info&&t.mapview.interaction.edit.info.remove(),t.mapview.interaction.edit.info=null,t.mapview.interaction.edit.trail=null}function i(){const i=t.mapview.interaction.edit.Source.getFeatures(),n=t.mapview.interaction.edit.location,o=n.layer,r=new t.mapview.lib.format.GeoJSON,a=JSON.parse(r.writeFeature(i[0],{dataProjection:"EPSG:"+o.srid,featureProjection:"EPSG:"+t.mapview.srid})),s=new XMLHttpRequest;s.open("POST",t.host+"/api/location/update?"+t.utils.paramString({locale:t.workspace.locale.key,layer:o.key,table:n.table,id:n.id})),s.setRequestHeader("Content-Type","application/json"),s.responseType="json",s.onload=e=>{if(200!==e.target.status)return;n.Layer.getSource().getFeatures()[0].setGeometry(i[0].getGeometry()),t.map.removeLayer(n.Marker),n.geometry=a.geometry,n.marker=t.mapview.lib.proj.transform(t.utils.turf.pointOnFeature(a.geometry).geometry.coordinates,"EPSG:"+n.layer.srid,"EPSG:"+t.mapview.srid),n.Marker=t.mapview.geoJSON({geometry:{type:"Point",coordinates:n.marker},zIndex:2e3,style:new t.mapview.lib.style.Style({image:t.mapview.icon({type:"markerLetter",letter:String.fromCharCode(65+t.locations.list.indexOf(n.record)),color:n.style.strokeColor,scale:.05,anchor:[.5,1]})})}),o.reload()},s.send(JSON.stringify({[o.geom]:a.geometry})),e()}function n(e){t.mapview.popup.node&&t.mapview.popup.node.remove(),t.mapview.interaction.edit.Source.clear(),t.mapview.interaction.edit.Source.addFeature(t.mapview.interaction.edit.feature.pop()),t.mapview.interaction.edit.vertices.pop(),r(e)}function o(o){o.preventDefault();const r=t.utils.wire()`<ul>`;!t.mapview.interaction.edit.info&&t.mapview.interaction.edit.feature.length&&r.appendChild(t.utils.wire()`<li class="off-white-hover" onclick=${i}>Update</li>`),t.mapview.interaction.edit.feature.length&&r.appendChild(t.utils.wire()`<li class="off-white-hover" onclick=${n}>Undo</li>`),r.appendChild(t.utils.wire()`<li class="off-white-hover" onclick=${e}>Cancel</li>`),t.mapview.popup.create({coords:t.mapview.interaction.edit.vertices[t.mapview.interaction.edit.vertices.length-1],content:r})}function r(e){const i=new t.mapview.lib.format.GeoJSON;t.mapview.interaction.edit.trail=null,t.mapview.interaction.edit.trail=i.writeFeatureObject(t.mapview.interaction.edit.Source.getFeatures()[0].clone(),{dataProjection:"EPSG:4326",featureProjection:"EPSG:"+t.mapview.srid}),"Point"!==t.mapview.interaction.edit.trail.geometry.type&&(t.mapview.interaction.edit.info&&t.mapview.interaction.edit.info.remove(),t.mapview.interaction.edit.info=null,t.utils.turf.kinks(t.mapview.interaction.edit.trail).features.length>0&&(t.mapview.interaction.edit.info=t.utils.wire()`<div class="infotip" style="color:#d32f2f;">Invalid geometry. Right click to continue.`,t.mapview.node.appendChild(t.mapview.interaction.edit.info),t.mapview.interaction.edit.info.style.left=e.mapBrowserEvent.originalEvent.clientX+"px",t.mapview.interaction.edit.info.style.top=e.mapBrowserEvent.originalEvent.clientY+"px",t.mapview.interaction.edit.info.style.opacity=1))}},sa=t=>{const e={begin:function(n={}){t.mapview.interaction.current&&t.mapview.interaction.current.finish&&t.mapview.interaction.current.finish(),t.mapview.interaction.current=e,e.callback=n.callback,e.Layer.getSource().clear(),t.map.addLayer(e.Layer),t.mapview.node.style.cursor="zoom-in",e.interaction=new t.mapview.lib.interaction.Draw({source:e.Layer.getSource(),type:"Circle",geometryFunction:t.mapview.lib.draw.createBox(),style:new t.mapview.lib.style.Style({stroke:new t.mapview.lib.style.Stroke({color:"#ddd",width:1}),fill:new t.mapview.lib.style.Stroke({color:t.utils.Chroma("#fff").alpha(.3).rgba()})})}),e.interaction.on("drawend",e=>{t.mapview.flyToBounds(e.feature.getGeometry().getExtent()),i()}),t.map.addInteraction(e.interaction)},finish:n,cancel:i,Layer:new t.mapview.lib.layer.Vector({source:new t.mapview.lib.source.Vector})};return e;function i(){n(),t.mapview.interaction.highlight.begin()}function n(){e.callback&&(e.callback(),delete e.callback),t.mapview.node.style.cursor="auto",t.map.removeInteraction(e.interaction),t.map.removeLayer(e.Layer),e.Layer.getSource().clear()}},la=t=>({current:{},highlight:oa(t),draw:ra(t),edit:aa(t),zoom:sa(t)}),ca=t=>function(e){const i=t.map.getView().calculateExtent();if(!e)return{south:i[1],west:i[0],north:i[3],east:i[2]};const n=t.mapview.lib.proj.transformExtent(i,"EPSG:"+t.mapview.srid,"EPSG:"+e);return{south:n[1],west:n[0],north:n[3],east:n[2]}},ua=t=>function(e){return(e.svg||e.type&&"circle"!==e.type)&&(e.url=t.utils.svg_symbols(e)),e.type&&"circle"===e.type?new t.mapview.lib.style.Circle({radius:parseInt(e.radius)||10,fill:e.fillColor&&new t.mapview.lib.style.Fill({color:t.utils.Chroma(e.fillColor).alpha(0===e.fillOpacity?0:parseFloat(e.fillOpacity)||1).rgba()}),stroke:e.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(e.strokeColor).alpha(0===e.strokeColor?0:parseFloat(e.strokeOpacity)||1).rgba(),width:parseInt(e.strokeWidth)||1})}):new t.mapview.lib.style.Icon({src:e.url,scale:e.scale||1,anchor:e.anchor||[.5,.5]})},ha=t=>({create:function(e){this.node&&this.node.remove();this.node=t.utils.wire()`<div class="infotip">`,this.node.innerHTML=e,t.mapview.node.appendChild(this.node),this.position()},position:function(){this.node.style.opacity=1,this.node.style.left=t.mapview.pointerLocation.x-this.node.offsetWidth/2+"px",this.node.style.top=t.mapview.pointerLocation.y-15-this.node.offsetHeight+"px"}}),da=t=>function(e){t.locations.select({locale:t.workspace.locale.key,layer:this,table:this.tableCurrent(),id:e.get("id")})},pa=t=>function(){const e=this,i=new XMLHttpRequest;i.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"infotip",locale:t.workspace.locale.key,layer:e.key,table:e.tableCurrent(),id:e.highlight,coords:"cluster"===e.format&&t.mapview.lib.proj.transform(t.mapview.interaction.highlight.feature.getGeometry().getCoordinates(),"EPSG:"+t.mapview.srid,"EPSG:"+e.srid),field:e.hover.field})),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=i=>{200===i.target.status&&t.mapview.infotip.create(i.target.response[e.hover.field])},i.send()},fa=t=>e=>{e.highlight=!0,e.select=da(t),e.infotip=pa(t),e.reload=()=>{i.clear(),i.refresh({force:!0})};const i=new t.mapview.lib.source.VectorTile({format:new t.mapview.lib.format.MVT({}),transition:0,tileUrlFunction:n=>{const o=e.tableCurrent();if(!o)return i.clear();return`${t.host}/api/layer/mvt/${n[0]}/${n[1]}/${n[2]}?`+t.utils.paramString({locale:t.workspace.locale.key,srid:t.mapview.srid,layer:e.key,table:o,filter:e.filter&&JSON.stringify(e.filter.current)})}});e.L=new t.mapview.lib.layer.VectorTile({source:i,zIndex:e.style.zIndex||1,style:i=>{const n=Object.assign({},e.style.default),o=e.style.theme;if(i.get("strokecolor")&&(n.strokeColor=i.get("strokecolor")),o&&"categorized"===o.type){const t=i.get(o.field);if(void 0===t)return Object.assign(n,{});Object.assign(n,o.cat[t]&&o.cat[t].style||o.cat[t])}if(o&&"graduated"===o.type&&o.cat_arr){const t=parseFloat(i.get(o.field));if(t||0===t){for(let e=0;e<o.cat_arr.length&&!(t<o.cat_arr[e].value);e++)var r=o.cat_arr[e].style||o.cat_arr[e];Object.assign(n,r)}}return Object.assign(n,e.highlight===i.get("id")?e.style.highlight:{},e.highlight===i.get("id")?{zIndex:30}:{zIndex:10}),new t.mapview.lib.style.Style({zIndex:n.zIndex,stroke:n.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(n.strokeColor).alpha(void 0===n.strokeOpacity?1:parseFloat(n.strokeOpacity)||0).rgba(),width:parseFloat(n.strokeWidth)||1}),fill:n.fillColor&&new t.mapview.lib.style.Fill({color:t.utils.Chroma(n.fillColor).alpha(void 0===n.fillOpacity?1:parseFloat(n.fillOpacity)||0).rgba()}),image:n.marker&&t.mapview.icon(n.marker)})}}),e.L.set("layer",e,!0),e.label=t.mapview.layer.mvtLabel(e)},ga=t=>e=>{if(!e.style.label)return;const i=new t.mapview.lib.source.Vector({loader:function(n,o,r){e.xhr&&e.xhr.abort(),this.resolution=o,i.clear();const a=e.tableCurrent();a&&(e.xhr=new XMLHttpRequest,e.xhr.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"labels",locale:t.workspace.locale.key,layer:e.key,table:a,label:e.style.label&&e.style.label.field,filter:e.filter&&JSON.stringify(e.filter.current),west:n[0],south:n[1],east:n[2],north:n[3]})),e.xhr.setRequestHeader("Content-Type","application/json"),e.xhr.responseType="json",e.xhr.onload=e=>{if(200!==e.target.status)return;const n=e.target.response.map(e=>new t.mapview.lib.Feature({geometry:new t.mapview.lib.geom.Point([e.x,e.y]),properties:{label:e.label}}));i.addFeatures(n)},e.xhr.send())},strategy:function(i,n){return this.resolution&&this.resolution!=n&&this.loadedExtentsRtree_.clear(),[t.mapview.lib.proj.transformExtent(i,"EPSG:"+t.mapview.srid,"EPSG:"+e.srid)]}});return new t.mapview.lib.layer.Vector({source:i,declutter:!!e.style.label&&!!e.style.label.declutter,zIndex:e.style.zIndex||1,style:i=>{const n=i.getProperties().properties;return new t.mapview.lib.style.Style({text:new t.mapview.lib.style.Text({font:e.style.label.font||"12px sans-serif",text:n.label,stroke:e.style.label.strokeColor&&new t.mapview.lib.style.Stroke({color:e.style.label.strokeColor,width:e.style.label.strokeWidth||1}),fill:new t.mapview.lib.style.Fill({color:e.style.label.fillColor||"#000"})})})}})},ma=t=>e=>{e.highlight=!0,e.select=da(t),e.infotip=pa(t),e.reload=()=>{i.refresh()};const i=new t.mapview.lib.source.Vector({loader:function(){e.xhr&&e.xhr.abort(),i.clear();const n=e.tableCurrent();n&&(e.xhr=new XMLHttpRequest,e.xhr.open("GET",t.host+"/api/layer/geojson?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.key,table:n,cat:e.style.theme&&e.style.theme.field,filter:e.filter&&JSON.stringify(e.filter.current)})),e.xhr.setRequestHeader("Content-Type","application/json"),e.xhr.responseType="json",e.xhr.onload=n=>{if(200!==n.target.status)return;const o=new t.mapview.lib.format.GeoJSON,r=n.target.response.map(i=>o.readFeature({type:"Feature",geometry:i.geometry,properties:{id:i.properties.id}},{dataProjection:"EPSG:"+e.srid,featureProjection:"EPSG:"+t.mapview.srid}));i.addFeatures(r)},e.xhr.send())},strategy:function(i,n){return this.resolution&&this.resolution!=n&&this.loadedExtentsRtree_.clear(),[t.mapview.lib.proj.transformExtent(i,"EPSG:"+t.mapview.srid,"EPSG:"+e.srid)]}});e.L=new t.mapview.lib.layer.Vector({source:i,zIndex:e.style.zIndex||1,style:i=>{const n=Object.assign({},e.style.default),o=e.style.theme;if(o&&"categorized"===o.type&&Object.assign(n,o.cat[i.get(o.field)].style||{}),o&&"graduated"===o.type&&o.cat_arr){const t=parseFloat(i.get(o.field));if(t){for(let e=0;e<o.cat_arr.length&&!(t<o.cat_arr[e].value);e++)var r=o.cat_arr[e].style;Object.assign(n,r)}}return Object.assign(n,e.highlight===i.get("id")?e.style.highlight:{},e.highlight===i.get("id")?{zIndex:30}:{zIndex:10}),new t.mapview.lib.style.Style({zIndex:n.zIndex,stroke:n.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(n.strokeColor).alpha(void 0===n.strokeOpacity?1:parseFloat(n.strokeOpacity)||0).rgba(),width:parseInt(n.strokeWidth)||1}),fill:n.fillColor&&new t.mapview.lib.style.Fill({color:t.utils.Chroma(n.fillColor).alpha(void 0===n.fillOpacity?1:parseFloat(n.fillOpacity)||0).rgba()}),image:n.marker&&t.mapview.icon(n.marker)})}}),e.L.set("layer",e,!0)},va=t=>function(e){const i=this;let n=e.get("properties").count,o=e.getGeometry().getCoordinates(),r=t.mapview.lib.proj.transform(o,"EPSG:"+t.mapview.srid,"EPSG:"+i.srid);const a=new XMLHttpRequest;a.open("GET",t.host+"/api/query/get_nnearest?"+t.utils.paramString({locale:t.workspace.locale.key,layer:i.key,table:i.tableCurrent(),filter:i.filter&&JSON.stringify(i.filter.current),n:n>99?99:n,coords:r})),a.setRequestHeader("Content-Type","application/json"),a.responseType="json",a.onload=e=>{if(e.target.status>=300)return;let n=e.target.response;if(!(n&&n.length>1))return t.locations.select({locale:t.workspace.locale.key,layer:i,table:i.tableCurrent(),id:n.id});{const e=t.utils.wire()`
      <ul>
      ${n.map(e=>t.utils.wire()`
        <li class="secondary-colour-hover" onclick=${()=>t.locations.select({locale:t.workspace.locale.key,layer:i,table:i.tableCurrent(),id:e.id,marker:e.coords})}>${e.label||'"'+i.cluster_label+'"'}`)}`;t.mapview.popup.create({coords:t.mapview.lib.proj.transform(r,"EPSG:"+i.srid,"EPSG:"+t.mapview.srid),content:e})}},a.send()},ya=t=>e=>{e.highlight=!0,e.select=va(t),e.infotip=pa(t),e.reload=()=>{i.clear(),i.refresh({force:!0})};const i=new t.mapview.lib.source.Vector({loader:function(n,o,r){e.xhr&&e.xhr.abort(),this.resolution=o,i.clear();const a=e.tableCurrent();a&&(e.xhr=new XMLHttpRequest,e.xhr.open("GET",t.host+"/api/layer/cluster?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.key,table:a,kmeans:e.cluster_kmeans,dbscan:e.cluster_dbscan,pixelRatio:window.devicePixelRatio,aggregate:e.style.theme&&e.style.theme.aggregate,theme:e.style.theme&&encodeURIComponent(Object.keys(e.style.themes).find(t=>e.style.themes[t]===e.style.theme)),label:e.style.label&&e.style.label.field,filter:e.filter&&JSON.stringify(e.filter.current),viewport:[n[0],n[1],n[2],n[3]],z:t.mapview.getZoom()})),e.xhr.setRequestHeader("Content-Type","application/json"),e.xhr.responseType="json",e.xhr.onload=n=>{if(200!==n.target.status)return;const o=n.target.response;e.max_size=o.reduce((t,e)=>Math.max(t,e.properties.size),0);let r=1;const a=o.map(i=>new t.mapview.lib.Feature({id:r++,geometry:new t.mapview.lib.geom.Point(4326==e.srid&&t.mapview.lib.proj.fromLonLat([i.geometry.x,i.geometry.y])||[i.geometry.x,i.geometry.y]),properties:i.properties}));i.addFeatures(a)},e.xhr.send())},strategy:function(i,n){return this.resolution&&this.resolution!=n&&this.loadedExtentsRtree_.clear(),[t.mapview.lib.proj.transformExtent(i,"EPSG:"+t.mapview.srid,"EPSG:"+e.srid)]}});e.L=new t.mapview.lib.layer.Vector({layer:e,source:i,zIndex:e.style.zIndex||1,style:i=>{const n=i.getProperties().properties,o=n.size>1?Object.assign({},e.style.markerMulti):Object.assign({},e.style.marker),r=Object.assign({},e.style.theme);if(r&&"categorized"===r.type&&Object.assign(o,r.cat[n.cat]&&r.cat[n.cat].style||r.cat[n.cat]),r&&"graduated"===r.type){const t=parseFloat(n.cat);if(t||0===t){for(let e=0;e<r.cat_arr.length&&!(t<r.cat_arr[e].value);e++)var a=r.cat_arr[e].style||r.cat_arr[e];Object.assign(o,a)}}if(r&&"competition"===r.type){let t=n.size,e={layers:{}};Object.entries(n.cat).sort((t,e)=>t[1]-e[1]).forEach(i=>{r.cat[i[0]]&&(e.layers[t/n.size]=r.cat[i[0]].style.fillColor),t-=i[1]}),Object.assign({},o,e)}const s=e.cluster_logscale?1===n.count?o.markerMin||e.style.markerMin:(o.markerMin||e.style.markerMin)+(o.markerMax||e.style.markerMax)/Math.log(e.max_size)*Math.log(n.size):1===n.count?o.markerMin||e.style.markerMin:(o.markerMax||e.style.markerMin)+(o.markerMax||e.style.markerMax)/e.max_size*n.size;return Object.assign(o,e.highlight===i.get("id")&&e.style.highlight),new t.mapview.lib.style.Style({zIndex:parseInt(e.max_size-n.size),image:t.mapview.icon(Object.assign({},o,{scale:s/40*(o.scale||.05)}))})}}),e.label=t.mapview.layer.clusterLabel(e)},ba=t=>e=>{if(e.style.label)return new t.mapview.lib.layer.Vector({source:e.L.getSource(),declutter:!!e.style.label&&!!e.style.label.declutter,zIndex:e.style.zIndex||1,style:i=>{const n=i.getProperties().properties;return new t.mapview.lib.style.Style({text:new t.mapview.lib.style.Text({font:e.style.label.font||"12px sans-serif",text:n.label||""+(n.count>1?n.count:""),stroke:e.style.label.strokeColor&&new t.mapview.lib.style.Stroke({color:e.style.label.strokeColor,width:e.style.label.strokeWidth||1}),fill:new t.mapview.lib.style.Fill({color:e.style.label.fillColor||"#000"})})})}})},wa=t=>e=>{const i=e.URI.indexOf("provider")>0?t.host+"/api/proxy?"+t.utils.paramString({uri:e.URI}):e.URI,n=new t.mapview.lib.source.OSM({url:decodeURIComponent(i),opaque:!1,transition:0});e.L=new t.mapview.lib.layer.Tile({source:n,layer:e,zIndex:-1})},_a=t=>e=>{e.grid_size=Object.values(e.grid_fields)[0],e.grid_color=Object.values(e.grid_fields)[1],e.grid_ratio=!1,e.reload=()=>i.refresh();const i=new t.mapview.lib.source.Vector({loader:function(n,o,r){e.xhr&&e.xhr.abort(),this.resolution=o,i.clear();const a=e.tableCurrent();a&&(e.xhr=new XMLHttpRequest,e.xhr.open("GET",t.host+"/api/layer/grid?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.key,table:a,size:e.grid_size,color:e.grid_color,viewport:[n[0],n[1],n[2],n[3]]})),e.xhr.setRequestHeader("Content-Type","application/json"),e.xhr.responseType="json",e.xhr.onload=n=>{if(200!==n.target.status)return;const o=n.target.response;e.sizeAvg=0,e.colorAvg=0;const r=o.map(i=>{if(parseFloat(i[2])>0)return i[2]=isNaN(i[2])?i[2]:parseFloat(i[2]),i[3]=isNaN(i[3])?i[3]:parseFloat(i[3]),e.grid_ratio&&i[3]>0&&(i[3]/=i[2]),e.sizeAvg+=parseFloat(i[2]),e.colorAvg+=isNaN(i[3])?0:parseFloat(i[3]),new t.mapview.lib.Feature({geometry:new t.mapview.lib.geom.Point(t.mapview.lib.proj.fromLonLat([i[0],i[1]])),properties:{size:parseFloat(i[2]),color:isNaN(i[3])?i[3]:parseFloat(i[3])}})});function a(t,e,i){const n=t.filter(t=>isFinite(t[e]));return Math[i].apply(null,n.map(t=>t[e]))}e.sizeMin=a(o,2,"min"),e.sizeAvg/=r.length,e.sizeMax=a(o,2,"max"),e.colorMin=a(o,3,"min"),e.colorAvg/=r.length,e.colorMax=a(o,3,"max"),e.colorBins=[];let s=e.style.range.length;for(var l=1;l<s;l++)l<s/2&&e.colorBins.push(e.colorMin+(e.colorAvg-e.colorMin)/(s/2)*l),l===s/2&&e.colorBins.push(e.colorAvg),l>s/2&&e.colorBins.push(e.colorAvg+(e.colorMax-e.colorAvg)/(s/2)*(l-s/2));i.addFeatures(r),e.style.legend.size_min&&(e.style.legend.size_min.textContent=e.sizeMin.toLocaleString("en-GB",{maximumFractionDigits:0})),e.style.legend.size_avg&&(e.style.legend.size_avg.textContent=e.sizeAvg.toLocaleString("en-GB",{maximumFractionDigits:0})),e.style.legend.size_max&&(e.style.legend.size_max.textContent=e.sizeMax.toLocaleString("en-GB",{maximumFractionDigits:0})),e.grid_ratio?(e.style.legend.color_min&&(e.style.legend.color_min.textContent=e.colorMin.toLocaleString("en-GB",{maximumFractionDigits:0,style:"percent"})),e.style.legend.color_avg&&(e.style.legend.color_avg.textContent=e.colorAvg.toLocaleString("en-GB",{maximumFractionDigits:0,style:"percent"})),e.style.legend.color_max&&(e.style.legend.color_max.textContent=e.colorMax.toLocaleString("en-GB",{maximumFractionDigits:0,style:"percent"}))):(e.style.legend.color_min&&(e.style.legend.color_min.textContent=e.colorMin.toLocaleString("en-GB",{maximumFractionDigits:0})),e.style.legend.color_avg&&(e.style.legend.color_avg.textContent=e.colorAvg.toLocaleString("en-GB",{maximumFractionDigits:0})),e.style.legend.color_max&&(e.style.legend.color_max.textContent=e.colorMax.toLocaleString("en-GB",{maximumFractionDigits:0})))},e.xhr.send())},strategy:function(i,n){return this.resolution&&this.resolution!=n&&this.loadedExtentsRtree_.clear(),[t.mapview.lib.proj.transformExtent(i,"EPSG:"+t.mapview.srid,"EPSG:"+e.srid)]}});e.L=new t.mapview.lib.layer.Vector({source:i,zIndex:e.style.zIndex||1,style:i=>{const n=i.getProperties().properties,o=n.size<=e.sizeAvg?7+7/e.sizeAvg*n.size:14+7/(e.sizeMax-e.sizeAvg)*(n.size-e.sizeAvg);if(n.hxcolor="#C0C0C0",parseFloat(n.color)){n.hxcolor=e.style.range[0];for(let t=0;t<e.colorBins.length&&!(n.color<e.colorBins[t]);t++)n.hxcolor=e.style.range[t+1]}return new t.mapview.lib.style.Style({image:t.mapview.icon({type:"dot",fillColor:n.hxcolor,scale:o/40*.05})})}}),e.L.set("layer",e,!0)},xa=t=>({mvt:fa(t),mvtLabel:ga(t),geojson:ma(t),cluster:ya(t),clusterLabel:ba(t),tiles:wa(t),grid:_a(t)}),Ca=t=>(e,i,n)=>{n&&e.style.legend.appendChild(t.utils.wire()`
  <div class="title bold off-black secondary-colour-bb">${n}`);const o={};let r;o.node=t.utils.wire()`<div class="block">`,e.style.legend.appendChild(o.node),o.wrapper=t.utils.wire()`<div style="display: inline-block; width: 65%;">`,o.node.appendChild(o.wrapper),o.stroke_color=t.utils.wire()`<div>Stroke Colour `,o.wrapper.appendChild(o.stroke_color),o.strokeColor=t.utils.wire()`
  <span
    class="cursor primary-colour"
    onclick=${t=>{o.colorSelect="strokeColor",o.colour_swatch.style.display="table"}}>${i.strokeColor||"#ffffff"}`,o.stroke_color.appendChild(o.strokeColor),o.fill_colour=t.utils.wire()`<div>Fill Colour `,o.wrapper.appendChild(o.fill_colour),o.fillColor=t.utils.wire()`
  <span
    class="cursor primary-colour"
    onclick=${t=>{o.colorSelect="fillColor",o.colour_swatch.style.display="table"}}>${i.fillColor||"#ffffff"}`,o.fill_colour.appendChild(o.fillColor),o.sample_poly=t.utils.wire()`
  <div
    class="sample-poly"
    style="display: inline-block; ${"border:"+(i.strokeWidth||1)+"px solid "+(i.strokeColor||"#ffffff")}">`,o.sample_poly.style.backgroundColor=i.fillColor,o.node.appendChild(o.sample_poly),o.colour_swatch=t.utils.wire()`
  <tr
    style="width: 100%; margin-bottom: 10px; display: none">`,o.node.appendChild(o.colour_swatch),t.defaults.colours.forEach(n=>{o.colour_swatch.appendChild(t.utils.wire()`
    <td
      title=${n.name}
      style="${"height: 20px; background-color:"+n.hex}"
      onclick=${t=>{o[o.colorSelect].textContent=n.hex,i[o.colorSelect]=n.hex,o.sample_poly.style.backgroundColor=i.fillColor,o.sample_poly.style.border=(i.strokeWidth||1)+"px solid "+i.strokeColor,o.colour_swatch.style.display="none",e.reload()}}>`)}),o.node.appendChild(t.utils.wire()`
  <div style="display: inline-block; width: 35%;">Stroke Weight`),o.node.appendChild(t.utils.wire()`
  <div
    class="input-range"
    style="display: inline-block; width: 65%; padding-top:10px; padding-bottom:6px;">
    <input
      type="range"
      class="secondary-colour-bg"
      min=1
      value=${i.strokeWidth||1}
      max=5
      oninput=${t=>{i.strokeWidth=parseInt(t.target.value),o.sample_poly.style.border=i.strokeWidth+"px solid "+i.strokeColor,clearTimeout(r),r=setTimeout(()=>{r=null,e.reload()},500)}}>`),o.node.appendChild(t.utils.wire()`
  <div style="display: inline-block; width: 35%;">Fill Opacity `),o.node.appendChild(t.utils.wire()`
  <div
    class="input-range"
    style="display: inline-block; width: 65%; padding-top:10px; padding-bottom:6px;">
    <input
      type="range"
      class="secondary-colour-bg"
      min=0.1
      value=${void 0===i.fillOpacity?1:parseFloat(i.fillOpacity)||0}
      max=1
      step=0.1
      oninput=${t=>{i.fillOpacity=t.target.value,clearTimeout(r),r=setTimeout(()=>{r=null,e.reload()},500)}}>`)},Ea=t=>(e,i,n)=>{n&&e.style.legend.appendChild(t.utils.wire()`
  <div class="title bold off-black secondary-colour-bb">${n}`);const o={};o.node=t.utils.wire()`<div class="block">`,e.style.legend.appendChild(o.node),o.fill_colour=t.utils.wire()`<div style="display: inline-block; width: 85%;">Fill Colour `,o.node.appendChild(o.fill_colour),o.fillColor=t.utils.wire()`
  <span
    class="cursor primary-colour"
    onclick=${t=>{o.colorSelect="fillColor",o.colour_swatch.style.display="table"}}>${i.fillColor}`,o.fill_colour.appendChild(o.fillColor),o.sample_wrapper=t.utils.wire()`<div style="display: inline-block; padding-bottom: 5px;">`,o.node.appendChild(o.sample_wrapper),o.sample=t.utils.wire()`<div class="sample-circle">`,o.sample.style.backgroundColor=i.fillColor&&t.utils.Chroma(i.fillColor).alpha(1).hex(),o.sample_wrapper.appendChild(o.sample),o.node.appendChild(o.sample_wrapper),o.node.appendChild(t.utils.wire()`<br>`),o.colour_swatch=t.utils.wire()`
  <tr
    style="width: 100%; margin-bottom: 10px; display: none;">`,o.node.appendChild(o.colour_swatch),t.defaults.colours.forEach(n=>{o.colour_swatch.appendChild(t.utils.wire()`
    <td
      title="${n.name}"
      style="${"height: 20px; background-color:"+n.hex}"
      onclick=${r=>{o[o.colorSelect].textContent=n.hex,i[o.colorSelect]=n.hex,o.sample.style.backgroundColor=t.utils.Chroma(i.fillColor).alpha(1).hex(),o.colour_swatch.style.display="none",e.reload()}}>`)})},ka=t=>e=>{const i=t.utils.wire()`<div style="margin-top: 5px; display: grid; grid-template-columns: 30px auto;">`;if(e.style.legend=i,Object.entries(e.style.theme.cat).forEach(n=>{let o=t.utils.wire()`<div style="height: 24px; width: 24px;">`,r=t.utils.wire()`<svg>`;o.appendChild(r);let a=Object.assign({},e.style.default,n[1].style||n[1]);if(void 0===a.fillOpacity){let e=t.utils.wire(null,"svg")`
      <line
        x1=4
        x2=18
        y1=10
        y2=10
        stroke=${a.strokeColor}
        stroke-width=${a.strokeWidth||1}>`;r.appendChild(e)}else{let e=t.utils.wire(null,"svg")`
      <rect
        x=4
        y=2
        width=14
        height=14
        fill=${a.fillColor||"#FFF"}
        fill-opacity=${a.fillOpacity}
        stroke=${a.strokeColor}
        stroke-width=${a.strokeWidth||1}>`;r.appendChild(e)}i.appendChild(o),i.appendChild(t.utils.wire()`
    <div
      style="font-size:12px; alignment-baseline:central; cursor:pointer;"
      class="switch"
      onclick=${t=>{t.stopPropagation(),"line-through"===t.target.style.textDecoration?(t.target.style.textDecoration="none",t.target.style.opacity=1,t.target.style.fillOpacity=1,e.filter.current[e.style.theme.field].ni.splice(e.filter.current[e.style.theme.field].ni.indexOf(n[0]),1)):(t.target.style.textDecoration="line-through",t.target.style.opacity=.8,t.target.style.fillOpacity=.8,e.filter.current[e.style.theme.field]||(e.filter.current[e.style.theme.field]={ni:[]}),e.filter.current[e.style.theme.field].ni.push(n[0])),e.reload()}}>${n[1].label||n[0]}`)}),e.style.theme.other){let n=t.utils.wire()`<div style="height: 24px; width: 24px;">`,o=t.utils.wire()`<svg>`;if(n.appendChild(o),void 0===e.style.default.fillOpacity){let i=t.utils.wire(null,"svg")`
      <line
        x1=4
        x2=18
        y1=10
        y2=10
        stroke=${e.style.default.strokeColor}
        stroke-width=${e.style.default.strokeWidth||1}>`;o.appendChild(i)}else{let i=t.utils.wire(null,"svg")`
      <rect
        x=4
        y=2
        width=14
        height=14
        fill=${e.style.default.fillColor||"#FFF"}
        fill-opacity=${e.style.default.fillOpacity}
        stroke=${e.style.default.strokeColor}
        stroke-width=${e.style.default.strokeWidth||1}>`;o.appendChild(i)}i.appendChild(n),i.appendChild(t.utils.wire()`
    <div
      style="font-size:12px; alignment-baseline:central; cursor:pointer;"
      class="switch"
      onclick=${t=>{t.stopPropagation(),"line-through"===t.target.style.textDecoration?(t.target.style.textDecoration="none",t.target.style.opacity=1,t.target.style.fillOpacity=1,e.filter.current[e.style.theme.field].in=[]):(t.target.style.textDecoration="line-through",t.target.style.opacity=.8,t.target.style.fillOpacity=.8,e.filter.current[e.style.theme.field]||(e.filter.current[e.style.theme.field]={ni:[]}),e.filter.current[e.style.theme.field].in=Object.keys(e.style.theme.cat)),e.reload()}}>other`)}return i},Ta=t=>e=>{if(!e.style.theme.cat_arr)return;const i=t.utils.wire()`<div style="margin-top: 5px; display: grid; grid-template-columns: 30px auto;">`;return e.style.legend=i,e.style.theme.cat_arr.forEach(n=>{let o=t.utils.wire()`<div style="height: 24px; width: 24px;">`,r=t.utils.wire()`<svg>`;o.appendChild(r);let a=Object.assign({},e.style.default,n.style||n);r.appendChild(t.utils.wire(null,"svg")`
      <rect
        x=4
        y=2
        width=14
        height=14
        fill=${a.fillColor}
        fill-opacity=${a.fillOpacity}
        stroke=${a.strokeColor}/>`),i.appendChild(o);let s=t.utils.wire()`<div style="font-size:12px; alignment-baseline:central; cursor:default;">${n.label||n.value}`;i.appendChild(s)}),i},Sa=t=>e=>{const i=t.utils.wire()`<div style="margin-top: 5px; display: grid; grid-template-columns: 30px auto;">`;if(e.style.legend=i,Object.entries(e.style.theme.cat).forEach(n=>{let o=t.utils.wire()`<div style="height: 24px; width: 24px;">`,r=t.utils.wire()`<img height=20 width=20>`;r.setAttribute("src",t.utils.svg_symbols(Object.assign({},e.style.marker,n[1].style||n[1]))),o.appendChild(r),i.appendChild(o),i.appendChild(t.utils.wire()`
    <div
      style="font-size:12px; alignment-baseline:central; cursor:pointer;"
      class="switch"
      onclick=${t=>{t.stopPropagation(),"line-through"===t.target.style.textDecoration?(t.target.style.textDecoration="none",t.target.style.opacity=1,t.target.style.fillOpacity=1,e.filter.current[e.style.theme.field].ni.splice(e.filter.current[e.style.theme.field].ni.indexOf(n[0]),1)):(t.target.style.textDecoration="line-through",t.target.style.opacity=.8,t.target.style.fillOpacity=.8,e.filter.current[e.style.theme.field]||(e.filter.current[e.style.theme.field]={ni:[]}),e.filter.current[e.style.theme.field].ni.push(n[0])),e.reload()}}>${n[1].label||n[0]}`)}),e.style.theme.other){let n=t.utils.wire()`<div style="height: 24px; width: 24px;">`,o=t.utils.wire()`<svg>`,r=t.utils.wire(null,"svg")`
    <image x=0 y=0 width=20 height=20>`;r.setAttribute("href",t.utils.svg_symbols(e.style.marker)),o.appendChild(r),n.appendChild(o),i.appendChild(n),i.appendChild(t.utils.wire()`
    <div
      style="font-size:12px; alignment-baseline:central; cursor:pointer;"
      class="switch"
      onclick=${t=>{t.stopPropagation(),"line-through"===t.target.style.textDecoration?(t.target.style.textDecoration="none",t.target.style.opacity=1,t.target.style.fillOpacity=1,e.filter.current[e.style.theme.field].in=[]):(t.target.style.textDecoration="line-through",t.target.style.opacity=.8,t.target.style.fillOpacity=.8,e.filter.current[e.style.theme.field]||(e.filter.current[e.style.theme.field]={ni:[]}),e.filter.current[e.style.theme.field].in=Object.keys(e.style.theme.cat)),e.reload()}}>other`)}let n=t.utils.wire()`<div style="height: 40px; width: 40px;">`,o=t.utils.wire()`<img height=40 width=40>`;o.setAttribute("src",t.utils.svg_symbols(e.style.markerMulti)),n.appendChild(o),i.appendChild(n);let r=t.utils.wire()`<div style="font-size:12px; alignment-baseline:central; cursor:default; margin-left: 20px; margin-top: 10px;">Multiple Locations`;return i.appendChild(r),i},Ma=t=>e=>{if(!e.style.theme.cat_arr)return;const i=t.utils.wire()`<div style="margin-top: 5px; display: grid; grid-template-columns: 30px auto;">`;return e.style.legend=i,e.style.theme.cat_arr.forEach(n=>{let o=t.utils.wire()`<div style="height: 24px; width: 24px;">`,r=t.utils.wire()`<img width=20 height=20>`;r.setAttribute("src",t.utils.svg_symbols(Object.assign({},e.style.marker,n.style))),o.appendChild(r),i.appendChild(o);let a=t.utils.wire()`<div style="font-size:12px; alignment-baseline:central; cursor:default;">${n.label||n.style}`;i.appendChild(a)}),i},Ra=t=>e=>{e.style.legend.appendChild(t.utils.wire()`
  <button class="btn-drop">
  <div
    class="head"
    onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
    <span>${Object.keys(e.grid_fields)[0]}</span>
    <div class="icon"></div>
  </div>
  <ul>
    ${Object.entries(e.grid_fields).map(i=>t.utils.wire()`
        <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=i[0],e.grid_size=i[1],e.reload()}}>${i[0]}`)}`);const i=e.style.legend.appendChild(t.utils.wire()`
  <svg xmlns='http://www.w3.org/2000/svg'>`);e.style.legend.appendChild(t.utils.wire()`
  <button class="btn-drop">
  <div
    class="head"
    onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
    <span>${Object.keys(e.grid_fields)[1]}</span>
    <div class="icon"></div>
  </div>
  <ul>
    ${Object.entries(e.grid_fields).map(i=>t.utils.wire()`
      <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=i[0],e.grid_color=i[1],e.reload()}}>${i[0]}`)}`);let n=15,o=e.style.range.length,r=100/o;for(let e=0;e<o;e++){let a=10*(e+2)/o,s=e*r,l=t.utils.wire(null,"svg")`
    <circle fill='#777'>`;l.setAttribute("cx",s+r/2+1+"%"),l.setAttribute("cy",n+1),l.setAttribute("r",a),i.appendChild(l);let c=t.utils.wire(null,"svg")`
    <circle fill='#999'>`;c.setAttribute("cx",s+r/2+"%"),c.setAttribute("cy",n),c.setAttribute("r",a),i.appendChild(c)}n+=20;for(let a=0;a<o;a++){let s=a*r,l=t.utils.wire(null,"svg")`
    <rect
      height=20
      fill=${e.style.range[a]}>`;l.setAttribute("x",s+"%"),l.setAttribute("y",n),l.setAttribute("width",r+"%"),i.appendChild(l),0===a&&(e.style.legend.color_min=t.utils.wire(null,"svg")`
      <text
        style='font-size:11px; text-anchor: start; 
        font-family: "Open Sans", sans-serif;'>min`,e.style.legend.color_min.setAttribute("x",s+"%"),e.style.legend.color_min.setAttribute("y",n+40),i.appendChild(e.style.legend.color_min)),a===(o/2%1!=0&&Math.round(o/2)-1)&&(e.style.legend.color_avg=t.utils.wire(null,"svg")`
      <text id="grid_legend_color__avg"
        style='font-size:11px; text-anchor: middle; 
        font-family: "Open Sans", sans-serif;'>avg`,e.style.legend.color_avg.setAttribute("x",s+r/2+"%"),e.style.legend.color_avg.setAttribute("y",n+40),i.appendChild(e.style.legend.color_avg)),a===o-1&&(e.style.legend.color_max=t.utils.wire(null,"svg")`
      <text id="grid_legend_color__max"
        style='font-size:11px; text-anchor: end; 
        font-family: "Open Sans", sans-serif;'>max`,e.style.legend.color_max.setAttribute("x",s+r+"%"),e.style.legend.color_max.setAttribute("y",n+40),i.appendChild(e.style.legend.color_max))}return i.style.height=n+43+"px",e.style.legend.appendChild(t.utils.wire()`
  <td style="padding-top: 5px;" colSpan=2>
  <label class="input-checkbox">
  <input type="checkbox"
    onchange=${t=>{e.grid_ratio=t.target.checked,e.reload()}}>
  </input>
  <div></div><span>Display colour as a ratio to the size.`),e.style.legend},Pa=t=>{const e={polyCategorized:ka(t),polyGraduated:Ta(t),clusterCategorized:Sa(t),clusterGraduated:Ma(t),grid:Ra(t)};return i=>(i.style.legend=t.utils.wire()`<div class="legend">`,"grid"===i.format?e.grid(i):(i.filter=i.filter||{},"mvt"===i.format&&"categorized"===i.style.theme.type?e.polyCategorized(i):"mvt"===i.format&&"graduated"===i.style.theme.type?e.polyGraduated(i):"cluster"===i.format&&"categorized"===i.style.theme.type||"cluster"===i.format&&"competition"===i.style.theme.type?e.clusterCategorized(i):"cluster"===i.format&&"graduated"===i.style.theme.type?e.clusterGraduated(i):void 0))},La=t=>{const e={panel:function(i){if(!i.style)return;if(!i.style.theme&&i.style.hidden)return;const n=t.utils.wire()`
    <div class="drawer panel expandable ${i.style.theme||"grid"===i.format?"expanded":""}">`;if(n.appendChild(t.utils.wire()`
    <div
      class="header primary-colour"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}><span>Style</span><button
      class="btn-header xyz-icon icon-expander primary-colour-filter">`),i.style.label&&n.appendChild(t.utils.wire()`
    <label class="input-checkbox" style="margin-bottom: 10px;">
    <input type="checkbox"
      checked=${!!i.style.label.display}
      onchange=${t=>{i.style.label.display=t.target.checked,i.show()}}>
    </input>
    <div></div><span>Display Labels.`),i.style.theme&&!i.style.hidden){const e=Object.assign({Basic:null},i.style.themes);n.appendChild(t.utils.wire()`<div>Select thematic style.`),n.appendChild(t.utils.wire()`
      <button class="btn-drop">
      <div
        class="head"
        onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
        <span>${Object.keys(e)[1]}</span>
        <div class="icon"></div>
      </div>
      <ul>
        ${Object.entries(e).map(e=>t.utils.wire()`
          <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.querySelector("span").textContent=e[0],n.classList.toggle("active"),i.style.theme=e[1],o(i),i.reload()}}>${e[0]}`)}`)}i.style.theme&&i.style.themes&&i.style.hidden&&n.appendChild(t.utils.wire()`<span style="font-weight: bold;">${Object.keys(i.style.themes)[0]}`);return n.appendChild(t.utils.wire()`
      <div class="switch-all" style="font-size: 90%; display:none;">Click on labels to switch visibity or 
      <a class="primary-colour" style="cursor: pointer;"
      onclick=${t=>{t.stopPropagation();n.querySelectorAll(".switch").forEach(t=>t.click()),i.reload()}}>switch all</a>.`),i.style.bringToFront=t.utils.wire()`<button 
      title="Bring layer to front."
      style="margin-top: 5px;"
      class="btn-wide primary-colour"
      onclick=${()=>i.bringToFront()}>Bring layer to front`,o(i),n;function o(i){if(n.querySelector(".switch-all").style.display=i.style.theme&&"categorized"===i.style.theme.type?"block":"none",i.style.legend&&i.style.legend.remove(),i.style.bringToFront.remove(),i.style.theme||"grid"===i.format)return i.style.bringToFront.disabled=!i.display,n.appendChild(t.layers.view.style.legend(i)),void n.appendChild(i.style.bringToFront);i.style.legend=t.utils.wire()`<div class="legend">`,i.style.marker&&e.clusterStyle(i,i.style.marker,"Marker"),i.style.markerMulti&&e.clusterStyle(i,i.style.markerMulti,"MultiMarker"),i.style.default&&e.polyStyle(i,i.style.default,"Polygon"),i.style.highlight&&e.polyStyle(i,i.style.highlight,"Highlight"),n.appendChild(i.style.legend),i.style.bringToFront.disabled=!i.display,n.appendChild(i.style.bringToFront)}},legend:Pa(t),polyStyle:Ca(t),clusterStyle:Ea(t)};return e},Oa=t=>(e,i)=>{if(i.el&&i.el.parentNode)return t.layers.view.filter.reset(e,i);const n=t.layers.view.filter.block(e,i);n.dataset.field=i.field,i.el=n,n.appendChild(t.utils.wire()`
  <input type="text" placeholder="Search" onkeyup=${t=>{e.filter.current[i.field]={},e.filter.current[i.field][i.filter]=encodeURIComponent(t.target.value),e.reload(),e.show(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})}}>`)},Da=t=>(e,i)=>{if(i.el&&i.el.parentNode)return t.layers.view.filter.reset(e,i);const n=new XMLHttpRequest;n.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"field_stats",locale:t.workspace.locale.key,layer:e.key,table:e.tableCurrent(),field:i.field,filter:e.filter&&JSON.stringify(e.filter.current)})),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=n=>{const o=n.target.response,r=t.layers.view.filter.block(e,i);r.dataset.field=i.field,i.el=r;const a="integer"===i.type?1:.01;var s=t.utils.wire()`
    <div class="input-flex">
      <span>Greater or equal`;const l=t.utils.wire()`
    <input
      type="number"
      min=${o.min}
      value=${o.min}
      max=${o.max}
      step=${a}
      onkeyup=${t=>{u.value=t.target.value,g()}}>`;s.appendChild(l),r.appendChild(s);const c=t.utils.wire()`<div class="input-range">`;r.appendChild(c);const u=t.utils.wire()`
    <input
      type="range"
      class="secondary-colour-bg"
      min=${o.min}
      value=${o.min}
      max=${o.max}
      step=${a}
      oninput=${t=>{l.value=t.target.value,g()}}>`;c.appendChild(u);s=t.utils.wire()`
    <div class="input-flex">
      <span>Smaller or equal`;const h=t.utils.wire()`
    <input
      type="number"
      min=${o.min}
      value=${o.max}
      max=${o.max}
      step=${a}
      onkeyup=${t=>{p.value=t.target.value,g()}}>`;s.appendChild(h),r.appendChild(s);var d=t.utils.wire()`<div class="input-range">`;r.appendChild(d);const p=t.utils.wire()`
    <input
      type="range"
      class="secondary-colour-bg"
      min=${o.min}
      value=${o.max}
      max=${o.max}
      step=${a}
      oninput=${t=>{h.value=t.target.value,g()}}>`;let f;function g(){clearTimeout(f),f=setTimeout(()=>{f=null,e.filter.current[i.field]={},e.filter.current[i.field].gte=parseFloat(l.value),e.filter.current[i.field].lte=parseFloat(h.value),e.reload(),e.show(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})},500)}d.appendChild(p)},n.send()},Ia=t=>(e,i)=>{if(i.el&&i.el.parentNode)return t.layers.view.filter.reset(e,i);const n=t.layers.view.filter.block(e,i);n.dataset.field=i.field,i.el=n,i.filter.in.forEach(o=>{n.appendChild(t.utils.wire()`
    <label class="input-checkbox">
    <input
      type="checkbox"
      onchange=${t=>{if(e.filter.current[i.field]||(e.filter.current[i.field]={in:[]}),t.target.checked)e.filter.current[i.field].in.push(encodeURIComponent(t.target.parentNode.innerText));else{let n=e.filter.current[i.field].in.indexOf(encodeURIComponent(t.target.parentNode.innerText));e.filter.current[i.field].in.splice(n,1)}e.reload(),e.show(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})}}>
    </input>
    <div></div><span>${o}`)})},Fa=t=>(e,i)=>{if(i.el&&i.el.parentNode)return t.layers.view.filter.reset(e,i);const n=t.layers.view.filter.block(e,i);n.dataset.field=i.field,i.el=n;var o=t.utils.wire()`
  <div class="input-flex">
    <span>After`;const r=t.utils.wire()`
  <input type="text" readonly placeholder="Pick from calendar." style="width: 60%;">`;o.appendChild(r),n.appendChild(o);o=t.utils.wire()`
  <div class="input-flex">
    <span>Before`;const a=t.utils.wire()`
  <input type="text" readonly placeholder="Pick from calendar." style="width: 60%;">`;let s;function l(){clearTimeout(s),s=setTimeout(()=>{s=null,e.filter.current[i.field]={},e.filter.current[i.field].gt=t.utils.meltDateStr(r.value)||null,e.filter.current[i.field].lt=t.utils.meltDateStr(a.value)||null,e.reload(),e.show(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})},500)}o.appendChild(a),n.appendChild(o),t.utils.flatpickr({element:r,enableTime:"datetime"===i.type,callback:t=>{r.value=t,l()}}),t.utils.flatpickr({element:a,enableTime:"datetime"===i.type,callback:t=>{a.value=t,l()}})},Aa=t=>(e,i)=>{if(i.el&&i.el.parentNode)return t.layers.view.filter.reset(e,i);const n=t.layers.view.filter.block(e,i);n.dataset.field=i.field,i.el=n,e.filter.current[i.field]||(e.filter.current[i.field]={}),e.filter.current[i.field].boolean=!0,n.appendChild(t.utils.wire()`
  <label class="input-checkbox">
  <input type="checkbox"
    checked=true 
    onchange=${t=>{t.target.checked?e.filter.current[i.field].boolean=!0:e.filter.current[i.field].boolean=!1,e.reload(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})}}>
  </input>
  <div></div><span>${i.name||"True"}`),e.reload(),e.show(),e.count(t=>{e.filter.run_output.disabled=!(t>1),i.filterZoom&&t>1&&e.zoomToExtent()})},Na=t=>{const e={panel:function(i){if(!i.infoj)return;if(!i.infoj.some(t=>t.filter))return;i.filter.current={};const n=i.infoj.filter(t=>t.filter);n.unshift("Select filter from list.");const o=t.utils.wire()`
    <div class="drawer panel expandable">`;o.appendChild(t.utils.wire()`
    <div
      class="header primary-colour"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}><span>Filter</span><button
      class="btn-header xyz-icon icon-expander primary-colour-filter">`);let r={};Object.values(n).forEach(t=>{t.field&&(r[t.field]=t.title||t.field)}),i.filter.select=t.utils.wire()`
      <button class="btn-drop">
      <div
        class="head"
        onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
        <span>Select filter from list.</span>
        <div class="icon"></div>
      </div>
      <ul>
        ${Object.entries(r).map(o=>t.utils.wire()`
          <li onclick=${t=>{t.target.closest(".btn-drop").classList.toggle("active");const r=n.find(t=>t.field===o[0]);return i.filter.clear_all.style.display="block","date"==r.filter?e.filter_date(i,r):"numeric"===r.filter?e.filter_numeric(i,r):"like"===r.filter||"match"===r.filter?e.filter_text(i,r):r.filter.in?e.filter_in(i,r):"boolean"===r.filter?e.filter_boolean(i,r):void 0}}>${o[1]}`)}`,o.appendChild(i.filter.select),i.filter.clear_all=t.utils.wire()`
    <button
      class="primary-colour"
      style="display: none; margin-bottom: 5px;"
      onclick=${t=>{t.target.style.display="none",i.filter.list.innerHTML=null,i.filter.current={},i.reload(),i.count(t=>{i.filter.run_output.disabled=!(t>1)})}}>Clear all filters`,o.appendChild(i.filter.clear_all),i.filter.list=t.utils.wire()`<div>`,o.appendChild(i.filter.list),i.filter.run_output=t.utils.wire()`
    <button
      style="margin-top: 5px;"
      class="btn-wide primary-colour"
      onclick=${()=>{const e=new XMLHttpRequest;e.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"filter_aggregate",locale:t.workspace.locale.key,layer:i.key,table:i.tableMin(),filter:i.filter&&JSON.stringify(i.filter.current)})),e.setRequestHeader("Content-Type","application/json"),e.responseType="json",e.onload=e=>{if(200!==e.target.status)return;const n=i.filter.infoj.map(t=>(t.value=e.target.response[t.field],t));t.locations.select({_new:!0,_flyTo:!0,geometry:JSON.parse(e.target.response.geometry),infoj:n,layer:i})},e.send()}}>Run Output`,o.appendChild(i.filter.run_output),i.filter.infoj||(i.filter.run_output.style.display="none");return i.count(t=>{i.filter.run_output.disabled=!(t>1)}),o},block:function(e,i){const n=t.utils.wire()`
    <div class="drawer">
    <div class="header bold">
    <span>${i.title}</span>
    <button
      class="btn-header xyz-icon icon-close primary-colour-filter"
      onclick=${t=>{delete e.filter.current[i.field],e.reload(),n.remove(),e.filter.list.children.length||(e.filter.clear_all.style.display="none")}}>`;return e.filter.list.appendChild(n),n},reset:function(t,e){e.el.parentNode.removeChild(e.el),e.el=null,t.filter.list.children.length||(t.filter.clear_all.style.display="none")},filter_text:Oa(t),filter_numeric:Da(t),filter_in:Ia(t),filter_date:Fa(t),filter_boolean:Aa(t)};return e},ja=t=>e=>t.utils.wire()`
    <button
      class="btn-wide primary-colour"
      onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Point",callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Point`,za=t=>e=>t.utils.wire()`
<button
  class="btn-wide primary-colour"
  onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Polygon",callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Polygon`,Za=t=>e=>t.utils.wire()`
  <button
    class="btn-wide primary-colour"
    onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Circle",geometryFunction:t.mapview.lib.draw.createBox(),callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Rectangle`,Ga=t=>e=>t.utils.wire()`
  <button
    class="btn-wide primary-colour"
    onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Circle",geometryFunction:t.mapview.lib.draw.createRegularPolygon(33),callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Circle`,Ha=t=>e=>t.utils.wire()`
    <button
      class="btn-wide primary-colour"
      onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"LineString",callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Line`,Ba=t=>e=>t.utils.wire()`
  <button
    class="btn-wide primary-colour"
    onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"LineString",freehand:!0,callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Freehand`,Va=t=>e=>{"object"!=typeof e.edit.isoline_mapbox&&(e.edit.isoline_mapbox={});const i=t.utils.wire()`<div>`,n=t.utils.wire()`
      <div
        class="drawer group panel expandable"
      style="max-height: 20px;">
      <div
        class="header primary-colour"
        style="text-align: left;"
        onclick=${e=>{t.utils.toggleExpanderParent(e.target)}}><span>Mapbox Isoline settings</span>
      <span class="xyz-icon btn-header icon-expander primary-colour-filter">`;e.edit.isoline_mapbox.profile=e.edit.isoline_mapbox.profile||"driving",e.edit.isoline_mapbox.minutes=e.edit.isoline_mapbox.minutes||10;return e.edit.isoline_mapbox.profile="driving",n.appendChild(t.utils.wire()`
    <div
        style="margin-top: 8px; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Mode</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Driving</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{Driving:"driving"},{Walking:"walking"},{Cycling:"cycling"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_mapbox.profile=Object.values(i)[0]}}>${Object.keys(i)[0]}`)}`),n.appendChild(t.utils.wire()`
    <div style="margin-top: 12px;">
        <span>Travel time in minutes: </span>
        <span class="bold">${e.edit.isoline_mapbox.minutes}</span>
        <div class="input-range">
        <input
        class="secondary-colour-bg"
        type="range"
        min=5
        value=${e.edit.isoline_mapbox.minutes}
        max=60
        step=1
        oninput=${t=>{e.edit.isoline_mapbox.minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_mapbox.minutes}}>`),i.appendChild(n),i.appendChild(t.utils.wire()`
    <button
        class="btn-wide primary-colour"
        onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Point",geometryFunction:function(i,n){n=new t.mapview.lib.geom.Circle(i,1e3*e.edit.isoline_mapbox.minutes);const o=t.mapview.lib.proj.transform(i,"EPSG:"+t.mapview.srid,"EPSG:4326"),r=new XMLHttpRequest;return r.open("GET",t.host+"/api/provider/mapbox?"+t.utils.paramString({url:`api.mapbox.com/isochrone/v1/mapbox/${e.edit.isoline_mapbox.profile||"driving"}/${o.join(",")}?`,contours_minutes:e.edit.isoline_mapbox.minutes,generalize:e.edit.isoline_mapbox.minutes,polygons:!0})),r.setRequestHeader("Content-Type","application/json"),r.responseType="json",r.onload=e=>{if(200!==e.target.status||!e.target.response.features)return alert("No route found. Try a longer travel time or alternative setup.");t.mapview.interaction.draw.feature({geometry:e.target.response.features[0].geometry,dataProjection:"EPSG:4326"})},r.send(),n},callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Isoline Mapbox`),i},Wa=t=>e=>{"object"!=typeof e.edit.isoline_here&&(e.edit.isoline_here={});const i=t.utils.wire()`<div>`,n=t.utils.wire()`
      <div
        class="drawer group panel expandable"
      style="max-height: 20px;">
      <div
        class="header primary-colour"
        style="text-align: left;"
        onclick=${e=>{t.utils.toggleExpanderParent(e.target)}}><span>Here Isoline settings</span>
      <span class="xyz-icon btn-header icon-expander primary-colour-filter">`;e.edit.isoline_here.minutes=e.edit.isoline_here.minutes||10,e.edit.isoline_here.distance=e.edit.isoline_here.distance||10;e.edit.isoline_here.mode="car",n.appendChild(t.utils.wire()`
    <div
        style="margin-top: 8px; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Mode</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Driving</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{Driving:"car"},{Walking:"pedestrian"},{Cargo:"truck"},{"HOV lane":"carHOV"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_here.mode=Object.values(i)[0]}}>${Object.keys(i)[0]}`)}`);e.edit.isoline_here.rangetype="time",n.appendChild(t.utils.wire()`
    <div
        style="margin-top: 8px; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Range</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Time (min)</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{"Time (min)":"time"},{"Distance (km)":"distance"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_here.rangetype=Object.values(i)[0];const r=o.querySelector("input");"time"===e.edit.isoline_here.rangetype&&(o.querySelector("span").textContent="Travel time in minutes: ",r.oninput=t=>{e.edit.isoline_here.minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here.minutes},r.value=e.edit.isoline_here.minutes,r.parentNode.previousElementSibling.textContent=e.edit.isoline_here.minutes),"distance"===e.edit.isoline_here.rangetype&&(o.querySelector("span").textContent="Travel distance in kilometer: ",r.oninput=t=>{e.edit.isoline_here.distance=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here.distance},r.value=e.edit.isoline_here.distance,r.parentNode.previousElementSibling.textContent=e.edit.isoline_here.distance)}}>${Object.keys(i)[0]}`)}`);const o=t.utils.wire()`
    <div style="margin-top: 12px;">
        <span>Travel time in minutes: </span>
        <span class="bold">${e.edit.isoline_here.minutes}</span>
        <div class="input-range">
        <input
        class="secondary-colour-bg"
        type="range"
        min=5
        value=${e.edit.isoline_here.minutes}
        max=60
        step=1
        oninput=${t=>{e.edit.isoline_here.minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here.minutes}}>`;return n.appendChild(o),i.appendChild(n),i.appendChild(t.utils.wire()`
    <button
        class="btn-wide primary-colour"
        onclick=${i=>{i.stopPropagation();const n=i.target;if(n.classList.contains("active"))return t.mapview.interaction.draw.cancel();n.classList.add("active"),e.show(),e.view.querySelector(".header").classList.add("edited","secondary-colour-bg"),t.mapview.interaction.draw.begin({layer:e,type:"Point",geometryFunction:function(i,n){n=new t.mapview.lib.geom.Circle(i,1e3*e.edit.isoline_here.minutes);const o=t.mapview.lib.proj.transform(i,"EPSG:"+t.mapview.srid,"EPSG:4326"),r=new XMLHttpRequest,a="time"===e.edit.isoline_here.rangetype?60*(e.edit.isoline_here.minutes||10)||600:"distance"===e.edit.isoline_here.rangetype?1e3*(e.edit.isoline_here.distance||1)||1e3:600;return r.open("GET",t.host+"/api/provider/here?"+t.utils.paramString({url:"isoline.route.api.here.com/routing/7.2/calculateisoline.json?",mode:`${e.edit.isoline_here.type||"fastest"};${e.edit.isoline_here.mode||"car"};traffic:disabled`,start:"geo!"+o.reverse().join(","),range:a,rangetype:e.edit.isoline_here.rangetype||"time"})),r.setRequestHeader("Content-Type","application/json"),r.responseType="json",r.onload=e=>{if(200!==e.target.status||!e.target.response.response)return alert("No route found. Try a longer travel time or alternative setup.");t.mapview.interaction.draw.feature({geometry:{type:"Polygon",coordinates:[e.target.response.response.isoline[0].component[0].shape.map(t=>t.split(",").reverse())]},dataProjection:"EPSG:4326"})},r.send(),n},callback:()=>{e.view.querySelector(".header").classList.remove("edited","secondary-colour-bg"),n.classList.remove("active")}})}}>Isoline Here`),i},Ya=t=>{const e={panel:function(i){if(!i.edit)return;const n=t.utils.wire()`
    <div class="drawer panel expandable">`;if(n.appendChild(t.utils.wire()`
    <div
      class="header primary-colour"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}><span>Add new Locations</span><button
      class="btn-header xyz-icon icon-expander primary-colour-filter">`),i.edit.point&&n.appendChild(e.point(i)),i.edit.polygon&&n.appendChild(e.polygon(i)),i.edit.rectangle&&n.appendChild(e.rectangle(i)),i.edit.circle&&n.appendChild(e.circle(i)),i.edit.line&&n.appendChild(e.line(i)),i.edit.freehand&&n.appendChild(e.freehand(i)),i.edit.isoline_mapbox&&n.appendChild(e.isoline_mapbox(i)),i.edit.isoline_here&&n.appendChild(e.isoline_here(i)),n.children.length<2)return;return n},polygon:za(t),point:ja(t),rectangle:Za(t),circle:Ga(t),line:Ha(t),freehand:Ba(t),isoline_mapbox:Va(t),isoline_here:Wa(t)};return e},qa=t=>({panel:function(e){if(!e.dataviews||!t.dataviews.tabview.node)return;const i=t.utils.wire()`
    <div class="drawer panel expandable">`;return i.appendChild(t.utils.wire()`
    <div
      class="header primary-colour"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}><span>Data Views</span><button
      class="btn-header xyz-icon icon-expander primary-colour-filter">`),Object.entries(e.dataviews).forEach(n=>{n[1].key=n[0],n[1].layer=e,i.appendChild(t.utils.wire()`
        <label class="input-checkbox">
        <input
          type="checkbox"
          checked=${!!n[1].display}
          onchange=${e=>{if(n[1].display=e.target.checked,n[1].display)return t.dataviews.tabview.add(n[1]);n[1].remove()}}>
        </input>
        <div></div><span>${n[1].title||n[0]}`),n[1].display&&e.display&&t.dataviews.tabview.add(n[1])}),i}}),Ua=t=>({panel:function(e){if(!e.report)return;if(!e.report.templates)return;const i=t.utils.wire()`
    <div class="drawer panel expandable">`;return i.appendChild(t.utils.wire()`
    <div
      class="header primary-colour"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}><span>Reports</span><button
      class="btn-header xyz-icon icon-expander primary-colour-filter">`),Object.entries(e.report.templates).forEach(n=>{const o=t.host+"/view/"+encodeURIComponent(e.report.template)+"?"+t.utils.paramString(Object.assign(n[1],{locale:t.workspace.locale.key,layer:e.key,lat:t.hooks.current.lat,lng:t.hooks.current.lng,z:t.hooks.current.z}));i.appendChild(t.utils.wire()`
      <a
        target="_blank"
        href="${o}"
        class="link-with-img">
        <div class="xyz-icon icon-event-note"></div><span>${n[1].name||n[0]}`)}),i}}),Xa=t=>{const e={create:function(i){i.view=t.utils.wire()`<div class="drawer layer-view">`;const n=t.utils.wire()`
    <div class="header enabled"><span>${i.name||i.key}`;"cluster"===i.format&&i.style.marker&&n.appendChild(t.utils.wire()`
      <img
        class="btn-header"
        title="Default icon"
        style="float: right; cursor: help;"
        src="${t.utils.svg_symbols(i.style.marker)}">`);if(n.appendChild(t.utils.wire()`
    <button
      title="Zoom to filtered layer extent"
      class="btn-header xyz-icon icon-fullscreen"
      onclick=${t=>{t.stopPropagation(),i.zoomToExtent()}}>`),n.toggleDisplay=t.utils.wire()`
    <button
      title="Toggle visibility"
      class="${"btn-header xyz-icon icon-toggle "+(i.display&&"on")}"
      onclick=${t=>{t.stopPropagation(),i.display?i.remove():i.show()}}>`,n.appendChild(n.toggleDisplay),i.view.addEventListener("toggleDisplay",()=>{n.toggleDisplay.classList.toggle("on"),i.style&&i.style.bringToFront&&(i.style.bringToFront.disabled=!!i.display)}),i.view.appendChild(n),i.meta){const e=t.utils.wire()`<p class="meta">`;e.innerHTML=i.meta,i.view.appendChild(e)}const o=e.style.panel(i);o&&i.view.appendChild(o);const r=e.filter.panel(i);r&&i.view.appendChild(r);const a=e.data.panel(i);a&&i.view.appendChild(a);const s=e.draw.panel(i);s&&i.view.appendChild(s);const l=e.report.panel(i);if(l&&i.view.appendChild(l),i.scripts&&Object.entries(i.scripts).forEach(e=>{const n=t.utils.wire()`<script src="${e[1]}">`,o=r=>{r.detail(t,i),document.removeEventListener(e[0],o,!0),n.remove()};document.addEventListener(e[0],o,!0),i.view.appendChild(n)}),i.view.children.length<=1)return;i.view.classList.add("expandable"),n.onclick=e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)},n.appendChild(t.utils.wire()`
    <button
      title="Toggle layer dashboard"
      class="btn-header xyz-icon icon-expander"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target)}}>`);const c=i.view.querySelector(".panel");c&&c.classList.add("expanded")},style:La(t),filter:Na(t),draw:Ya(t),report:Ua(t),data:qa(t)};return e},$a=t=>({init:function(e){t.layers.listview.node=e.target,t.layers.listview.node.innerHTML="",t.layers.listview.groups={},Object.values(t.layers.list).forEach(e=>{if(t.layers.view.create(e),!e.group)return t.layers.listview.node.appendChild(e.view),e.view.querySelectorAll(".panel").forEach(t=>{t.style.maxHeight=t.querySelector(".header").offsetHeight+"px"}),void(e.view.style.maxHeight=e.view.querySelector(".header").offsetHeight+"px");t.layers.listview.groups[e.group]||function(e){const i={list:[]};t.layers.listview.groups[e.group]=i;const n=t.utils.wire()`
    <div class="drawer layer-group expandable">`;t.layers.listview.node.appendChild(n);const o=t.utils.wire()`
    <div
      class="header enabled"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target,!0)}}>
      <span>${e.group}`;n.appendChild(o);const r=t.utils.wire()`<div class="meta">`;n.appendChild(r),i.chkVisibleLayer=()=>{i.list.some(t=>t.display)?a.classList.add("on"):a.classList.remove("on")},i.addLayer=e=>{if(e.groupmeta){const i=t.utils.wire()`<div>`;i.innerHTML=e.groupmeta,r.appendChild(i)}i.list.push(e),n.appendChild(e.view),e.view.querySelectorAll(".panel").forEach(t=>{t.style.maxHeight=t.querySelector(".header").offsetHeight+"px"}),e.view.style.maxHeight=e.view.querySelector(".header").offsetHeight+"px",i.chkVisibleLayer()};const a=t.utils.wire()`
    <button
      class="btn-header xyz-icon icon-toggle"
      title="Hide layers from group"
      onclick=${t=>{t.stopPropagation(),t.target.classList.toggle("on"),t.target.classList.contains("on")?i.list.filter(t=>!t.display).forEach(t=>t.show()):i.list.filter(t=>t.display).forEach(t=>t.remove())}}>`;o.appendChild(a),o.appendChild(t.utils.wire()`
    <button 
      class="xyz-icon btn-header icon-expander"
      title="Toggle group panel"
      onclick=${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target)}}>`),n.style.maxHeight=o.offsetHeight+"px"}(e),t.layers.listview.groups[e.group].addLayer(e)})}}),Ka=t=>function(){if(!this.tables)return this.table;let e,i=parseInt(t.mapview.getZoom()),n=Object.keys(this.tables),o=parseInt(n[0]),r=parseInt(n[n.length-1]);return e=this.tables[i],e=i<o?this.tables[o]:e,e=i>r?this.tables[r]:e,e},Ja=t=>function(){if(!this.tables)return this.table;let t=Object.keys(this.tables);return this.tables[t[0]]||this.tables[t[1]]},Qa=t=>function(){if(!this.tables)return this.table;let t=Object.keys(this.tables);return this.tables[t[t.length-1]]||this.tables[t[t.length-2]]},ts=t=>function(e){const i=new XMLHttpRequest;i.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"layer_extent",locale:t.workspace.locale.key,srid:t.mapview.srid,layer:this.key,filter:this.filter&&JSON.stringify(this.filter.current)})),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=i=>{if(200!==i.target.status)return;const n=/\((.*?)\)/.exec(i.target.response.box2d)[1].replace(/ /g,",");t.mapview.flyToBounds(n.split(",").map(t=>parseFloat(t)),e)},i.send()},es=t=>function(){const e=this;!e.display&&e.view&&e.view.dispatchEvent(new CustomEvent("toggleDisplay")),e.display=!0,e.L&&t.map.removeLayer(e.L),t.map.addLayer(e.L),e.style&&e.style.label&&(t.map.getLayers().forEach(i=>{i===e.label&&t.map.removeLayer(e.label)}),e.style.label.display&&t.map.addLayer(e.label)),t.mapview.attribution.check(),t.hooks&&t.hooks.push("layers",e.key),e.group&&t.layers.listview.groups&&t.layers.listview.groups[e.group]&&t.layers.listview.groups[e.group].chkVisibleLayer(),e.dataviews&&t.dataviews.tabview.node&&Object.entries(e.dataviews).forEach(e=>{e[1].display&&t.dataviews.tabview.add(e[1])})},is=t=>function(){const e=this;e.display&&e.view&&e.view.dispatchEvent(new CustomEvent("toggleDisplay")),e.display=!1,e.L&&t.map.removeLayer(e.L),e.style&&e.style.label&&e.label&&t.map.removeLayer(e.label),e.attribution&&t.mapview.attribution.remove(e.attribution),t.mapview.attribution.check(),t.hooks&&t.hooks.filter("layers",e.key),e.group&&t.layers.listview.groups&&t.layers.listview.groups[e.group]&&t.layers.listview.groups[e.group].chkVisibleLayer(),e.dataviews&&t.dataviews.tabview.node&&Object.entries(e.dataviews).forEach(t=>{t[1].tab&&t[1].remove()})},ns=t=>function(e){const i=new XMLHttpRequest;i.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"count_locations",locale:t.workspace.locale.key,layer:this.key,table:this.tableMin(),filter:this.filter&&JSON.stringify(this.filter.current)})),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=t=>{200===t.target.status&&e&&e(parseInt(t.target.response.count))},i.send()},os=t=>function(){1e3!==this.L.getZIndex()&&(Object.values(t.layers.list).map(t=>{"tiles"!==t.format&&t.L.setZIndex(t.style.zIndex||1)&&t.display&&t.reload()}),this.L.setZIndex(1e3),this.reload())},rs=t=>e=>{t.mapview.popup.node&&t.mapview.popup.node.remove(),e.hook=`${e.layer.key}!${e.table}!${e.id}`;let i={stamp:parseInt(Date.now())};if(t.locations.list.some(t=>{if(t.location&&t.location.hook===e.hook)return t.location.remove(),t.stamp=0,!0}))return;for(const e of t.locations.list){if(!e.location){i=e;break}e.stamp<i.stamp&&(i=e)}if(i.stamp=parseInt(Date.now()),i.location&&i.location.remove(),i.location=e,e.style=i.style,e.colorFilter=i.colorFilter,e._new)return t.locations.decorate(e),e.marker=t.mapview.lib.proj.transform(t.utils.turf.pointOnFeature(e.geometry).geometry.coordinates,"EPSG:"+e.layer.srid,"EPSG:"+t.mapview.srid),"function"==typeof e.callback?e.callback(e):t.locations.selectCallback(e);const n=new XMLHttpRequest;i.location.xhr=n,n.open("GET",t.host+"/api/location/get?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.layer.key,table:e.table,id:e.id})),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=n=>{if(n.target.status>200)return delete i.stamp,void(t.hooks&&t.hooks.filter("locations",e.hook));t.hooks&&t.hooks.push("locations",e.hook);const o=e.layer.infoj.map(e=>{const i=t.utils.cloneDeep(e);return i.title=n.target.response.properties[i.field+"_label"]||i.title,i.value=n.target.response.properties[i.field],i});if(t.locations.decorate(e,{infoj:o,geometry:n.target.response.geometry,editable:e.layer.edit,record:i}),e.marker=t.mapview.lib.proj.transform(t.utils.turf.pointOnFeature(n.target.response.geometry).geometry.coordinates,"EPSG:"+e.layer.srid,"EPSG:"+t.mapview.srid),"function"==typeof e.callback)return e.callback(e);t.locations.selectCallback(e)},n.send(),i.location.remove=()=>{i.location.xhr.abort(),i.location=null}},as=t=>e=>(t.locations.view.create(e),e.draw(),e.Marker=t.mapview.geoJSON({geometry:{type:"Point",coordinates:e.marker},zIndex:2e3,style:new t.mapview.lib.style.Style({image:t.mapview.icon({type:"markerLetter",letter:String.fromCharCode(65+t.locations.list.indexOf(e.record)),color:e.style.strokeColor,scale:.05,anchor:[.5,1]})})}),e._flyTo&&e.flyTo(),t.mapview.popup?t.locations.listview.node?t.locations.listview.add(e):void t.mapview.popup.create({coords:e.marker,content:e.view}):alert(JSON.stringify(e.infoj,t.utils.getCircularReplacer()," "))),ss=t=>e=>{if(!e.infoj||e.infoj.length<1)return;e.geometries=e.geometries.filter(e=>{t.map.removeLayer(e)}),e.geometryCollection=e.geometryCollection.filter(e=>{t.map.removeLayer(e)}),e.tabviews.forEach(t=>t.remove&&t.remove());const i=t.utils.wire()`
  <div class="location-view-grid" style="display: grid;">`,n={};for(const o of e.infoj){if(e.view&&e.view.classList.contains("disabled"))break;if(o.edit||null!==o.value)if(o.listview=i,"report"===document.body.dataset.viewmode&&(o.edit=null),o.location=e,o.displayValue="numeric"===o.type?parseFloat(o.value).toLocaleString("en-GB",{maximumFractionDigits:2}):"integer"===o.type?parseInt(o.value).toLocaleString("en-GB",{maximumFractionDigits:0}):"date"===o.type?t.utils.formatDate(o.value):"datetime"===o.type?t.utils.formatDateTime(o.value):o.value,o.prefix&&(o.displayValue=o.prefix+o.displayValue),o.suffix&&(o.displayValue=o.displayValue+o.suffix),o.group&&(n[o.group]||(n[o.group]=t.utils.wire()`
        <div
          class="drawer group panel expandable ${o.class||""}"
          style="display: grid; grid-column: 1 / 3; max-height: 20px;">
          <div
            class="header primary-colour"
            style="text-align: left; grid-column: 1 / 3;"
            onclick=${e=>{t.utils.toggleExpanderParent(e.target)}}>
            <span>${o.group}</span>
            <span class="xyz-icon btn-header icon-expander primary-colour-filter">`,o.listview.appendChild(n[o.group])),o.group_class&&o.group_class.split(" ").forEach(t=>n[o.group].classList.add(t)),o.expanded&&n[o.group].classList.add("expanded"),o.listview=n[o.group]),o.script){const e=t.utils.wire()`<script src="${o.src}">`;o.target=t.utils.wire()`
      <div style="grid-column: 1 / 3;" class="${o.class||""}">`;const i=n=>{n.detail(t,o),document.removeEventListener(o.script,i,!0),e.remove()};document.addEventListener(o.script,i,!0),o.target.appendChild(e),o.listview.appendChild(o.target)}else if("dataview"!==o.type)o.title&&(o.title_div=t.utils.wire()`
      <div
        class="${`label lv-${o.level||"0"} ${o.class||""}`}"
        style="grid-column: 1;"
        title="${o.tooltip||null}">${o.title}`,o.listview.appendChild(o.title_div)),"key"!==o.type?"title"!==o.type?"streetview"!==o.type?"report"!==o.type?"images"!==o.type?"documents"!==o.type?"geometry"!==o.type?"meta"!==o.type?"boolean"!==o.type?(o.edit||o.displayValue)&&(o.inline||"integer"===o.type^"numeric"===o.type^"date"===o.type?(o.val=t.utils.wire()`<div class="val num ${o.class||""}" style="grid-column: 2;">`,o.listview.appendChild(o.val)):(o.title_div&&(o.title_div.style.gridColumn="1 / 3"),o.val=t.utils.wire()`<div class="val ${o.class||""}" style="grid-column: 1 / 3;">`,o.listview.appendChild(o.val)),!o.edit||o.fieldfx?"html"!==o.type?o.val.textContent=o.displayValue:(o.val.style="grid-column: 1 / 3;",o.val.innerHTML=o.value):t.locations.view.edit.input(o)):t.locations.view.boolean(o):t.locations.view.meta(o):t.locations.view.geometry(o):t.locations.view.documents(o):t.locations.view.images(o):t.locations.view.report(o):t.locations.view.streetview(o):o.title_div.style.gridColumn="1 / 3":o.listview.appendChild(t.utils.wire()`
      <div
        class="label lv-0 ${o.class||""}"
        style="grid-column: 2; margin: 3px;">
        <span
          title="Source layer"
          style="${"float: right; padding: 3px; cursor: help; border-radius: 2px; background-color: "+t.utils.Chroma(e.style.strokeColor).alpha(.3)+";"}"
          >${e.layer.name}`);else{const e=t.locations.view.dataview(o);e&&o.listview.appendChild(e)}}return i},ls=t=>e=>{e.__title_div&&(e.__title_div.style.gridColumn="1 / 3");const i=t.mapview.lib.proj.transform(e.location.marker,"EPSG:"+t.mapview.srid,"EPSG:4326"),n=`${t.host}/api/proxy?uri=/maps/api/streetview?location=${i[1]},${i[0]}%26source=outdoor%26size=300x230&provider=GOOGLE&host=maps.googleapis.com`;e.listview.appendChild(t.utils.wire()`
    <div
      class="${e.class||""}"
      style="grid-column: 1 / 3;">
      <a
        target="_blank"
        href="${"https://www.google.com/maps?cbll="+i[1]+","+i[0]+"&layer=c"}">
        <img src="${n}">`)},cs=t=>e=>{if(!e.value.length&&!e.edit)return e.title_div.remove();e.title_div&&(e.title_div.style.gridColumn="1 / 3");for(let n of e.value)e.listview.appendChild(t.utils.wire()`
      <div
        class="${e.class||""}"
        style="grid-column: 1 / 3; position: relative;">
        <img src=${n} style="width:100%;">
        ${e.edit&&t.utils.wire()`
        <button
          class="xyz-icon icon-trash img-remove"
          data-name=${n.replace(/.*\//,"").replace(/\.([\w-]{3})/,"")}
          data-src=${n}
          onclick=${t=>i(t)}>
        </button>`}`);function i(i){if(!confirm("Remove image?"))return;const n=i.target,o=new XMLHttpRequest;o.open("GET",t.host+"/api/provider/cloudinary?"+t.utils.paramString({destroy:!0,public_id:n.dataset.name})),o.onload=i=>{if(i.target.status>202)return;const o=new XMLHttpRequest;o.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"set_field_array",locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,action:"remove",field:e.field,secure_url:n.dataset.src,id:e.location.id})),o.setRequestHeader("Content-Type","application/json"),o.responseType="json",o.onload=t=>{t.target.status>202||n.parentNode.remove()},o.send()},o.send()}e.edit&&e.listview.appendChild(t.utils.wire()`
    <div class="list" style="grid-column: 1 / 3;">
    <div class="add xyz-icon icon-add-photo off-black-filter">
    <input
      type="file"
      accept="image/*;capture=camera"
      onchange=${n=>{const o=new FileReader,r=n.target.files[0];if(!r)return;const a=t.utils.wire()`
          <div><div class="xyz-icon loader">`;e.listview.insertBefore(a,e.listview.childNodes[e.listview.childNodes.length-1]),o.onload=n=>{const o=new Image;o.onload=()=>{let n=t.utils.wire()`<canvas>`,r=o.width,s=o.height;r>s&&r>1024?(s*=1024/r,r=1024):s>1024&&(r*=1024/s,s=1024),n.width=r,n.height=s,n.getContext("2d").drawImage(o,0,0,r,s);const l=n.toDataURL("image/jpeg",.5),c=new XMLHttpRequest;c.open("POST",t.host+"/api/provider/cloudinary?"+t.utils.paramString({resource_type:"image"})),c.setRequestHeader("Content-Type","application/octet-stream"),c.responseType="json",c.onload=n=>{if(n.target.status>202)return console.error("image upload failed");const o=n.target.response.secure_url,r=n.target.response.public_id.replace(/.*\//,"").replace(/\.([\w-]{3})/,""),s=new XMLHttpRequest;s.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"set_field_array",locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,action:"append",field:e.field,secure_url:o,id:e.location.id})),s.setRequestHeader("Content-Type","application/json"),s.responseType="json",s.onload=n=>{n.target.status>202||t.utils.bind(a)`
                  <img src=${o}>
                    ${e.edit&&t.utils.wire()`
                      <button
                        class="xyz-icon icon-trash img-remove"
                        data-name=${r}
                        data-src=${o}
                        onclick=${t=>i(t)}>
                      </button>`}`},s.send()},c.send(t.utils.dataURLtoBlob(l))},o.src=n.target.result},o.readAsDataURL(r),n.target.value=""}}>`)},us=t=>e=>{if(!e.value.length&&!e.edit)return e.title_div.remove();e.title_div&&(e.title_div.style.gridColumn="1 / 3"),e.documents=t.utils.wire()`<div style="grid-column: 1 / 3;"">`,e.listview.appendChild(e.documents);for(let n of e.value)e.documents.appendChild(t.utils.wire()`
		<div class="item">
		${e.edit&&t.utils.wire()`
		<button
			class="xyz-icon icon-trash link-remove"
			data-name=${n.replace(/.*\//,"").replace(/\.([\w-]{3})/,"")}
			data-href=${n}
			onclick=${t=>i(t)}>
		</button>`}		
		<a href=${n}>${n.replace(/.*\//,"").replace(/\.([\w-]{3})/,"")}`);function i(i){if(!confirm("Remove document link?"))return;const n=i.target,o=new XMLHttpRequest;o.open("GET",t.host+"/api/provider/cloudinary?"+t.utils.paramString({destroy:!0,public_id:n.dataset.name})),o.onload=i=>{if(i.target.status>202)return;const o=new XMLHttpRequest;o.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"set_field_array",locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,action:"remove",field:e.field,secure_url:n.dataset.href,id:e.location.id})),o.setRequestHeader("Content-Type","application/json"),o.responseType="json",o.onload=t=>{t.target.status>202||n.parentNode.remove()},o.send()},o.send()}e.edit&&e.listview.appendChild(t.utils.wire()`
    <div class="list" style="grid-column: 1 / 3;">
	<div class="add xyz-icon icon-cloud-upload off-black-filter">
	<input
	type="file"
	accept=".txt,.pdf,.doc,.docx,.xls,.xlsx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document;"
	onchange=${n=>{const o=new FileReader,r=n.target.files[0];if(!r)return;const a=t.utils.wire()`<div class="item"><div class="xyz-icon loader">`;e.documents.appendChild(a),o.onload=n=>{const o=new XMLHttpRequest;o.open("POST",t.host+"/api/provider/cloudinary?"+t.utils.paramString({resource_type:"raw",public_id:r.name})),o.setRequestHeader("Content-Type","application/octet-stream"),o.responseType="json",o.onload=n=>{if(n.target.status>202)return console.log("document_upload failed");const o=n.target.response.secure_url,r=n.target.response.public_id.replace(/.*\//,"").replace(/\.([\w-]{3})/,""),s=new XMLHttpRequest;s.open("GET",t.host+"/api/query?"+t.utils.paramString({template:"set_field_array",locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,action:"append",field:e.field,secure_url:o,id:e.location.id})),s.setRequestHeader("Content-Type","application/json"),s.responseType="json",s.onload=n=>{n.target.status>202||t.utils.bind(a)`
				<div class="item">
				${e.edit&&t.utils.wire()`
				<button
					class="xyz-icon icon-trash link-remove"
					data-name=${r}
					data-href=${o}
					onclick=${t=>i(t)}>
				</button>`}
				<a href=${o} target="_blank">${r}`},s.send()},o.send(n.target.result)},o.readAsDataURL(r),n.target.value=""}}>`)},hs=t=>e=>{if(!e.value)return;let i=t.utils.wire()`
   <div 
    style="grid-column: 1 / 3;
    width: 100%;
    padding: 4px;
    margin-top: 2px;
    color: #666;
    border-radius: 4px;
    background-color: linen;">`,n=t.utils.wire()`<div style="display: grid;">`;i.appendChild(n),e.listview.appendChild(i),Object.entries(e.value).forEach(e=>{n.appendChild(t.utils.wire()`<div style="grid-column: 1;">${e[0]}`),n.appendChild(t.utils.wire()`<div style="grid-column: 2;">${e[1]}`)})},ds=t=>e=>{if(!e.report.template)return;const i=t.host+"/view/"+encodeURIComponent(e.report.template)+"?"+t.utils.paramString(Object.assign(e.report,{locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,id:e.location.id,host:t.host}));e.listview.appendChild(t.utils.wire()`
    <div
      class="${"label lv-0 "+(e.class||"")}"
      style="grid-column: 1 / 3;">
      <a
        class="primary-colour"
        target="_blank"
        href="${i}">
          ${e.report.title||e.report.name||"Location Report"}`)},ps=t=>e=>{e.listview.appendChild(t.utils.wire()`
    <div style="padding-top: 5px; grid-column: 1 / 3">
      <label class="input-checkbox">
        <input type="checkbox"
          disabled=${!e.edit}
          checked=${!!e.value}
          onchange=${t=>{e.location.view.dispatchEvent(new CustomEvent("valChange",{detail:{input:t.target,entry:e,newValue:!!t.target.checked}}))}}>
        </input>
        <div></div><span>${e.title||e.name||e.field}`)},fs=t=>{const e=(t=>({create:function(e){const i=[e.location.geometry.coordinates[1],e.location.geometry.coordinates[0]],n=new XMLHttpRequest,o="time"!==e.edit.isoline_here.rangetype&&e.edit.isoline_here.rangetype?"distance"===e.edit.isoline_here.rangetype?1e3*(e.edit.isoline_here._distance||1)||1e3:600:60*(e.edit.isoline_here._minutes||e.edit.isoline_here.minutes||10)||600;n.open("GET",t.host+"/api/provider/here?"+t.utils.paramString({url:"isoline.route.api.here.com/routing/7.2/calculateisoline.json?",mode:`${e.edit.isoline_here.type||"fastest"};${e.edit.isoline_here.mode||"car"};traffic:disabled`,start:"geo!"+i.join(","),range:o,rangetype:e.edit.isoline_here.rangetype||"time"})),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=t=>{if(200!==t.target.status||!t.target.response.response)return e.location.view&&e.location.view.classList.remove("disabled"),console.log(t.target.response),alert("No route found. Try alternative set up.");if(e.newValue={type:"Polygon",coordinates:[t.target.response.response.isoline[0].component[0].shape.map(t=>t.split(",").reverse())]},e.edit.isoline_here.meta){let t=new Date;e.location.infoj.filter(t=>"meta"===t.type&&t.field===e.edit.isoline_here.meta).forEach(i=>i.newValue={"Recent isoline":"Here",Mode:e.edit.isoline_here.mode,"Range type":e.edit.isoline_here.rangetype,Range:"time"===e.edit.isoline_here.rangetype?e.edit.isoline_here._minutes:e.edit.isoline_here._distance,Created:`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${t.getMinutes()>8?t.getMinutes()+1:"0"+(t.getMinutes()+1)}`})}e.location.update()},n.send(),e.location.view&&e.location.view.classList.add("disabled")},settings:function(e){if(e.edit.isoline_here&&(e.edit.isoline_here.minutes||!e.edit.isoline_here.minutes&&e.value))return t.utils.wire()`<div>`;const i=t.utils.wire()`
      <div
        class="drawer group panel expandable ${e.class||""}"
      style="display: grid; grid-column: 1 / 3; max-height: 20px;">
      <div
        class="header primary-colour"
        style="text-align: left; grid-column: 1 / 3;"
        onclick=${e=>{t.utils.toggleExpanderParent(e.target)}}><span>Here Isoline settings</span>
      <span class="xyz-icon btn-header icon-expander primary-colour-filter">`;e.edit.isoline_here._minutes=e.edit.isoline_here.minutes||10,e.edit.isoline_here._distance=e.edit.isoline_here.distance||10;e.edit.isoline_here.mode="car",i.appendChild(t.utils.wire()`
    <div
        style="margin-top: 8px; grid-column: 1 / 3; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Mode</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Driving</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{Driving:"car"},{Walking:"pedestrian"},{Cargo:"truck"},{"HOV lane":"carHOV"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_here.mode=Object.values(i)[0]}}>${Object.keys(i)[0]}`)}`);e.edit.isoline_here.rangetype="time",i.appendChild(t.utils.wire()`
    <div
        style="margin-top: 8px; grid-column: 1 / 3; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Range</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Time (min)</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{"Time (min)":"time"},{"Distance (km)":"distance"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const o=t.target.closest(".btn-drop");o.classList.toggle("active"),o.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_here.rangetype=Object.values(i)[0];const r=n.querySelector("input");"time"===e.edit.isoline_here.rangetype&&(n.querySelector("span").textContent="Travel time in minutes: ",r.oninput=t=>{e.edit.isoline_here._minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here._minutes},r.value=e.edit.isoline_here._minutes,r.parentNode.previousElementSibling.textContent=e.edit.isoline_here._minutes),"distance"===e.edit.isoline_here.rangetype&&(n.querySelector("span").textContent="Travel distance in kilometer: ",r.oninput=t=>{e.edit.isoline_here._distance=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here._distance},r.value=e.edit.isoline_here._distance,r.parentNode.previousElementSibling.textContent=e.edit.isoline_here._distance)}}>${Object.keys(i)[0]}`)}`);const n=t.utils.wire()`
    <div style="margin-top: 12px; grid-column: 1 / 3;">
        <span>Travel time in minutes: </span>
        <span class="bold">${e.edit.isoline_here._minutes}</span>
        <div class="input-range">
        <input
          class="secondary-colour-bg"
          type="range"
          min=5
          value=${e.edit.isoline_here._minutes}
          max=60
          step=1
          oninput=${t=>{e.edit.isoline_here._minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_here._minutes}}>`;return i.appendChild(n),i}}))(t),i=(t=>({create:function(e){const i=e.location.geometry.coordinates,n=new XMLHttpRequest;n.open("GET",t.host+"/api/location/edit/isoline/mapbox?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.location.layer.key,table:e.location.table,coordinates:i.join(","),minutes:e.edit.isoline_mapbox._minutes||e.edit.isoline_mapbox.minutes,profile:e.edit.isoline_mapbox.profile,meta:e.edit.isoline_mapbox.meta||null})),n.open("GET",t.host+"/api/provider/mapbox?"+t.utils.paramString({url:`api.mapbox.com/isochrone/v1/mapbox/${e.edit.isoline_mapbox.profile||"driving"}/${i.join(",")}?`,contours_minutes:e.edit.isoline_mapbox._minutes||e.edit.isoline_mapbox.minutes,generalize:e.edit.isoline_mapbox._minutes||e.edit.isoline_mapbox.minutes,polygons:!0})),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=t=>{if(200!==t.target.status||!t.target.response.features)return e.location.view&&e.location.view.classList.remove("disabled"),console.log(t.target.response),alert("No route found. Try alternative set up.");if(e.newValue=t.target.response.features[0].geometry,e.edit.isoline_mapbox.meta){let t=new Date;e.location.infoj.filter(t=>"meta"===t.type&&t.field===e.edit.isoline_mapbox.meta).forEach(i=>i.newValue={"Recent isoline":"Mapbox",Mode:e.edit.isoline_mapbox.profile,Minutes:e.edit.isoline_mapbox._minutes,Created:`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${t.getMinutes()>8?t.getMinutes()+1:"0"+(t.getMinutes()+1)}`})}e.location.update()},n.send(),e.location.view&&e.location.view.classList.add("disabled")},settings:function(e){if(e.edit.isoline_mapbox&&(e.edit.isoline_mapbox.minutes||!e.edit.isoline_mapbox.minutes&&e.value))return t.utils.wire()`<div>`;const i=t.utils.wire()`
      <div
        class="drawer group panel expandable ${e.class||""}"
      style="display: grid; grid-column: 1 / 3; max-height: 20px;">
      <div
        class="header primary-colour"
        style="text-align: left; grid-column: 1 / 3;"
        onclick=${e=>{t.utils.toggleExpanderParent(e.target)}}><span>Mapbox Isoline settings</span>
      <span class="xyz-icon btn-header icon-expander primary-colour-filter">`;e.edit.isoline_mapbox.profile=e.edit.isoline_mapbox.profile||"driving",e.edit.isoline_mapbox._minutes=e.edit.isoline_mapbox.minutes||10;return e.edit.isoline_mapbox.profile="driving",i.appendChild(t.utils.wire()`
    <div
      style="margin-top: 8px; grid-column: 1 / 3; display: grid; grid-template-columns: 50px 1fr; align-items: center;">
        <span style="grid-column: 1;">Mode</span>
        <div style="grid-column: 2;">
        <button class="btn-drop">
            <div
                class="head"
                onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
                <span>Driving</span>
                <div class="icon"></div>
            </div>
            <ul>
                ${[{Driving:"driving"},{Walking:"walking"},{Cycling:"cycling"}].map(i=>t.utils.wire()`
                <li onclick=${t=>{const n=t.target.closest(".btn-drop");n.classList.toggle("active"),n.querySelector(":first-child").textContent=Object.keys(i)[0],e.edit.isoline_mapbox.profile=Object.values(i)[0]}}>${Object.keys(i)[0]}`)}`),i.appendChild(t.utils.wire()`
    <div style="margin-top: 12px; grid-column: 1 / 3;">
      <span>Travel time in minutes: </span>
      <span class="bold">${e.edit.isoline_mapbox._minutes}</span>
      <div class="input-range">
      <input
        class="secondary-colour-bg"
        type="range"
        min=5
        value=${e.edit.isoline_mapbox._minutes}
        max=60
        step=1
        oninput=${t=>{e.edit.isoline_mapbox._minutes=parseInt(t.target.value),t.target.parentNode.previousElementSibling.textContent=e.edit.isoline_mapbox._minutes}}>`),i}}))(t),n=(t=>e=>{e.value.features&&(e.value.features.map(i=>{let n;if(e.style||(n=e.location.style),e.style.theme||(n=e.style),e.style.theme&&"categorized"===e.style.theme.type&&(n=e.style.theme&&e.style.theme.cat[i.properties[e.style.theme.field]].style),e.style.theme&&"graduated"===e.style.theme.type)for(let t=0;t<e.style.theme.cat_arr.length&&!(i.properties[e.style.theme.field]<e.style.theme.cat_arr[t].value);t++)n=e.style.theme.cat_arr[t].style;let o=t.mapview.geoJSON({geometry:i.geometry,dataProjection:"4326",zIndex:e.location.layer.L.getZIndex()-1,style:new t.mapview.lib.style.Style({stroke:n.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(n.color||n.strokeColor).alpha(1),width:e.style.strokeWidth||1}),fill:new t.mapview.lib.style.Fill({color:t.utils.Chroma(n.fillColor||n.strokeColor).alpha(void 0===n.fillOpacity?1:parseFloat(n.fillOpacity)||0).rgba()})})});e.location.geometryCollection.push(o)}),e.location.geometries.push(e.location.geometryCollection),e.display=!0,e.style&&e.style.theme&&e.style.theme.legend&&(e.legend=t.utils.wire()`<div class="legend lv-1">`,e.legend.appendChild(t.layers.view.style.legend({format:"mvt",style:e.style})),e.container.style.display="block",e.container.appendChild(e.legend)))})(t),o=(t=>e=>new Promise((i,n)=>{const o=new XMLHttpRequest;o.open("GET",t.host+"/api/query?"+t.utils.paramString(Object.assign({locale:t.workspace.locale.key,layer:e.location.layer&&e.location.layer.key,id:e.location.id,template:encodeURIComponent(e.query)},e.queryparams||{}))),o.setRequestHeader("Content-Type","application/json"),o.responseType="json",o.onload=t=>{if(t.target.status>=300)return n({err:t.target.status});i(t.target.response)},o.send()}))(t);return r=>{if(r.query)r.display&&u(),a(Object.assign(r,{callback:t=>{r.display?u():l()}}));else{if(!r.value&&!r.edit)return;a(r)}function a(e){e.style=Object.assign({},e.location.style,e.style),e.container=t.utils.wire()`
      <div 
      class=${"lv-"+(e.level||0)+" "+(e.class||"")}
      style="grid-column: 1 / 3; position: relative; display: flex; align-items: center;">`,e.listview.appendChild(e.container),e.container.appendChild(t.utils.wire()`
        <label class="input-checkbox">
        <input type="checkbox"
        checked=${e.edit&&e.value||!!e.display}
        onchange=${t=>(e.display=t.target.checked,e.callback?e.callback(t):e.display&&e.edit?c():e.display&&!e.edit?s():!e.display&&e.edit?(e.newValue=null,e.edit.isoline_here&&e.edit.isoline_here.meta&&e.location.infoj.filter(t=>"meta"===t.type&&t.field===e.edit.isoline_here.meta).forEach(t=>t.newValue=null),e.edit.isoline_mapbox&&e.edit.isoline_mapbox.meta&&e.location.infoj.filter(t=>"meta"===t.type&&t.field===e.edit.isoline_mapbox.meta).forEach(t=>t.newValue=null),void e.location.update()):e.display||e.edit?void 0:l())}>
        </input>
        <div></div>
        <span>${e.name||"Geometry"}<span>`),!e.style.theme&&e.container.appendChild(t.utils.wire()`
        <div class="sample-circle"
        style="${`\n          background-color: ${t.utils.Chroma(e.style.fillColor||e.style.strokeColor).alpha(void 0===e.style.fillOpacity?1:parseFloat(e.style.fillOpacity)||0)};\n          border-color: ${t.utils.Chroma(e.style.color||e.style.strokeColor).alpha(1)};\n          border-style: solid;\n          border-width: ${e.style.strokeWidth||1}px;\n          margin-left: auto;`}">`)}function s(){"FeatureCollection"===r.value.type?n(r):(r.geometry=r.value&&t.mapview.geoJSON({geometry:"object"==typeof r.value&&r.value||JSON.parse(r.value),dataProjection:"4326",zIndex:r.location.layer.L.getZIndex()-1,style:new t.mapview.lib.style.Style({stroke:r.style.strokeColor&&new t.mapview.lib.style.Stroke({color:t.utils.Chroma(r.style.color||r.style.strokeColor).alpha(1),width:r.style.strokeWidth||1}),fill:new t.mapview.lib.style.Fill({color:t.utils.Chroma(r.style.fillColor||r.style.strokeColor).alpha(void 0===r.style.fillOpacity?1:parseFloat(r.style.fillOpacity)||0).rgba()})})}),r.geometry&&r.location.geometries.push(r.geometry),r.display=!0)}function l(){r.display=!1,r.legend&&r.legend.remove(),"FeatureCollection"===r.value.type?r.location.geometries.splice(r.location.geometries.indexOf(r.geometryCollection),1)&&r.location.geometryCollection.map(e=>t.map.removeLayer(e)):r.geometry&&r.location.geometries.splice(r.location.geometries.indexOf(r.geometry),1)&&t.map.removeLayer(r.geometry)}function c(){if(r.edit)return r.edit.isoline_mapbox?i.create(r):r.edit.isoline_here?e.create(r):void 0}function u(){r.promise=o(r),r.promise.then(t=>{r.value=t[r.field],s()})}if(r.edit&&r.edit.isoline_mapbox&&r.container.parentNode.insertBefore(i.settings(r),r.container.nextSibling),r.edit&&r.edit.isoline_here&&r.container.parentNode.insertBefore(e.settings(r),r.container.nextSibling),r.value&&(r.display||r.edit))return s();!r.value&&r.display&&c()}},gs=t=>e=>{e.val.appendChild(t.utils.wire()`
  <div>
  <span>${e.edit.range.label}</span>
  <span class="bold">${e.value}</span>
  <div class="input-range">
  <input
    class="secondary-colour-bg"
    type="range"
    min=${e.edit.range.min}
    value=${e.value}
    max=${e.edit.range.max}
    oninput=${t=>{t.target.parentNode.previousElementSibling.textContent=t.target.value}}>`)},ms=t=>e=>{const i=e.edit.options.find(t=>"object"==typeof t&&Object.values(t)[0]===e.value||t===e.value)||e.value;e.displayValue=i&&"object"==typeof i&&Object.keys(i)[0]||i||e.value,e.val.appendChild(t.utils.wire()`
      <button class="btn-drop">
      <div
      class="head"
      onclick=${t=>{t.preventDefault(),t.target.parentElement.classList.toggle("active")}}>
      <span>${e.displayValue}</span>
      <div class="icon"></div>
      </div>
      <ul>
      ${e.edit.options.map(i=>{let n=i,o=i;return"object"==typeof i&&(n=Object.keys(i)[0],o=Object.values(i)[0]),t.utils.wire()`<li onclick=${t=>{const i=t.target.closest(".btn-drop");i.classList.toggle("active"),i.querySelector(":first-child").textContent=n,i.querySelector(":first-child").value=o,e.location.view.dispatchEvent(new CustomEvent("valChange",{detail:{input:i.querySelector(":first-child"),entry:e}}))}}>${n}`})}`)},vs=t=>e=>{const i=t.utils.wire()`<input type="text" placeholder="Pick from calendar." style="text-align: end;">${"datetime"===e.type&&t.utils.formatDateTime(e.value)||t.utils.formatDate(e.value)||""}`.childNodes[0];i.value="datetime"===e.type&&t.utils.formatDateTime(e.value)||t.utils.formatDate(e.value)||"",e.val.appendChild(i),t.utils.flatpickr({value:e.value?new Date(1e3*e.value).toISOString():"",element:i,enableTime:"datetime"===e.type,callback:n=>{i.value=n;const o=t.utils.meltDateStr(n);e.location.view.dispatchEvent(new CustomEvent("valChange",{detail:{input:i,entry:e,newValue:o}}))}})},ys=t=>e=>{let i=t.utils.wire()`
  <textarea
    value=${e.value||""}
    style="auto; min-height: 50px;"
	  onfocus=${t=>{t.target.style.height=t.target.scrollHeight+"px"}}
	  onfocusout=${t=>{t.target.style.height="auto"}}
	  onkeyup=${t=>{e.location.view.dispatchEvent(new CustomEvent("valChange",{detail:{input:t.target,entry:e}}))}}
	  onkeydown=${t=>setTimeout(()=>{t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px"},100)}>`;return e.val.style.gridColumn="1 / 3",e.val.appendChild(i),i},bs=t=>{const e={input:function(i){if(!i.edit)return;if("date"===i.type||"datetime"===i.type)return e.date(i);if(i.edit.range)return e.range(i);if(i.edit.options)return e.options(i);if("textarea"===i.type||"html"===i.type)return e.textarea(i);i.val.appendChild(t.utils.wire()`
    <input type="${"numeric"===i.type||"integer"===i.type?"number":"text"}" value="${i.value||i.displayValue||""}"
      onkeyup=${t=>{i.location.view.dispatchEvent(new CustomEvent("valChange",{detail:{input:t.target,entry:i}}))}}>`)},range:gs(t),date:vs(t),options:ms(t),textarea:ys(t)};return e},ws=t=>e=>(e.dependents&&e.dependents.some(t=>e.location.infoj.some(e=>!e.value&&e.field===t))&&delete e.display,e.layer=e.location.layer,e.id=e.location.id,"location"===e._target?e.target:(e._target=e.target,"location"===e.target?(e.active=!0,e.target=t.utils.wire()`
    <div
      class=${e.class}
      style="grid-column: 1 / 3; padding-top: 10px;">`,t.dataviews.create(e),e.target):document.getElementById(e.target)?(e.active=!0,e.target=document.getElementById(e.target),void t.dataviews.create(e)):t.dataviews.tabview.node?(e.tab_style="border-bottom: 2px solid "+e.location.style.strokeColor,e.display&&t.dataviews.tabview.add(e),e.location.tabviews.push(e),t.utils.wire()`
    <label
      class="input-checkbox ${e.class}"
      style="grid-column: 1 / 3">
      <input
        type="checkbox"
        checked=${!!e.display}
        onchange=${i=>{if(e.display=i.target.checked,e.display)return t.dataviews.tabview.add(e);e.remove()}}>
      </input>
      <div></div><span>${e.title||"Dataview"}`):void 0)),_s=t=>({create:function(e){e.view||(e.view=t.utils.wire()`<div class="drawer location-view expandable expanded">`);e.view.classList.remove("disabled"),e.view.innerHTML="",e.view.classList.remove("disabled"),e.view.addEventListener("valChange",t=>{const e=void 0===t.detail.newValue?t.detail.input.value:t.detail.newValue;t.detail.entry.value!=e?(t.detail.entry.newValue=e,t.detail.input.classList.add("primary-colour")):(delete t.detail.entry.newValue,t.detail.input.classList.remove("primary-colour")),t.detail.entry.location.infoj.some(t=>void 0!==t.newValue)?n.style.display="inline-block":n.style.display="none"});const i=t.utils.wire()`
    <div
      class = "header"
      style = "${"border-bottom: 2px solid "+e.style.strokeColor}"
      onclick = ${e=>{e.preventDefault(),t.utils.toggleExpanderParent(e.target,!0)}}>
      <div>${String.fromCharCode(65+t.locations.list.indexOf(e.record))}`;e.view.appendChild(i),e.infoj&&i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Toggle location view drawer."
      class = "btn-header xyz-icon icon-expander "
      onclick = ${e=>{e.stopPropagation(),t.utils.toggleExpanderParent(e.target)}}>`),i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Zoom map to feature bounds"
      class = "btn-header xyz-icon icon-search"
      onclick = ${t=>{t.stopPropagation(),e.flyTo()}}>`);const n=t.utils.wire()`
    <button
      style = "${"display: none; filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Save changes to cloud."
      class = "btn-header xyz-icon icon-cloud-upload"
      onclick = ${t=>{t.stopPropagation(),e.update()}}>`;i.appendChild(n),e.layer.edit&&e.layer.edit.geometry&&i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Edit location geometry."
      class = "btn-header xyz-icon icon-build"
      onclick = ${n=>{if(n.stopPropagation(),i.classList.contains("edited"))return t.mapview.interaction.edit.finish();i.classList.add("edited","secondary-colour-bg"),t.mapview.interaction.edit.begin({location:e,type:"LineString",callback:()=>{i.classList.remove("edited","secondary-colour-bg")}})}}>`),e.layer.edit&&e.layer.edit.delete&&i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Delete location."
      class = "btn-header xyz-icon icon-trash"
      onclick = ${t=>{t.stopPropagation(),e.trash()}}>`),i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Hide marker"
      class = "btn-header xyz-icon icon-location-tick" 
      onclick = ${i=>{i.stopPropagation(),i.target.classList.contains("icon-location")?(i.target.classList.remove("icon-location"),i.target.classList.add("icon-location-tick"),t.map.addLayer(e.Marker)):(i.target.classList.remove("icon-location-tick"),i.target.classList.add("icon-location"),t.map.removeLayer(e.Marker))}}>`),i.appendChild(t.utils.wire()`
    <button
      style = "${"filter: "+e.colorFilter+"; -webkit-filter: "+e.colorFilter}"
      title = "Remove feature from selection"
      class = "btn-header xyz-icon icon-close"
      onclick = ${i=>{i.stopPropagation(),e.remove(),t.map.updateSize()}}>`),e.infoj&&e.view.appendChild(t.locations.view.infoj(e))},infoj:ss(t),streetview:ls(t),images:cs(t),documents:us(t),geometry:fs(t),meta:hs(t),edit:bs(t),boolean:ps(t),report:ds(t),dataview:ws(t)}),xs=t=>{const e={init:function(n){e.add=i,e.callbackAdd=e.callbackAdd||n.callbackAdd,e.callbackInit=e.callbackInit||n.callbackInit,e.node=e.node||n.target,e.node.innerHTML="",t.locations.list=[["#4227b0","invert(19%) sepia(57%) saturate(4245%) hue-rotate(247deg) brightness(76%) contrast(101%)"],["#2196f3","invert(60%) sepia(94%) saturate(3876%) hue-rotate(184deg) brightness(98%) contrast(94%)"],["#009688","invert(37%) sepia(46%) saturate(1993%) hue-rotate(144deg) brightness(96%) contrast(101%)"],["#cddc39","invert(84%) sepia(82%) saturate(420%) hue-rotate(6deg) brightness(88%) contrast(94%)"],["#ff9800","invert(59%) sepia(90%) saturate(1526%) hue-rotate(358deg) brightness(99%) contrast(106%)"],["#673ab7","invert(23%) sepia(26%) saturate(6371%) hue-rotate(251deg) brightness(87%) contrast(87%)"],["#03a9f4","invert(65%) sepia(61%) saturate(5963%) hue-rotate(168deg) brightness(101%) contrast(103%)"],["#4caf50","invert(65%) sepia(8%) saturate(3683%) hue-rotate(73deg) brightness(92%) contrast(69%)"],["#ffeb3b","invert(75%) sepia(76%) saturate(391%) hue-rotate(2deg) brightness(104%) contrast(109%)"],["#ff5722","invert(47%) sepia(96%) saturate(3254%) hue-rotate(346deg) brightness(100%) contrast(102%)"],["#0d47a1","invert(15%) sepia(99%) saturate(2827%) hue-rotate(213deg) brightness(87%) contrast(90%)"],["#00bcd4","invert(60%) sepia(39%) saturate(2788%) hue-rotate(144deg) brightness(93%) contrast(102%)"],["#8bc34a","invert(87%) sepia(8%) saturate(3064%) hue-rotate(35deg) brightness(85%) contrast(85%)"],["#ffc107","invert(79%) sepia(86%) saturate(3969%) hue-rotate(346deg) brightness(98%) contrast(111%)"],["#d32f2f","invert(28%) sepia(94%) saturate(3492%) hue-rotate(345deg) brightness(85%) contrast(92%)"]].map(t=>({style:{strokeColor:t[0]},colorFilter:t[1]})),e.callbackInit&&e.callbackInit()}};return e;function i(t){e.node&&(Object.values(e.node.children).forEach(t=>t.classList.remove("expanded")),e.node.insertBefore(t.view,e.node.firstChild),t.view.style.maxHeight="30px",e.callbackAdd&&e.callbackAdd())}},Cs=t=>function(){this.Layer=t.mapview.geoJSON({geometry:this.geometry,zIndex:1999,style:[new t.mapview.lib.style.Style({stroke:new t.mapview.lib.style.Stroke({color:"rgba(255, 255, 255, 0.2)",width:8})}),new t.mapview.lib.style.Style({stroke:new t.mapview.lib.style.Stroke({color:"rgba(255, 255, 255, 0.2)",width:6})}),new t.mapview.lib.style.Style({stroke:new t.mapview.lib.style.Stroke({color:"rgba(255, 255, 255, 0.2)",width:4})}),new t.mapview.lib.style.Style({stroke:this.style.strokeColor&&new t.mapview.lib.style.Stroke({color:this.style.strokeColor,width:this.style.strokeWidth||1}),fill:this.style.fillColor&&new t.mapview.lib.style.Fill({color:t.utils.Chroma(this.style.fillColor).alpha(void 0===this.style.fillOpacity?1:parseFloat(this.style.fillOpacity)||0).rgba()})})],dataProjection:this.layer.srid,featureProjection:t.mapview.srid})},Es=t=>function(){t.hooks&&t.hooks.filter("locations",this.hook),t.mapview.interaction.edit.finish&&t.mapview.interaction.edit.finish(),this.view&&this.view.remove(),t.locations.listview.node&&0===t.locations.listview.node.childElementCount&&t.locations.listview.init(),this.tabviews.forEach(t=>t.remove&&t.remove()),this.geometries.forEach(e=>t.map.removeLayer(e)),this.geometryCollection.forEach(e=>t.map.removeLayer(e)),this.Layer&&t.map.removeLayer(this.Layer),this.Marker&&t.map.removeLayer(this.Marker),"function"==typeof this.removeCallback&&this.removeCallback(),this.record.location=null},ks=t=>function(){if(!t.map)return;const e=new t.mapview.lib.source.Vector;this.Layer&&e.addFeatures(this.Layer.getSource().getFeatures()),this.Marker&&e.addFeatures(this.Marker.getSource().getFeatures()),this.geometries.forEach(t=>{t.length?t.forEach(t=>e.addFeatures(t.getSource().getFeatures())):e.addFeatures(t.getSource().getFeatures())}),t.mapview.flyToBounds(e.getExtent())},Ts=t=>function(e){const i=this,n={};if(i.infoj.filter(t=>void 0!==t.newValue).forEach(t=>{"integer"===t.type&&(t.newValue=isNaN(parseInt(t.newValue))?null:t.newValue),"numeric"===t.type&&(t.newValue=isNaN(parseFloat(t.newValue))?null:t.newValue),Object.assign(n,{[t.field]:t.newValue})}),!Object.keys(n).length)return;i.view&&i.view.classList.add("disabled");const o=new XMLHttpRequest;o.open("POST",t.host+"/api/location/update?"+t.utils.paramString({locale:t.workspace.locale.key,layer:i.layer.key,table:i.table,id:i.id})),o.setRequestHeader("Content-Type","application/json"),o.responseType="json",o.onload=n=>{if(200!==n.target.status)return console.error(n.target.response);const o=[];if(i.infoj.filter(t=>void 0!==t.newValue).forEach(t=>{t.dependents&&t.dependents.forEach(t=>{if(i.infoj.some(e=>e.field===t))return o.push(t);i.infoj.filter(t=>"dataview"===t.type).forEach(e=>{if(e.query===t&&e.update)return e.update();e.dataviews&&e.dataviews.filter(e=>e.query===t).forEach(t=>t.update&&t.update())})}),t.value=t.newValue,delete t.newValue}),o.length>0){const n=new XMLHttpRequest;return n.open("GET",t.host+"/api/location/get?"+t.utils.paramString({locale:t.workspace.locale.key,layer:i.layer.key,table:i.table,id:i.id,fields:o.join()})),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=n=>{i.infoj.filter(t=>void 0!==n.target.response[t.field]).forEach(t=>{t.value=n.target.response[t.field]}),i.view&&t.locations.view.create(i),i.layer.reload(),e&&e()},void n.send()}i.view&&t.locations.view.create(i),i.layer.reload(),e&&e()},o.send(JSON.stringify(n))},Ss=t=>function(){const e=this,i=new XMLHttpRequest;i.open("GET",t.host+"/api/location/delete?"+t.utils.paramString({locale:t.workspace.locale.key,layer:e.layer.key,table:e.table,id:e.id})),i.onload=t=>{200===t.target.status&&(e.layer.reload(),e.remove())},confirm("Are you sure you want to delete this feature? This cannot be undone.")&&i.send()},Ms=t=>e=>new Promise((i,n)=>{const o=new XMLHttpRequest,r=e.viewport&&t.mapview&&t.mapview.getBounds(),a=e.center&&t.mapview&&t.mapview.lib.proj.transform(t.map.getView().getCenter(),"EPSG:"+t.mapview.srid,"EPSG:4326");o.open("GET",t.host+"/api/query?"+t.utils.paramString(Object.assign({locale:t.workspace.locale.key,layer:e.layer&&e.layer.key,dbs:e.dbs,id:e.id,template:encodeURIComponent(e.query),lat:a&&a[1],lng:a&&a[0],filter:e.layer&&e.layer.filter&&JSON.stringify(e.layer.filter.current),viewport:r&&[r.west,r.south,r.east,r.north,t.mapview.srid]},e.queryparams||{}))),o.setRequestHeader("Content-Type","application/json"),o.responseType="json",o.onload=t=>{if(t.target.status>=300)return n({err:t.target.status});i(t.target.response)},o.send()}),Rs=t=>{const e={init:function(i){if(!i.target)return;e.node=i.target;const n=t.utils.wire()`<div class="tab-bar">`;let o;e.bar=t.utils.wire()`<div>`,n.appendChild(e.bar),e.node.appendChild(n),e.panel=t.utils.wire()`<div class="tab-panel">`,e.node.appendChild(e.panel),e._dataviews=new Set,e.add=i=>{if(i.showTab)return e.bar.appendChild(i.tab),e.panel.appendChild(i.target),e._dataviews.add(i),i.showTab();i.showTab=()=>{e._dataviews.forEach(t=>{t.target.style.display="none",t.tab.classList.remove("active"),t.target.classList.remove("active")}),i.tab.classList.add("active"),i.target.style.display="grid",i.target.classList.add("active"),e.node.style.display="block",i.update&&i.update(),i.dataviews&&i.dataviews.forEach(t=>t.update()),t.mapview.attribution.container&&(t.mapview.attribution.container.style.bottom="65px")},i.tab=t.utils.wire()`
      <div
        style="${i.tab_style||""}"
        class="active"
        onclick=${()=>{clearTimeout(o),o=setTimeout(()=>i.showTab(),500)}}>${i.title||i.key||"Tab"}`,e.bar.appendChild(i.tab),i.target=t.utils.wire()`
        <div
          class="${i.class||""}"
          style="${i.style||""}">`,e.panel.appendChild(i.target),t.dataviews.create(i),e._dataviews.add(i),i.remove=()=>{if(i.target.remove(),i.layer&&i.layer._dataviews.delete(i),i.tab.remove(),e._dataviews.delete(i),e._dataviews.size)return Array.from(e._dataviews)[0].showTab();e.node.style.display="none",t.mapview.attribution.container&&(t.mapview.attribution.container.style.bottom="0")},i.tab.click()}}};return e},Ps=t=>{return{create:e,query:Ms(t),tabview:Rs(t)};function e(i){if(i.target=i.target instanceof HTMLElement&&i.target||t.utils.wire()`<div class="${i.class||""}" style="${i.style||""}">`,i.dataviews)return function(i){return i.dataviews.forEach(n=>{n.active=i.active,n.tab=i.tab,n.layer=i.layer,n.id=i.id,n.target=t.utils.wire()`
        <div class="${n.class||""}" style="${n.style||""}">`,i.target.appendChild(n.target),e(n)}),i}(i);i.layer&&i.layer._dataviews.add(i),i.remove=()=>{i.target.remove(),i.layer&&i.layer._dataviews.delete(i)};const n=t.utils.wire()`<div class="toolbar">`;i.target.appendChild(n);const o=t.utils.wire()`<div>`;if(i.target.appendChild(o),i.update=()=>{(i.active||i.tab&&i.tab.classList.contains("active"))&&(i.promise=t.dataviews.query(i),i.promise.then(t=>i.setData(t)))},i.chart){i.chart.div=t.utils.wire()`<div style="position: relative;">`;const e=t.utils.wire()`<canvas>`;i.chart.height&&e.setAttribute("height",i.chart.height),i.chart.width&&e.setAttribute("width",i.chart.width),i.chart.div.appendChild(e),t.utils.Chart.defaults.global.plugins.datalabels.display=!1,i.chart.ChartJS=new t.utils.Chart(e,{type:i.chart.type||"bar",plugins:i.chart.plugins||[],options:i.chart.options||{legend:{display:!1}}}),i.chart.options&&Object.assign(i.chart.ChartJS.options,i.chart.options),i.chart.setData=t=>{i.chart.ChartJS.data={labels:"function"==typeof i.chart.labels&&i.chart.labels(t)||i.chart.labels,datasets:i.chart.datasets.map(e=>Object.assign(e,{data:e.fields&&e.fields.map(e=>t[e])||e.field&&t[e.field]||t}))}},o.appendChild(i.chart.div),i.setData=t=>{t&&(i.chart.setData(t),i.chart.ChartJS.update())}}return i.columns&&(!function e(i){i.forEach(i=>{i.customFormatter&&(i.formatter=t.utils.TabulatorFormatter[i.customFormatter]),i.columns&&e(i.columns)})}(i.columns),i.Tabulator=new t.utils.Tabulator(o,Object.assign({invalidOptionWarnings:!1,tooltipsHeader:!0,columnHeaderVertAlign:"center",layout:i.layout||"fitDataFill",height:"auto",rowFormatter:t=>{if(t.getData().backgroundcolour){t.getElement().style.backgroundColor=t.getData().backgroundcolour}},selectable:!1,rowClick:(e,n)=>{const o=n.getData();i.layer&&o.id&&(t.locations.select({locale:t.workspace.locale.key,layer:o.layer&&t.layers.list[o.layer]||i.layer,table:o.table||i.table,id:o.id}),n.deselect())}},i)),i.setData=t=>{t&&i.Tabulator.setData(t.length&&t||[t])}),!i.tab&&i.update(),i.toolbar&&i.toolbar.viewport&&n.appendChild(t.utils.wire()`
    <button
      class="off-white-hover primary-colour"
      onclick=${t=>{t.target.classList.toggle("primary-colour"),i.viewport=!i.viewport,i.update()}}>Viewport`),i.toolbar&&i.toolbar.download_csv&&n.appendChild(t.utils.wire()`
    <button
      class="off-white-hover primary-colour"
      onclick=${()=>{i.Tabulator.download("csv",(i.title||"table")+".csv")}}>CSV`),i.toolbar&&i.toolbar.download_json&&n.appendChild(t.utils.wire()`
    <button
      class="off-white-hover primary-colour"
      onclick=${()=>{i.Tabulator.download("json",(i.title||"table")+".json")}}>JSON`),i}};async function Ls(i){const n=Object.assign({version:"3.2.0",defaults:{colours:[{hex:"#c62828",name:"Fire Engine Red"},{hex:"#f50057",name:"Folly"},{hex:"#9c27b0",name:"Dark Orchid"},{hex:"#673ab7",name:"Plump Purple"},{hex:"#3f51b5",name:"Violet Blue"},{hex:"#2196f3",name:"Dodger Blue"},{hex:"#03a9f4",name:"Vivid Cerulean"},{hex:"#00bcd4",name:"Turquoise Surf"},{hex:"#009688",name:"Dark Cyan"},{hex:"#4caf50",name:"Middle Green"},{hex:"#8bc34a",name:"Dollar Bill"},{hex:"#cddc39",name:"Pear"},{hex:"#ffeb3b",name:"Banana Yellow"},{hex:"#ffb300",name:"UCLA Gold"},{hex:"#fb8c00",name:"Dark Orange"},{hex:"#f4511e",name:"Orioles Orange"},{hex:"#8d6e63",name:"Dark Chestnut"},{hex:"#777777",name:"Sonic Silver"},{hex:"#bdbdbd",name:"X11 Gray"},{hex:"#aaaaaa",name:"Dark Medium Gray"},{hex:"#78909c",name:"Light Slate Gray"}]},utils:t},i);return n.workspace=$t(n),n.hooks=(t=>{if(!t.hooks)return null;const e={layers:[],locations:[]};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(t,i,n)=>{e[i]?e[i]=decodeURI(n).split(","):e[i]=decodeURI(n)}),{current:e,set:function(e){Object.assign(t.hooks.current,e),n()},remove:i,removeAll:function(){Object.keys(t.hooks.current).forEach(t=>i(t)),n()},push:function(e,i){t.hooks.current[e]?t.hooks.current[e].indexOf(i)<0&&t.hooks.current[e].push(i):t.hooks.current[e]=[i];n()},filter:function(e,i){t.hooks.current[e]=t.hooks.current[e].filter(t=>t!==i),n()}};function i(e){Array.isArray(t.hooks.current[e])?t.hooks.current[e].length=0:delete t.hooks.current[e],n()}function n(){try{history.pushState({hooks:!0},"hooks","?"+t.utils.paramString(t.hooks.current))}catch(t){console.log(t)}}})(n),n.mapview={lib:{Map:Zr,View:Gr.ZP,Feature:Ye.Z,Overlay:Hr.Z,control:{defaults:Nr,Zoom:Ar,ScaleLine:Jr},interaction:{defaults:Uo,PinchZoom:qo,PinchRotate:Wo,DragPan:po,Draw:dr,Modify:kr},draw:{createBox:hr,createRegularPolygon:ur},events:{click:so.V4},proj:{transform:ie.vs,transformExtent:ie.$A,fromLonLat:ie.mi},geom:e,format:{MVT:We,GeoJSON:ri},source:{OSM:an,VectorTile:fn,Vector:mn.Z},loadingstrategy:{bbox:vn.VW},layer:{Tile:Rn,VectorTile:Yn,Vector:qn.Z},style:{Style:Un.ZP,Fill:Xn.Z,Stroke:$n.Z,Circle:Kn.Z,Icon:Jn.Z,Text:Qn.Z}}},Object.assign(n.mapview,(t=>({create:Qr(t),changeEndEvent:new CustomEvent("changeEnd"),attribution:ta(t),locate:ea(t),interaction:la(t),popup:na(t),infotip:ha(t),geoJSON:ia(t),icon:ua(t),layer:xa(t),getBounds:ca(t),flyToBounds:(e,i={})=>{t.map.getView().fit(e,Object.assign({padding:[50,50,50,50],duration:1e3},i))},getZoom:()=>t.map.getView().getZoom()}))(n)),n.layers=(t=>({decorate:function(e){const i=Object.assign({tableCurrent:Ka(t),tableMin:Ja(),tableMax:Qa(),zoomToExtent:ts(t),show:es(t),remove:is(t),count:ns(t),bringToFront:os(t),_dataviews:new Set},e);i.filter=Object.assign(i.filter||{},{current:{}}),i.style&&i.style.themes&&(i.style.theme=i.style.themes[Object.keys(i.style.themes)[0]]);return t.mapview.layer[e.format](i),i},list:{},view:Xa(t),listview:$a(t)}))(n),n.locations=(t=>({select:rs(t),selectCallback:as(t),list:[{style:{strokeColor:"#9c27b0"},colorFilter:"invert(22%) sepia(80%) saturate(1933%) hue-rotate(272deg) brightness(97%) contrast(104%)"}],view:_s(t),listview:xs(t),custom:{},decorate:function(e,i={}){Object.assign(e,{remove:Es(t),trash:Ss(t),flyTo:ks(t),update:Ts(t),draw:Cs(t),geometries:[],tables:[],tabviews:[],geometryCollection:[],style:Object.assign({strokeColor:"#1F964D"},e.style||{})},i)}}))(n),n.gazetteer=(t=>{const e={init:function(i){if(!i)return;Object.assign(e,i),e.result=e.group.querySelector("ul"),e.input=e.group.querySelector("input"),e.input.placeholder=t.workspace.locale.gazetteer.placeholder||"",e.input.addEventListener("keyup",t=>{!new Set([37,38,39,40,13]).has(t.keyCode||t.charCode)&&t.target.value.length>0&&e.search(t.target.value)}),e.input.addEventListener("keydown",i=>{const n=i.keyCode||i.charCode;if(46===n||8===n)return e.xhr&&e.xhr.abort(),e.clear(),void(e.layer&&t.map.removeLayer(e.layer));if(13===n){let t=i.target.value.split(",").map(parseFloat);t[1]>-90&&t[1]<90&&t[0]>-180&&t[0]<180&&(e.xhr&&e.xhr.abort(),e.clear(),e.createFeature({type:"Point",coordinates:[t[1],t[0]]})),e.result.querySelector("li").click()}}),e.input.addEventListener("focusout",()=>{e.xhr&&e.xhr.abort(),setTimeout(e.clear,400)}),e.clear=()=>{e.group.classList.remove("active"),e.result.innerHTML=""}},search:function(i,n={}){e.clear&&e.clear(),e.xhr&&e.xhr.abort(),e.xhr=new XMLHttpRequest,e.xhr.open("GET",t.host+"/api/gazetteer?"+t.utils.paramString({locale:t.workspace.locale.key,q:encodeURIComponent(i),source:n.source})),e.xhr.setRequestHeader("Content-Type","application/json"),e.xhr.responseType="json",e.xhr.onload=i=>{if(200===i.target.status)return n.callback?n.callback(i.target.response):0===i.target.response.length?(e.result.appendChild(t.utils.wire()`
        <li>No results for this search.`),e.group.classList.add("active")):void Object.values(i.target.response.slice(0,t.workspace.locale.gazetteer.limit||10)).forEach(i=>{e.result.appendChild(t.utils.wire()`
        <li style="cursor:pointer;" onclick=${t=>{if(t.preventDefault(),!i.source||!i.id)return e.callback?e.callback(i):void(i.marker&&e.createFeature({type:"Point",coordinates:i.marker.split(",")}));e.select({label:i.label,id:i.id,source:i.source,layer:i.layer,table:i.table,marker:i.marker,callback:n.callback})}}>
        ${t.workspace.locale.gazetteer.label?t.utils.wire()`
          <span class="secondary-colour-bg" 
          style="font-size: smaller; padding: 0 2px 0 2px; cursor: help; border-radius: 2px;"
          >${i.layer||i.source}</span>`:""}
          <span>${i.label}</span>
        `),e.group.classList.add("active")})},e.xhr.send()},sources:{glx:function(i){if(e.callback)return e.callback(i);t.locations.select({locale:t.workspace.locale.key,layer:t.layers.list[i.layer],table:i.table,id:i.id,_flyTo:!0}),i.callback&&i.callback()},mapbox:function(t){e.createFeature({type:"Point",coordinates:t.marker}),t.callback&&t.callback()},google:function(i){const n=new XMLHttpRequest;n.open("GET",`${t.host}/api/provider/google?url=maps.googleapis.com/maps/api/place/details/json?placeid=${i.id}`),n.setRequestHeader("Content-Type","application/json"),n.responseType="json",n.onload=t=>{if(200!==t.target.status||!t.target.response.result)return;let n={type:"Point",coordinates:[t.target.response.result.geometry.location.lng,t.target.response.result.geometry.location.lat]};if(e.createFeature(n),e.callback)return e.callback(n);i.callback&&i.callback(n)},n.send()},opencage:function(t){e.createFeature({type:"Point",coordinates:t.marker}),t.callback&&t.callback()}},select:function(t){e.clear&&e.clear(),e.input&&(e.input.value=t.label);e.sources[t.source](t)},createFeature:function(i){i="string"==typeof i?JSON.parse(i):i,e.layer&&t.map.removeLayer(e.layer);e.layer=t.mapview.geoJSON({geometry:i,dataProjection:"4326",style:new t.mapview.lib.style.Style({image:t.mapview.icon(e.icon)})}),t.mapview.flyToBounds(e.layer.getSource().getExtent())},icon:{type:"markerColor",colorMarker:"#64dd17",colorDot:"#33691e",anchor:[.5,1],scale:.05}};return e})(n),n.dataviews=Ps(n),i.callback?n.workspace.getLocales(i.callback):(await n.workspace.fetchLocales(),n)}window._xyz=Ls})()})();
//# sourceMappingURL=xyz_openlayers.js.map